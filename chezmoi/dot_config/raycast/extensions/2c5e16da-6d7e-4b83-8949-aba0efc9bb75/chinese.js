"use strict";var ia=Object.create;var it=Object.defineProperty;var oa=Object.getOwnPropertyDescriptor;var aa=Object.getOwnPropertyNames;var ca=Object.getPrototypeOf,ha=Object.prototype.hasOwnProperty;var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ua=(t,e)=>{for(var r in e)it(t,r,{get:e[r],enumerable:!0})},rs=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of aa(e))!ha.call(t,n)&&n!==r&&it(t,n,{get:()=>e[n],enumerable:!(s=oa(e,n))||s.enumerable});return t};var M=(t,e,r)=>(r=t!=null?ia(ca(t)):{},rs(e||!t||!t.__esModule?it(r,"default",{value:t,enumerable:!0}):r,t)),fa=t=>rs(it({},"__esModule",{value:!0}),t);var Gn=I((Kd,zn)=>{"use strict";var Rh=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Oh=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ah=new Set([500,502,503,504]),Sh={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},xh={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Y(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Ih(t){return t?Ah.has(t.status):!0}function nr(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let s of r){let[n,i]=s.split(/=/,2);e[n.trim()]=i===void 0?!0:i.trim().replace(/^"|"$/g,"")}return e}function Nh(t){let e=[];for(let r in t){let s=t[r];e.push(s===!0?r:r+"="+s)}if(e.length)return e.join(", ")}zn.exports=class{constructor(e,r,{shared:s,cacheHeuristic:n,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=s!==!1,this._ignoreCargoCult=!!o,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=i!==void 0?i:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=nr(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=nr(e.headers["cache-control"]),this._ignoreCargoCult&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Nh(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Oh.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Rh.has(this._status)))}_hasExplicitExpiration(){return!!(this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires)}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){return!this.evaluateRequest(e).revalidation}_evaluateRequestHitResult(e){return{response:{headers:this.responseHeaders()},revalidation:e}}_evaluateRequestRevalidation(e,r){return{synchronous:r,headers:this.revalidationHeaders(e)}}_evaluateRequestMissResult(e){return{response:void 0,revalidation:this._evaluateRequestRevalidation(e,!0)}}evaluateRequest(e){if(this._assertRequestHasHeaders(e),this._rescc["must-revalidate"])return this._evaluateRequestMissResult(e);if(!this._requestMatches(e,!1))return this._evaluateRequestMissResult(e);let r=nr(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)?this._evaluateRequestMissResult(e):r["max-age"]&&this.age()>Y(r["max-age"])?this._evaluateRequestMissResult(e):r["min-fresh"]&&this.maxAge()-this.age()<Y(r["min-fresh"])?this._evaluateRequestMissResult(e):this.stale()?"max-stale"in r&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge())?this._evaluateRequestHitResult(void 0):this.useStaleWhileRevalidate()?this._evaluateRequestHitResult(this._evaluateRequestRevalidation(e,!1)):this._evaluateRequestMissResult(e):this._evaluateRequestHitResult(void 0)}_requestMatches(e,r){return!!((!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e))}_allowsStoringAuthenticated(){return!!(this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"])}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let s of r)if(e.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let s in e)Sh[s]||(r[s]=e[s]);if(e.connection){let s=e.connection.trim().split(/\s*,\s*/);for(let n of s)delete r[n]}if(r.warning){let s=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));s.length?r.warning=s.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Y(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Y(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Y(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<r?0:Math.max(e,(s-r)/1e3)}if(this._resHeaders["last-modified"]){let s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&r>s)return Math.max(e,(r-s)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Y(this._rescc["stale-if-error"]),s=e+Y(this._rescc["stale-while-revalidate"]);return Math.round(Math.max(0,e,r,s)*1e3)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Y(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){let e=Y(this._rescc["stale-while-revalidate"]);return e>0&&this.maxAge()+e>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._ignoreCargoCult=!!e.icc,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,icc:this._ignoreCargoCult,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(i=>!/^\s*W\//.test(i));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Ih(r))return{policy:this,modified:!1,matches:!0};if(!r||!r.headers)throw Error("Response headers missing");let s=!1;r.status!==void 0&&r.status!=304?s=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(s=!0);let n={shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl,ignoreCargoCult:this._ignoreCargoCult};if(!s)return{policy:new this.constructor(e,r,n),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!xh[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,n),modified:!1,matches:!0}}}});var Ar=I((Fl,wi)=>{"use strict";var Or=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[s,n]of this.oldCache.entries())this.onEviction(s,n);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};wi.exports=Or});var Sr=I((vl,bi)=>{"use strict";bi.exports=t=>{if(t.listenerCount("error")!==0)return t;t.__destroy=t._destroy,t._destroy=(...r)=>{let s=r.pop();t.__destroy(...r,async n=>{await Promise.resolve(),s(n)})};let e=r=>{Promise.resolve().then(()=>{t.emit("error",r)})};return t.once("error",e),Promise.resolve().then(()=>{t.off("error",e)}),t}});var se=I((jl,Ii)=>{"use strict";var{URL:Ri}=require("url"),hu=require("events"),uu=require("tls"),fu=require("http2"),du=Ar(),lu=Sr(),H=Symbol("currentStreamCount"),Oi=Symbol("request"),q=Symbol("cachedOriginSet"),Z=Symbol("gracefullyClosing"),At=Symbol("length"),Ai=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],pu=(t,e,r)=>{let s=0,n=t.length;for(;s<n;){let i=s+n>>>1;r(t[i],e)?s=i+1:n=i}return s},mu=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,xr=(t,e)=>{for(let r=0;r<t.length;r++){let s=t[r];s[q].length>0&&s[q].length<e[q].length&&s[q].every(n=>e[q].includes(n))&&s[H]+e[H]<=e.remoteSettings.maxConcurrentStreams&&xi(s)}},Si=(t,e)=>{for(let r=0;r<t.length;r++){let s=t[r];if(e[q].length>0&&e[q].length<s[q].length&&e[q].every(n=>s[q].includes(n))&&e[H]+s[H]<=s.remoteSettings.maxConcurrentStreams)return xi(e),!0}return!1},xi=t=>{t[Z]=!0,t[H]===0&&t.close()},ge=class t extends hu{constructor({timeout:e=0,maxSessions:r=Number.POSITIVE_INFINITY,maxEmptySessions:s=10,maxCachedTlsSessions:n=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxEmptySessions=s,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new du({maxSize:n})}get protocol(){return"https:"}normalizeOptions(e){let r="";for(let s=0;s<Ai.length;s++){let n=Ai[s];r+=":",e&&e[n]!==void 0&&(r+=e[n])}return r}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let r in this.queue[e]){let s=this.queue[e][r];s.completed||(s.completed=!0,s())}}_isBetterSession(e,r){return e>r}_accept(e,r,s,n){let i=0;for(;i<r.length&&e[H]<e.remoteSettings.maxConcurrentStreams;)r[i].resolve(e),i++;r.splice(0,i),r.length>0&&(this.getSession(s,n,r),r.length=0)}getSession(e,r,s){return new Promise((n,i)=>{Array.isArray(s)&&s.length>0?(s=[...s],n()):s=[{resolve:n,reject:i}];try{if(typeof e=="string")e=new Ri(e);else if(!(e instanceof Ri))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(r){let{servername:d}=r,{hostname:l}=e;if(d&&l!==d)throw new Error(`Origin ${l} differs from servername ${d}`)}}catch(d){for(let l=0;l<s.length;l++)s[l].reject(d);return}let o=this.normalizeOptions(r),a=e.origin;if(o in this.sessions){let d=this.sessions[o],l=-1,_=-1,p;for(let T=0;T<d.length;T++){let E=d[T],w=E.remoteSettings.maxConcurrentStreams;if(w<l)break;if(!E[q].includes(a))continue;let m=E[H];m>=w||E[Z]||E.destroyed||(p||(l=w),this._isBetterSession(m,_)&&(p=E,_=m))}if(p){this._accept(p,s,a,r);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...s);return}}else this.queue[o]={[At]:0};let h=()=>{o in this.queue&&this.queue[o][a]===f&&(delete this.queue[o][a],--this.queue[o][At]===0&&delete this.queue[o])},f=async()=>{this._sessionCount++;let d=`${a}:${o}`,l=!1,_;try{let p={...r};p.settings===void 0&&(p.settings=this.settings),p.session===void 0&&(p.session=this.tlsSessionCache.get(d)),_=await(p.createConnection||this.createConnection).call(this,e,p),p.createConnection=()=>_;let E=fu.connect(e,p);E[H]=0,E[Z]=!1;let w=()=>{let{socket:g}=E,R;return g.servername===!1?(g.servername=g.remoteAddress,R=E.originSet,g.servername=!1):R=E.originSet,R},m=()=>E[H]<E.remoteSettings.maxConcurrentStreams;E.socket.once("session",g=>{this.tlsSessionCache.set(d,g)}),E.once("error",g=>{for(let R=0;R<s.length;R++)s[R].reject(g);this.tlsSessionCache.delete(d)}),E.setTimeout(this.timeout,()=>{E.destroy()}),E.once("close",()=>{if(this._sessionCount--,l){this._emptySessionCount--;let g=this.sessions[o];g.length===1?delete this.sessions[o]:g.splice(g.indexOf(E),1)}else{h();let g=new Error("Session closed without receiving a SETTINGS frame");g.code="HTTP2WRAPPER_NOSETTINGS";for(let R=0;R<s.length;R++)s[R].reject(g)}this._processQueue()});let N=()=>{let g=this.queue[o];if(!g)return;let R=E[q];for(let P=0;P<R.length;P++){let L=R[P];if(L in g){let{listeners:j,completed:v}=g[L],oe=0;for(;oe<j.length&&m();)j[oe].resolve(E),oe++;if(g[L].listeners.splice(0,oe),g[L].listeners.length===0&&!v&&(delete g[L],--g[At]===0)){delete this.queue[o];break}if(!m())break}}};E.on("origin",()=>{E[q]=w()||[],E[Z]=!1,Si(this.sessions[o],E),!(E[Z]||!m())&&(N(),m()&&xr(this.sessions[o],E))}),E.once("remoteSettings",()=>{if(f.destroyed){let g=new Error("Agent has been destroyed");for(let R=0;R<s.length;R++)s[R].reject(g);E.destroy();return}if(E.setLocalWindowSize&&E.setLocalWindowSize(1024*1024*4),E[q]=w()||[],E.socket.encrypted){let g=E[q][0];if(g!==a){let R=new Error(`Requested origin ${a} does not match server ${g}`);for(let P=0;P<s.length;P++)s[P].reject(R);E.destroy();return}}h();{let g=this.sessions;if(o in g){let R=g[o];R.splice(pu(R,E,mu),0,E)}else g[o]=[E]}l=!0,this._emptySessionCount++,this.emit("session",E),this._accept(E,s,a,r),E[H]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),E.on("remoteSettings",()=>{m()&&(N(),m()&&xr(this.sessions[o],E))})}),E[Oi]=E.request,E.request=(g,R)=>{if(E[Z])throw new Error("The session is gracefully closing. No new streams are allowed.");let P=E[Oi](g,R);return E.ref(),E[H]++===0&&this._emptySessionCount--,P.once("close",()=>{if(--E[H]===0&&(this._emptySessionCount++,E.unref(),this._emptySessionCount>this.maxEmptySessions||E[Z])){E.close();return}E.destroyed||E.closed||m()&&!Si(this.sessions[o],E)&&(xr(this.sessions[o],E),N(),E[H]===0&&this._processQueue())}),P}}catch(p){h(),this._sessionCount--;for(let T=0;T<s.length;T++)s[T].reject(p)}};f.listeners=s,f.completed=!1,f.destroyed=!1,this.queue[o][a]=f,this.queue[o][At]++,this._processQueue()})}request(e,r,s,n){return new Promise((i,o)=>{this.getSession(e,r,[{reject:o,resolve:a=>{try{let h=a.request(s,n);lu(h),i(h)}catch(h){o(h)}}}])})}async createConnection(e,r){return t.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let s=e.port||443,n=e.hostname;typeof r.servername>"u"&&(r.servername=n);let i=uu.connect(s,n,r);return r.socket&&(i._peername={family:void 0,address:void 0,port:s}),i}closeEmptySessions(e=Number.POSITIVE_INFINITY){let r=0,{sessions:s}=this;for(let n in s){let i=s[n];for(let o=0;o<i.length;o++){let a=i[o];if(a[H]===0&&(r++,a.close(),r>=e))return r}}return r}destroy(e){let{sessions:r,queue:s}=this;for(let n in r){let i=r[n];for(let o=0;o<i.length;o++)i[o].destroy(e)}for(let n in s){let i=s[n];for(let o in i)i[o].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};ge.kCurrentStreamCount=H;ge.kGracefullyClosing=Z;Ii.exports={Agent:ge,globalAgent:new ge}});var Nr=I((Bl,Ni)=>{"use strict";var{Readable:yu}=require("stream"),Ir=class extends yu{constructor(e,r){super({emitClose:!1,autoDestroy:!0,highWaterMark:r}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,r){this.readableEnded||(this.aborted=!0),r(),this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};Ni.exports=Ir});var Ci=I((zl,Pi)=>{"use strict";Pi.exports=(t,e,r)=>{for(let s of r)t.on(s,(...n)=>e.emit(s,...n))}});var Qe=I(($l,Li)=>{"use strict";var ne=(t,e,r)=>{Li.exports[e]=class extends t{constructor(...n){super(typeof r=="string"?r:r(n)),this.name=`${super.name} [${e}]`,this.code=e}}};ne(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${s?"one of":"of"} type ${r}. Received ${typeof t[2]}`});ne(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);ne(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);ne(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);ne(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);ne(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`);ne(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")});var Ui=I((Wl,Di)=>{"use strict";Di.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Pr=I((Vl,ki)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:Eu}=Qe(),_u=Ui(),gu=/^[\^`\-\w!#$%&*+.|~]+$/;ki.exports=t=>{if(typeof t!="string"||!gu.test(t)&&!_u(t))throw new Eu("Header name",t)}});var Cr=I((Ql,Mi)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:Tu,ERR_INVALID_CHAR:wu}=Qe(),bu=/[^\t\u0020-\u007E\u0080-\u00FF]/;Mi.exports=(t,e)=>{if(typeof e>"u")throw new Tu(e,t);if(bu.test(e))throw new wu("header content",t)}});var Fi=I((Yl,qi)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:Hi}=Qe(),Ru={has(t,e){let r=t.session===void 0?t:t.session.socket;return e in t||e in r},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return t.destroyed?!1:t.readable;case"setTimeout":{let{session:r}=t;return r!==void 0?r.setTimeout.bind(r):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new Hi;default:{let r=t.session===void 0?t:t.session.socket,s=r[e];return typeof s=="function"?s.bind(r):s}}},getPrototypeOf(t){return t.session!==void 0?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t)},set(t,e,r){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=r,!0;case"setTimeout":{let{session:s}=t;return s===void 0?t.setTimeout=r:s.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new Hi;default:{let s=t.session===void 0?t:t.session.socket;return s[e]=r,!0}}}};qi.exports=Ru});var kr=I((Kl,$i)=>{"use strict";var{URL:Lr,urlToHttpOptions:vi}=require("url"),Ou=require("http2"),{Writable:Au}=require("stream"),{Agent:Su,globalAgent:xu}=se(),Iu=Nr(),Nu=Ci(),{ERR_INVALID_ARG_TYPE:St,ERR_INVALID_PROTOCOL:Pu,ERR_HTTP_HEADERS_SENT:ji}=Qe(),Cu=Pr(),Lu=Cr(),Du=Fi(),{HTTP2_HEADER_STATUS:Bi,HTTP2_HEADER_METHOD:zi,HTTP2_HEADER_PATH:Gi,HTTP2_HEADER_AUTHORITY:Ye,HTTP2_METHOD_CONNECT:Uu}=Ou.constants,U=Symbol("headers"),Te=Symbol("origin"),Ke=Symbol("session"),Dr=Symbol("options"),xt=Symbol("flushedHeaders"),we=Symbol("jobs"),Je=Symbol("pendingAgentPromise"),Ur=class extends Au{constructor(e,r,s){if(super({autoDestroy:!1,emitClose:!1}),typeof e=="string"?e=vi(new Lr(e)):e instanceof Lr?e=vi(e):e={...e},typeof r=="function"||r===void 0?(s=r,r=e):r=Object.assign(e,r),r.h2session){if(this[Ke]=r.h2session,this[Ke].destroyed)throw new Error("The session has been closed already");this.protocol=this[Ke].socket.encrypted?"https:":"http:"}else if(r.agent===!1)this.agent=new Su({maxEmptySessions:0});else if(typeof r.agent>"u"||r.agent===null)this.agent=xu;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new St("options.agent",["http2wrapper.Agent-like Object","undefined","false"],r.agent);if(this.agent&&(this.protocol=this.agent.protocol),r.protocol&&r.protocol!==this.protocol)throw new Pu(r.protocol,this.protocol);r.port||(r.port=r.defaultPort||this.agent&&this.agent.defaultPort||443),r.host=r.hostname||r.host||"localhost",delete r.hostname;let{timeout:n}=r;r.timeout=void 0,this[U]=Object.create(null),this[we]=[],this[Je]=void 0,this.socket=null,this.connection=null,this.method=r.method||"GET",this.method==="CONNECT"&&(r.path==="/"||r.path===void 0)||(this.path=r.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:i}=r;if(i)for(let a in i)this.setHeader(a,i[a]);r.auth&&!("authorization"in this[U])&&(this[U].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Dr]=r,this[Te]=new Lr(`${this.protocol}//${r.servername||r.host}:${r.port}`);let o=r._reuseSocket;o&&(r.createConnection=(...a)=>o.destroyed?this.agent.createConnection(...a):o,this.agent.getSession(this[Te],this[Dr]).catch(()=>{})),n&&this.setTimeout(n),s&&this.once("response",s),this[xt]=!1}get method(){return this[U][zi]}set method(e){e&&(this[U][zi]=e.toUpperCase())}get path(){let e=this.method==="CONNECT"?Ye:Gi;return this[U][e]}set path(e){if(e){let r=this.method==="CONNECT"?Ye:Gi;this[U][r]=e}}get host(){return this[Te].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(e,r,s);this._request?n():this[we].push(n)}_final(e){this.flushHeaders();let r=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};this._request?r():this[we].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,r){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[Je]}catch(s){this.aborted&&(e=s)}r(e)}async flushHeaders(){if(this[xt]||this.destroyed)return;this[xt]=!0;let e=this.method===Uu,r=s=>{if(this._request=s,this.destroyed){s.destroy();return}e||Nu(s,this,["timeout","continue"]),s.once("error",i=>{this.destroy(i)}),s.once("aborted",()=>{let{res:i}=this;i?(i.aborted=!0,i.emit("aborted"),i.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let n=(i,o,a)=>{let h=new Iu(this.socket,s.readableHighWaterMark);this.res=h,h.url=`${this[Te].origin}${this.path}`,h.req=this,h.statusCode=i[Bi],h.headers=i,h.rawHeaders=a,h.once("end",()=>{h.complete=!0,h.socket=null,h.connection=null}),e?(h.upgrade=!0,this.emit("connect",h,s,Buffer.alloc(0))?this.emit("close"):s.destroy()):(s.on("data",f=>{!h._dumped&&!h.push(f)&&s.pause()}),s.once("end",()=>{this.aborted||h.push(null)}),this.emit("response",h)||h._dump())};s.once("response",n),s.once("headers",i=>this.emit("information",{statusCode:i[Bi]})),s.once("trailers",(i,o,a)=>{let{res:h}=this;if(h===null){n(i,o,a);return}h.trailers=i,h.rawTrailers=a}),s.once("close",()=>{let{aborted:i,res:o}=this;if(o){i&&(o.aborted=!0,o.emit("aborted"),o.destroy());let a=()=>{o.emit("close"),this.destroy(),this.emit("close")};o.readable?o.once("end",a):a();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(s,Du);for(let i of this[we])i();this[we].length=0,this.emit("socket",this.socket)};if(!(Ye in this[U])&&!e&&(this[U][Ye]=this[Te].host),this[Ke])try{r(this[Ke].request(this[U]))}catch(s){this.destroy(s)}else{this.reusedSocket=!0;try{let s=this.agent.request(this[Te],this[Dr],this[U]);this[Je]=s,r(await s),this[Je]=!1}catch(s){this[Je]=!1,this.destroy(s)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[U])}hasHeader(e){if(typeof e!="string")throw new St("name","string",e);return!!this[U][e.toLowerCase()]}getHeader(e){if(typeof e!="string")throw new St("name","string",e);return this[U][e.toLowerCase()]}get headersSent(){return this[xt]}removeHeader(e){if(typeof e!="string")throw new St("name","string",e);if(this.headersSent)throw new ji("remove");delete this[U][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new ji("set");Cu(e),Lu(e,r);let s=e.toLowerCase();if(s==="connection"){if(r.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${r}`)}s==="host"&&this.method==="CONNECT"?this[U][Ye]=r:this[U][s]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let s=()=>this._request.setTimeout(e,r);return this._request?s():this[we].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};$i.exports=Ur});var Vi=I((Jl,Wi)=>{"use strict";var ku=require("tls");Wi.exports=(t={},e=ku.connect)=>new Promise((r,s)=>{let n=!1,i,o=async()=>{await h,i.off("timeout",a),i.off("error",s),t.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:n}),n&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:n}))},a=async()=>{n=!0,o()},h=(async()=>{try{i=await e(t,o),i.on("error",s),i.once("timeout",a)}catch(f){s(f)}})()})});var Yi=I((Xl,Qi)=>{"use strict";var{isIP:Mu}=require("net"),Hu=require("assert"),qu=t=>{if(t[0]==="["){let r=t.indexOf("]");return Hu(r!==-1),t.slice(1,r)}let e=t.indexOf(":");return e===-1?t:t.slice(0,e)};Qi.exports=t=>{let e=qu(t);return Mu(e)?"":e}});var so=I((Zl,Xe)=>{"use strict";var{URL:Ki,urlToHttpOptions:Ji}=require("url"),Xi=require("http"),Mr=require("https"),Fu=Vi(),vu=Ar(),{Agent:ju,globalAgent:Bu}=se(),zu=kr(),Gu=Yi(),Zi=Sr(),eo=new vu({maxSize:100}),$u=new Map,Wu=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let s=()=>{t.emit("free",e,r)};e.on("free",s);let n=()=>{t.removeSocket(e,r)};e.on("close",n);let i=()=>{let{freeSockets:a}=t;for(let h of Object.values(a))if(h.includes(e)){e.destroy();return}};e.on("timeout",i);let o=()=>{t.removeSocket(e,r),e.off("close",n),e.off("free",s),e.off("timeout",i),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},to=(t,e=new Map,r=void 0)=>async s=>{let n=`${s.host}:${s.port}:${s.ALPNProtocols.sort()}`;if(!t.has(n)){if(e.has(n))return{alpnProtocol:(await e.get(n)).alpnProtocol};let{path:i}=s;s.path=s.socketPath;let o=Fu(s,r);e.set(n,o);try{let a=await o;return t.set(n,a.alpnProtocol),e.delete(n),s.path=i,a}catch(a){throw e.delete(n),s.path=i,a}}return{alpnProtocol:t.get(n)}},ro=to(eo,$u);Xe.exports=async(t,e,r)=>{if(typeof t=="string"?t=Ji(new Ki(t)):t instanceof Ki?t=Ji(t):t={...t},typeof e=="function"||e===void 0?(r=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let s=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||Gu(e.headers&&e.headers.host||e.host),e.port=e.port||(s?443:80),e._defaultAgent=s?Mr.globalAgent:Xi.globalAgent;let n=e.resolveProtocol||ro,{agent:i}=e;if(i!==void 0&&i!==!1&&i.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(s){e.resolveSocket=!0;let{socket:o,alpnProtocol:a,timeout:h}=await n(e);if(h){o&&o.destroy();let d=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw d.code="ETIMEDOUT",d.ms=e.timeout,d}o&&e.createConnection&&(o.destroy(),o=void 0),delete e.resolveSocket;let f=a==="h2";if(i&&(i=f?i.http2:i.https,e.agent=i),i===void 0&&(i=f?Bu:Mr.globalAgent),o)if(i===!1)o.destroy();else{let d=(f?ju:Mr.Agent).prototype.createConnection;i.createConnection===d?f?e._reuseSocket=o:Wu(i,o,e):o.destroy()}if(f)return Zi(new zu(e,r))}else i&&(e.agent=i.http);return e.headers&&(e.headers={...e.headers},e.headers[":authority"]&&(e.headers.host||(e.headers.host=e.headers[":authority"]),delete e.headers[":authority"]),delete e.headers[":method"],delete e.headers[":scheme"],delete e.headers[":path"]),Zi(Xi.request(e,r))};Xe.exports.protocolCache=eo;Xe.exports.resolveProtocol=ro;Xe.exports.createResolveProtocol=to});var Hr=I((ep,no)=>{"use strict";var Vu=require("stream"),Qu=require("tls"),Yu=new Qu.TLSSocket(new Vu.PassThrough)._handle._parentWrap.constructor;no.exports=Yu});var Fr=I((tp,io)=>{"use strict";var qr=class extends Error{constructor(e,r=""){super(`The proxy server rejected the request with status code ${e} (${r||"empty status message"})`),this.statusCode=e,this.statusMessage=r}};io.exports=qr});var ao=I((rp,oo)=>{"use strict";var Ku=(t,e,r)=>{if(!r.some(n=>typeof n==="string"?typeof e===n:e instanceof n)){let n=r.map(i=>typeof i=="string"?i:i.name);throw new TypeError(`Expected '${t}' to be a type of ${n.join(" or ")}, got ${typeof e}`)}};oo.exports=Ku});var vr=I((sp,ho)=>{"use strict";var{URL:co}=require("url"),It=ao();ho.exports=(t,e)=>{It("proxyOptions",e,["object"]),It("proxyOptions.headers",e.headers,["object","undefined"]),It("proxyOptions.raw",e.raw,["boolean","undefined"]),It("proxyOptions.url",e.url,[co,"string"]);let r=new co(e.url);t.proxyOptions={raw:!0,...e,headers:{...e.headers},url:r}}});var Nt=I((np,uo)=>{"use strict";uo.exports=t=>{let{username:e,password:r}=t.proxyOptions.url;if(e||r){let s=`${e}:${r}`,n=`Basic ${Buffer.from(s).toString("base64")}`;return{"proxy-authorization":n,authorization:n}}return{}}});var yo=I((ip,mo)=>{"use strict";var Ju=require("tls"),Xu=require("http"),fo=require("https"),Zu=Hr(),{globalAgent:ef}=se(),tf=Fr(),lo=vr(),rf=Nt(),po=(t,e,r)=>{(async()=>{try{let{proxyOptions:s}=t,{url:n,headers:i,raw:o}=s,a=await ef.request(n,s,{...rf(t),...i,":method":"CONNECT",":authority":`${e.host}:${e.port}`});a.once("error",r),a.once("response",h=>{let f=h[":status"];if(f!==200){r(new tf(f,""));return}let d=t instanceof fo.Agent;if(o&&d){e.socket=a;let _=Ju.connect(e);_.once("close",()=>{a.destroy()}),r(null,_);return}let l=new Zu(a);l.encrypted=!1,l._handle.getpeername=_=>{_.family=void 0,_.address=void 0,_.port=void 0},r(null,l)})}catch(s){r(s)}})()},jr=class extends Xu.Agent{constructor(e){super(e),lo(this,e.proxyOptions)}createConnection(e,r){po(this,e,r)}},Br=class extends fo.Agent{constructor(e){super(e),lo(this,e.proxyOptions)}createConnection(e,r){po(this,e,r)}};mo.exports={HttpOverHttp2:jr,HttpsOverHttp2:Br}});var Gr=I((op,Eo)=>{"use strict";var{Agent:sf}=se(),nf=Hr(),of=Fr(),af=vr(),zr=class extends sf{constructor(e){super(e),af(this,e.proxyOptions)}async createConnection(e,r){let s=`${e.hostname}:${e.port||443}`,[n,i,o]=await this._getProxyStream(s);if(i!==200)throw new of(i,o);if(this.proxyOptions.raw)r.socket=n;else{let a=new nf(n);return a.encrypted=!1,a._handle.getpeername=h=>{h.family=void 0,h.address=void 0,h.port=void 0},a}return super.createConnection(e,r)}};Eo.exports=zr});var go=I((ap,_o)=>{"use strict";var{globalAgent:cf}=se(),hf=Gr(),uf=Nt(),ff=t=>new Promise((e,r)=>{t.once("error",r),t.once("response",s=>{t.off("error",r),e(s[":status"])})}),$r=class extends hf{async _getProxyStream(e){let{proxyOptions:r}=this,s={...uf(this),...r.headers,":method":"CONNECT",":authority":e},n=await cf.request(r.url,r,s),i=await ff(n);return[n,i,""]}};_o.exports=$r});var wo=I((cp,To)=>{"use strict";var df=require("http"),lf=require("https"),pf=Gr(),mf=Nt(),yf=t=>new Promise((e,r)=>{let s=(n,i,o)=>{i.unshift(o),t.off("error",r),e([i,n.statusCode,n.statusMessage])};t.once("error",r),t.once("connect",s)}),Pt=class extends pf{async _getProxyStream(e){let{proxyOptions:r}=this,{url:s,headers:n}=this.proxyOptions,o=(s.protocol==="https:"?lf:df).request({...r,hostname:s.hostname,port:s.port,path:e,headers:{...mf(this),...n,host:e},method:"CONNECT"}).end();return yf(o)}};To.exports={Http2OverHttp:Pt,Http2OverHttps:Pt}});var Ro=I((hp,bo)=>{"use strict";var Ef=require("http2"),{Agent:_f,globalAgent:gf}=se(),Wr=kr(),Tf=Nr(),wf=so(),{HttpOverHttp2:bf,HttpsOverHttp2:Rf}=yo(),Of=go(),{Http2OverHttp:Af,Http2OverHttps:Sf}=wo(),xf=Pr(),If=Cr(),Nf=(t,e,r)=>new Wr(t,e,r),Pf=(t,e,r)=>{let s=new Wr(t,e,r);return s.end(),s};bo.exports={...Ef,ClientRequest:Wr,IncomingMessage:Tf,Agent:_f,globalAgent:gf,request:Nf,get:Pf,auto:wf,proxies:{HttpOverHttp2:bf,HttpsOverHttp2:Rf,Http2OverHttp2:Of,Http2OverHttp:Af,Http2OverHttps:Sf},validateHeaderName:xf,validateHeaderValue:If}});var Xr=I(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.USE_PROXY=u.UNSUPPORTED_MEDIA_TYPE=u.UNPROCESSABLE_ENTITY=u.UNAUTHORIZED=u.TOO_MANY_REQUESTS=u.TEMPORARY_REDIRECT=u.SWITCHING_PROTOCOLS=u.SERVICE_UNAVAILABLE=u.SEE_OTHER=u.RESET_CONTENT=u.REQUESTED_RANGE_NOT_SATISFIABLE=u.REQUEST_URI_TOO_LONG=u.REQUEST_TOO_LONG=u.REQUEST_TIMEOUT=u.REQUEST_HEADER_FIELDS_TOO_LARGE=u.PROXY_AUTHENTICATION_REQUIRED=u.PROCESSING=u.PRECONDITION_REQUIRED=u.PRECONDITION_FAILED=u.PERMANENT_REDIRECT=u.PAYMENT_REQUIRED=u.PARTIAL_CONTENT=u.OK=u.NOT_MODIFIED=u.NOT_IMPLEMENTED=u.NOT_FOUND=u.NOT_ACCEPTABLE=u.NON_AUTHORITATIVE_INFORMATION=u.NO_CONTENT=u.NETWORK_AUTHENTICATION_REQUIRED=u.MULTIPLE_CHOICES=u.MULTI_STATUS=u.MOVED_TEMPORARILY=u.MOVED_PERMANENTLY=u.METHOD_NOT_ALLOWED=u.METHOD_FAILURE=u.LOCKED=u.LENGTH_REQUIRED=u.INTERNAL_SERVER_ERROR=u.INSUFFICIENT_STORAGE=u.INSUFFICIENT_SPACE_ON_RESOURCE=u.IM_A_TEAPOT=u.HTTP_VERSION_NOT_SUPPORTED=u.GONE=u.GATEWAY_TIMEOUT=u.FORBIDDEN=u.FAILED_DEPENDENCY=u.EXPECTATION_FAILED=u.CREATED=u.CONTINUE=u.CONFLICT=u.BAD_REQUEST=u.BAD_GATEWAY=u.ACCEPTED=void 0;u.ACCEPTED=202;u.BAD_GATEWAY=502;u.BAD_REQUEST=400;u.CONFLICT=409;u.CONTINUE=100;u.CREATED=201;u.EXPECTATION_FAILED=417;u.FAILED_DEPENDENCY=424;u.FORBIDDEN=403;u.GATEWAY_TIMEOUT=504;u.GONE=410;u.HTTP_VERSION_NOT_SUPPORTED=505;u.IM_A_TEAPOT=418;u.INSUFFICIENT_SPACE_ON_RESOURCE=419;u.INSUFFICIENT_STORAGE=507;u.INTERNAL_SERVER_ERROR=500;u.LENGTH_REQUIRED=411;u.LOCKED=423;u.METHOD_FAILURE=420;u.METHOD_NOT_ALLOWED=405;u.MOVED_PERMANENTLY=301;u.MOVED_TEMPORARILY=302;u.MULTI_STATUS=207;u.MULTIPLE_CHOICES=300;u.NETWORK_AUTHENTICATION_REQUIRED=511;u.NO_CONTENT=204;u.NON_AUTHORITATIVE_INFORMATION=203;u.NOT_ACCEPTABLE=406;u.NOT_FOUND=404;u.NOT_IMPLEMENTED=501;u.NOT_MODIFIED=304;u.OK=200;u.PARTIAL_CONTENT=206;u.PAYMENT_REQUIRED=402;u.PERMANENT_REDIRECT=308;u.PRECONDITION_FAILED=412;u.PRECONDITION_REQUIRED=428;u.PROCESSING=102;u.PROXY_AUTHENTICATION_REQUIRED=407;u.REQUEST_HEADER_FIELDS_TOO_LARGE=431;u.REQUEST_TIMEOUT=408;u.REQUEST_TOO_LONG=413;u.REQUEST_URI_TOO_LONG=414;u.REQUESTED_RANGE_NOT_SATISFIABLE=416;u.RESET_CONTENT=205;u.SEE_OTHER=303;u.SERVICE_UNAVAILABLE=503;u.SWITCHING_PROTOCOLS=101;u.TEMPORARY_REDIRECT=307;u.TOO_MANY_REQUESTS=429;u.UNAUTHORIZED=401;u.UNPROCESSABLE_ENTITY=422;u.UNSUPPORTED_MEDIA_TYPE=415;u.USE_PROXY=305;u.default={ACCEPTED:u.ACCEPTED,BAD_GATEWAY:u.BAD_GATEWAY,BAD_REQUEST:u.BAD_REQUEST,CONFLICT:u.CONFLICT,CONTINUE:u.CONTINUE,CREATED:u.CREATED,EXPECTATION_FAILED:u.EXPECTATION_FAILED,FORBIDDEN:u.FORBIDDEN,GATEWAY_TIMEOUT:u.GATEWAY_TIMEOUT,GONE:u.GONE,HTTP_VERSION_NOT_SUPPORTED:u.HTTP_VERSION_NOT_SUPPORTED,IM_A_TEAPOT:u.IM_A_TEAPOT,INSUFFICIENT_SPACE_ON_RESOURCE:u.INSUFFICIENT_SPACE_ON_RESOURCE,INSUFFICIENT_STORAGE:u.INSUFFICIENT_STORAGE,INTERNAL_SERVER_ERROR:u.INTERNAL_SERVER_ERROR,LENGTH_REQUIRED:u.LENGTH_REQUIRED,LOCKED:u.LOCKED,METHOD_FAILURE:u.METHOD_FAILURE,METHOD_NOT_ALLOWED:u.METHOD_NOT_ALLOWED,MOVED_PERMANENTLY:u.MOVED_PERMANENTLY,MOVED_TEMPORARILY:u.MOVED_TEMPORARILY,MULTI_STATUS:u.MULTI_STATUS,MULTIPLE_CHOICES:u.MULTIPLE_CHOICES,NETWORK_AUTHENTICATION_REQUIRED:u.NETWORK_AUTHENTICATION_REQUIRED,NO_CONTENT:u.NO_CONTENT,NON_AUTHORITATIVE_INFORMATION:u.NON_AUTHORITATIVE_INFORMATION,NOT_ACCEPTABLE:u.NOT_ACCEPTABLE,NOT_FOUND:u.NOT_FOUND,NOT_IMPLEMENTED:u.NOT_IMPLEMENTED,NOT_MODIFIED:u.NOT_MODIFIED,OK:u.OK,PARTIAL_CONTENT:u.PARTIAL_CONTENT,PAYMENT_REQUIRED:u.PAYMENT_REQUIRED,PERMANENT_REDIRECT:u.PERMANENT_REDIRECT,PRECONDITION_FAILED:u.PRECONDITION_FAILED,PRECONDITION_REQUIRED:u.PRECONDITION_REQUIRED,PROCESSING:u.PROCESSING,PROXY_AUTHENTICATION_REQUIRED:u.PROXY_AUTHENTICATION_REQUIRED,REQUEST_HEADER_FIELDS_TOO_LARGE:u.REQUEST_HEADER_FIELDS_TOO_LARGE,REQUEST_TIMEOUT:u.REQUEST_TIMEOUT,REQUEST_TOO_LONG:u.REQUEST_TOO_LONG,REQUEST_URI_TOO_LONG:u.REQUEST_URI_TOO_LONG,REQUESTED_RANGE_NOT_SATISFIABLE:u.REQUESTED_RANGE_NOT_SATISFIABLE,RESET_CONTENT:u.RESET_CONTENT,SEE_OTHER:u.SEE_OTHER,SERVICE_UNAVAILABLE:u.SERVICE_UNAVAILABLE,SWITCHING_PROTOCOLS:u.SWITCHING_PROTOCOLS,TEMPORARY_REDIRECT:u.TEMPORARY_REDIRECT,TOO_MANY_REQUESTS:u.TOO_MANY_REQUESTS,UNAUTHORIZED:u.UNAUTHORIZED,UNPROCESSABLE_ENTITY:u.UNPROCESSABLE_ENTITY,UNSUPPORTED_MEDIA_TYPE:u.UNSUPPORTED_MEDIA_TYPE,USE_PROXY:u.USE_PROXY}});var Yo=I(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.reasonPhraseToStatusCode=xe.statusCodeToReasonPhrase=void 0;xe.statusCodeToReasonPhrase={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Internal Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",103:"Early Hints",426:"Upgrade Required",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",451:"Unavailable For Legal Reasons",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy",421:"Misdirected Request"};xe.reasonPhraseToStatusCode={Accepted:202,"Bad Gateway":502,"Bad Request":400,Conflict:409,Continue:100,Created:201,"Expectation Failed":417,"Failed Dependency":424,Forbidden:403,"Gateway Timeout":504,Gone:410,"HTTP Version Not Supported":505,"I'm a teapot":418,"Insufficient Space on Resource":419,"Insufficient Storage":507,"Internal Server Error":500,"Length Required":411,Locked:423,"Method Failure":420,"Method Not Allowed":405,"Moved Permanently":301,"Moved Temporarily":302,"Multi-Status":207,"Multiple Choices":300,"Network Authentication Required":511,"No Content":204,"Non Authoritative Information":203,"Not Acceptable":406,"Not Found":404,"Not Implemented":501,"Not Modified":304,OK:200,"Partial Content":206,"Payment Required":402,"Permanent Redirect":308,"Precondition Failed":412,"Precondition Required":428,Processing:102,"Early Hints":103,"Upgrade Required":426,"Proxy Authentication Required":407,"Request Header Fields Too Large":431,"Request Timeout":408,"Request Entity Too Large":413,"Request-URI Too Long":414,"Requested Range Not Satisfiable":416,"Reset Content":205,"See Other":303,"Service Unavailable":503,"Switching Protocols":101,"Temporary Redirect":307,"Too Many Requests":429,Unauthorized:401,"Unavailable For Legal Reasons":451,"Unprocessable Entity":422,"Unsupported Media Type":415,"Use Proxy":305,"Misdirected Request":421}});var Zr=I(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.getStatusText=te.getStatusCode=te.getReasonPhrase=void 0;var Ko=Yo();function Jo(t){var e=Ko.statusCodeToReasonPhrase[t.toString()];if(!e)throw new Error("Status code does not exist: "+t);return e}te.getReasonPhrase=Jo;function Jf(t){var e=Ko.reasonPhraseToStatusCode[t];if(!e)throw new Error("Reason phrase does not exist: "+t);return e}te.getStatusCode=Jf;te.getStatusText=Jo});var Xo=I(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.StatusCodes=void 0;var Xf;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.EARLY_HINTS=103]="EARLY_HINTS",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",t[t.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.IM_A_TEAPOT=418]="IM_A_TEAPOT",t[t.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",t[t.METHOD_FAILURE=420]="METHOD_FAILURE",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(Xf=rt.StatusCodes||(rt.StatusCodes={}))});var Zo=I(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.ReasonPhrases=void 0;var Zf;(function(t){t.ACCEPTED="Accepted",t.BAD_GATEWAY="Bad Gateway",t.BAD_REQUEST="Bad Request",t.CONFLICT="Conflict",t.CONTINUE="Continue",t.CREATED="Created",t.EXPECTATION_FAILED="Expectation Failed",t.FAILED_DEPENDENCY="Failed Dependency",t.FORBIDDEN="Forbidden",t.GATEWAY_TIMEOUT="Gateway Timeout",t.GONE="Gone",t.HTTP_VERSION_NOT_SUPPORTED="HTTP Version Not Supported",t.IM_A_TEAPOT="I'm a teapot",t.INSUFFICIENT_SPACE_ON_RESOURCE="Insufficient Space on Resource",t.INSUFFICIENT_STORAGE="Insufficient Storage",t.INTERNAL_SERVER_ERROR="Internal Server Error",t.LENGTH_REQUIRED="Length Required",t.LOCKED="Locked",t.METHOD_FAILURE="Method Failure",t.METHOD_NOT_ALLOWED="Method Not Allowed",t.MOVED_PERMANENTLY="Moved Permanently",t.MOVED_TEMPORARILY="Moved Temporarily",t.MULTI_STATUS="Multi-Status",t.MULTIPLE_CHOICES="Multiple Choices",t.NETWORK_AUTHENTICATION_REQUIRED="Network Authentication Required",t.NO_CONTENT="No Content",t.NON_AUTHORITATIVE_INFORMATION="Non Authoritative Information",t.NOT_ACCEPTABLE="Not Acceptable",t.NOT_FOUND="Not Found",t.NOT_IMPLEMENTED="Not Implemented",t.NOT_MODIFIED="Not Modified",t.OK="OK",t.PARTIAL_CONTENT="Partial Content",t.PAYMENT_REQUIRED="Payment Required",t.PERMANENT_REDIRECT="Permanent Redirect",t.PRECONDITION_FAILED="Precondition Failed",t.PRECONDITION_REQUIRED="Precondition Required",t.PROCESSING="Processing",t.EARLY_HINTS="Early Hints",t.UPGRADE_REQUIRED="Upgrade Required",t.PROXY_AUTHENTICATION_REQUIRED="Proxy Authentication Required",t.REQUEST_HEADER_FIELDS_TOO_LARGE="Request Header Fields Too Large",t.REQUEST_TIMEOUT="Request Timeout",t.REQUEST_TOO_LONG="Request Entity Too Large",t.REQUEST_URI_TOO_LONG="Request-URI Too Long",t.REQUESTED_RANGE_NOT_SATISFIABLE="Requested Range Not Satisfiable",t.RESET_CONTENT="Reset Content",t.SEE_OTHER="See Other",t.SERVICE_UNAVAILABLE="Service Unavailable",t.SWITCHING_PROTOCOLS="Switching Protocols",t.TEMPORARY_REDIRECT="Temporary Redirect",t.TOO_MANY_REQUESTS="Too Many Requests",t.UNAUTHORIZED="Unauthorized",t.UNAVAILABLE_FOR_LEGAL_REASONS="Unavailable For Legal Reasons",t.UNPROCESSABLE_ENTITY="Unprocessable Entity",t.UNSUPPORTED_MEDIA_TYPE="Unsupported Media Type",t.USE_PROXY="Use Proxy",t.MISDIRECTED_REQUEST="Misdirected Request"})(Zf=st.ReasonPhrases||(st.ReasonPhrases={}))});var ta=I(k=>{"use strict";var kt=k&&k.__assign||function(){return kt=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},kt.apply(this,arguments)},ed=k&&k.__createBinding||(Object.create?(function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}):(function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]})),td=k&&k.__exportStar||function(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&ed(e,t,r)},rd=k&&k.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(k,"__esModule",{value:!0});var sd=rd(Xr()),ea=Zr(),es=Zr();Object.defineProperty(k,"getStatusCode",{enumerable:!0,get:function(){return es.getStatusCode}});Object.defineProperty(k,"getReasonPhrase",{enumerable:!0,get:function(){return es.getReasonPhrase}});Object.defineProperty(k,"getStatusText",{enumerable:!0,get:function(){return es.getStatusText}});var nd=Xo();Object.defineProperty(k,"StatusCodes",{enumerable:!0,get:function(){return nd.StatusCodes}});var id=Zo();Object.defineProperty(k,"ReasonPhrases",{enumerable:!0,get:function(){return id.ReasonPhrases}});td(Xr(),k);k.default=kt(kt({},sd.default),{getStatusCode:ea.getStatusCode,getStatusText:ea.getStatusText})});var dd={};ua(dd,{default:()=>na});module.exports=fa(dd);var A=require("@raycast/api");var $o=require("node:timers/promises");function ss(t){return Object.keys(t)}var os=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function da(t){return os.includes(t)}var as=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...os];function la(t){return as.includes(t)}var cs=["null","undefined","string","number","bigint","boolean","symbol"];function pa(t){return cs.includes(t)}var yd=["positive number","negative number","Class","string with a number","null or undefined","Iterable","AsyncIterable","native Promise","EnumCase","string with a URL","truthy","falsy","primitive","integer","plain object","TypedArray","array-like","tuple-like","Node.js Stream","infinite number","empty array","non-empty array","empty string","empty string or whitespace","non-empty string","non-empty string and not whitespace","empty object","non-empty object","empty set","non-empty set","empty map","non-empty map","PropertyKey","even integer","odd integer","T","in range","predicate returns truthy for any value","predicate returns truthy for all values","valid Date","valid length","whitespace string",...as,...cs],S=t=>{let e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&jt(t))return"HTMLElement";if(la(e))return e};function ns(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(at(t))return"Observable";if(z(t))return"Array";if(ae(t))return"Buffer";let e=S(t);if(e&&e!=="Object")return e;if(hs(t))return"Promise";if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}function hs(t){return D(t?.then)&&D(t?.catch)}var Mt=Object.assign(ns,{all:fs,any:Ht,array:z,arrayBuffer:ds,arrayLike:ls,asyncFunction:ps,asyncGenerator:ms,asyncGeneratorFunction:ys,asyncIterable:qt,bigint:Es,bigInt64Array:_s,bigUint64Array:gs,blob:Ts,boolean:ws,boundFunction:bs,buffer:ae,class:Rs,dataView:Os,date:Ft,detect:ns,directInstanceOf:As,emptyArray:Ss,emptyMap:xs,emptyObject:Is,emptySet:Ns,emptyString:vt,emptyStringOrWhitespace:ot,enumCase:Ps,error:Cs,evenInteger:Ls,falsy:Ds,float32Array:Us,float64Array:ks,formData:Ms,function:D,generator:Hs,generatorFunction:qs,htmlElement:jt,infinite:Fs,inRange:vs,int16Array:js,int32Array:Bs,int8Array:zs,integer:Bt,iterable:zt,map:ce,nan:Gt,nativePromise:$t,negativeNumber:Gs,nodeStream:$s,nonEmptyArray:Ws,nonEmptyMap:Vs,nonEmptyObject:Qs,nonEmptySet:Ys,nonEmptyString:Ks,nonEmptyStringAndNotWhitespace:Js,null:Ie,nullOrUndefined:Wt,number:he,numericString:Xs,object:ue,observable:at,oddInteger:Zs,plainObject:Vt,positiveNumber:en,primitive:tn,promise:rn,propertyKey:sn,regExp:nn,safeInteger:Qt,set:fe,sharedArrayBuffer:on,string:$,symbol:Yt,truthy:an,tupleLike:cn,typedArray:hn,uint16Array:un,uint32Array:fn,uint8Array:dn,uint8ClampedArray:ln,undefined:Ne,urlInstance:pn,urlSearchParams:mn,urlString:yn,optional:ma,validDate:En,validLength:Kt,weakMap:_n,weakRef:gn,weakSet:Tn,whitespaceString:Jt});function us(t){return e=>Bt(e)&&Math.abs(e%2)===t}function fs(t,...e){return wn(Array.prototype.every,t,e)}function Ht(t,...e){return(z(t)?t:[t]).some(s=>wn(Array.prototype.some,s,e))}function ma(t,e){return Ne(t)||e(t)}function z(t,e){return Array.isArray(t)?D(e)?t.every(r=>e(r)):!0:!1}function ds(t){return S(t)==="ArrayBuffer"}function ls(t){return!Wt(t)&&!D(t)&&Kt(t.length)}function ps(t){return S(t)==="AsyncFunction"}function ms(t){return qt(t)&&D(t.next)&&D(t.throw)}function ys(t){return S(t)==="AsyncGeneratorFunction"}function qt(t){return D(t?.[Symbol.asyncIterator])}function Es(t){return typeof t=="bigint"}function _s(t){return S(t)==="BigInt64Array"}function gs(t){return S(t)==="BigUint64Array"}function Ts(t){return S(t)==="Blob"}function ws(t){return t===!0||t===!1}function bs(t){return D(t)&&!Object.hasOwn(t,"prototype")}function ae(t){return t?.constructor?.isBuffer?.(t)??!1}function Rs(t){return D(t)&&/^class(\s+|{)/.test(t.toString())}function Os(t){return S(t)==="DataView"}function Ft(t){return S(t)==="Date"}function As(t,e){return t==null?!1:Object.getPrototypeOf(t)===e.prototype}function Ss(t){return z(t)&&t.length===0}function xs(t){return ce(t)&&t.size===0}function Is(t){return ue(t)&&!ce(t)&&!fe(t)&&Object.keys(t).length===0}function Ns(t){return fe(t)&&t.size===0}function vt(t){return $(t)&&t.length===0}function ot(t){return vt(t)||Jt(t)}function Ps(t,e){return Object.values(e).includes(t)}function Cs(t){return S(t)==="Error"}function Ls(t){return us(0)(t)}function Ds(t){return!t}function Us(t){return S(t)==="Float32Array"}function ks(t){return S(t)==="Float64Array"}function Ms(t){return S(t)==="FormData"}function D(t){return typeof t=="function"}function Hs(t){return zt(t)&&D(t?.next)&&D(t?.throw)}function qs(t){return S(t)==="GeneratorFunction"}var ya=1,Ea=["innerHTML","ownerDocument","style","attributes","nodeValue"];function jt(t){return ue(t)&&t.nodeType===ya&&$(t.nodeName)&&!Vt(t)&&Ea.every(e=>e in t)}function Fs(t){return t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY}function vs(t,e){if(he(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(z(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)}function js(t){return S(t)==="Int16Array"}function Bs(t){return S(t)==="Int32Array"}function zs(t){return S(t)==="Int8Array"}function Bt(t){return Number.isInteger(t)}function zt(t){return D(t?.[Symbol.iterator])}function ce(t){return S(t)==="Map"}function Gt(t){return Number.isNaN(t)}function $t(t){return S(t)==="Promise"}function Gs(t){return he(t)&&t<0}function $s(t){return ue(t)&&D(t.pipe)&&!at(t)}function Ws(t){return z(t)&&t.length>0}function Vs(t){return ce(t)&&t.size>0}function Qs(t){return ue(t)&&!ce(t)&&!fe(t)&&Object.keys(t).length>0}function Ys(t){return fe(t)&&t.size>0}function Ks(t){return $(t)&&t.length>0}function Js(t){return $(t)&&!ot(t)}function Ie(t){return t===null}function Wt(t){return Ie(t)||Ne(t)}function he(t){return typeof t=="number"&&!Number.isNaN(t)}function Xs(t){return $(t)&&!ot(t)&&!Number.isNaN(Number(t))}function ue(t){return!Ie(t)&&(typeof t=="object"||D(t))}function at(t){return t?Symbol.observable!==void 0&&t===t[Symbol.observable]?.()||t===t["@@observable"]?.():!1}function Zs(t){return us(1)(t)}function Vt(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function en(t){return he(t)&&t>0}function tn(t){return Ie(t)||pa(typeof t)}function rn(t){return $t(t)||hs(t)}function sn(t){return Ht([$,he,Yt],t)}function nn(t){return S(t)==="RegExp"}function Qt(t){return Number.isSafeInteger(t)}function fe(t){return S(t)==="Set"}function on(t){return S(t)==="SharedArrayBuffer"}function $(t){return typeof t=="string"}function Yt(t){return typeof t=="symbol"}function an(t){return!!t}function cn(t,e){return z(e)&&z(t)&&e.length===t.length?e.every((r,s)=>r(t[s])):!1}function hn(t){return da(S(t))}function un(t){return S(t)==="Uint16Array"}function fn(t){return S(t)==="Uint32Array"}function dn(t){return S(t)==="Uint8Array"}function ln(t){return S(t)==="Uint8ClampedArray"}function Ne(t){return t===void 0}function pn(t){return S(t)==="URL"}function mn(t){return S(t)==="URLSearchParams"}function yn(t){if(!$(t))return!1;try{return new URL(t),!0}catch{return!1}}function En(t){return Ft(t)&&!Gt(Number(t))}function Kt(t){return Qt(t)&&t>=0}function _n(t){return S(t)==="WeakMap"}function gn(t){return S(t)==="WeakRef"}function Tn(t){return S(t)==="WeakSet"}function Jt(t){return $(t)&&/^\s+$/.test(t)}function wn(t,e,r){if(!D(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)}function y(t,e){return`Expected value which is \`${t}\`, received value of type \`${Mt(e)}\`.`}function is(t){return Array.from(new Set(t))}var _a=new Intl.ListFormat("en",{style:"long",type:"conjunction"}),ga=new Intl.ListFormat("en",{style:"long",type:"disjunction"});function bn(t,e){let r=is((z(t)?t:[t]).map(n=>`\`${n}\``)),s=is(e.map(n=>`\`${Mt(n)}\``));return`Expected values which are ${ga.format(r)}. Received values of type${s.length>1?"s":""} ${_a.format(s)}.`}var O={all:wa,any:ba,optional:Ra,array:Oa,arrayBuffer:Aa,arrayLike:Sa,asyncFunction:xa,asyncGenerator:Ia,asyncGeneratorFunction:Na,asyncIterable:Pa,bigint:Ca,bigInt64Array:La,bigUint64Array:Da,blob:Ua,boolean:ka,boundFunction:Ma,buffer:Ha,class:qa,dataView:Fa,date:va,directInstanceOf:ja,emptyArray:Ba,emptyMap:za,emptyObject:Ga,emptySet:$a,emptyString:Wa,emptyStringOrWhitespace:Va,enumCase:Qa,error:Ya,evenInteger:Ka,falsy:Ja,float32Array:Xa,float64Array:Za,formData:ec,function:tc,generator:rc,generatorFunction:sc,htmlElement:nc,infinite:ic,inRange:oc,int16Array:ac,int32Array:cc,int8Array:hc,integer:uc,iterable:fc,map:dc,nan:lc,nativePromise:pc,negativeNumber:mc,nodeStream:yc,nonEmptyArray:Ec,nonEmptyMap:_c,nonEmptyObject:gc,nonEmptySet:Tc,nonEmptyString:wc,nonEmptyStringAndNotWhitespace:bc,null:Rc,nullOrUndefined:Oc,number:Ac,numericString:Sc,object:xc,observable:Ic,oddInteger:Nc,plainObject:Pc,positiveNumber:Cc,primitive:Lc,promise:Dc,propertyKey:Uc,regExp:kc,safeInteger:Mc,set:Hc,sharedArrayBuffer:qc,string:Fc,symbol:vc,truthy:jc,tupleLike:Bc,typedArray:zc,uint16Array:Gc,uint32Array:$c,uint8Array:Wc,uint8ClampedArray:Vc,undefined:Qc,urlInstance:Yc,urlSearchParams:Kc,urlString:Jc,validDate:Xc,validLength:Zc,weakMap:eh,weakRef:th,weakSet:rh,whitespaceString:sh},Xt={isArray:"Array",isArrayBuffer:"ArrayBuffer",isArrayLike:"array-like",isAsyncFunction:"AsyncFunction",isAsyncGenerator:"AsyncGenerator",isAsyncGeneratorFunction:"AsyncGeneratorFunction",isAsyncIterable:"AsyncIterable",isBigint:"bigint",isBigInt64Array:"BigInt64Array",isBigUint64Array:"BigUint64Array",isBlob:"Blob",isBoolean:"boolean",isBoundFunction:"Function",isBuffer:"Buffer",isClass:"Class",isDataView:"DataView",isDate:"Date",isDirectInstanceOf:"T",isEmptyArray:"empty array",isEmptyMap:"empty map",isEmptyObject:"empty object",isEmptySet:"empty set",isEmptyString:"empty string",isEmptyStringOrWhitespace:"empty string or whitespace",isEnumCase:"EnumCase",isError:"Error",isEvenInteger:"even integer",isFalsy:"falsy",isFloat32Array:"Float32Array",isFloat64Array:"Float64Array",isFormData:"FormData",isFunction:"Function",isGenerator:"Generator",isGeneratorFunction:"GeneratorFunction",isHtmlElement:"HTMLElement",isInfinite:"infinite number",isInRange:"in range",isInt16Array:"Int16Array",isInt32Array:"Int32Array",isInt8Array:"Int8Array",isInteger:"integer",isIterable:"Iterable",isMap:"Map",isNan:"NaN",isNativePromise:"native Promise",isNegativeNumber:"negative number",isNodeStream:"Node.js Stream",isNonEmptyArray:"non-empty array",isNonEmptyMap:"non-empty map",isNonEmptyObject:"non-empty object",isNonEmptySet:"non-empty set",isNonEmptyString:"non-empty string",isNonEmptyStringAndNotWhitespace:"non-empty string and not whitespace",isNull:"null",isNullOrUndefined:"null or undefined",isNumber:"number",isNumericString:"string with a number",isObject:"Object",isObservable:"Observable",isOddInteger:"odd integer",isPlainObject:"plain object",isPositiveNumber:"positive number",isPrimitive:"primitive",isPromise:"Promise",isPropertyKey:"PropertyKey",isRegExp:"RegExp",isSafeInteger:"integer",isSet:"Set",isSharedArrayBuffer:"SharedArrayBuffer",isString:"string",isSymbol:"symbol",isTruthy:"truthy",isTupleLike:"tuple-like",isTypedArray:"TypedArray",isUint16Array:"Uint16Array",isUint32Array:"Uint32Array",isUint8Array:"Uint8Array",isUint8ClampedArray:"Uint8ClampedArray",isUndefined:"undefined",isUrlInstance:"URL",isUrlSearchParams:"URLSearchParams",isUrlString:"string with a URL",isValidDate:"valid Date",isValidLength:"valid length",isWeakMap:"WeakMap",isWeakRef:"WeakRef",isWeakSet:"WeakSet",isWhitespaceString:"whitespace string"},Ta=ss(Xt);function Rn(t){return Ta.includes(t)}function wa(t,...e){if(!fs(t,...e)){let r=Rn(t.name)?Xt[t.name]:"predicate returns truthy for all values";throw new TypeError(bn(r,e))}}function ba(t,...e){if(!Ht(t,...e)){let s=(z(t)?t:[t]).map(n=>Rn(n.name)?Xt[n.name]:"predicate returns truthy for any value");throw new TypeError(bn(s,e))}}function Ra(t,e,r){Ne(t)||e(t,r)}function Oa(t,e,r){if(!z(t))throw new TypeError(r??y("Array",t));if(e)for(let s of t)e(s,r)}function Aa(t,e){if(!ds(t))throw new TypeError(e??y("ArrayBuffer",t))}function Sa(t,e){if(!ls(t))throw new TypeError(e??y("array-like",t))}function xa(t,e){if(!ps(t))throw new TypeError(e??y("AsyncFunction",t))}function Ia(t,e){if(!ms(t))throw new TypeError(e??y("AsyncGenerator",t))}function Na(t,e){if(!ys(t))throw new TypeError(e??y("AsyncGeneratorFunction",t))}function Pa(t,e){if(!qt(t))throw new TypeError(e??y("AsyncIterable",t))}function Ca(t,e){if(!Es(t))throw new TypeError(e??y("bigint",t))}function La(t,e){if(!_s(t))throw new TypeError(e??y("BigInt64Array",t))}function Da(t,e){if(!gs(t))throw new TypeError(e??y("BigUint64Array",t))}function Ua(t,e){if(!Ts(t))throw new TypeError(e??y("Blob",t))}function ka(t,e){if(!ws(t))throw new TypeError(e??y("boolean",t))}function Ma(t,e){if(!bs(t))throw new TypeError(e??y("Function",t))}function Ha(t,e){if(!ae(t))throw new TypeError(e??y("Buffer",t))}function qa(t,e){if(!Rs(t))throw new TypeError(e??y("Class",t))}function Fa(t,e){if(!Os(t))throw new TypeError(e??y("DataView",t))}function va(t,e){if(!Ft(t))throw new TypeError(e??y("Date",t))}function ja(t,e,r){if(!As(t,e))throw new TypeError(r??y("T",t))}function Ba(t,e){if(!Ss(t))throw new TypeError(e??y("empty array",t))}function za(t,e){if(!xs(t))throw new TypeError(e??y("empty map",t))}function Ga(t,e){if(!Is(t))throw new TypeError(e??y("empty object",t))}function $a(t,e){if(!Ns(t))throw new TypeError(e??y("empty set",t))}function Wa(t,e){if(!vt(t))throw new TypeError(e??y("empty string",t))}function Va(t,e){if(!ot(t))throw new TypeError(e??y("empty string or whitespace",t))}function Qa(t,e,r){if(!Ps(t,e))throw new TypeError(r??y("EnumCase",t))}function Ya(t,e){if(!Cs(t))throw new TypeError(e??y("Error",t))}function Ka(t,e){if(!Ls(t))throw new TypeError(e??y("even integer",t))}function Ja(t,e){if(!Ds(t))throw new TypeError(e??y("falsy",t))}function Xa(t,e){if(!Us(t))throw new TypeError(e??y("Float32Array",t))}function Za(t,e){if(!ks(t))throw new TypeError(e??y("Float64Array",t))}function ec(t,e){if(!Ms(t))throw new TypeError(e??y("FormData",t))}function tc(t,e){if(!D(t))throw new TypeError(e??y("Function",t))}function rc(t,e){if(!Hs(t))throw new TypeError(e??y("Generator",t))}function sc(t,e){if(!qs(t))throw new TypeError(e??y("GeneratorFunction",t))}function nc(t,e){if(!jt(t))throw new TypeError(e??y("HTMLElement",t))}function ic(t,e){if(!Fs(t))throw new TypeError(e??y("infinite number",t))}function oc(t,e,r){if(!vs(t,e))throw new TypeError(r??y("in range",t))}function ac(t,e){if(!js(t))throw new TypeError(e??y("Int16Array",t))}function cc(t,e){if(!Bs(t))throw new TypeError(e??y("Int32Array",t))}function hc(t,e){if(!zs(t))throw new TypeError(e??y("Int8Array",t))}function uc(t,e){if(!Bt(t))throw new TypeError(e??y("integer",t))}function fc(t,e){if(!zt(t))throw new TypeError(e??y("Iterable",t))}function dc(t,e){if(!ce(t))throw new TypeError(e??y("Map",t))}function lc(t,e){if(!Gt(t))throw new TypeError(e??y("NaN",t))}function pc(t,e){if(!$t(t))throw new TypeError(e??y("native Promise",t))}function mc(t,e){if(!Gs(t))throw new TypeError(e??y("negative number",t))}function yc(t,e){if(!$s(t))throw new TypeError(e??y("Node.js Stream",t))}function Ec(t,e){if(!Ws(t))throw new TypeError(e??y("non-empty array",t))}function _c(t,e){if(!Vs(t))throw new TypeError(e??y("non-empty map",t))}function gc(t,e){if(!Qs(t))throw new TypeError(e??y("non-empty object",t))}function Tc(t,e){if(!Ys(t))throw new TypeError(e??y("non-empty set",t))}function wc(t,e){if(!Ks(t))throw new TypeError(e??y("non-empty string",t))}function bc(t,e){if(!Js(t))throw new TypeError(e??y("non-empty string and not whitespace",t))}function Rc(t,e){if(!Ie(t))throw new TypeError(e??y("null",t))}function Oc(t,e){if(!Wt(t))throw new TypeError(e??y("null or undefined",t))}function Ac(t,e){if(!he(t))throw new TypeError(e??y("number",t))}function Sc(t,e){if(!Xs(t))throw new TypeError(e??y("string with a number",t))}function xc(t,e){if(!ue(t))throw new TypeError(e??y("Object",t))}function Ic(t,e){if(!at(t))throw new TypeError(e??y("Observable",t))}function Nc(t,e){if(!Zs(t))throw new TypeError(e??y("odd integer",t))}function Pc(t,e){if(!Vt(t))throw new TypeError(e??y("plain object",t))}function Cc(t,e){if(!en(t))throw new TypeError(e??y("positive number",t))}function Lc(t,e){if(!tn(t))throw new TypeError(e??y("primitive",t))}function Dc(t,e){if(!rn(t))throw new TypeError(e??y("Promise",t))}function Uc(t,e){if(!sn(t))throw new TypeError(e??y("PropertyKey",t))}function kc(t,e){if(!nn(t))throw new TypeError(e??y("RegExp",t))}function Mc(t,e){if(!Qt(t))throw new TypeError(e??y("integer",t))}function Hc(t,e){if(!fe(t))throw new TypeError(e??y("Set",t))}function qc(t,e){if(!on(t))throw new TypeError(e??y("SharedArrayBuffer",t))}function Fc(t,e){if(!$(t))throw new TypeError(e??y("string",t))}function vc(t,e){if(!Yt(t))throw new TypeError(e??y("symbol",t))}function jc(t,e){if(!an(t))throw new TypeError(e??y("truthy",t))}function Bc(t,e,r){if(!cn(t,e))throw new TypeError(r??y("tuple-like",t))}function zc(t,e){if(!hn(t))throw new TypeError(e??y("TypedArray",t))}function Gc(t,e){if(!un(t))throw new TypeError(e??y("Uint16Array",t))}function $c(t,e){if(!fn(t))throw new TypeError(e??y("Uint32Array",t))}function Wc(t,e){if(!dn(t))throw new TypeError(e??y("Uint8Array",t))}function Vc(t,e){if(!ln(t))throw new TypeError(e??y("Uint8ClampedArray",t))}function Qc(t,e){if(!Ne(t))throw new TypeError(e??y("undefined",t))}function Yc(t,e){if(!pn(t))throw new TypeError(e??y("URL",t))}function Kc(t,e){if(!mn(t))throw new TypeError(e??y("URLSearchParams",t))}function Jc(t,e){if(!yn(t))throw new TypeError(e??y("string with a URL",t))}function Xc(t,e){if(!En(t))throw new TypeError(e??y("valid Date",t))}function Zc(t,e){if(!Kt(t))throw new TypeError(e??y("valid length",t))}function eh(t,e){if(!_n(t))throw new TypeError(e??y("WeakMap",t))}function th(t,e){if(!gn(t))throw new TypeError(e??y("WeakRef",t))}function rh(t,e){if(!Tn(t))throw new TypeError(e??y("WeakSet",t))}function sh(t,e){if(!Jt(t))throw new TypeError(e??y("whitespace string",t))}var c=Mt;var Go=require("node:events");var Zt=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},W=Object.freeze({pending:Symbol("pending"),canceled:Symbol("canceled"),resolved:Symbol("resolved"),rejected:Symbol("rejected")}),de=class t{static fn(e){return(...r)=>new t((s,n,i)=>{r.push(i),e(...r).then(s,n)})}#r=[];#s=!0;#e=W.pending;#t;#n;constructor(e){this.#t=new Promise((r,s)=>{this.#n=s;let n=a=>{(this.#e!==W.canceled||!o.shouldReject)&&(r(a),this.#i(W.resolved))},i=a=>{(this.#e!==W.canceled||!o.shouldReject)&&(s(a),this.#i(W.rejected))},o=a=>{if(this.#e!==W.pending)throw new Error(`The \`onCancel\` handler was attached after the promise ${this.#e.description}.`);this.#r.push(a)};Object.defineProperties(o,{shouldReject:{get:()=>this.#s,set:a=>{this.#s=a}}}),e(n,i,o)})}then(e,r){return this.#t.then(e,r)}catch(e){return this.#t.catch(e)}finally(e){return this.#t.finally(e)}cancel(e){if(this.#e===W.pending){if(this.#i(W.canceled),this.#r.length>0)try{for(let r of this.#r)r()}catch(r){this.#n(r);return}this.#s&&this.#n(new Zt(e))}}get isCanceled(){return this.#e===W.canceled}#i(e){this.#e===W.pending&&(this.#e=e)}};Object.setPrototypeOf(de.prototype,Promise.prototype);function nh(t){return c.object(t)&&"_onResponse"in t}var x=class extends Error{name="RequestError";code="ERR_GOT_REQUEST_ERROR";input;stack;response;request;timings;constructor(e,r,s){if(super(e,{cause:r}),Error.captureStackTrace(this,this.constructor),r.code&&(this.code=r.code),this.input=r.input,nh(s)?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s.response}),this.options=s.options):this.options=s,this.timings=this.request?.timings,c.string(r.stack)&&c.string(this.stack)){let n=this.stack.indexOf(this.message)+this.message.length,i=this.stack.slice(n).split(`
`).reverse(),o=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;o.length>0&&o[0]===i[0];)i.shift();this.stack=`${this.stack.slice(0,n)}${i.reverse().join(`
`)}${o.reverse().join(`
`)}`}}},ct=class extends x{name="MaxRedirectsError";code="ERR_TOO_MANY_REDIRECTS";constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e)}},V=class extends x{name="HTTPError";code="ERR_NON_2XX_3XX_RESPONSE";constructor(e){super(`Request failed with status code ${e.statusCode} (${e.statusMessage}): ${e.request.options.method} ${e.request.options.url.toString()}`,{},e.request)}},Pe=class extends x{name="CacheError";constructor(e,r){super(e.message,e,r),this.code==="ERR_GOT_REQUEST_ERROR"&&(this.code="ERR_CACHE_ACCESS")}},Ce=class extends x{name="UploadError";constructor(e,r){super(e.message,e,r),this.code==="ERR_GOT_REQUEST_ERROR"&&(this.code="ERR_UPLOAD")}},Le=class extends x{name="TimeoutError";timings;event;constructor(e,r,s){super(e.message,e,s),this.event=e.event,this.timings=r}},le=class extends x{name="ReadError";constructor(e,r){super(e.message,e,r),this.code==="ERR_GOT_REQUEST_ERROR"&&(this.code="ERR_READING_RESPONSE_STREAM")}},ht=class extends x{name="RetryError";code="ERR_RETRYING";constructor(e){super("Retrying",{},e)}},ut=class extends x{name="AbortError";code="ERR_ABORTED";constructor(e){super("This operation was aborted.",{},e)}};var Se=M(require("node:process"),1),Ae=require("node:buffer"),zo=require("node:stream"),tt=M(require("node:http"),1);var ih=new TextEncoder;function ft(t){return typeof t=="string"?ih.encode(t).byteLength:ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof SharedArrayBuffer?t.byteLength:0}var Qn=M(require("node:crypto"),1),Yn=M(require("node:events"),1),Et=M(require("node:stream"),1),Me=M(require("node:url"),1);var jn=require("node:events"),Bn=require("node:stream/promises");function oh(t,{checkOpen:e=!0}={}){return t!==null&&typeof t=="object"&&(t.writable||t.readable||!e||t.writable===void 0&&t.readable===void 0)&&typeof t.pipe=="function"}function On(t,{checkOpen:e=!0}={}){return oh(t,{checkOpen:e})&&(t.readable||!e)&&typeof t.read=="function"&&typeof t.readable=="boolean"&&typeof t.readableObjectMode=="boolean"&&typeof t.destroy=="function"&&typeof t.destroyed=="boolean"}var ah=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),er=class{#r;#s;#e=!1;#t=void 0;constructor(e,r){this.#r=e,this.#s=r}next(){let e=()=>this.#n();return this.#t=this.#t?this.#t.then(e,e):e(),this.#t}return(e){let r=()=>this.#i(e);return this.#t?this.#t.then(r,r):r()}async#n(){if(this.#e)return{done:!0,value:void 0};let e;try{e=await this.#r.read()}catch(r){throw this.#t=void 0,this.#e=!0,this.#r.releaseLock(),r}return e.done&&(this.#t=void 0,this.#e=!0,this.#r.releaseLock()),e}async#i(e){if(this.#e)return{done:!0,value:e};if(this.#e=!0,!this.#s){let r=this.#r.cancel(e);return this.#r.releaseLock(),await r,{done:!0,value:e}}return this.#r.releaseLock(),{done:!0,value:e}}},tr=Symbol();function An(){return this[tr].next()}Object.defineProperty(An,"name",{value:"next"});function Sn(t){return this[tr].return(t)}Object.defineProperty(Sn,"name",{value:"return"});var ch=Object.create(ah,{next:{enumerable:!0,configurable:!0,writable:!0,value:An},return:{enumerable:!0,configurable:!0,writable:!0,value:Sn}});function rr({preventCancel:t=!1}={}){let e=this.getReader(),r=new er(e,t),s=Object.create(ch);return s[tr]=r,s}var xn=t=>{if(On(t,{checkOpen:!1})&&De.on!==void 0)return uh(t);if(typeof t?.[Symbol.asyncIterator]=="function")return t;if(hh.call(t)==="[object ReadableStream]")return rr.call(t);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:hh}=Object.prototype,uh=async function*(t){let e=new AbortController,r={};fh(t,e,r);try{for await(let[s]of De.on(t,"data",{signal:e.signal}))yield s}catch(s){if(r.error!==void 0)throw r.error;if(!e.signal.aborted)throw s}finally{t.destroy()}},fh=async(t,e,r)=>{try{await De.finished(t,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(s){r.error=s}finally{e.abort()}},De={};var Pn=async(t,{init:e,convertChunk:r,getSize:s,truncateChunk:n,addChunk:i,getFinalChunk:o,finalize:a},{maxBuffer:h=Number.POSITIVE_INFINITY}={})=>{let f=xn(t),d=e();d.length=0;try{for await(let l of f){let _=lh(l),p=r[_](l,d);Cn({convertedChunk:p,state:d,getSize:s,truncateChunk:n,addChunk:i,maxBuffer:h})}return dh({state:d,convertChunk:r,getSize:s,truncateChunk:n,addChunk:i,getFinalChunk:o,maxBuffer:h}),a(d)}catch(l){let _=typeof l=="object"&&l!==null?l:new Error(l);throw _.bufferedData=a(d),_}},dh=({state:t,getSize:e,truncateChunk:r,addChunk:s,getFinalChunk:n,maxBuffer:i})=>{let o=n(t);o!==void 0&&Cn({convertedChunk:o,state:t,getSize:e,truncateChunk:r,addChunk:s,maxBuffer:i})},Cn=({convertedChunk:t,state:e,getSize:r,truncateChunk:s,addChunk:n,maxBuffer:i})=>{let o=r(t),a=e.length+o;if(a<=i){In(t,e,n,a);return}let h=s(t,i-e.length);throw h!==void 0&&In(h,e,n,i),new dt},In=(t,e,r,s)=>{e.contents=r(t,e,s),e.length=s},lh=t=>{let e=typeof t;if(e==="string")return"string";if(e!=="object"||t===null)return"others";if(globalThis.Buffer?.isBuffer(t))return"buffer";let r=Nn.call(t);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(t.byteLength)&&Number.isInteger(t.byteOffset)&&Nn.call(t.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:Nn}=Object.prototype,dt=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var Ln=()=>{};var Dn=t=>{throw new Error(`Streams in object mode are not supported: ${String(t)}`)},Un=t=>t.length;async function sr(t,e){return Pn(t,bh,e)}var ph=()=>({contents:new ArrayBuffer(0)}),mh=t=>yh.encode(t),yh=new TextEncoder,kn=t=>new Uint8Array(t),Mn=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),Eh=(t,e)=>t.slice(0,e),_h=(t,{contents:e,length:r},s)=>{let n=Fn()?Th(e,s):gh(e,s);return new Uint8Array(n).set(t,r),n},gh=(t,e)=>{if(e<=t.byteLength)return t;let r=new ArrayBuffer(qn(e));return new Uint8Array(r).set(new Uint8Array(t),0),r},Th=(t,e)=>{if(e<=t.maxByteLength)return t.resize(e),t;let r=new ArrayBuffer(e,{maxByteLength:qn(e)});return new Uint8Array(r).set(new Uint8Array(t),0),r},qn=t=>Hn**Math.ceil(Math.log(t)/Math.log(Hn)),Hn=2,wh=({contents:t,length:e})=>Fn()?t:t.slice(0,e),Fn=()=>"resize"in ArrayBuffer.prototype,bh={init:ph,convertChunk:{string:mh,buffer:kn,arrayBuffer:kn,dataView:Mn,typedArray:Mn,others:Dn},getSize:Un,truncateChunk:Eh,addChunk:_h,getFinalChunk:Ln,finalize:wh};async function lt(t,e){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return vn(await sr(t,e))}catch(r){throw r.bufferedData!==void 0&&(r.bufferedData=vn(r.bufferedData)),r}}var vn=t=>globalThis.Buffer.from(t);Object.assign(De,{on:jn.on,finished:Bn.finished});var yt=M(Gn(),1);var ir=require("buffer"),pt=(t,e=!0)=>{if(t==null)return"null";if(typeof t=="string")return JSON.stringify(e&&t.startsWith(":")?`:${t}`:t);if(ir.Buffer.isBuffer(t))return JSON.stringify(`:base64:${t.toString("base64")}`);if(t?.toJSON&&(t=t.toJSON()),typeof t=="object"){let r="",s=Array.isArray(t);r=s?"[":"{";let n=!0;for(let i in t){let o=typeof t[i]=="function"||!s&&t[i]===void 0;!Object.hasOwn(t,i)||o||(n||(r+=","),n=!1,s?r+=pt(t[i],e):t[i]!==void 0&&(r+=`${pt(i,!1)}:${pt(t[i],e)}`))}return r+=s?"]":"}",r}return JSON.stringify(t)},or=t=>pt(t,!0),ar=t=>JSON.parse(t,(e,r)=>typeof r=="string"?r.startsWith(":base64:")?ir.Buffer.from(r.slice(8),"base64"):r.startsWith(":")?r.slice(1):r:r);var Ph=class{_eventListeners;_maxListeners;constructor(){this._eventListeners=new Map,this._maxListeners=100}maxListeners(){return this._maxListeners}addListener(t,e){this.on(t,e)}on(t,e){this._eventListeners.has(t)||this._eventListeners.set(t,[]);let r=this._eventListeners.get(t);return r&&(r.length>=this._maxListeners&&console.warn(`MaxListenersExceededWarning: Possible event memory leak detected. ${r.length+1} ${t} listeners added. Use setMaxListeners() to increase limit.`),r.push(e)),this}removeListener(t,e){this.off(t,e)}off(t,e){let r=this._eventListeners.get(t)??[],s=r.indexOf(e);s!==-1&&r.splice(s,1),r.length===0&&this._eventListeners.delete(t)}once(t,e){let r=(...s)=>{e(...s),this.off(t,r)};this.on(t,r)}emit(t,...e){let r=this._eventListeners.get(t);if(r&&r.length>0)for(let s of r)s(...e)}listeners(t){return this._eventListeners.get(t)??[]}removeAllListeners(t){t?this._eventListeners.delete(t):this._eventListeners.clear()}setMaxListeners(t){this._maxListeners=t}},cr=Ph,Ch=class extends cr{_hookHandlers;constructor(){super(),this._hookHandlers=new Map}addHandler(t,e){let r=this._hookHandlers.get(t);r?r.push(e):this._hookHandlers.set(t,[e])}removeHandler(t,e){let r=this._hookHandlers.get(t);if(r){let s=r.indexOf(e);s!==-1&&r.splice(s,1)}}trigger(t,e){let r=this._hookHandlers.get(t);if(r)for(let s of r)try{s(e)}catch(n){this.emit("error",new Error(`Error in hook handler for event "${t}": ${n.message}`))}}get handlers(){return new Map(this._hookHandlers)}},Lh=Ch,Dh=class extends cr{enabled=!0;hits=0;misses=0;sets=0;deletes=0;errors=0;constructor(t){super(),t!==void 0&&(this.enabled=t),this.reset()}hit(){this.enabled&&this.hits++}miss(){this.enabled&&this.misses++}set(){this.enabled&&this.sets++}delete(){this.enabled&&this.deletes++}hitsOrMisses(t){for(let e of t)e===void 0?this.miss():this.hit()}reset(){this.hits=0,this.misses=0,this.sets=0,this.deletes=0,this.errors=0}},Uh=Dh;var $n=["sqlite","postgres","mysql","mongo","redis","valkey","etcd"],Ue=class extends cr{opts;iterator;hooks=new Lh;stats=new Uh(!1);_ttl;_namespace;_store=new Map;_serialize=or;_deserialize=ar;_compression;_useKeyPrefix=!0;_throwOnErrors=!1;constructor(t,e){if(super(),e??={},t??={},this.opts={namespace:"keyv",serialize:or,deserialize:ar,emitErrors:!0,store:new Map,...e},t&&t.get?this.opts.store=t:this.opts={...this.opts,...t},this._store=this.opts.store??new Map,this._compression=this.opts.compression,this._serialize=this.opts.serialize,this._deserialize=this.opts.deserialize,this.opts.namespace&&(this._namespace=this.opts.namespace),this._store){if(!this._isValidStorageAdapter(this._store))throw new Error("Invalid storage adapter");typeof this._store.on=="function"&&this._store.on("error",r=>this.emit("error",r)),this._store.namespace=this._namespace,typeof this._store[Symbol.iterator]=="function"&&this._store instanceof Map?this.iterator=this.generateIterator(this._store):"iterator"in this._store&&this._store.opts&&this._checkIterableAdapter()&&(this.iterator=this.generateIterator(this._store.iterator.bind(this._store)))}this.opts.stats&&(this.stats.enabled=this.opts.stats),this.opts.ttl&&(this._ttl=this.opts.ttl),this.opts.useKeyPrefix!==void 0&&(this._useKeyPrefix=this.opts.useKeyPrefix),this.opts.throwOnErrors!==void 0&&(this._throwOnErrors=this.opts.throwOnErrors)}get store(){return this._store}set store(t){if(this._isValidStorageAdapter(t))this._store=t,this.opts.store=t,typeof t.on=="function"&&t.on("error",e=>this.emit("error",e)),this._namespace&&(this._store.namespace=this._namespace),typeof t[Symbol.iterator]=="function"&&t instanceof Map?this.iterator=this.generateIterator(t):"iterator"in t&&t.opts&&this._checkIterableAdapter()&&(this.iterator=this.generateIterator(t.iterator?.bind(t)));else throw new Error("Invalid storage adapter")}get compression(){return this._compression}set compression(t){this._compression=t}get namespace(){return this._namespace}set namespace(t){this._namespace=t,this.opts.namespace=t,this._store.namespace=t,this.opts.store&&(this.opts.store.namespace=t)}get ttl(){return this._ttl}set ttl(t){this.opts.ttl=t,this._ttl=t}get serialize(){return this._serialize}set serialize(t){this.opts.serialize=t,this._serialize=t}get deserialize(){return this._deserialize}set deserialize(t){this.opts.deserialize=t,this._deserialize=t}get useKeyPrefix(){return this._useKeyPrefix}set useKeyPrefix(t){this._useKeyPrefix=t,this.opts.useKeyPrefix=t}get throwOnErrors(){return this._throwOnErrors}set throwOnErrors(t){this._throwOnErrors=t,this.opts.throwOnErrors=t}generateIterator(t){return async function*(){for await(let[r,s]of typeof t=="function"?t(this._store.namespace):t){let n=await this.deserializeData(s);if(!(this._useKeyPrefix&&this._store.namespace&&!r.includes(this._store.namespace))){if(typeof n.expires=="number"&&Date.now()>n.expires){this.delete(r);continue}yield[this._getKeyUnprefix(r),n.value]}}}.bind(this)}_checkIterableAdapter(){return $n.includes(this._store.opts.dialect)||$n.some(t=>this._store.opts.url.includes(t))}_getKeyPrefix(t){return!this._useKeyPrefix||!this._namespace?t:`${this._namespace}:${t}`}_getKeyPrefixArray(t){return!this._useKeyPrefix||!this._namespace?t:t.map(e=>`${this._namespace}:${e}`)}_getKeyUnprefix(t){return this._useKeyPrefix?t.split(":").splice(1).join(":"):t}_isValidStorageAdapter(t){return t instanceof Map||typeof t.get=="function"&&typeof t.set=="function"&&typeof t.delete=="function"&&typeof t.clear=="function"}async get(t,e){let{store:r}=this.opts,s=Array.isArray(t),n=s?this._getKeyPrefixArray(t):this._getKeyPrefix(t),i=h=>typeof h.expires=="number"&&Date.now()>h.expires;if(s)return e?.raw===!0?this.getMany(t,{raw:!0}):this.getMany(t,{raw:!1});this.hooks.trigger("preGet",{key:n});let o;try{o=await r.get(n)}catch(h){if(this.throwOnErrors)throw h}let a=typeof o=="string"||this.opts.compression?await this.deserializeData(o):o;if(a==null){this.stats.miss();return}if(i(a)){await this.delete(t),this.stats.miss();return}return this.hooks.trigger("postGet",{key:n,value:a}),this.stats.hit(),e?.raw?a:a.value}async getMany(t,e){let{store:r}=this.opts,s=this._getKeyPrefixArray(t),n=h=>typeof h.expires=="number"&&Date.now()>h.expires;if(this.hooks.trigger("preGetMany",{keys:s}),r.getMany===void 0){let h=s.map(async l=>{let _=await r.get(l),p=typeof _=="string"||this.opts.compression?await this.deserializeData(_):_;if(p!=null){if(n(p)){await this.delete(l);return}return e?.raw?p:p.value}}),d=(await Promise.allSettled(h)).map(l=>l.value);return this.hooks.trigger("postGetMany",d),d.length>0&&this.stats.hit(),d}let i=await r.getMany(s),o=[],a=[];for(let h in i){let f=i[h];if(typeof f=="string"&&(f=await this.deserializeData(f)),f==null){o.push(void 0);continue}if(n(f)){a.push(t[h]),o.push(void 0);continue}let d=e?.raw?f:f.value;o.push(d)}return a.length>0&&await this.deleteMany(a),this.hooks.trigger("postGetMany",o),o.length>0&&this.stats.hit(),o}async getRaw(t){let{store:e}=this.opts,r=this._getKeyPrefix(t);this.hooks.trigger("preGetRaw",{key:r});let s=await e.get(r);if(s==null){this.stats.miss();return}let n=typeof s=="string"||this.opts.compression?await this.deserializeData(s):s;if(n!==void 0&&n.expires!==void 0&&n.expires!==null&&n.expires<Date.now()){this.stats.miss(),await this.delete(t);return}return this.stats.hit(),this.hooks.trigger("postGetRaw",{key:r,value:n}),n}async getManyRaw(t){let{store:e}=this.opts,r=this._getKeyPrefixArray(t);if(t.length===0){let o=Array.from({length:t.length}).fill(void 0);return this.stats.misses+=t.length,this.hooks.trigger("postGetManyRaw",{keys:r,values:o}),o}let s=[];if(e.getMany===void 0){let o=r.map(async h=>{let f=await e.get(h);if(f!=null)return this.deserializeData(f)});s=(await Promise.allSettled(o)).map(h=>h.value)}else{let o=await e.getMany(r);for(let a of o)a!=null?s.push(await this.deserializeData(a)):s.push(void 0)}let n=[],i=o=>typeof o.expires=="number"&&Date.now()>o.expires;for(let[o,a]of s.entries())a!==void 0&&i(a)&&(n.push(r[o]),s[o]=void 0);return n.length>0&&await this.deleteMany(n),this.stats.hitsOrMisses(s),this.hooks.trigger("postGetManyRaw",{keys:r,values:s}),s}async set(t,e,r){let s={key:t,value:e,ttl:r};this.hooks.trigger("preSet",s);let n=this._getKeyPrefix(s.key);s.ttl??=this._ttl,s.ttl===0&&(s.ttl=void 0);let{store:i}=this.opts,o=typeof s.ttl=="number"?Date.now()+s.ttl:void 0;if(typeof s.value=="symbol")throw this.emit("error","symbol cannot be serialized"),new Error("symbol cannot be serialized");let a={value:s.value,expires:o},h=await this.serializeData(a),f=!0;try{let d=await i.set(n,h,s.ttl);typeof d=="boolean"&&(f=d)}catch(d){if(f=!1,this.emit("error",d),this._throwOnErrors)throw d}return this.hooks.trigger("postSet",{key:n,value:h,ttl:r}),this.stats.set(),f}async setMany(t){let e=[];try{if(this._store.setMany===void 0){let r=[];for(let n of t)r.push(this.set(n.key,n.value,n.ttl));e=await Promise.all(r)}else{let r=await Promise.all(t.map(async({key:s,value:n,ttl:i})=>{i??=this._ttl,i===0&&(i=void 0);let o=typeof i=="number"?Date.now()+i:void 0;if(typeof n=="symbol")throw this.emit("error","symbol cannot be serialized"),new Error("symbol cannot be serialized");let a={value:n,expires:o},h=await this.serializeData(a);return{key:this._getKeyPrefix(s),value:h,ttl:i}}));e=await this._store.setMany(r)}}catch(r){if(this.emit("error",r),this._throwOnErrors)throw r;e=t.map(()=>!1)}return e}async delete(t){let{store:e}=this.opts;if(Array.isArray(t))return this.deleteMany(t);let r=this._getKeyPrefix(t);this.hooks.trigger("preDelete",{key:r});let s=!0;try{let n=await e.delete(r);typeof n=="boolean"&&(s=n)}catch(n){if(s=!1,this.emit("error",n),this._throwOnErrors)throw n}return this.hooks.trigger("postDelete",{key:r,value:s}),this.stats.delete(),s}async deleteMany(t){try{let{store:e}=this.opts,r=this._getKeyPrefixArray(t);if(this.hooks.trigger("preDelete",{key:r}),e.deleteMany!==void 0)return await e.deleteMany(r);let s=r.map(async o=>e.delete(o)),i=(await Promise.all(s)).every(Boolean);return this.hooks.trigger("postDelete",{key:r,value:i}),i}catch(e){if(this.emit("error",e),this._throwOnErrors)throw e;return!1}}async clear(){this.emit("clear");let{store:t}=this.opts;try{await t.clear()}catch(e){if(this.emit("error",e),this._throwOnErrors)throw e}}async has(t){if(Array.isArray(t))return this.hasMany(t);let e=this._getKeyPrefix(t),{store:r}=this.opts;if(r.has!==void 0&&!(r instanceof Map))return r.has(e);let s;try{s=await r.get(e)}catch(n){if(this.emit("error",n),this._throwOnErrors)throw n;return!1}if(s){let n=await this.deserializeData(s);if(n)return n.expires===void 0||n.expires===null?!0:n.expires>Date.now()}return!1}async hasMany(t){let e=this._getKeyPrefixArray(t),{store:r}=this.opts;if(r.hasMany!==void 0)return r.hasMany(e);let s=[];for(let n of t)s.push(await this.has(n));return s}async disconnect(){let{store:t}=this.opts;if(this.emit("disconnect"),typeof t.disconnect=="function")return t.disconnect()}emit(t,...e){t==="error"&&!this.opts.emitErrors||super.emit(t,...e)}async serializeData(t){return this._serialize?this._compression?.compress?this._serialize({value:await this._compression.compress(t.value),expires:t.expires}):this._serialize(t):t}async deserializeData(t){if(!this._deserialize)return t;if(this._compression?.decompress&&typeof t=="string"){let e=await this._deserialize(t);return{value:await this._compression.decompress(e?.value),expires:e?.expires}}if(typeof t=="string")return this._deserialize(t)}};var kh=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function ke(t,e){if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(t),...kh]),s={};for(let n of r)n in e||(s[n]={get(){let i=t[n];return typeof i=="function"?i.bind(t):i},set(i){t[n]=i},enumerable:!0,configurable:!1});return Object.defineProperties(e,s),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}var Mh="text/plain",Hh="us-ascii",hr=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),qh=new Set(["https:","http:","file:"]),Fh=t=>{try{let{protocol:e}=new URL(t);return e.endsWith(":")&&!e.includes(".")&&!qh.has(e)}catch{return!1}},vh=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:s,data:n,hash:i}=r.groups,o=s.split(";");i=e?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let h=o.shift()?.toLowerCase()??"",d=[...o.map(l=>{let[_,p=""]=l.split("=").map(T=>T.trim());return _==="charset"&&(p=p.toLowerCase(),p===Hh)?"":`${_}${p?`=${p}`:""}`}).filter(Boolean)];return a&&d.push("base64"),(d.length>0||h&&h!==Mh)&&d.unshift(h),`data:${d.join(";")},${a?n.trim():n}${i?`#${i}`:""}`};function ur(t,e){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,removePath:!1,transformPath:!1,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),t=t.trim(),/^data:/i.test(t))return vh(t,e);if(Fh(t))return t;let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let n=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),e.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash?n.hash="":e.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,h="";for(;;){let d=o.exec(n.pathname);if(!d)break;let l=d[0],_=d.index,p=n.pathname.slice(a,_);h+=p.replace(/\/{2,}/g,"/"),h+=l,a=_+l.length}let f=n.pathname.slice(a,n.pathname.length);h+=f.replace(/\/{2,}/g,"/"),n.pathname=h}if(n.pathname)try{n.pathname=decodeURI(n.pathname).replace(/\\/g,"%5C")}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];hr(a,e.removeDirectoryIndex)&&(o=o.slice(0,-1),n.pathname=o.slice(1).join("/")+"/")}if(e.removePath&&(n.pathname="/"),e.transformPath&&typeof e.transformPath=="function"){let o=n.pathname.split("/").filter(Boolean),a=e.transformPath(o);n.pathname=a?.length>0?`/${a.join("/")}`:"/"}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let o of[...n.searchParams.keys()])hr(o,e.removeQueryParameters)&&n.searchParams.delete(o);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(n.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(let o of[...n.searchParams.keys()])hr(o,e.keepQueryParameters)||n.searchParams.delete(o);if(e.sortQueryParameters){let o=n.search;n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}let a=o.slice(1).split("&").filter(h=>h&&!h.includes("="));for(let h of a){let f=decodeURIComponent(h);n.search=n.search.replace(`?${f}=`,`?${f}`).replace(`&${f}=`,`&${f}`)}}e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,"")),e.removeExplicitPort&&n.port&&(n.port="");let i=t;return t=n.toString(),!e.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var Wn=require("node:stream");function pe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLowerCase(),r]))}var me=class extends Wn.Readable{statusCode;headers;body;url;complete;constructor({statusCode:e,headers:r,body:s,url:n}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");let i=!1;super({read(){if(!i){i=!0,this.push(s);return}this.push(null)}}),this.statusCode=e,this.headers=pe(r),this.body=s,this.url=n,this.complete=!0}};var mt=class extends Error{constructor(e){super(e.message),Object.defineProperties(this,Object.getOwnPropertyDescriptors(e))}},K=class extends Error{constructor(e){super(e.message),Object.defineProperties(this,Object.getOwnPropertyDescriptors(e))}};var lr=class{constructor(e,r){this.cache=new Ue({namespace:"cacheable-request"}),this.hooks=new Map,this.request=()=>(s,n)=>{let i;if(typeof s=="string")i=fr(Vn(s)),s={};else if(s instanceof Me.default.URL)i=fr(Vn(s.toString())),s={};else{let[_,...p]=(s.path??"").split("?"),T=p.length>0?`?${p.join("?")}`:"";i=fr({...s,pathname:_,search:T})}s={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...s,...zh(i)},s.headers=Object.fromEntries(jh(s.headers).map(([_,p])=>[_.toLowerCase(),p]));let o=new Yn.default,a=ur(Me.default.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),h=`${s.method}:${a}`;s.body&&s.method!==void 0&&["POST","PATCH","PUT"].includes(s.method)&&(s.body instanceof Et.default.Readable?s.cache=!1:h+=`:${Qn.default.createHash("md5").update(s.body).digest("hex")}`);let f=!1,d=!1,l=_=>{d=!0;let p=!1,T=()=>{},E=new Promise(m=>{T=()=>{p||(p=!0,m())}}),w=async m=>{if(f){m.status=m.statusCode;let g=yt.default.fromObject(f.cachePolicy),R=g.revalidatedPolicy(_,m);if(!R.modified){m.resume(),await new Promise(v=>{m.once("end",v)});let P=dr(R.policy.responseHeaders()),L=dr(g.responseHeaders()),j=["content-encoding","content-type","content-length","content-language","content-location","etag"];for(let v of j)L[v]!==void 0&&P[v]===void 0&&(P[v]=L[v]);m=new me({statusCode:f.statusCode,headers:P,body:f.body,url:f.url}),m.cachePolicy=R.policy,m.fromCache=!0}}m.fromCache||(m.cachePolicy=new yt.default(_,m,_),m.fromCache=!1);let N;_.cache&&m.cachePolicy.storable()?(N=Bh(m),(async()=>{try{let g=lt(m);await Promise.race([E,new Promise(j=>m.once("end",j)),new Promise(j=>m.once("close",j))]);let R=await g,P={url:m.url,statusCode:m.fromCache?f.statusCode:m.statusCode,body:R,cachePolicy:m.cachePolicy.toObject()},L=_.strictTtl?m.cachePolicy.timeToLive():void 0;if(_.maxTtl&&(L=L?Math.min(L,_.maxTtl):_.maxTtl),this.hooks.size>0)for(let j of this.hooks.keys())P=await this.runHook(j,P,m);await this.cache.set(h,P,L);}catch(g){o.emit("error",new K(g));}})()):_.cache&&f&&(async()=>{try{await this.cache.delete(h);}catch(g){o.emit("error",new K(g));}})(),o.emit("response",N??m),typeof n=="function"&&n(N??m)};try{let m=this.cacheRequest(_,w);m.once("error",T),m.once("abort",T),m.once("destroy",T),o.emit("request",m)}catch(m){o.emit("error",new mt(m))}};return(async()=>{let _=async T=>{await Promise.resolve();let E=T.cache?await this.cache.get(h):void 0;if(E===void 0&&!T.forceRefresh){l(T);return}let w=yt.default.fromObject(E.cachePolicy);if(w.satisfiesWithoutRevalidation(T)&&!T.forceRefresh){let m=dr(w.responseHeaders()),N=E.body,g=Buffer.from(N),R=new me({statusCode:E.statusCode,headers:m,body:g,url:E.url});R.cachePolicy=w,R.fromCache=!0,o.emit("response",R),typeof n=="function"&&n(R)}else w.satisfiesWithoutRevalidation(T)&&Date.now()>=w.timeToLive()&&T.forceRefresh?(await this.cache.delete(h),T.headers=w.revalidationHeaders(T),l(T)):(f=E,T.headers=w.revalidationHeaders(T),l(T))},p=T=>o.emit("error",new K(T));if(this.cache instanceof Ue){let T=this.cache;T.once("error",p),o.on("error",()=>{T.removeListener("error",p)}),o.on("response",()=>{T.removeListener("error",p)})}try{await _(s)}catch(T){s.automaticFailover&&!d&&l(s),o.emit("error",new K(T))}})(),o},this.addHook=(s,n)=>{this.hooks.has(s)||this.hooks.set(s,n)},this.removeHook=s=>this.hooks.delete(s),this.getHook=s=>this.hooks.get(s),this.runHook=async(s,...n)=>this.hooks.get(s)?.(...n),r&&(r instanceof Ue?this.cache=r:this.cache=new Ue({store:r,namespace:"cacheable-request"})),this.request=this.request.bind(this),this.cacheRequest=e}},jh=Object.entries,Bh=t=>{let e=new Et.PassThrough({autoDestroy:!1});return ke(t,e),t.pipe(e)},zh=t=>{let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e},fr=t=>({protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}),dr=t=>{let e=[];for(let r of Object.keys(t))e[r.toLowerCase()]=t[r];return e},Vn=t=>{let e=new Me.URL(t);return{protocol:e.protocol,slashes:!0,auth:e.username||e.password?`${e.username}:${e.password}`:void 0,host:e.host,port:e.port,hostname:e.hostname,hash:e.hash,search:e.search,query:Object.fromEntries(e.searchParams),pathname:e.pathname,path:e.pathname+e.search,href:e.href}},Kn=lr;var _t=require("node:stream"),ye=M(require("node:zlib"),1);var Gh=typeof ye.default.createZstdDecompress=="function";function pr(t){let e=(t.headers["content-encoding"]||"").toLowerCase(),r=["gzip","deflate","br"];if(Gh&&r.push("zstd"),!r.includes(e))return t;let s=!0,n={...t.headers},i=new _t.PassThrough({autoDestroy:!1});i.once("error",()=>{t.destroy()});function o(h){let f;e==="zstd"?f=ye.default.createZstdDecompress():e==="br"?f=ye.default.createBrotliDecompress():e==="deflate"&&h.length>0&&(h[0]&8)===0?f=ye.default.createInflateRaw():f=ye.default.createUnzip(),f.once("error",d=>{if(s&&!t.readable){i.end();return}i.destroy(d)}),a.pipe(f).pipe(i)}let a=new _t.Transform({transform(h,f,d){if(s===!1){d(null,h);return}s=!1,o(h),d(null,h)},flush(h){s&&i.end(),h()}});return delete n["content-encoding"],delete n["content-length"],i.headers=n,ke(t,i),t.pipe(a),i}var Er=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},C=(t,e,r)=>(Er(t,e,"read from private field"),r?r.call(t):e.get(t)),Q=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},He=(t,e,r,s)=>(Er(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),mr=(t,e,r)=>(Er(t,e,"access private method"),r),J=t=>typeof t=="function",$h=t=>J(t[Symbol.asyncIterator]),Jn=65536;function*si(t){if(t.byteLength<=Jn){yield t;return}let e=0;for(;e<t.byteLength;){let r=Math.min(t.byteLength-e,Jn),s=t.buffer.slice(e,e+r);e+=s.byteLength,yield new Uint8Array(s)}}async function*Wh(t){let e=t.getReader();for(;;){let{done:r,value:s}=await e.read();if(r)break;yield s}}async function*Xn(t){for await(let e of t)yield*si(e)}var Vh=t=>{if($h(t))return Xn(t);if(J(t.getReader))return Xn(Wh(t));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},Zn="abcdefghijklmnopqrstuvwxyz0123456789";function Qh(){let t=16,e="";for(;t--;)e+=Zn[Math.random()*Zn.length<<0];return e}var ni=t=>String(t).replace(/\r|\n/g,(e,r,s)=>e==="\r"&&s[r+1]!==`
`||e===`
`&&s[r-1]!=="\r"?`\r
`:e),Yh=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function ei(t){if(Yh(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}function ti(t,e){if(typeof e=="string"){for(let[r,s]of Object.entries(t))if(e.toLowerCase()===r.toLowerCase())return s}}var Kh=t=>new Proxy(t,{get:(e,r)=>ti(e,r),has:(e,r)=>ti(e,r)!==void 0}),Be=t=>!!(t&&J(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&J(t.append)&&J(t.getAll)&&J(t.entries)&&J(t[Symbol.iterator])),ri=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),Ee=t=>!!(t&&typeof t=="object"&&J(t.constructor)&&t[Symbol.toStringTag]==="File"&&J(t.stream)&&t.name!=null),Jh={enableAdditionalHeaders:!1},gt={writable:!1,configurable:!1},X,qe,Tt,Fe,re,ve,je,wt,bt,_r,yr,ii,oi=class{constructor(t,e,r){if(Q(this,bt),Q(this,yr),Q(this,X,`\r
`),Q(this,qe,void 0),Q(this,Tt,void 0),Q(this,Fe,"-".repeat(2)),Q(this,re,new TextEncoder),Q(this,ve,void 0),Q(this,je,void 0),Q(this,wt,void 0),!Be(t))throw new TypeError("Expected first argument to be a FormData instance.");let s;if(ei(e)?r=e:s=e,s||(s=Qh()),typeof s!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!ei(r))throw new TypeError("Expected options argument to be an object.");He(this,je,Array.from(t.entries())),He(this,wt,{...Jh,...r}),He(this,qe,C(this,re).encode(C(this,X))),He(this,Tt,C(this,qe).byteLength),this.boundary=`form-data-boundary-${s}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,He(this,ve,C(this,re).encode(`${C(this,Fe)}${this.boundary}${C(this,Fe)}${C(this,X).repeat(2)}`));let n={"Content-Type":this.contentType},i=mr(this,yr,ii).call(this);i&&(this.contentLength=i,n["Content-Length"]=i),this.headers=Kh(Object.freeze(n)),Object.defineProperties(this,{boundary:gt,contentType:gt,contentLength:gt,headers:gt})}*values(){for(let[t,e]of C(this,je)){let r=Ee(e)?e:C(this,re).encode(ni(e));yield mr(this,bt,_r).call(this,t,r),yield r,yield C(this,qe)}yield C(this,ve)}async*encode(){for(let t of this.values())Ee(t)?yield*Vh(t.stream()):yield*si(t)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};X=new WeakMap;qe=new WeakMap;Tt=new WeakMap;Fe=new WeakMap;re=new WeakMap;ve=new WeakMap;je=new WeakMap;wt=new WeakMap;bt=new WeakSet;_r=function(t,e){let r="";if(r+=`${C(this,Fe)}${this.boundary}${C(this,X)}`,r+=`Content-Disposition: form-data; name="${ri(t)}"`,Ee(e)&&(r+=`; filename="${ri(e.name)}"${C(this,X)}`,r+=`Content-Type: ${e.type||"application/octet-stream"}`),C(this,wt).enableAdditionalHeaders===!0){let s=Ee(e)?e.size:e.byteLength;s!=null&&!isNaN(s)&&(r+=`${C(this,X)}Content-Length: ${s}`)}return C(this,re).encode(`${r}${C(this,X).repeat(2)}`)};yr=new WeakSet;ii=function(){let t=0;for(let[e,r]of C(this,je)){let s=Ee(r)?r:C(this,re).encode(ni(r)),n=Ee(s)?s.size:s.byteLength;if(n==null||isNaN(n))return;t+=mr(this,bt,_r).call(this,e,s).byteLength,t+=n,t+=C(this,Tt)}return String(t+C(this,ve).byteLength)};var ci=require("node:events"),hi=require("node:util");function Xh(t){return"encrypted"in t}var Zh=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let s=typeof r.connect=="function",n=typeof r.secureConnect=="function",i=typeof r.close=="function",o=()=>{s&&r.connect(),Xh(t)&&n&&(t.authorized?r.secureConnect():t.once("secureConnect",r.secureConnect)),i&&t.once("close",r.close)};if(t.writable&&!t.connecting)o();else if(t.connecting)t.once("connect",o);else if(t.destroyed&&i){let a="_hadError"in t?!!t._hadError:!1;r.close(a)}},ai=Zh;var eu=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=o=>{o.once(ci.errorMonitor,()=>{e.error=Date.now(),e.phases.total=e.error-e.start})};r(t);let s=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",s);let n=o=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,hi.types.isProxy(o))return;if(o.writable&&!o.connecting){e.lookup=e.socket,e.connect=e.socket,o.__initial_connection_timings__?(e.phases.dns=o.__initial_connection_timings__.dnsPhase,e.phases.tcp=o.__initial_connection_timings__.tcpPhase,e.phases.tls=o.__initial_connection_timings__.tlsPhase,e.phases.tls!==void 0&&(e.secureConnect=e.socket)):(e.phases.dns=0,e.phases.tcp=0);return}let h=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};o.prependOnceListener("lookup",h),ai(o,{connect(){e.connect=Date.now(),e.lookup===void 0&&(o.removeListener("lookup",h),e.lookup=e.socket,e.phases.dns=0),e.phases.tcp=e.connect-e.lookup,e.phases.tcp===0&&e.phases.dns&&e.phases.dns>0&&(e.phases.dns=0),o.__initial_connection_timings__||(o.__initial_connection_timings__={dnsPhase:e.phases.dns,tcpPhase:e.phases.tcp})},secureConnect(){e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect,o.__initial_connection_timings__&&(o.__initial_connection_timings__.tlsPhase=e.phases.tls)}})};t.socket?n(t.socket):t.prependOnceListener("socket",n);let i=()=>{e.upload=Date.now();let o=e.secureConnect??e.connect;o!==void 0&&(e.phases.request=e.upload-o)};return t.writableFinished?i():t.prependOnceListener("finish",i),t.prependOnceListener("response",o=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,o.timings=e,r(o),o.prependOnceListener("end",()=>{t.off("abort",s),o.off("aborted",s),e.phases.total===void 0&&(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)}),o.prependOnceListener("aborted",s)}),e},ui=eu;var fi=require("node:util");function ze(t){return c.nodeStream(t)&&c.function(t.getBoundary)}async function gr(t,e){if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(c.string(t))return new TextEncoder().encode(t).byteLength;if(c.buffer(t))return t.length;if(c.typedArray(t))return t.byteLength;if(ze(t))try{return await(0,fi.promisify)(t.getLength.bind(t))()}catch(r){let s=r;throw new Error(`Cannot determine content-length for form-data with stream(s) of unknown length. This is a limitation of the \`form-data\` package. To fix this, either:
1. Use the \`knownLength\` option when appending streams:
   form.append('file', stream, {knownLength: 12345});
2. Switch to spec-compliant FormData (formdata-node package)
See: https://github.com/form-data/form-data#alternative-submission-methods
Original error: ${s.message}`)}}function Ge(t,e,r){let s={};for(let n of r){let i=(...o)=>{e.emit(n,...o)};s[n]=i,t.on(n,i)}return()=>{for(let[n,i]of Object.entries(s))t.off(n,i)}}var li=M(require("node:net"),1);function Tr(){let t=[];return{once(e,r,s){e.once(r,s),t.push({origin:e,event:r,fn:s})},unhandleAll(){for(let e of t){let{origin:r,event:s,fn:n}=e;r.removeListener(s,n)}t.length=0}}}var di=Symbol("reentry"),tu=()=>{},$e=class extends Error{event;name="TimeoutError";code="ETIMEDOUT";constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r}};function wr(t,e,r){if(di in t)return tu;t[di]=!0;let s=[],{once:n,unhandleAll:i}=Tr(),o=new Map,a=(w,m,N)=>{let g=setTimeout(m,w,w,N);g.unref?.();let R=()=>{o.set(N,!0),clearTimeout(g)};return s.push(R),R},{host:h,hostname:f}=r,d=(w,m)=>{setTimeout(()=>{o.has(m)||t.destroy(new $e(w,m))},0)},l=()=>{for(let w of s)w();i()};if(t.once("error",w=>{if(l(),t.listenerCount("error")===0)throw w}),e.request!==void 0){let w=a(e.request,d,"request");n(t,"response",m=>{n(m,"end",w)})}if(e.socket!==void 0){let{socket:w}=e,m=()=>{d(w,"socket")};t.setTimeout(w,m),s.push(()=>{t.removeListener("timeout",m)})}let _=e.lookup!==void 0,p=e.connect!==void 0,T=e.secureConnect!==void 0,E=e.send!==void 0;return(_||p||T||E)&&n(t,"socket",w=>{let{socketPath:m}=t;if(w.connecting){let N=!!(m??li.default.isIP(f??h??"")!==0);if(_&&!N&&w.address().address===void 0){let g=a(e.lookup,d,"lookup");n(w,"lookup",g)}if(p){let g=()=>a(e.connect,d,"connect");N?n(w,"connect",g()):n(w,"lookup",R=>{R===null&&n(w,"connect",g())})}T&&r.protocol==="https:"&&n(w,"connect",()=>{let g=a(e.secureConnect,d,"secureConnect");n(w,"secureConnect",g)})}if(E){let N=()=>a(e.send,d,"send");w.connecting?n(w,"connect",()=>{n(t,"upload-complete",N())}):n(t,"upload-complete",N())}}),e.response!==void 0&&n(t,"upload-complete",()=>{let w=a(e.response,d,"response");n(t,"response",w)}),e.read!==void 0&&n(t,"response",w=>{let m=a(e.read,d,"read");n(w,"end",m)}),l}function br(t){t=t;let e={protocol:t.protocol,hostname:c.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return c.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}var We=class{weakMap=new WeakMap;map=new Map;set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};var ru=({attemptCount:t,retryOptions:e,error:r,retryAfter:s,computedValue:n})=>{if(r.name==="RetryError")return 1;if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),a=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!a)return 0;if(r.response){if(s)return s>n?0:s;if(r.response.statusCode===413)return 0}let h=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+h},pi=ru;var So=M(require("node:process"),1),Ze=require("node:util"),xo=require("node:tls"),Io=M(require("node:https"),1),No=M(require("node:http"),1);var G=require("node:dns"),Ot=require("node:util"),Ti=M(require("node:os"),1),{Resolver:mi}=G.promises,_e=Symbol("cacheableLookupCreateConnection"),Rr=Symbol("cacheableLookupInstance"),yi=Symbol("expires"),su=typeof G.ALL=="number",Ei=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},nu=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},_i=()=>{let t=!1,e=!1;for(let r of Object.values(Ti.default.networkInterfaces()))for(let s of r)if(!s.internal&&(s.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},iu=t=>Symbol.iterator in t,Rt=t=>t.catch(e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT")return[];throw e}),gi={ttl:!0},ou={all:!0},au={all:!0,family:4},cu={all:!0,family:6},Ve=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:s=3600,errorTtl:n=.15,resolver:i=new mi,lookup:o=G.lookup}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=e,this._resolver=i,this._dnsLookup=o&&(0,Ot.promisify)(o),this.stats={cache:0,query:0},this._resolver instanceof mi?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,Ot.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,Ot.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=_i(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=s,s>0){let a=setInterval(()=>{this._hostnamesToFallback.clear()},s*1e3);a.unref&&a.unref(),this._fallbackInterval=a}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,s){if(typeof r=="function"?(s=r,r={}):typeof r=="number"&&(r={family:r}),!s)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(n=>{r.all?s(null,n):s(null,n.address,n.family,n.expires,n.ttl,n.source)},s)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let s=await this.query(e);if(r.family===6){let n=s.filter(i=>i.family===6);r.hints&G.V4MAPPED&&(su&&r.hints&G.ALL||n.length===0)?nu(s):s=n}else r.family===4&&(s=s.filter(n=>n.family===4));if(r.hints&G.ADDRCONFIG){let{_iface:n}=this;s=s.filter(i=>i.family===6?n.has6:n.has4)}if(s.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${e}`);throw n.code="ENOTFOUND",n.hostname=e,n}return r.all?s:s[0]}async query(e){let r="cache",s=await this._cache.get(e);if(s&&this.stats.cache++,!s){let n=this._pending[e];if(n)this.stats.cache++,s=await n;else{r="query";let i=this.queryAndCache(e);this._pending[e]=i,this.stats.query++;try{s=await i}finally{delete this._pending[e]}}}return s=s.map(n=>({...n,source:r})),s}async _resolve(e){let[r,s]=await Promise.all([Rt(this._resolve4(e,gi)),Rt(this._resolve6(e,gi))]),n=0,i=0,o=0,a=Date.now();for(let h of r)h.family=4,h.expires=a+h.ttl*1e3,n=Math.max(n,h.ttl);for(let h of s)h.family=6,h.expires=a+h.ttl*1e3,i=Math.max(i,h.ttl);return r.length>0?s.length>0?o=Math.min(n,i):o=n:o=i,{entries:[...r,...s],cacheTtl:o}}async _lookup(e){try{let[r,s]=await Promise.all([Rt(this._dnsLookup(e,au)),Rt(this._dnsLookup(e,cu))]);return{entries:[...r,...s],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3,r[yi]=Date.now()+s;try{await this._cache.set(e,r,s)}catch(n){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=n,i}}iu(this._cache)&&this._tick(s)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,ou);let r=await this._resolve(e);r.entries.length===0&&this._dnsLookup&&(r=await this._lookup(e),r.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let s=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,s),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let s=1/0,n=Date.now();for(let[i,o]of this._cache){let a=o[yi];n>=a?this._cache.delete(i):a<s&&(s=a)}s!==1/0&&this._tick(s-n)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Ei(e),_e in e)throw new Error("CacheableLookup has been already installed");e[_e]=e.createConnection,e[Rr]=this,e.createConnection=(r,s)=>("lookup"in r||(r.lookup=this.lookup),e[_e](r,s))}uninstall(e){if(Ei(e),e[_e]){if(e[Rr]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[_e],delete e[_e],delete e[Rr]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=_i(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};var Qr=M(Ro(),1);function Vr(t){let e=[],r=t.split(",");for(let s of r){let[n,...i]=s.split(";"),o=n.trim();if(o[0]!=="<"||o.at(-1)!==">")throw new Error(`Invalid format of the Link header reference: ${o}`);let a=o.slice(1,-1),h={};if(i.length===0)throw new Error(`Unexpected end of Link header parameters: ${i.join(";")}`);for(let f of i){let d=f.trim(),l=d.indexOf("=");if(l===-1)throw new Error(`Failed to parse Link header: ${t}`);let _=d.slice(0,l).trim(),p=d.slice(l+1).trim();h[_]=p}e.push({reference:a,parameters:h})}return e}var[Oo,Cf]=So.default.versions.node.split(".").map(Number);function Po(t,e){try{e()}catch(r){throw r instanceof Error&&(r.message=`Option '${t}': ${r.message}`),r}}function b(t,e,r){Po(t,()=>{O.any(e,r)})}function be(t,e){Po(t,()=>{O.plainObject(e)})}function Lf(t){for(let e in t){let r=t[e];b(`searchParams.${e}`,[c.string,c.number,c.boolean,c.null,c.undefined],r)}}var Df=new Map,Ct,Uf=()=>Ct||(Ct=new Ve,Ct),kf=t=>t?.[Symbol.toStringTag]==="QuickLRU"&&typeof t.evict=="function"?{get(e){return t.get(e)},set(e,r,s){return s===void 0?t.set(e,r):t.set(e,r,{maxAge:s}),!0},delete(e){return t.delete(e)},clear(){return t.clear()},has(e){return t.has(e)}}:t,Mf={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],beforeCache:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,copyPipedHeaders:!0,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100,enforceRetryRules:!1},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,serverName:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0,secureOptions:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(t){return t.request.options.responseType==="json"?t.body:JSON.parse(t.body)},paginate({response:t}){let e=t.headers.link;if(typeof e!="string"||e.trim()==="")return!1;let s=Vr(e).find(n=>n.parameters.rel==="next"||n.parameters.rel==='"next"');return s?{url:new URL(s.reference,t.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!1,strictContentLength:!1},Hf=t=>{let{hooks:e,retry:r}=t;return{...t,context:{...t.context},cacheOptions:{...t.cacheOptions},https:{...t.https},agent:{...t.agent},headers:{...t.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...t.timeout},hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],beforeCache:[...e.beforeCache],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new URLSearchParams(t.searchParams):void 0,pagination:{...t.pagination}}},qf=t=>{let{hooks:e,retry:r}=t,s={...t};return c.object(t.context)&&(s.context={...t.context}),c.object(t.cacheOptions)&&(s.cacheOptions={...t.cacheOptions}),c.object(t.https)&&(s.https={...t.https}),c.object(t.cacheOptions)&&(s.cacheOptions={...s.cacheOptions}),c.object(t.agent)&&(s.agent={...t.agent}),c.object(t.headers)&&(s.headers={...t.headers}),c.object(r)&&(s.retry={...r},c.array(r.errorCodes)&&(s.retry.errorCodes=[...r.errorCodes]),c.array(r.methods)&&(s.retry.methods=[...r.methods]),c.array(r.statusCodes)&&(s.retry.statusCodes=[...r.statusCodes])),c.object(t.timeout)&&(s.timeout={...t.timeout}),c.object(e)&&(s.hooks={...e},c.array(e.init)&&(s.hooks.init=[...e.init]),c.array(e.beforeRequest)&&(s.hooks.beforeRequest=[...e.beforeRequest]),c.array(e.beforeError)&&(s.hooks.beforeError=[...e.beforeError]),c.array(e.beforeRedirect)&&(s.hooks.beforeRedirect=[...e.beforeRedirect]),c.array(e.beforeRetry)&&(s.hooks.beforeRetry=[...e.beforeRetry]),c.array(e.beforeCache)&&(s.hooks.beforeCache=[...e.beforeCache]),c.array(e.afterResponse)&&(s.hooks.afterResponse=[...e.afterResponse])),t.searchParams&&(c.string(t.searchParams)?s.searchParams=t.searchParams:t.searchParams instanceof URLSearchParams?s.searchParams=new URLSearchParams(t.searchParams):c.object(t.searchParams)&&(s.searchParams={...t.searchParams})),c.object(t.pagination)&&(s.pagination={...t.pagination}),s},Ff=t=>{let e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter(r=>typeof r=="number");if(e.length>0)return Math.min(...e)},Ao=(t,e,r)=>{let s=t.hooks?.init;if(s)for(let n of s)n(e,r)},B=class t{_unixOptions;_internals;_merging=!1;_init;constructor(e,r,s){if(b("input",[c.string,c.urlInstance,c.object,c.undefined],e),b("options",[c.object,c.undefined],r),b("defaults",[c.object,c.undefined],s),e instanceof t||r instanceof t)throw new TypeError("The defaults must be passed as the third argument");this._internals=Hf(s?._internals??s??Mf),this._init=[...s?._init??[]];try{if(c.plainObject(e))try{this.merge(e),this.merge(r)}finally{this.url=e.url}else try{this.merge(r)}finally{if(r?.url!==void 0)if(e===void 0)this.url=r.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(n){throw n.options=this,n}}merge(e){if(e){if(e instanceof t){let r=[...e._init];for(let s of r)this.merge(s);return}e=qf(e),Ao(this,e,this),Ao(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let r=!1;for(let s in e){if(s==="mutableDefaults"||s==="handlers"||s==="url"||s==="preserveHooks")continue;if(!(s in this))throw new Error(`Unexpected option: ${s}`);let n=e[s];n!==void 0&&(this[s]=n,r=!0)}r&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){b("request",[c.function,c.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){be("agent",e);for(let r in e){if(!(r in this._internals.agent))throw new TypeError(`Unexpected agent option: ${r}`);b(`agent.${r}`,[c.object,c.undefined,s=>s===!1],e[r])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){O.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){be("timeout",e);for(let r in e){if(!(r in this._internals.timeout))throw new Error(`Unexpected timeout option: ${r}`);b(`timeout.${r}`,[c.number,c.undefined],e[r])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(b("prefixUrl",[c.string,c.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:r}=this._internals.url;this._internals.url.href=e+r.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){b("body",[c.string,c.buffer,c.nodeStream,c.generator,c.asyncGenerator,c.iterable,c.asyncIterable,Be,c.typedArray,c.undefined],e),c.nodeStream(e)&&O.truthy(e.readable),e!==void 0&&(O.undefined(this._internals.form),O.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){b("form",[c.plainObject,c.undefined],e),e!==void 0&&(O.undefined(this._internals.body),O.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(O.undefined(this._internals.body),O.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(b("url",[c.string,c.urlInstance,c.undefined],e),e===void 0){this._internals.url=void 0;return}if(c.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let r=e.toString(),n=c.urlInstance(e)||/^[a-z][a-z\d+.-]*:\/\//i.test(r)?r:`${this.prefixUrl}${r}`,i=new URL(n);if(this._internals.url=i,i.protocol==="unix:"&&(i.href=`http://unix${i.pathname}${i.search}`),i.protocol!=="http:"&&i.protocol!=="https:"){let o=new Error(`Unsupported protocol: ${i.protocol}`);throw o.code="ERR_UNSUPPORTED_PROTOCOL",o}if(this._internals.username&&(i.username=this._internals.username,this._internals.username=""),this._internals.password&&(i.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(i.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),i.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let o=/(?<socketPath>.+?):(?<path>.+)/.exec(`${i.pathname}${i.search}`);if(o?.groups){let{socketPath:a,path:h}=o.groups;this._unixOptions={socketPath:a,path:h,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(b("cookieJar",[c.object,c.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:r,getCookieString:s}=e;O.function(r),O.function(s),r.length===4&&s.length===0?(r=(0,Ze.promisify)(r.bind(e)),s=(0,Ze.promisify)(s.bind(e)),this._internals.cookieJar={setCookie:r,getCookieString:s}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){O.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){O.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new URLSearchParams),this._internals.searchParams)}set searchParams(e){b("searchParams",[c.string,c.object,c.undefined],e);let r=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,r&&(r.search="");return}let s=this.searchParams,n;if(c.string(e))n=new URLSearchParams(e);else if(e instanceof URLSearchParams)n=e;else{Lf(e),n=new URLSearchParams;for(let i in e){let o=e[i];o===null?n.append(i,""):o===void 0?s.delete(i):n.append(i,o)}}if(this._merging){for(let i of n.keys())s.delete(i);for(let[i,o]of n)s.append(i,o)}else r?r.search=s.toString():this._internals.searchParams=s}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){b("dnsLookup",[c.function,c.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){b("dnsCache",[c.object,c.boolean,c.undefined],e),e===!0?this._internals.dnsCache=Uf():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){O.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){O.object(e);for(let r in e){if(!(r in this._internals.hooks))throw new Error(`Unexpected hook event: ${r}`);let s=r,n=e[s];if(b(`hooks.${r}`,[c.array,c.undefined],n),n)for(let i of n)O.function(i);if(this._merging)n&&this._internals.hooks[s].push(...n);else{if(!n)throw new Error(`Missing hook event: ${r}`);this._internals.hooks[r]=[...n]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){b("followRedirect",[c.boolean,c.function],e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){O.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){b("cache",[c.object,c.string,c.boolean,c.undefined],e),e===!0?this._internals.cache=Df:e===!1?this._internals.cache=void 0:this._internals.cache=kf(e)}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){O.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,r=e?e.username:this._internals.username;return decodeURIComponent(r)}set username(e){O.string(e);let r=this._internals.url,s=encodeURIComponent(e);r?r.username=s:this._internals.username=s}get password(){let e=this._internals.url,r=e?e.password:this._internals.password;return decodeURIComponent(r)}set password(e){O.string(e);let r=this._internals.url,s=encodeURIComponent(e);r?r.password=s:this._internals.password=s}get http2(){return this._internals.http2}set http2(e){O.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){O.boolean(e),this._internals.allowGetBody=e}get copyPipedHeaders(){return this._internals.copyPipedHeaders}set copyPipedHeaders(e){O.boolean(e),this._internals.copyPipedHeaders=e}get headers(){return this._internals.headers}set headers(e){be("headers",e),this._merging?Object.assign(this._internals.headers,pe(e)):this._internals.headers=pe(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){O.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){O.function(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){O.function(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(be("retry",e),b("retry.calculateDelay",[c.function,c.undefined],e.calculateDelay),b("retry.maxRetryAfter",[c.number,c.undefined],e.maxRetryAfter),b("retry.limit",[c.number,c.undefined],e.limit),b("retry.methods",[c.array,c.undefined],e.methods),b("retry.statusCodes",[c.array,c.undefined],e.statusCodes),b("retry.errorCodes",[c.array,c.undefined],e.errorCodes),b("retry.noise",[c.number,c.undefined],e.noise),b("retry.enforceRetryRules",[c.boolean,c.undefined],e.enforceRetryRules),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let s in e)if(!(s in this._internals.retry))throw new Error(`Unexpected retry option: ${s}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:r}=this._internals;r.methods=[...new Set(r.methods.map(s=>s.toUpperCase()))],r.statusCodes=[...new Set(r.statusCodes)],r.errorCodes=[...new Set(r.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){b("localAddress",[c.string,c.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){O.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){b("createConnection",[c.function,c.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){be("cacheOptions",e),b("cacheOptions.shared",[c.boolean,c.undefined],e.shared),b("cacheOptions.cacheHeuristic",[c.number,c.undefined],e.cacheHeuristic),b("cacheOptions.immutableMinTimeToLive",[c.number,c.undefined],e.immutableMinTimeToLive),b("cacheOptions.ignoreCargoCult",[c.boolean,c.undefined],e.ignoreCargoCult);for(let r in e)if(!(r in this._internals.cacheOptions))throw new Error(`Cache option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){be("https",e),b("https.rejectUnauthorized",[c.boolean,c.undefined],e.rejectUnauthorized),b("https.checkServerIdentity",[c.function,c.undefined],e.checkServerIdentity),b("https.serverName",[c.string,c.undefined],e.serverName),b("https.certificateAuthority",[c.string,c.object,c.array,c.undefined],e.certificateAuthority),b("https.key",[c.string,c.object,c.array,c.undefined],e.key),b("https.certificate",[c.string,c.object,c.array,c.undefined],e.certificate),b("https.passphrase",[c.string,c.undefined],e.passphrase),b("https.pfx",[c.string,c.buffer,c.array,c.undefined],e.pfx),b("https.alpnProtocols",[c.array,c.undefined],e.alpnProtocols),b("https.ciphers",[c.string,c.undefined],e.ciphers),b("https.dhparam",[c.string,c.buffer,c.undefined],e.dhparam),b("https.signatureAlgorithms",[c.string,c.undefined],e.signatureAlgorithms),b("https.minVersion",[c.string,c.undefined],e.minVersion),b("https.maxVersion",[c.string,c.undefined],e.maxVersion),b("https.honorCipherOrder",[c.boolean,c.undefined],e.honorCipherOrder),b("https.tlsSessionLifetime",[c.number,c.undefined],e.tlsSessionLifetime),b("https.ecdhCurve",[c.string,c.undefined],e.ecdhCurve),b("https.certificateRevocationLists",[c.string,c.buffer,c.array,c.undefined],e.certificateRevocationLists),b("https.secureOptions",[c.number,c.undefined],e.secureOptions);for(let r in e)if(!(r in this._internals.https))throw new Error(`HTTPS option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");b("encoding",[c.string,c.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){O.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){O.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){O.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){O.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){b("maxHeaderSize",[c.number,c.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){O.boolean(e),this._internals.enableUnixSockets=e}get strictContentLength(){return this._internals.strictContentLength}set strictContentLength(e){O.boolean(e),this._internals.strictContentLength=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,r){return(0,Ze.inspect)(this._internals,r)}createNativeRequestOptions(){let e=this._internals,r=e.url,s;r.protocol==="https:"?e.http2?s={...e.agent,http2:e.agent.http2??Qr.default.globalAgent}:s=e.agent.https:s=e.agent.http;let{https:n}=e,{pfx:i}=n;return c.array(i)&&c.plainObject(i[0])&&(i=i.map(o=>({buf:o.buffer,passphrase:o.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:n.alpnProtocols,ca:n.certificateAuthority,cert:n.certificate,key:n.key,passphrase:n.passphrase,pfx:n.pfx,rejectUnauthorized:n.rejectUnauthorized,checkServerIdentity:n.checkServerIdentity??xo.checkServerIdentity,servername:n.serverName,ciphers:n.ciphers,honorCipherOrder:n.honorCipherOrder,minVersion:n.minVersion,maxVersion:n.maxVersion,sigalgs:n.signatureAlgorithms,sessionTimeout:n.tlsSessionLifetime,dhparam:n.dhparam,ecdhCurve:n.ecdhCurve,crl:n.certificateRevocationLists,secureOptions:n.secureOptions,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:s,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?Ff(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:r}=this._internals;return!r&&e?this.getFallbackRequestFunction():r}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(Oo<15||Oo===15&&Cf<10){let r=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw r.code="EUNSUPPORTED",r}return Qr.default.auto}return Io.default.request}return No.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}};var Oe=t=>{let{statusCode:e}=t,{followRedirect:r}=t.request.options,n=(typeof r=="function"?r(t):r)?299:399;return e>=200&&e<=n||e===304},Re=class extends x{name="ParseError";code="ERR_BODY_PARSE_FAILURE";constructor(e,r){let{options:s}=r.request;super(`${e.message} in "${s.url.toString()}"`,e,r.request)}},Yr=(t,e,r,s)=>{let{rawBody:n}=t;try{if(e==="text")return n.toString(s);if(e==="json")return n.length===0?"":r(n.toString(s));if(e==="buffer")return n}catch(i){throw new Re(i,t)}throw new Re({message:`Unknown body type '${e}'`,name:"Error"},t)};function vf(t){return t.writable&&!t.writableEnded}var Co=vf;function et(t){return t.protocol==="unix:"||t.hostname==="unix"}function Kr(t){if(et(t))return/(?<socketPath>.+?):(?<path>.+)/.exec(`${t.pathname}${t.search}`)?.groups?.socketPath}var Lo=require("node:crypto"),ee=M(require("node:diagnostics_channel"),1),F={requestCreate:ee.default.channel("got:request:create"),requestStart:ee.default.channel("got:request:start"),responseStart:ee.default.channel("got:response:start"),responseEnd:ee.default.channel("got:response:end"),retry:ee.default.channel("got:request:retry"),error:ee.default.channel("got:request:error"),redirect:ee.default.channel("got:response:redirect")};function Do(){return(0,Lo.randomUUID)()}function Uo(t){F.requestCreate.hasSubscribers&&F.requestCreate.publish(t)}function ko(t){F.requestStart.hasSubscribers&&F.requestStart.publish(t)}function Mo(t){F.responseStart.hasSubscribers&&F.responseStart.publish(t)}function Ho(t){F.responseEnd.hasSubscribers&&F.responseEnd.publish(t)}function qo(t){F.retry.hasSubscribers&&F.retry.publish(t)}function Fo(t){F.error.hasSubscribers&&F.error.publish(t)}function vo(t){F.redirect.hasSubscribers&&F.redirect.publish(t)}var jf=c.string(Se.default.versions.brotli),Bf=c.string(Se.default.versions.zstd),jo=new Set(["GET","HEAD"]),zf=new Set(["OPTIONS","DELETE","PATCH"]),Jr=new We,Gf=new Set([300,301,302,303,304,307,308]),Bo=new WeakSet,$f=["socket","connect","continue","information","upgrade"],Lt=()=>{},ie=class t extends zo.Duplex{["constructor"];_noPipe;options;response;requestUrl;redirectUrls=[];retryCount=0;_stopReading=!1;_stopRetry=Lt;_downloadedSize=0;_uploadedSize=0;_pipedServerResponses=new Set;_request;_responseSize;_bodySize;_unproxyEvents=Lt;_isFromCache;_triggerRead=!1;_jobs=[];_cancelTimeouts=Lt;_removeListeners=Lt;_nativeResponse;_flushed=!1;_aborted=!1;_expectedContentLength;_compressedBytesCount;_requestId=Do();_requestInitialized=!1;constructor(e,r,s){super({autoDestroy:!1,highWaterMark:0}),this.on("pipe",i=>{this.options.copyPipedHeaders&&i?.headers&&Object.assign(this.options.headers,i.headers)}),this.on("newListener",i=>{if(i==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new B(e,r,s),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url,Uo({requestId:this._requestId,url:this.options.url?.toString()??"",method:this.options.method})}catch(i){let{options:o}=i;o&&(this.options=o),this.flush=async()=>{this.flush=async()=>{},Se.default.nextTick(()=>{if(this.options)this._beforeError(i);else{let a=i instanceof x?i:new x(i.message,i,this);this.destroy(a)}})};return}let{body:n}=this.options;if(c.nodeStream(n)&&n.once("error",i=>{this._flushed?this._beforeError(new Ce(i,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new Ce(i,this))}}),this.options.signal){let i=()=>{this.options.signal?.reason?.name==="TimeoutError"?this.destroy(new Le(this.options.signal.reason,this.timings,this)):this.destroy(new ut(this))};this.options.signal.aborted?i():(this.options.signal.addEventListener("abort",i),this._removeListeners=()=>{this.options.signal?.removeEventListener("abort",i)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:r,options:s}=this,n=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof x||(e=new x(e.message,e,this));let i=e;(async()=>{if(r?.readable&&!r.rawBody&&!this._request?.socket?.destroyed&&(r.setEncoding(this.readableEncoding),await this._setRawBody(r)&&(r.body=r.rawBody.toString())),this.listenerCount("retry")!==0){let o;try{let a;r&&"retry-after"in r.headers&&(a=Number(r.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(r.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3);let h=s.retry,f=pi({attemptCount:n,retryOptions:h,error:i,retryAfter:a,computedValue:h.maxRetryAfter??s.timeout.request??Number.POSITIVE_INFINITY});h.enforceRetryRules&&f===0?o=0:o=await h.calculateDelay({attemptCount:n,retryOptions:h,error:i,retryAfter:a,computedValue:f})}catch(a){this._error(new x(a.message,a,this));return}if(o){if(await new Promise(d=>{let l=setTimeout(d,o);this._stopRetry=()=>{clearTimeout(l),d()}}),this.destroyed)return;let a=this.options.body;try{for(let d of this.options.hooks.beforeRetry)await d(i,this.retryCount+1)}catch(d){this._error(new x(d.message,d,this));return}if(this.destroyed)return;let h=this.options.body;if(a!==h){let d=a;if(this.options.body=void 0,this.destroy(),c.nodeStream(d)&&d!==h&&d.destroy(),c.nodeStream(h)&&(h.readableEnded||h.destroyed))throw new TypeError("The reassigned stream body must be readable. Ensure you provide a fresh, readable stream in the beforeRetry hook.");this.options._internals.body=h}else this.destroy();qo({requestId:this._requestId,retryCount:this.retryCount+1,error:i,delay:o}),this.emit("retry",this.retryCount+1,e,d=>{let l=new t(s.url,d,s);return l.retryCount=this.retryCount+1,Se.default.nextTick(()=>{l.flush()}),l});return}}this._error(i)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let r;for(;(r=e.read())!==null;){this._downloadedSize+=r.length;let s=this.downloadProgress;s.percent<1&&this.emit("downloadProgress",s),this.push(r)}}}_write(e,r,s){let n=()=>{this._writeRequest(e,r,s)};this._requestInitialized?n():this._jobs.push(n)}_final(e){let r=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(s=>{this._request?._writableState?.errored||(s||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request?.emit("upload-complete")),e(s))})};this._requestInitialized?r():this._jobs.push(r)}_destroy(e,r){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){let{body:n}=this.options;c.nodeStream(n)&&n.destroy()}this._request&&this._request.destroy();let s=this._request?.timings;s&&c.undefined(s.end)&&!c.undefined(s.response)&&c.undefined(s.error)&&c.undefined(s.abort)&&(s.end=Date.now(),c.undefined(s.phases.total)&&(s.phases.download=s.end-s.response,s.phases.total=s.end-s.start)),e!==null&&!c.undefined(e)&&!(e instanceof Error&&Bo.has(e))&&!(e instanceof x)&&(e=e instanceof Error?new x(e.message,e,this):new x(String(e),{},this)),r(e)}pipe(e,r){return e instanceof tt.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,r)}unpipe(e){return e instanceof tt.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}_checkContentLengthMismatch(){if(this.options.strictContentLength&&this._expectedContentLength!==void 0){let e=this._compressedBytesCount??this._downloadedSize;if(e!==this._expectedContentLength)return this._beforeError(new le({message:`Content-Length mismatch: expected ${this._expectedContentLength} bytes, received ${e} bytes`,name:"Error",code:"ERR_HTTP_CONTENT_LENGTH_MISMATCH"},this)),!0}return!1}async _finalizeBody(){let{options:e}=this,{headers:r}=e,s=!c.undefined(e.form),n=!c.undefined(e.json),i=!c.undefined(e.body),o=jo.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(s||n||i){if(o)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let a=!c.string(r["content-type"]);if(i){if(Be(e.body)){let f=new oi(e.body);a&&(r["content-type"]=f.headers["Content-Type"]),"Content-Length"in f.headers&&(r["content-length"]=f.headers["Content-Length"]),e.body=f.encode()}ze(e.body)&&a&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(s){a&&(r["content-type"]="application/x-www-form-urlencoded");let{form:f}=e;e.form=void 0,e.body=new URLSearchParams(f).toString()}else{a&&(r["content-type"]="application/json");let{json:f}=e;e.json=void 0,e.body=e.stringifyJson(f)}let h=await gr(e.body,e.headers);c.undefined(r["content-length"])&&c.undefined(r["transfer-encoding"])&&!o&&!c.undefined(h)&&(r["content-length"]=String(h))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(r["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:r}=this,{url:s}=r;this._nativeResponse=e;let n=e.statusCode,{method:i}=r,o=i==="HEAD"||n>=100&&n<200||n===204||n===205||n===304;r.decompress&&!o&&(r.strictContentLength&&(this._compressedBytesCount=0,this._nativeResponse.on("data",d=>{this._compressedBytesCount+=ft(d)})),e=pr(e));let a=e;a.statusMessage=a.statusMessage||tt.default.STATUS_CODES[n],a.url=r.url.toString(),a.requestUrl=this.requestUrl,a.redirectUrls=this.redirectUrls,a.request=this,a.isFromCache=this._nativeResponse.fromCache??!1,a.ip=this.ip,a.retryCount=this.retryCount,a.ok=Oe(a),this._isFromCache=a.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=a,Mo({requestId:this._requestId,url:a.url,statusCode:n,headers:e.headers,isFromCache:a.isFromCache}),e.once("error",d=>{this._aborted=!0,e.destroy(),this._beforeError(new le(d,this))}),e.once("aborted",()=>{this._aborted=!0,this._checkContentLengthMismatch()||this._beforeError(new le({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))});let h=e.headers["set-cookie"];if(c.object(r.cookieJar)&&h){let d=h.map(async l=>r.cookieJar.setCookie(l,s.toString()));r.ignoreInvalidCookies&&(d=d.map(async l=>{try{await l}catch{}}));try{await Promise.all(d)}catch(l){this._beforeError(l);return}}if(this.isAborted)return;if(e.headers.location&&Gf.has(n)&&(typeof r.followRedirect=="function"?r.followRedirect(a):r.followRedirect)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=r.maxRedirects){this._beforeError(new ct(this));return}this._request=void 0,this._downloadedSize=0;let l=new B(void 0,void 0,this.options),_=n===303&&l.method!=="GET"&&l.method!=="HEAD",p=n!==307&&n!==308,T=l.methodRewriting&&p;(_||T)&&(l.method="GET",l.body=void 0,l.json=void 0,l.form=void 0,delete l.headers["content-length"]);try{let E=Ae.Buffer.from(e.headers.location,"binary").toString(),w=new URL(E,s);if(!et(s)&&et(w)){this._beforeError(new x("Cannot redirect to UNIX socket",{},this));return}w.hostname!==s.hostname||w.port!==s.port||Kr(s)!==Kr(w)?("host"in l.headers&&delete l.headers.host,"cookie"in l.headers&&delete l.headers.cookie,"authorization"in l.headers&&delete l.headers.authorization,(l.username||l.password)&&(l.username="",l.password="")):(w.username=l.username,w.password=l.password),this.redirectUrls.push(w),l.url=w;for(let N of l.hooks.beforeRedirect)await N(l,a);vo({requestId:this._requestId,fromUrl:s.toString(),toUrl:w.toString(),statusCode:n}),this.emit("redirect",l,a),this.options=l,await this._makeRequest()}catch(E){this._beforeError(E);return}return}if(r.isStream&&r.throwHttpErrors&&!Oe(a)){this._beforeError(new V(a));return}let f=e!==this._nativeResponse;if(!o&&(!f||r.strictContentLength)){let d=this._nativeResponse.headers["content-length"];if(d!==void 0){let l=Number(d);!Number.isNaN(l)&&l>=0&&(this._expectedContentLength=l)}}if(e.once("end",()=>{this._checkContentLengthMismatch()||(this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress),Ho({requestId:this._requestId,url:a.url,statusCode:n,bodySize:this._downloadedSize,timings:this.timings}),this.push(null))}),this.emit("downloadProgress",this.downloadProgress),e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let d of this._pipedServerResponses){if(d.headersSent)continue;let l=e!==this._nativeResponse;for(let _ in e.headers)if(Object.hasOwn(e.headers,_)){let p=e.headers[_];if(l&&(_==="content-encoding"||_==="content-length"))continue;p!==void 0&&d.setHeader(_,p)}d.statusCode=n}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let r=await e.toArray(),s=ae(r.at(0))?Ae.Buffer.concat(r):Ae.Buffer.from(r.join(""));if(!this.isAborted)return this.response.rawBody=s,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:s,url:n}=r;ko({requestId:this._requestId,url:n?.toString()??"",method:r.method,headers:r.headers}),ui(e),this._cancelTimeouts=wr(e,s,n),this.options.http2&&(e.removeAllListeners("timeout"),e.once("socket",o=>{o.removeAllListeners("timeout")}));let i=r.cache?"cacheableResponse":"response";e.once(i,o=>{this._onResponse(o)}),e.once("error",o=>{this._aborted=!0,e.destroy(),o=o instanceof $e?new Le(o,this.timings,this):new x(o.message,o,this),this._beforeError(o)}),this._unproxyEvents=Ge(e,this,$f),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((r,s)=>{super.write(e,n=>{if(n){s(n);return}r()})})}_sendBody(){let{body:e}=this.options,r=this.redirectUrls.length===0?this:this._request??this;if(c.nodeStream(e))e.pipe(r);else if(c.buffer(e))this._writeRequest(e,void 0,()=>{}),r.end();else if(c.typedArray(e)){let s=e,n=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);this._writeRequest(n,void 0,()=>{}),r.end()}else if(c.asyncIterable(e)||c.iterable(e)&&!c.string(e)&&!ae(e))(async()=>{try{for await(let s of e)await this._asyncWrite(s);super.end()}catch(s){this._beforeError(s)}})();else if(c.undefined(e)){let s=jo.has(this.options.method)&&!(this.options.method==="GET"&&this.options.allowGetBody),n=zf.has(this.options.method);((this._noPipe??!1)||s||r!==this||n)&&r.end()}else this._writeRequest(e,void 0,()=>{}),r.end()}_prepareCache(e){if(Jr.has(e))return;let r=new Kn(((s,n)=>{let i=n&&(a=>{let{beforeCacheHooks:h,gotRequest:f}=s;if(!h||h.length===0){n(a);return}try{for(let d of h){let l=d(a);if(l===!1){a.headers["cache-control"]="no-cache, no-store, must-revalidate",a.headers.pragma="no-cache",a.headers.expires="0",n(a);return}if(c.promise(l))throw new TypeError("beforeCache hooks must be synchronous. The hook returned a Promise, but this hook must return synchronously. If you need async logic, use beforeRequest hook instead.");if(l!==void 0)throw new TypeError("beforeCache hook must return false or undefined. To modify the response, mutate it directly.")}}catch(d){if(f){f._beforeError(d instanceof x?d:new x(d.message,d,f));return}console.error("Got: beforeCache hook error (request context unavailable):",d),n(a);return}n(a)}),o=s._request(s,i);return c.promise(o)&&(o.once=(a,h)=>{if(a==="error")(async()=>{try{await o}catch(f){h(f)}})();else if(a==="abort"||a==="destroy")(async()=>{try{(await o).once(a,h)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${a}`);return o}),o}),e);Jr.set(e,r.request())}async _createCacheableRequest(e,r){return new Promise((s,n)=>{Object.assign(r,br(e));let i,o=Jr.get(r.cache)(r,async a=>{if(a._readableState.autoDestroy=!1,i){let h=()=>{a.req?a.complete=a.req.res.complete:a.complete===void 0&&(a.complete=!0)};a.prependOnceListener("end",h),h(),(await i).emit("cacheableResponse",a)}s(a)});o.once("error",n),o.once("request",async a=>{i=a,s(i)})})}async _makeRequest(){let{options:e}=this,{headers:r,username:s,password:n}=e,i=e.cookieJar;for(let f in r)if(c.undefined(r[f]))delete r[f];else if(c.null(r[f]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${f}\` header`);if(e.decompress&&c.undefined(r["accept-encoding"])){let f=["gzip","deflate"];jf&&f.push("br"),Bf&&f.push("zstd"),r["accept-encoding"]=f.join(", ")}if(s||n){let f=Ae.Buffer.from(`${s}:${n}`).toString("base64");r.authorization=`Basic ${f}`}if(i){let f=await i.getCookieString(e.url.toString());c.nonEmptyString(f)&&(r.cookie=f)}let o;for(let f of e.hooks.beforeRequest){let d=await f(e,{retryCount:this.retryCount});if(!c.undefined(d)){o=()=>d;break}}o||=e.getRequestFunction();let a=e.url;if(this._requestOptions=e.createNativeRequestOptions(),e.cache){this._requestOptions._request=o,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._requestOptions.beforeCacheHooks=e.hooks.beforeCache,this._requestOptions.gotRequest=this;try{this._prepareCache(e.cache)}catch(f){throw new Pe(f,this)}}let h=e.cache?this._createCacheableRequest:o;try{let f=h(a,this._requestOptions);c.promise(f)&&(f=await f),c.undefined(f)&&(f=e.getFallbackRequestFunction()(a,this._requestOptions),c.promise(f)&&(f=await f)),Co(f)?this._onRequest(f):this.writableEnded?this._onResponse(f):(this.once("finish",()=>{this._onResponse(f)}),this._sendBody())}catch(f){throw f instanceof K?new Pe(f,this):f}}async _error(e){try{if(!(this.options&&e instanceof V&&!this.options.throwHttpErrors)){if(this.options){let r=this.options.hooks.beforeError;if(r.length>0){for(let s of r)if(e=await s(e),!(e instanceof Error))throw new TypeError(`The \`beforeError\` hook must return an Error instance. Received ${c.string(e)?"string":typeof e}.`);e instanceof x||Bo.add(e)}}}}catch(r){e=new x(r.message,r,this)}Fo({requestId:this._requestId,url:this.options?.url?.toString()??"",error:e,timings:this.timings}),this.destroy(e),this._noPipe&&Se.default.nextTick(()=>{this.emit("error",e)})}_writeRequest(e,r,s){if(!this._request||this._request.destroyed){s();return}this._request.write(e,r,n=>{if(!n&&!this._request.destroyed){let i=typeof e=="string"?Ae.Buffer.from(e,r):e;this._uploadedSize+=ft(i);let o=this.uploadProgress;o.percent<1&&this.emit("uploadProgress",o)}s(n)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}get isReadonly(){return!c.undefined(this.options?.body)||!c.undefined(this.options?.json)||!c.undefined(this.options?.form)}};var Dt=class extends x{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};var Wf=["request","response","redirect","uploadProgress","downloadProgress"];function Ut(t){let e,r,s,n=new Go.EventEmitter,i=!1,o=new de((h,f,d)=>{d(()=>{e.destroy()}),d.shouldReject=!1,d(()=>{i=!0,f(new Dt(e))});let l=_=>{d(()=>{});let p=t??new ie(void 0,void 0,s);p.retryCount=_,p._noPipe=!0,e=p,p.once("response",async m=>{let N=(m.headers["content-encoding"]??"").toLowerCase(),g=N==="gzip"||N==="deflate"||N==="br"||N==="zstd",{options:R}=p;if(g&&!R.decompress)m.body=m.rawBody;else try{m.body=Yr(m,R.responseType,R.parseJson,R.encoding)}catch(P){try{m.body=m.rawBody.toString()}catch(L){p._beforeError(new Re(L,m));return}if(Oe(m)){p._beforeError(P);return}}try{let P=R.hooks.afterResponse;for(let[L,j]of P.entries())if(m=await j(m,async v=>{let oe=v.preserveHooks??!1;throw R.merge(v),R.prefixUrl="",v.url&&(R.url=v.url),oe||(R.hooks.afterResponse=R.hooks.afterResponse.slice(0,L)),new ht(p)}),!(c.object(m)&&c.number(m.statusCode)&&"body"in m))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(P){p._beforeError(P);return}if(r=m,!Oe(m)){p._beforeError(new V(m));return}p.destroy(),i=!0,h(p.options.resolveBodyOnly?m.body:m)});let T=!1,E=m=>{if(o.isCanceled)return;if(!p._stopReading){p._beforeError(m);return}if(T)return;T=!0,i=!0;let{options:N}=p;if(m instanceof V&&!N.throwHttpErrors){let{response:g}=m;p.destroy(),h(p.options.resolveBodyOnly?g.body:g);return}f(m)};p.on("error",E);let w=p.options?.body;p.once("retry",(m,N)=>{if(t=void 0,i)return;let g=p.options.body;if(w===g&&c.nodeStream(g)){N.message="Cannot retry with consumed body stream",E(N);return}s=p.options,l(m)}),Ge(p,n,Wf),c.undefined(t)&&p.flush()};l(0)});o.on=(h,f)=>(n.on(h,f),o),o.off=(h,f)=>(n.off(h,f),o);let a=(h,f)=>{let d=(async()=>{await h;let{options:l}=r.request;return Yr(r,f,l.parseJson,l.encoding)})();return Object.defineProperties(d,Object.getOwnPropertyDescriptors(h)),d};return o.json=function(){if(e.options){let{headers:h}=e.options;!e.writableFinished&&!("accept"in h)&&(h.accept="application/json")}return a(this,"json")},o.buffer=function(){return a(this,"buffer")},o.text=function(){return a(this,"text")},o}var Vf=t=>c.function(t),Qf=["get","post","put","patch","head","delete"],Wo=t=>{t={options:new B(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let e=((s,n,i=t.options)=>{let o=new ie(s,n,i),a,h=l=>(o.options=l,o._noPipe=!l?.isStream,o.flush(),l?.isStream?o:(a||=Ut(o),a)),f=0,d=l=>{let p=(t.handlers[f++]??h)(l,d);if(c.promise(p)&&!o.options?.isStream&&(a||=Ut(o),p!==a)){let T=Object.getOwnPropertyDescriptors(a);for(let E in T)E in p&&delete T[E];Object.defineProperties(p,T),p.cancel=a.cancel}return p};return d(o.options)});e.extend=(...s)=>{let n=new B(void 0,void 0,t.options),i=[...t.handlers],o;for(let a of s)Vf(a)?(n.merge(a.defaults.options),i.push(...a.defaults.handlers),o=a.defaults.mutableDefaults):(n.merge(a),a.handlers&&i.push(...a.handlers),o=a.mutableDefaults);return Wo({options:n,handlers:i,mutableDefaults:!!o})};let r=(async function*(s,n){let i=new B(s,n,t.options);i.resolveBodyOnly=!1;let{pagination:o}=i;O.function(o.transform),O.function(o.shouldContinue),O.function(o.filter),O.function(o.paginate),O.number(o.countLimit),O.number(o.requestLimit),O.number(o.backoff);let a=[],{countLimit:h}=o,f=0;for(;f<o.requestLimit;){f!==0&&await(0,$o.setTimeout)(o.backoff);let d=await e(void 0,void 0,i),l=await o.transform(d),_=[];O.array(l);for(let T of l)if(o.filter({item:T,currentItems:_,allItems:a})&&(!o.shouldContinue({item:T,currentItems:_,allItems:a})||(yield T,o.stackAllItems&&a.push(T),_.push(T),--h<=0)))return;let p=o.paginate({response:d,currentItems:_,allItems:a});if(p===!1)return;if(p===d.request.options)i=d.request.options;else{i.merge(p);try{O.any([c.urlInstance,c.undefined],p.url)}catch(T){throw T instanceof Error&&(T.message=`Option 'pagination.paginate.url': ${T.message}`),T}p.url!==void 0&&(i.prefixUrl="",i.url=p.url)}f++}});e.paginate=r,e.paginate.all=(async(s,n)=>{let i=[];for await(let o of r(s,n))i.push(o);return i}),e.paginate.each=r,e.stream=((s,n)=>e(s,{...n,isStream:!0}));for(let s of Qf)e[s]=((n,i)=>e(n,{...i,method:s})),e.stream[s]=((n,i)=>e(n,{...i,method:s,isStream:!0}));return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},Vo=Wo;var Yf={options:new B,handlers:[],mutableDefaults:!1},Kf=Vo(Yf),Qo=Kf;var nt=M(ta(),1),{returnToRootState:ra}=(0,A.getPreferenceValues)();function od(t){return!t.endsWith(":fx")}var ad=456;async function ts(t,e=1e3){if(!t){ra&&await(0,A.popToRoot)();return}return new Promise(r=>{setTimeout(async()=>{try{ra&&await(0,A.popToRoot)(),await(0,A.closeMainWindow)(),r()}catch(s){console.error("Failed to close window:",s),r()}},e)})}function cd(t){if(console.log(t),t instanceof V){let{statusCode:e}=t.response;return e===nt.StatusCodes.FORBIDDEN?"Invalid DeepL API key":e===nt.StatusCodes.TOO_MANY_REQUESTS?"Too many requests to DeepL API":e===ad?"DeepL API quota exceeded. The translation limit of your account has been reached. Consider upgrading your subscription.":e.toString().startsWith("5")?"DeepL API is temporary unavailable. Please try again later.":`DeepL API returned ${e} ${(0,nt.getReasonPhrase)(e)}`}return t instanceof x?`Something went wrong when sending a request to the DeepL API. If you\u2019re having issues, open an issue on GitHub and include following text: ${t.code} ${t.message}`:"Unknown error"}async function hd(){try{return await(0,A.getSelectedText)()}catch{return""}}async function ud(){let t=(0,A.getPreferenceValues)().source,e=await A.Clipboard.readText(),r=await hd();return t==="clipboard"?e||r:r||e}async function fd({text:t,sourceLanguage:e,targetLanguage:r,onTranslateAction:s,formality:n}){try{let i=(0,A.getPreferenceValues)(),{key:o,closeRaycastAfterTranslation:a}=i;s??=i.onTranslateAction;let h=t||await ud(),f=await(0,A.showToast)(A.Toast.Style.Animated,"Fetching translation...");try{let{translations:[{text:d,detected_source_language:l}]}=await Qo.post(`https://api${od(o)?"":"-free"}.deepl.com/v2/translate`,{headers:{Authorization:`DeepL-Auth-Key ${o}`},json:{text:[h],source_lang:e,target_lang:r,formality:n}}).json();switch(s){case"clipboard":await A.Clipboard.copy(d),await(0,A.showToast)(A.Toast.Style.Success,"The translation was copied to your clipboard."),await ts(a);break;case"view":try{await(0,A.launchCommand)({name:"index",type:A.LaunchType.UserInitiated,context:{translation:d,sourceLanguage:l}})}catch{await(0,A.showToast)({style:A.Toast.Style.Failure,title:"Failed to display translated text.",message:"The main Translate command must be enabled."})}await ts(a);break;case"paste":await(0,A.closeMainWindow)(),await A.Clipboard.paste(d);break;default:f.hide(),await ts(a,500);break}return{translation:d,detectedSourceLanguage:l}}catch(d){await(0,A.showToast)(A.Toast.Style.Failure,"Something went wrong",cd(d))}}catch{await(0,A.showToast)(A.Toast.Style.Failure,"Please select the text to be translated")}}async function sa(t,e,r){let n=(0,A.getPreferenceValues)().defaultFormality??"default";await fd({targetLanguage:t,text:e,formality:r??n})}async function na(t){await sa("ZH",t.arguments?.text??t.fallbackText)}
/*! Bundled license information:

cacheable-request/dist/index.js:
  (* c8 ignore next -- @preserve *)
  (* v8 ignore next -- @preserve *)
*/
