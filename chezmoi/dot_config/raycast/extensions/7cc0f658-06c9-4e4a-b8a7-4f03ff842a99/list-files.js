"use strict";var _H=Object.create;var ad=Object.defineProperty;var CH=Object.getOwnPropertyDescriptor;var kH=Object.getOwnPropertyNames;var wH=Object.getPrototypeOf,OH=Object.prototype.hasOwnProperty;var vT=(e,t)=>{for(var r in t)ad(e,r,{get:t[r],enumerable:!0})},RT=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kH(t))!OH.call(e,o)&&o!==r&&ad(e,o,{get:()=>t[o],enumerable:!(n=CH(t,o))||n.enumerable});return e};var id=(e,t,r)=>(r=e!=null?_H(wH(e)):{},RT(t||!e||!e.__esModule?ad(r,"default",{value:e,enumerable:!0}):r,e)),TH=e=>RT(ad({},"__esModule",{value:!0}),e);var dV={};vT(dV,{default:()=>fV});module.exports=TH(dV);var ee=require("@raycast/api");var TT=require("@raycast/api");var sH=require("react");var Vy="7.7.4";var Ky=e=>{console.warn(`\u26A0\uFE0F [uploadthing][deprecated] ${e}`)};var Gy=e=>typeof e=="function",u=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,n){return arguments.length>=2?t(r,n):function(o){return t(o,r)}};case 3:return function(r,n,o){return arguments.length>=3?t(r,n,o):function(s){return t(s,r,n)}};case 4:return function(r,n,o,s){return arguments.length>=4?t(r,n,o,s):function(a){return t(a,r,n,o)}};case 5:return function(r,n,o,s,a){return arguments.length>=5?t(r,n,o,s,a):function(i){return t(i,r,n,o,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(n){return t(n,...r)}}}};var L=e=>e;var Jy=L,fu=e=>()=>e,Dr=fu(!0),rr=fu(!1);var cd=fu(void 0),Lr=cd;function f(e,t,r,n,o,s,a,i,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return o(n(r(t(e))));case 6:return s(o(n(r(t(e)))));case 7:return a(s(o(n(r(t(e))))));case 8:return i(a(s(o(n(r(t(e)))))));case 9:return c(i(a(s(o(n(r(t(e))))))));default:{let p=arguments[0];for(let l=1;l<arguments.length;l++)p=arguments[l](p);return p}}}var xo=e=>(t,r)=>t===r||e(t,r),vH=(e,t)=>e===t,RH=()=>vH;var AH=RH();var Qy=u(2,(e,t)=>xo((r,n)=>e(t(r),t(n)))),AT=Qy(AH,e=>e.getTime());var IT=e=>xo((t,r)=>{if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0});var PT="effect/GlobalValue",du,D=(e,t)=>(du||(globalThis[PT]??=new Map,du=globalThis[PT]),du.has(e)||du.set(e,t()),du.get(e));var Ne=e=>typeof e=="string",At=e=>typeof e=="number",go=e=>typeof e=="boolean",ps=e=>typeof e=="bigint",ma=e=>typeof e=="symbol";var sn=Gy,MT=e=>e===void 0,FT=e=>e!==void 0;var pd=e=>e!==null,NT=e=>!1;var mu=e=>typeof e=="object"&&e!==null,Wt=e=>mu(e)||sn(e),v=u(2,(e,t)=>Wt(e)&&t in e),ha=u(2,(e,t)=>v(e,"_tag")&&e._tag===t),xa=e=>e==null,ud=e=>e!=null;var DT=e=>e instanceof Uint8Array,ld=e=>e instanceof Date,ga=e=>v(e,Symbol.iterator),yo=e=>mu(e)&&!Array.isArray(e);var Yy=e=>v(e,"then")&&sn(e.then);var ya=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;var LT=Symbol.for("effect/Gen/GenKind");var UT=class{value;constructor(t){this.value=t}get _F(){return L}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[LT]=LT;[Symbol.iterator](){return new Ea(this)}},Ea=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var IH=335903614,PH=4150755663,MH=1481765933,FH=1284865837,NH=9007199254740992,DH=134217728,fd=class{_state;constructor(t,r,n,o){return xa(r)&&xa(t)?(r=Math.random()*4294967295>>>0,t=0):xa(r)&&(r=t,t=0),xa(o)&&xa(n)?(o=this._state?this._state[3]:PH,n=this._state?this._state[2]:IH):xa(o)&&(o=n,n=0),this._state=new Int32Array([0,0,n>>>0,((o||0)|1)>>>0]),this._next(),$T(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*DH+r)/NH}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;LH(this._state,t,r,MH,FH),$T(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=t>>>18,o=(r>>>18|t<<14)>>>0;n=(n^t)>>>0,o=(o^r)>>>0;let s=(o>>>27|n<<5)>>>0,a=t>>>27,i=(-a>>>0&31)>>>0;return(s>>>a|s<<i)>>>0}};function LH(e,t,r,n,o){let s=(r>>>16)*(o&65535)>>>0,a=(r&65535)*(o>>>16)>>>0,i=(r&65535)*(o&65535)>>>0,c=(r>>>16)*(o>>>16)+((a>>>16)+(s>>>16))>>>0;a=a<<16>>>0,i=i+a>>>0,i>>>0<a>>>0&&(c=c+1>>>0),s=s<<16>>>0,i=i+s>>>0,i>>>0<s>>>0&&(c=c+1>>>0),c=c+Math.imul(r,n)>>>0,c=c+Math.imul(t,o)>>>0,e[0]=c,e[1]=i}function $T(e,t,r,n,o){let s=t+n>>>0,a=r+o>>>0;a>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=a}var Zy=Symbol.for("effect/Utils/YieldWrap"),Pn=class{#e;constructor(t){this.#e=t}[Zy](){return this.#e}};function dd(e){if(typeof e=="object"&&e!==null&&Zy in e)return e[Zy]();throw new Error(ya("yieldWrapGet"))}var nr=D("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var HT={effect_internal_function:e=>e()},UH={effect_internal_function:e=>{try{return e()}finally{}}},$H=HT.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,tt=$H?HT.effect_internal_function:UH.effect_internal_function,HH=function*(){}.constructor,qT=e=>Wt(e)&&e.constructor===HH;var Xy=D(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),N=Symbol.for("effect/Hash"),A=e=>{if(nr.enabled===!0)return 0;switch(typeof e){case"number":return hd(e);case"bigint":return se(e.toString(10));case"boolean":return se(String(e));case"symbol":return se(String(e));case"string":return se(e);case"undefined":return se("undefined");case"function":case"object":return e===null?se("null"):e instanceof Date?A(e.toISOString()):e instanceof URL?A(e.href):WH(e)?e[N]():nc(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},nc=e=>(Xy.has(e)||Xy.set(e,hd(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Xy.get(e)),W=e=>t=>t*53^e,md=e=>e&3221225471|e>>>1&1073741824,WH=e=>v(e,N),hd=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return md(t)},se=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return md(t)},zH=(e,t)=>{let r=12289;for(let n=0;n<t.length;n++)r^=f(se(t[n]),W(A(e[t[n]])));return md(r)},xd=e=>zH(e,Object.keys(e)),or=e=>{let t=6151;for(let r=0;r<e.length;r++)t=f(t,W(A(e[r])));return md(t)},G=function(){if(arguments.length===1){let r=arguments[0];return function(n){return Object.defineProperty(r,N,{value(){return n},enumerable:!1}),n}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,N,{value(){return t},enumerable:!1}),t};var F=Symbol.for("effect/Equal");function R(){return arguments.length===1?e=>gd(e,arguments[0]):gd(arguments[0],arguments[1])}function gd(e,t){if(e===t)return!0;let r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null){if(oc(e)&&oc(t))return A(e)===A(t)&&e[F](t)?!0:nr.enabled&&nr.tester?nr.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(nr.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((n,o)=>gd(n,t[o]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),o=Object.keys(t);if(n.length===o.length){for(let s of n)if(!(s in t&&gd(e[s],t[s])))return nr.tester?nr.tester(e,t):!1;return!0}}return nr.tester?nr.tester(e,t):!1}}return nr.enabled&&nr.tester?nr.tester(e,t):!1}var oc=e=>v(e,F),hu=()=>R;var z=Symbol.for("nodejs.util.inspect.custom"),Q=e=>{try{if(v(e,"toJSON")&&sn(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Q)}catch{return{}}return Mn(e)},X=e=>JSON.stringify(e,null,2),Sa={toJSON(){return Q(this)},[z](){return this.toJSON()},toString(){return X(this.toJSON())}},yd=class{[z](){return this.toJSON()}toString(){return X(this.toJSON())}},Eo=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?xu(e,t):String(e)}catch{return String(e)}},xu=(e,t)=>{let r=[],n=JSON.stringify(e,(o,s)=>typeof s=="object"&&s!==null?r.includes(s)?void 0:r.push(s)&&(ba.fiberRefs!==void 0&&WT(s)?s[gu](ba.fiberRefs):s):s,t);return r=void 0,n},gu=Symbol.for("effect/Inspectable/Redactable"),WT=e=>typeof e=="object"&&e!==null&&gu in e,ba=D("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),zT=(e,t)=>{let r=ba.fiberRefs;ba.fiberRefs=e;try{return t()}finally{ba.fiberRefs=r}},Mn=e=>WT(e)&&ba.fiberRefs!==void 0?e[gu](ba.fiberRefs):e;var C=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let n=0,o=t.length;n<o;n++)r=t[n](r);return r}}};var _a="Async",Ca="Commit",He="Failure",sc="OnFailure",ac="OnSuccess",ic="OnSuccessAndFailure",qe="Success",Ed="Sync";var us="UpdateRuntimeFlags",cc="While",ka="Iterator",bd="WithRuntime",pc="Yield",yu="RevertFlags";var BH="3.17.7",bu=()=>BH;var jT=Symbol.for("effect/Effect"),VT=Symbol.for("effect/Stream"),KT=Symbol.for("effect/Sink"),GT=Symbol.for("effect/Channel"),ls={_R:e=>e,_E:e=>e,_A:e=>e,_V:bu()},jH={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},VH={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},bo={[jT]:ls,[VT]:ls,[KT]:jH,[GT]:VH,[F](e){return this===e},[N](){return G(this,nc(this))},[Symbol.iterator](){return new Ea(new Pn(this))},pipe(){return C(this,arguments)}},wa={[N](){return G(this,xd(this))},[F](e){let t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(let n of t)if(!(n in e&&R(this[n],e[n])))return!1;return!0}},cn={...bo,_op:Ca},eE={...cn,...wa},JT=(function(){function e(){}return e.prototype=cn,e})();var QT=Symbol.for("effect/Option"),YT={...bo,[QT]:{_A:e=>e},[z](){return this.toJSON()},toString(){return X(this.toJSON())}},KH=Object.assign(Object.create(YT),{_tag:"Some",_op:"Some",[F](e){return Sd(e)&&nE(e)&&R(this.value,e.value)},[N](){return G(this,W(A(this._tag))(A(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Q(this.value)}}}),GH=A("None"),JH=Object.assign(Object.create(YT),{_tag:"None",_op:"None",[F](e){return Sd(e)&&rE(e)},[N](){return GH},toJSON(){return{_id:"Option",_tag:this._tag}}}),Sd=e=>v(e,QT),rE=e=>e._tag==="None",nE=e=>e._tag==="Some",Su=Object.create(JH),uc=e=>{let t=Object.create(KH);return t.value=e,t};var oE=Symbol.for("effect/Either"),XT={...bo,[oE]:{_R:e=>e},[z](){return this.toJSON()},toString(){return X(this.toJSON())}},QH=Object.assign(Object.create(XT),{_tag:"Right",_op:"Right",[F](e){return _d(e)&&aE(e)&&R(this.right,e.right)},[N](){return W(A(this._tag))(A(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Q(this.right)}}}),YH=Object.assign(Object.create(XT),{_tag:"Left",_op:"Left",[F](e){return _d(e)&&sE(e)&&R(this.left,e.left)},[N](){return W(A(this._tag))(A(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Q(this.left)}}}),_d=e=>v(e,oE),sE=e=>e._tag==="Left",aE=e=>e._tag==="Right",ev=e=>{let t=Object.create(YH);return t.left=e,t},tv=e=>{let t=Object.create(QH);return t.right=e,t};var $=tv;var U=ev;var iE=e=>{if(sn(e))try{return $(e())}catch(t){return U(t)}else try{return $(e.try())}catch(t){return U(e.catch(t))}};var cE=_d,De=sE,It=aE;var rv=u(2,(e,{onLeft:t,onRight:r})=>De(e)?U(t(e.left)):$(r(e.right))),lc=u(2,(e,t)=>De(e)?U(t(e.left)):$(e.right)),nv=u(2,(e,t)=>It(e)?$(t(e.right)):U(e.left)),dt=u(2,(e,{onLeft:t,onRight:r})=>De(e)?t(e.left):r(e.right));var ov=dt({onLeft:L,onRight:L});var pE=u(2,(e,t)=>{if(It(e))return e.right;throw t(e.left)}),sv=pE(()=>new Error("getOrThrow called on a Left"));var uE=e=>e.length>0;var av=e=>(t,r)=>t===r?0:e(t,r);var iv=av((e,t)=>e<t?-1:1);var Cd=u(2,(e,t)=>av((r,n)=>e(t(r),t(n))));var lE=e=>u(2,(t,r)=>e(t,r)===1);var _=()=>Su,w=uc,cv=Sd,Ee=rE,ae=nE,ce=u(2,(e,{onNone:t,onSome:r})=>Ee(e)?t():r(e.value));var fe=u(2,(e,t)=>Ee(e)?t():e.value),Ur=u(2,(e,t)=>Ee(e)?t():e),pv=u(2,(e,t)=>Ee(e)?w(t()):e);var Nn=e=>e==null?_():w(e);var ar=fe(cd),uv=e=>(...t)=>{try{return w(e(...t))}catch{return _()}};var Pt=u(2,(e,t)=>Ee(e)?_():w(t(e.value)));var zt=u(2,(e,t)=>Ee(e)?_():t(e.value));var lv=u(2,(e,t)=>Ee(e)?_():Nn(t(e.value)));var fv=e=>{if(Symbol.iterator in e){let r=[];for(let n of e){if(Ee(n))return _();r.push(n.value)}return w(r)}let t={};for(let r of Object.keys(e)){let n=e[r];if(Ee(n))return _();t[r]=n.value}return w(t)};var tq=zt,fc=u(2,(e,t)=>tq(e,r=>t(r)?uc(r):Su)),dv=e=>xo((t,r)=>Ee(t)?Ee(r):Ee(r)?!1:e(t.value,r.value));var rq=e=>u(2,(t,r)=>Ee(t)?!1:e(t.value,r)),nq=hu(),mv=rq(nq),hv=u(2,(e,t)=>Ee(e)?!1:t(e.value));var xv=(...e)=>e;var gv=u(2,(e,t)=>{let r={...e};for(let n of sq(e))r[n]=t(e[n],n);return r});var sq=e=>Object.keys(e);var dc=(...e)=>e,Oa=e=>new Array(e),dE=u(2,(e,t)=>{let r=Math.max(1,Math.floor(e)),n=new Array(r);for(let o=0;o<r;o++)n[o]=t(o);return n});var ne=e=>Array.isArray(e)?e:Array.from(e),Bt=e=>Array.isArray(e)?e:[e];var mE=u(2,(e,{onEmpty:t,onNonEmpty:r})=>Ce(e)?r(e):t()),yv=u(2,(e,{onEmpty:t,onNonEmpty:r})=>Ce(e)?r(rt(e),pn(e)):t());var mc=u(2,(e,t)=>[t,...e]);var _u=u(2,(e,t)=>[...e,t]),Cu=u(2,(e,t)=>ne(e).concat(ne(t)));var kd=Array.isArray,iq=e=>e.length===0,hE=iq,fs=uE,Ce=uE;var Ev=(e,t)=>e<0||e>=t.length,cq=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),pq=u(2,(e,t)=>{let r=Math.floor(t);return Ev(r,e)?_():w(e[r])}),wd=u(2,(e,t)=>{let r=Math.floor(t);if(Ev(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var So=pq(0),rt=wd(0),Od=e=>Ce(e)?w(xE(e)):_(),xE=e=>e[e.length-1];var pn=e=>e.slice(1);var uq=(e,t)=>{let r=0;for(let n of e){if(!t(n,r))break;r++}return r},bv=u(2,(e,t)=>EE(e,uq(e,t))),Sv=u(2,(e,t)=>{let r=ne(e);return r.slice(cq(t,r),r.length)});var gE=e=>Array.from(e).reverse(),_o=u(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var yE=u(2,(e,t)=>_v(e,t,xv)),_v=u(3,(e,t,r)=>{let n=ne(e),o=ne(t);if(Ce(n)&&Ce(o)){let s=[r(rt(n),rt(o))],a=Math.min(n.length,o.length);for(let i=1;i<a;i++)s[i]=r(n[i],o[i]);return s}return[]});var lq=hu();var EE=u(2,(e,t)=>{let r=Array.from(e),n=Math.floor(t);return Ce(r)?n>=1?fq(r,n):[[],r]:[r,[]]}),fq=u(2,(e,t)=>{let r=Math.max(1,Math.floor(t));return r>=e.length?[hc(e),[]]:[mc(e.slice(1,r),rt(e)),e.slice(r)]});var hc=e=>e.slice();var dq=u(3,(e,t,r)=>{let n=ne(e),o=ne(t);return Ce(n)?Ce(o)?Cv(r)(Cu(n,o)):n:o}),Co=u(2,(e,t)=>dq(e,t,lq));var jt=()=>[],Ot=e=>[e],$r=u(2,(e,t)=>e.map(t)),ko=u(2,(e,t)=>{if(hE(e))return[];let r=[];for(let n=0;n<e.length;n++){let o=t(e[n],n);for(let s=0;s<o.length;s++)r.push(o[s])}return r}),Td=ko(L),ku=u(2,(e,t)=>{let r=ne(e),n=[];for(let o=0;o<r.length;o++){let s=t(r[o],o);ae(s)&&n.push(s.value)}return n});var vd=u(2,(e,t)=>{let r=ne(e),n=[];for(let o=0;o<r.length;o++)t(r[o],o)&&n.push(r[o]);return n});var Dn=u(3,(e,t,r)=>ne(e).reduce((n,o,s)=>r(n,o,s),t));var bE=(e,t)=>{let r=[],n=e,o;for(;ae(o=t(n));){let[s,a]=o.value;r.push(s),n=a}return r};var wo=IT;var Cv=u(2,(e,t)=>{let r=ne(e);if(Ce(r)){let n=[rt(r)],o=pn(r);for(let s of o)n.every(a=>!t(s,a))&&n.push(s);return n}return[]}),SE=e=>Cv(e,hu());var Ln=u(2,(e,t)=>ne(e).join(t));var CE=Symbol.for("effect/Context/Tag"),wu=Symbol.for("effect/Context/Reference"),mq="effect/STM",hq=Symbol.for(mq),kE={...bo,_op:"Tag",[hq]:ls,[CE]:{_Service:e=>e,_Identifier:e=>e},toString(){return X(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[z](){return this.toJSON()},of(e){return e},context(e){return TE(this,e)}},xq={...kE,[wu]:wu},kv=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;let n=Object.create(kE);return Object.defineProperty(n,"stack",{get(){return r.stack}}),n.key=e,n},wv=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;function n(){}return Object.setPrototypeOf(n,kE),n.key=e,Object.defineProperty(n,"stack",{get(){return r.stack}}),n},Ov=()=>(e,t)=>{let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=new Error;Error.stackTraceLimit=r;function o(){}return Object.setPrototypeOf(o,xq),o.key=e,o.defaultValue=t.defaultValue,Object.defineProperty(o,"stack",{get(){return n.stack}}),o},wE=Symbol.for("effect/Context"),gq={[wE]:{_Services:e=>e},[F](e){if(OE(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!R(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[N](){return G(this,hd(this.unsafeMap.size))},pipe(){return C(this,arguments)},toString(){return X(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Q)}},[z](){return this.toJSON()}},ds=e=>{let t=Object.create(gq);return t.unsafeMap=e,t},yq=e=>{let t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let n=r[2].match(/at (.*)/);n&&(t.message=t.message+` (defined at ${n[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},OE=e=>v(e,wE),Tv=e=>v(e,CE),vv=e=>v(e,wu),Eq=ds(new Map),Rv=()=>Eq,TE=(e,t)=>ds(new Map([[e.key,t]])),Av=u(3,(e,t,r)=>{let n=new Map(e.unsafeMap);return n.set(t.key,r),ds(n)}),_E=D("effect/Context/defaultValueCache",()=>new Map),vE=e=>{if(_E.has(e.key))return _E.get(e.key);let t=e.defaultValue();return _E.set(e.key,t),t},Iv=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):vE(t),RE=u(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(wu in t)return vE(t);throw yq(t)}return e.unsafeMap.get(t.key)}),Pv=RE;var Mv=u(2,(e,t)=>e.unsafeMap.has(t.key)?uc(e.unsafeMap.get(t.key)):vv(t)?uc(vE(t)):Su),Fv=u(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[n,o]of t.unsafeMap)r.set(n,o);return ds(r)});var pt=kv;var Dv=OE,Rd=Tv;var Er=Rv,xc=TE,Vt=Av,ut=Pv;var gc=RE,Un=Mv,br=Fv;var yc=wv,Hr=Ov;var Lv=bo,Ad=cn;var bq=JT;var un=class extends bq{};var Sq=Symbol.for("effect/Micro"),Id=Symbol.for("effect/Micro/MicroExit");var Uv=Symbol.for("effect/Micro/MicroCause");var _q={_E:L},Ou=class extends globalThis.Error{_tag;traces;[Uv];constructor(t,r,n){let o=`MicroCause.${t}`,s,a,i;if(r instanceof globalThis.Error){s=`(${o}) ${r.name}`,a=r.message;let c=a.split(`
`).length;i=r.stack?`(${o}) ${r.stack.split(`
`).slice(0,c+3).join(`
`)}`:`${s}: ${a}`}else s=o,a=Eo(r,0),i=`${s}: ${a}`;n.length>0&&(i+=`
    ${n.join(`
    `)}`),super(a),this._tag=t,this.traces=n,this[Uv]=_q,this.name=s,this.stack=i}pipe(){return C(this,arguments)}toString(){return this.stack}[z](){return this.stack}},IE=class extends Ou{error;constructor(t,r=[]){super("Fail",t,r),this.error=t}},Wv=(e,t=[])=>new IE(e,t),PE=class extends Ou{defect;constructor(t,r=[]){super("Die",t,r),this.defect=t}},zv=(e,t=[])=>new PE(e,t),ME=class extends Ou{constructor(t=[]){super("Interrupt","interrupted",t)}},Bv=(e=[])=>new ME(e);var jv=e=>e._tag==="Interrupt";var Cq=u(2,(e,t)=>{let r=[...e.traces,t];switch(e._tag){case"Die":return zv(e.defect,r);case"Interrupt":return Bv(r);case"Fail":return Wv(e.error,r)}}),$v=Symbol.for("effect/Micro/MicroFiber"),kq={_A:L,_E:L},Pd=class{context;interruptible;[$v];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(t,r=!0){this.context=t,this.interruptible=r,this[$v]=kq}getRef(t){return Iv(this.context,t)}addObserver(t){return this._exit?(t(this._exit),Lr):(this._observers.push(t),()=>{let r=this._observers.indexOf(t);r>=0&&this._observers.splice(r,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(HE))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){let o=this._yielded;this._yielded=void 0,o()}let r=this.runLoop(t);if(r===bc)return;let n=Hv.interruptChildren&&Hv.interruptChildren(this);if(n!==void 0)return this.evaluate(ms(n,()=>r));this._exit=r;for(let o=0;o<this._observers.length;o++)this._observers[o](r);this._observers.length=0}runLoop(t){let r=!1,n=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!r&&this.getRef(wc).shouldYield(this)){r=!0;let o=n;n=ms(Rq,()=>o)}if(n=n[Md](this),n===bc){let o=this._yielded;return Id in o?(this._yielded=void 0,o):bc}}}catch(o){return v(n,Md)?Ld(o):Ld(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`)}}getCont(t){for(;;){let r=this._stack.pop();if(!r)return;let n=r[Fd]&&r[Fd](this);if(n)return{[t]:n};if(r[t])return r}}_yielded=void 0;yieldWith(t){return this._yielded=t,bc}children(){return this._children??=new Set}},Hv=D("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0}));var wq=e=>kc(()=>{for(let n of e)n.unsafeInterrupt();let t=e[Symbol.iterator](),r=kc(()=>{let n=t.next();for(;!n.done;){if(n.value.unsafePoll()){n=t.next();continue}let o=n.value;return Jv(s=>{o.addObserver(a=>{s(r)})})}return Ta});return r}),DE=Symbol.for("effect/Micro/identifier"),ke=Symbol.for("effect/Micro/args"),Md=Symbol.for("effect/Micro/evaluate"),Oo=Symbol.for("effect/Micro/successCont"),Sc=Symbol.for("effect/Micro/failureCont"),Fd=Symbol.for("effect/Micro/ensureCont"),bc=Symbol.for("effect/Micro/Yield"),Oq={_A:L,_E:L,_R:L},Vv={...Lv,_op:"Micro",[Sq]:Oq,pipe(){return C(this,arguments)},[Symbol.iterator](){return new Ea(new Pn(this))},toJSON(){return{_id:"Micro",op:this[DE],...ke in this?{args:this[ke]}:void 0}},toString(){return X(this)},[z](){return X(this)}};function Tq(e){return Ld("Micro.evaluate: Not implemented")}var $d=e=>({...Vv,[DE]:e.op,[Md]:e.eval??Tq,[Oo]:e.contA,[Sc]:e.contE,[Fd]:e.ensure}),vo=e=>{let t=$d(e);return function(){let r=Object.create(t);return r[ke]=e.single===!1?arguments:arguments[0],r}},Kv=e=>{let t={...$d(e),[Id]:Id,_tag:e.op,get[e.prop](){return this[ke]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[ke]}},[F](r){return Nq(r)&&r._tag===e.op&&R(this[ke],r[ke])},[N](){return G(this,W(se(e.op))(A(this[ke])))}};return function(r){let n=Object.create(t);return n[ke]=r,n[Oo]=void 0,n[Sc]=void 0,n[Fd]=void 0,n}},To=Kv({op:"Success",prop:"value",eval(e){let t=e.getCont(Oo);return t?t[Oo](this[ke],e):e.yieldWith(this)}}),_c=Kv({op:"Failure",prop:"cause",eval(e){let t=e.getCont(Sc);for(;jv(this[ke])&&t&&e.interruptible;)t=e.getCont(Sc);return t?t[Sc](this[ke],e):e.yieldWith(this)}}),Nd=e=>_c(Wv(e)),Cc=vo({op:"Sync",eval(e){let t=this[ke](),r=e.getCont(Oo);return r?r[Oo](t,e):e.yieldWith(qd(t))}}),kc=vo({op:"Suspend",eval(e){return this[ke]()}}),vq=vo({op:"Yield",eval(e){let t=!1;return e.getRef(wc).scheduleTask(()=>{t||e.evaluate(Ta)},this[ke]??0),e.yieldWith(()=>{t=!0})}}),Rq=vq(0);var Dd=To(void 0);var LE=e=>Gv(function(t,r){try{e.try(r).then(n=>t(To(n)),n=>t(Nd(e.catch(n))))}catch(n){t(Nd(e.catch(n)))}},e.try.length!==0),Hd=vo({op:"WithMicroFiber",eval(e){return this[ke](e)}});var Gv=vo({op:"Async",single:!1,eval(e){let t=this[ke][0],r=!1,n=!1,o=this[ke][1]?new AbortController:void 0,s=t(a=>{r||(r=!0,n?e.evaluate(a):n=a)},o?.signal);return n!==!1?n:(n=!0,e._yielded=()=>{r=!0},o===void 0&&s===void 0||e._stack.push(Aq(()=>(r=!0,o?.abort(),s??Ta))),bc)}}),Aq=vo({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(qE(!0)))},contE(e,t){return jv(e)?ms(this[ke](),()=>_c(e)):_c(e)}}),Jv=e=>Gv(e,e.length>=2);var UE=(...e)=>kc(()=>Iq(e.length===1?e[0]():e[1].call(e[0]))),Iq=vo({op:"Iterator",contA(e,t){let r=this[ke].next(e);return r.done?To(r.value):(t._stack.push(this),dd(r.value))},eval(e){return this[Oo](void 0,e)}}),Pq=u(2,(e,t)=>$E(e,r=>t));var Mq=e=>qq(e,{onFailure:Wd,onSuccess:qd});var ms=u(2,(e,t)=>{let r=Object.create(Fq);return r[ke]=e,r[Oo]=t,r}),Fq=$d({op:"OnSuccess",eval(e){return e._stack.push(this),this[ke]}});var $E=u(2,(e,t)=>ms(e,r=>To(t(r)))),Nq=e=>v(e,Id),qd=To,Wd=_c,HE=Wd(Bv());var Ld=e=>Wd(zv(e));var Dq=e=>e._tag==="Failure";var Ta=qd(void 0),Lq=e=>{for(let t of e)if(t._tag==="Failure")return t;return Ta},Uq="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),Ud=class{tasks=[];running=!1;scheduleTask(t,r){this.tasks.push(t),this.running||(this.running=!0,Uq(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let t=this.tasks;this.tasks=[];for(let r=0,n=t.length;r<n;r++)t[r]()}shouldYield(t){return t.currentOpCount>=t.getRef(FE)}flush(){for(;this.tasks.length>0;)this.runTasks()}};var $q=u(2,(e,t)=>Hd(r=>{let n=r.context;return r.context=t(n),Zv(e,()=>(r.context=n,Dd))}));var Qv=u(2,(e,t)=>$q(e,br(t)));var FE=class extends Hr()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){},NE=class extends Hr()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){},wc=class extends Hr()("effect/Micro/currentScheduler",{defaultValue:()=>new Ud}){};var zd=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;function r(o,s){let a=t.stack;if(!a)return s;let i=a.split(`
`)[2]?.trim().replace(/^at /,"");if(!i)return s;let c=i.match(/\((.*)\)$/);return Cq(s,`at ${o} (${c?c[1]:i})`)}let n=o=>s=>zq(s,a=>_c(r(o,a)));return arguments.length===2?n(arguments[1])(arguments[0]):n(arguments[0])},Yv=u(2,(e,t)=>{let r=Object.create(Hq);return r[ke]=e,r[Oo]=t.onSuccess,r[Sc]=t.onFailure,r}),Hq=$d({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[ke]}}),qq=u(2,(e,t)=>Yv(e,{onFailure:r=>Cc(()=>t.onFailure(r)),onSuccess:r=>Cc(()=>t.onSuccess(r))}));var AE=Symbol.for("effect/Micro/MicroScope");var qv=class e{[AE];state={_tag:"Open",finalizers:new Set};constructor(){this[AE]=AE}unsafeAddFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.add(t)}addFinalizer(t){return kc(()=>this.state._tag==="Open"?(this.state.finalizers.add(t),Dd):t(this.state.exit))}unsafeRemoveFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.delete(t)}close(t){return kc(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:t},ms(Kq(r,n=>Mq(n(t))),Lq)}return Dd})}get fork(){return Cc(()=>{let t=new e;if(this.state._tag==="Closed")return t.state=this.state,t;function r(n){return t.close(n)}return this.state.finalizers.add(r),t.unsafeAddFinalizer(n=>Cc(()=>this.unsafeRemoveFinalizer(r))),t})}};var Zv=u(2,(e,t)=>jq(r=>Yv(r(e),{onFailure:n=>ms(t(Wd(n)),()=>_c(n)),onSuccess:n=>ms(t(qd(n)),()=>To(n))})));var Wq=u(3,(e,t,r)=>Zv(e,n=>t(n)?r(n):Ta)),zq=u(2,(e,t)=>Wq(e,Dq,r=>t(r.cause)));var qE=vo({op:"SetInterruptible",ensure(e){if(e.interruptible=this[ke],e._interrupted&&e.interruptible)return()=>HE}}),Bq=e=>Hd(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(qE(!1)),t._interrupted?HE:e)),jq=e=>Hd(t=>t.interruptible?(t.interruptible=!1,t._stack.push(qE(!0)),e(Bq)):e(L));var Vq=vo({op:"While",contA(e,t){return this[ke].step(e),this[ke].while()?(t._stack.push(this),this[ke].body()):Ta},eval(e){return this[ke].while()?(e._stack.push(this),this[ke].body()):Ta}}),Kq=(e,t,r)=>Hd(n=>{let o=r?.concurrency==="inherit"?n.getRef(NE):r?.concurrency??1,s=o==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,o),a=ne(e),i=a.length;if(i===0)return r?.discard?Dd:To([]);let c=r?.discard?void 0:new Array(i),p=0;return s===1?Pq(Vq({while:()=>p<a.length,body:()=>t(a[p],p),step:c?l=>c[p++]=l:l=>p++}),c):Jv(l=>{let d=new Set,m,h=0,x=0,b=!1,S=!1;function y(){for(b=!0;h<s&&p<i;){let O=p,g=a[O];p++,h++;try{let T=Gq(n,t(g,O),!0,!0);d.add(T),T.addObserver(P=>{d.delete(T),!S&&(P._tag==="Failure"?m===void 0&&(m=P,i=p,d.forEach(M=>M.unsafeInterrupt())):c!==void 0&&(c[O]=P.value),x++,h--,x===i?l(m??To(c)):!b&&h<s&&y())})}catch(T){m=Ld(T),i=p,d.forEach(P=>P.unsafeInterrupt())}}b=!1}return y(),kc(()=>(S=!0,p=i,wq(d)))})});var Gq=(e,t,r=!1,n=!1)=>{let o=new Pd(e.context,e.interruptible);return n||(e.children().add(o),o.addObserver(()=>e.children().delete(o))),r?o.evaluate(t):e.getRef(wc).scheduleTask(()=>o.evaluate(t),0),o};var Xv=(e,t)=>{let r=new Pd(wc.context(t?.scheduler??new Ud));if(r.evaluate(e),t?.signal)if(t.signal.aborted)r.unsafeInterrupt();else{let n=()=>r.unsafeInterrupt();t.signal.addEventListener("abort",n,{once:!0}),r.addObserver(()=>t.signal.removeEventListener("abort",n))}return r};var Jq=(function(){class e extends globalThis.Error{}return Object.assign(e.prototype,Vv,wa,{[DE]:"Failure",[Md](){return Nd(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[z](){let t=this.stack;return t?`${this.toString()}
${t.split(`
`).slice(1).join(`
`)}`:this.toString()}}),e})(),WE=(function(){return class extends Jq{constructor(e){super(),e&&Object.assign(this,e)}}})(),qr=e=>{class t extends WE{_tag=e}return t.prototype.name=e,t};var tR={"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applixware":{source:"apache",extensions:["aw"]},"application/atom+xml":{source:"iana",extensions:["atom"]},"application/atomcat+xml":{source:"iana",extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",extensions:["rsat"]},"application/calendar+xml":{source:"iana",extensions:["xcs"]},"application/ccxml+xml":{source:"iana",extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cpl+xml":{source:"iana",extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/dash+xml":{source:"iana",extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",extensions:["mpp"]},"application/davmount+xml":{source:"iana",extensions:["davmount"]},"application/dicom":{source:"iana",extensions:["dcm"]},"application/docbook+xml":{source:"apache",extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",extensions:["xdssc"]},"application/ecmascript":{source:"iana",extensions:["es","ecma"]},"application/emma+xml":{source:"iana",extensions:["emma"]},"application/emotionml+xml":{source:"iana",extensions:["emotionml"]},"application/epub+zip":{source:"iana",extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"]},"application/express":{source:"iana",extensions:["exp"]},"application/fdt+xml":{source:"iana",extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/geo+json":{source:"iana",extensions:["geojson"]},"application/gml+xml":{source:"iana",extensions:["gml"]},"application/gpx+xml":{source:"apache",extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/inkml+xml":{source:"iana",extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/its+xml":{source:"iana",extensions:["its"]},"application/java-archive":{source:"apache",extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",extensions:["ser"]},"application/java-vm":{source:"apache",extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",extensions:["json","map"]},"application/jsonml+json":{source:"apache",extensions:["jsonml"]},"application/ld+json":{source:"iana",extensions:["jsonld"]},"application/lgr+xml":{source:"iana",extensions:["lgr"]},"application/lost+xml":{source:"iana",extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/mads+xml":{source:"iana",extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",extensions:["mscml"]},"application/metalink+xml":{source:"apache",extensions:["metalink"]},"application/metalink4+xml":{source:"iana",extensions:["meta4"]},"application/mets+xml":{source:"iana",extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",extensions:["musd"]},"application/mods+xml":{source:"iana",extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/msword":{source:"iana",extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/node":{source:"iana",extensions:["cjs"]},"application/octet-stream":{source:"iana",extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/oebps-package+xml":{source:"iana",extensions:["opf"]},"application/ogg":{source:"iana",extensions:["ogx"]},"application/omdoc+xml":{source:"apache",extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",extensions:["xer"]},"application/pdf":{source:"iana",extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",extensions:["pls"]},"application/postscript":{source:"iana",extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/pskc+xml":{source:"iana",extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/resource-lists+xml":{source:"iana",extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",extensions:["rld"]},"application/rls-services+xml":{source:"iana",extensions:["rs"]},"application/route-apd+xml":{source:"iana",extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",extensions:["sls"]},"application/route-usd+xml":{source:"iana",extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rsd+xml":{source:"apache",extensions:["rsd"]},"application/rss+xml":{source:"apache",extensions:["rss"]},"application/rtf":{source:"iana",extensions:["rtf"]},"application/sbml+xml":{source:"iana",extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/senml+xml":{source:"iana",extensions:["senmlx"]},"application/sensml+xml":{source:"iana",extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/shf+xml":{source:"iana",extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/smil+xml":{source:"iana",extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",extensions:["grxml"]},"application/sru+xml":{source:"iana",extensions:["sru"]},"application/ssdl+xml":{source:"apache",extensions:["ssdl"]},"application/ssml+xml":{source:"iana",extensions:["ssml"]},"application/swid+xml":{source:"iana",extensions:["swidtag"]},"application/tei+xml":{source:"iana",extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.xdp+xml":{source:"iana",extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.android.package-archive":{source:"apache",extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apple.installer+xml":{source:"iana",extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.balsamiq.bmml+xml":{source:"iana",extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.chemdraw+xml":{source:"iana",extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.citationstyles.style+xml":{source:"iana",extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.dart":{source:"iana",extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.eszigno3+xml":{source:"iana",extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-earth.kml+xml":{source:"iana",extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+xml":{source:"iana",extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+xml":{source:"iana",extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.mozilla.xul+xml":{source:"iana",extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-excel":{source:"iana",extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-powerpoint":{source:"iana",extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma.dd2+xml":{source:"iana",extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.sun.wadl+xml":{source:"iana",extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",extensions:["zaz"]},"application/voicexml+xml":{source:"iana",extensions:["vxml"]},"application/wasm":{source:"iana",extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wsdl+xml":{source:"iana",extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",extensions:["bz"]},"application/x-bzip2":{source:"apache",extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",extensions:["res"]},"application/x-dvi":{source:"apache",extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",extensions:["jnlp"]},"application/x-latex":{source:"apache",extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",extensions:["xlf"]},"application/x-xpinstall":{source:"apache",extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/xaml+xml":{source:"apache",extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",extensions:["xns"]},"application/xenc+xml":{source:"iana",extensions:["xenc"]},"application/xhtml+xml":{source:"iana",extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",extensions:["xlf"]},"application/xml":{source:"iana",extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",extensions:["dtd"]},"application/xop+xml":{source:"iana",extensions:["xop"]},"application/xproc+xml":{source:"apache",extensions:["xpl"]},"application/xslt+xml":{source:"iana",extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",extensions:["xspf"]},"application/xv+xml":{source:"iana",extensions:["mxml","xhvml","xvml","xvm"]},"application/yaml":{source:"iana",extensions:["yaml","yml"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yin+xml":{source:"iana",extensions:["yin"]},"application/zip":{source:"iana",extensions:["zip"]}};var rR={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}};var nR={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}};var oR={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}};var sR={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};var Qq={"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",extensions:["otf"]},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/rfc822":{source:"iana",extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/gltf+json":{source:"iana",extensions:["gltf"]},"model/gltf-binary":{source:"iana",extensions:["glb"]},"model/iges":{source:"iana",extensions:["igs","iges"]},"model/mesh":{source:"iana",extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana",extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",extensions:["stpx"]},"model/step+zip":{source:"iana",extensions:["stpz"]},"model/step-xml+zip":{source:"iana",extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]}},Yq={...tR,...rR,...nR,...oR,...sR,...Qq},zE=Yq;function Zq(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)}var Xq={},aR={};function e3(){return t3(Xq,aR),aR}function cR(e){if(!e||typeof e!="string")return!1;let t=Zq("x."+e).toLowerCase().substring(1);return t&&e3()[t]||!1}var iR=!1;function t3(e,t){if(iR)return;iR=!0;let r=["nginx","apache",void 0,"iana"];Object.keys(zE).forEach(n=>{let o=zE[n],s=o.extensions;if(s.length){e[n]=s;for(let a of s){if(a in t){let i=r.indexOf(zE[t[a]].source),c=r.indexOf(o.source);if(t[a]!=="application/octet-stream"&&(i>c||i===c&&t[a].startsWith("application/")))continue}t[a]=n}}})}var BE=Symbol.for("effect/Encoding/errors/Decode"),Tu=(e,t)=>{let r={_tag:"DecodeException",[BE]:BE,input:e};return Ne(t)&&(r.message=t),r};var jE=new TextEncoder;var VE=e=>{let t=e.length,r="",n;for(n=2;n<t;n+=3)r+=Ro[e[n-2]>>2],r+=Ro[(e[n-2]&3)<<4|e[n-1]>>4],r+=Ro[(e[n-1]&15)<<2|e[n]>>6],r+=Ro[e[n]&63];return n===t+1&&(r+=Ro[e[n-2]>>2],r+=Ro[(e[n-2]&3)<<4],r+="=="),n===t&&(r+=Ro[e[n-2]>>2],r+=Ro[(e[n-2]&3)<<4|e[n-1]>>4],r+=Ro[(e[n-1]&15)<<2],r+="="),r},uR=e=>{let t=n3(e),r=t.length;if(r%4!==0)return U(Tu(t,`Length must be a multiple of 4, but is ${r}`));let n=t.indexOf("=");if(n!==-1&&(n<r-2||n===r-2&&t[r-1]!=="="))return U(Tu(t,"Found a '=' character, but it is not at the end"));try{let o=t.endsWith("==")?2:t.endsWith("=")?1:0,s=new Uint8Array(3*(r/4)-o);for(let a=0,i=0;a<r;a+=4,i+=3){let c=Bd(t.charCodeAt(a))<<18|Bd(t.charCodeAt(a+1))<<12|Bd(t.charCodeAt(a+2))<<6|Bd(t.charCodeAt(a+3));s[i]=c>>16,s[i+1]=c>>8&255,s[i+2]=c&255}return $(s)}catch(o){return U(Tu(t,o instanceof Error?o.message:"Invalid input"))}},n3=e=>e.replace(/[\n\r]/g,"");function Bd(e){if(e>=pR.length)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=pR[e];if(t===255)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}var Ro=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],pR=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];var KE=e=>{let t="";for(let r=0;r<e.length;++r)t+=s3[e[r]];return t};var s3=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var lR=e=>typeof e=="string"?VE(jE.encode(e)):VE(e),fR=e=>uR(e);var GE=e=>typeof e=="string"?KE(jE.encode(e)):KE(e);var mR="effect/Redacted",Oc=D("effect/Redacted/redactedRegistry",()=>new WeakMap),JE=Symbol.for(mR),i3={[JE]:{_A:e=>e},pipe(){return C(this,arguments)},toString(){return"<redacted>"},toJSON(){return"<redacted>"},[z](){return"<redacted>"},[N](){return f(A(mR),W(A(Oc.get(this))),G(this))},[F](e){return QE(e)&&R(Oc.get(this),Oc.get(e))}},QE=e=>v(e,JE),hR=e=>{let t=Object.create(i3);return Oc.set(t,e),t},xR=e=>{if(Oc.has(e))return Oc.get(e);throw new Error("Unable to get redacted value")};var gR=QE,va=hR,Ao=xR;var yR=e=>xo((t,r)=>e(Ao(t),Ao(r)));var vu={alphabet:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",minLength:0,blocklist:new Set(["0rgasm","1d10t","1d1ot","1di0t","1diot","1eccacu10","1eccacu1o","1eccacul0","1eccaculo","1mbec11e","1mbec1le","1mbeci1e","1mbecile","a11upat0","a11upato","a1lupat0","a1lupato","aand","ah01e","ah0le","aho1e","ahole","al1upat0","al1upato","allupat0","allupato","ana1","ana1e","anal","anale","anus","arrapat0","arrapato","arsch","arse","ass","b00b","b00be","b01ata","b0ceta","b0iata","b0ob","b0obe","b0sta","b1tch","b1te","b1tte","ba1atkar","balatkar","bastard0","bastardo","batt0na","battona","bitch","bite","bitte","bo0b","bo0be","bo1ata","boceta","boiata","boob","boobe","bosta","bran1age","bran1er","bran1ette","bran1eur","bran1euse","branlage","branler","branlette","branleur","branleuse","c0ck","c0g110ne","c0g11one","c0g1i0ne","c0g1ione","c0gl10ne","c0gl1one","c0gli0ne","c0glione","c0na","c0nnard","c0nnasse","c0nne","c0u111es","c0u11les","c0u1l1es","c0u1lles","c0ui11es","c0ui1les","c0uil1es","c0uilles","c11t","c11t0","c11to","c1it","c1it0","c1ito","cabr0n","cabra0","cabrao","cabron","caca","cacca","cacete","cagante","cagar","cagare","cagna","cara1h0","cara1ho","caracu10","caracu1o","caracul0","caraculo","caralh0","caralho","cazz0","cazz1mma","cazzata","cazzimma","cazzo","ch00t1a","ch00t1ya","ch00tia","ch00tiya","ch0d","ch0ot1a","ch0ot1ya","ch0otia","ch0otiya","ch1asse","ch1avata","ch1er","ch1ng0","ch1ngadaz0s","ch1ngadazos","ch1ngader1ta","ch1ngaderita","ch1ngar","ch1ngo","ch1ngues","ch1nk","chatte","chiasse","chiavata","chier","ching0","chingadaz0s","chingadazos","chingader1ta","chingaderita","chingar","chingo","chingues","chink","cho0t1a","cho0t1ya","cho0tia","cho0tiya","chod","choot1a","choot1ya","chootia","chootiya","cl1t","cl1t0","cl1to","clit","clit0","clito","cock","cog110ne","cog11one","cog1i0ne","cog1ione","cogl10ne","cogl1one","cogli0ne","coglione","cona","connard","connasse","conne","cou111es","cou11les","cou1l1es","cou1lles","coui11es","coui1les","couil1es","couilles","cracker","crap","cu10","cu1att0ne","cu1attone","cu1er0","cu1ero","cu1o","cul0","culatt0ne","culattone","culer0","culero","culo","cum","cunt","d11d0","d11do","d1ck","d1ld0","d1ldo","damn","de1ch","deich","depp","di1d0","di1do","dick","dild0","dildo","dyke","encu1e","encule","enema","enf01re","enf0ire","enfo1re","enfoire","estup1d0","estup1do","estupid0","estupido","etr0n","etron","f0da","f0der","f0ttere","f0tters1","f0ttersi","f0tze","f0utre","f1ca","f1cker","f1ga","fag","fica","ficker","figa","foda","foder","fottere","fotters1","fottersi","fotze","foutre","fr0c10","fr0c1o","fr0ci0","fr0cio","fr0sc10","fr0sc1o","fr0sci0","fr0scio","froc10","froc1o","froci0","frocio","frosc10","frosc1o","frosci0","froscio","fuck","g00","g0o","g0u1ne","g0uine","gandu","go0","goo","gou1ne","gouine","gr0gnasse","grognasse","haram1","harami","haramzade","hund1n","hundin","id10t","id1ot","idi0t","idiot","imbec11e","imbec1le","imbeci1e","imbecile","j1zz","jerk","jizz","k1ke","kam1ne","kamine","kike","leccacu10","leccacu1o","leccacul0","leccaculo","m1erda","m1gn0tta","m1gnotta","m1nch1a","m1nchia","m1st","mam0n","mamahuev0","mamahuevo","mamon","masturbat10n","masturbat1on","masturbate","masturbati0n","masturbation","merd0s0","merd0so","merda","merde","merdos0","merdoso","mierda","mign0tta","mignotta","minch1a","minchia","mist","musch1","muschi","n1gger","neger","negr0","negre","negro","nerch1a","nerchia","nigger","orgasm","p00p","p011a","p01la","p0l1a","p0lla","p0mp1n0","p0mp1no","p0mpin0","p0mpino","p0op","p0rca","p0rn","p0rra","p0uff1asse","p0uffiasse","p1p1","p1pi","p1r1a","p1rla","p1sc10","p1sc1o","p1sci0","p1scio","p1sser","pa11e","pa1le","pal1e","palle","pane1e1r0","pane1e1ro","pane1eir0","pane1eiro","panele1r0","panele1ro","paneleir0","paneleiro","patakha","pec0r1na","pec0rina","pecor1na","pecorina","pen1s","pendej0","pendejo","penis","pip1","pipi","pir1a","pirla","pisc10","pisc1o","pisci0","piscio","pisser","po0p","po11a","po1la","pol1a","polla","pomp1n0","pomp1no","pompin0","pompino","poop","porca","porn","porra","pouff1asse","pouffiasse","pr1ck","prick","pussy","put1za","puta","puta1n","putain","pute","putiza","puttana","queca","r0mp1ba11e","r0mp1ba1le","r0mp1bal1e","r0mp1balle","r0mpiba11e","r0mpiba1le","r0mpibal1e","r0mpiballe","rand1","randi","rape","recch10ne","recch1one","recchi0ne","recchione","retard","romp1ba11e","romp1ba1le","romp1bal1e","romp1balle","rompiba11e","rompiba1le","rompibal1e","rompiballe","ruff1an0","ruff1ano","ruffian0","ruffiano","s1ut","sa10pe","sa1aud","sa1ope","sacanagem","sal0pe","salaud","salope","saugnapf","sb0rr0ne","sb0rra","sb0rrone","sbattere","sbatters1","sbattersi","sborr0ne","sborra","sborrone","sc0pare","sc0pata","sch1ampe","sche1se","sche1sse","scheise","scheisse","schlampe","schwachs1nn1g","schwachs1nnig","schwachsinn1g","schwachsinnig","schwanz","scopare","scopata","sexy","sh1t","shit","slut","sp0mp1nare","sp0mpinare","spomp1nare","spompinare","str0nz0","str0nza","str0nzo","stronz0","stronza","stronzo","stup1d","stupid","succh1am1","succh1ami","succhiam1","succhiami","sucker","t0pa","tapette","test1c1e","test1cle","testic1e","testicle","tette","topa","tr01a","tr0ia","tr0mbare","tr1ng1er","tr1ngler","tring1er","tringler","tro1a","troia","trombare","turd","twat","vaffancu10","vaffancu1o","vaffancul0","vaffanculo","vag1na","vagina","verdammt","verga","w1chsen","wank","wichsen","x0ch0ta","x0chota","xana","xoch0ta","xochota","z0cc01a","z0cc0la","z0cco1a","z0ccola","z1z1","z1zi","ziz1","zizi","zocc01a","zocc0la","zocco1a","zoccola"])},Tc=class{constructor(t){var r,n,o;let s=(r=t?.alphabet)!==null&&r!==void 0?r:vu.alphabet,a=(n=t?.minLength)!==null&&n!==void 0?n:vu.minLength,i=(o=t?.blocklist)!==null&&o!==void 0?o:vu.blocklist;if(new Blob([s]).size!==s.length)throw new Error("Alphabet cannot contain multibyte characters");let c=3;if(s.length<c)throw new Error(`Alphabet length must be at least ${c}`);if(new Set(s).size!==s.length)throw new Error("Alphabet must contain unique characters");let p=255;if(typeof a!="number"||a<0||a>p)throw new Error(`Minimum length has to be between 0 and ${p}`);let l=new Set,d=s.toLowerCase().split("");for(let m of i)if(m.length>=3){let h=m.toLowerCase(),x=h.split("");x.filter(S=>d.includes(S)).length===x.length&&l.add(h)}this.alphabet=this.shuffle(s),this.minLength=a,this.blocklist=l}encode(t){if(t.length===0)return"";if(t.filter(n=>n>=0&&n<=this.maxValue()).length!==t.length)throw new Error(`Encoding supports numbers between 0 and ${this.maxValue()}`);return this.encodeNumbers(t)}decode(t){let r=[];if(t==="")return r;let n=this.alphabet.split("");for(let c of t.split(""))if(!n.includes(c))return r;let o=t.charAt(0),s=this.alphabet.indexOf(o),a=this.alphabet.slice(s)+this.alphabet.slice(0,s);a=a.split("").reverse().join("");let i=t.slice(1);for(;i.length>0;){let c=a.slice(0,1),p=i.split(c);if(p.length>0){if(p[0]==="")return r;r.push(this.toNumber(p[0],a.slice(1))),p.length>1&&(a=this.shuffle(a))}i=p.slice(1).join(c)}return r}encodeNumbers(t,r=0){if(r>this.alphabet.length)throw new Error("Reached max attempts to re-generate the ID");let n=t.reduce((c,p,l)=>this.alphabet[p%this.alphabet.length].codePointAt(0)+l+c,t.length)%this.alphabet.length;n=(n+r)%this.alphabet.length;let o=this.alphabet.slice(n)+this.alphabet.slice(0,n),s=o.charAt(0);o=o.split("").reverse().join("");let a=[s];for(let c=0;c!==t.length;c++){let p=t[c];a.push(this.toId(p,o.slice(1))),c<t.length-1&&(a.push(o.slice(0,1)),o=this.shuffle(o))}let i=a.join("");if(this.minLength>i.length)for(i+=o.slice(0,1);this.minLength-i.length>0;)o=this.shuffle(o),i+=o.slice(0,Math.min(this.minLength-i.length,o.length));return this.isBlockedId(i)&&(i=this.encodeNumbers(t,r+1)),i}shuffle(t){let r=t.split("");for(let n=0,o=r.length-1;o>0;n++,o--){let s=(n*o+r[n].codePointAt(0)+r[o].codePointAt(0))%r.length;[r[n],r[s]]=[r[s],r[n]]}return r.join("")}toId(t,r){let n=[],o=r.split(""),s=t;do n.unshift(o[s%o.length]),s=Math.floor(s/o.length);while(s>0);return n.join("")}toNumber(t,r){let n=r.split("");return t.split("").reduce((o,s)=>o*n.length+n.indexOf(s),0)}isBlockedId(t){let r=t.toLowerCase();for(let n of this.blocklist)if(n.length<=r.length){if(r.length<=3||n.length<=3){if(r===n)return!0}else if(/\d/.test(n)){if(r.startsWith(n)||r.endsWith(n))return!0}else if(r.includes(n))return!0}return!1}maxValue(){return Number.MAX_SAFE_INTEGER}};var SR=["inline","attachment"],_R=["public-read","private"],u3=class extends qr("InvalidRouteConfig"){constructor(e,t){let r=t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`;super({reason:r})}},ZK=class extends qr("UnknownFileType"){constructor(e){let t=`Could not determine type for ${e}`;super({reason:t})}},XK=class extends qr("InvalidFileType"){constructor(e,t){let r=`File type ${e} not allowed for ${t}`;super({reason:r})}},eG=class extends qr("InvalidFileSize"){constructor(e){let t=`Invalid file size: ${e}`;super({reason:t})}},tG=class extends qr("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}},rG=class extends qr("RetryError"){},nG=class extends qr("FetchError"){},oG=class extends qr("InvalidJson"){},sG=class extends qr("BadRequestError"){getMessage(){return yo(this.json)&&typeof this.json.message=="string"?this.json.message:this.message}},aG=class extends qr("UploadAborted"){},iG=class extends qr("UploadAborted"){};function CR(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!=null))}function Vd(e){if(typeof e=="number")return e;let t=e.split(/(\d+)/).filter(Boolean),r=Number(t[0]),n=(t[1]??"s").trim().slice(0,1),o={s:1,m:60,h:3600,d:86400}[n];return r*o}function l3(e,t){return typeof e=="string"?e:e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:t??"An unknown error occurred"}var nt=class kR extends WE{_tag="UploadThingError";name="UploadThingError";cause;code;data;constructor(t){let r=typeof t=="string"?{code:"INTERNAL_SERVER_ERROR",message:t}:t,n=r.message??l3(r.cause,r.code);super({message:n}),this.code=r.code,this.data=r.data,r.cause instanceof Error?this.cause=r.cause:yo(r.cause)&&At(r.cause.status)&&Ne(r.cause.statusText)?this.cause=new Error(`Response ${r.cause.status} ${r.cause.statusText}`):Ne(r.cause)?this.cause=new Error(r.cause):this.cause=r.cause}static toObject(t){return{code:t.code,message:t.message,data:t.data}}static serialize(t){return JSON.stringify(kR.toObject(t))}};var cG=class extends yc("uploadthing/Fetch")(){};var f3="hmac-sha256=",ER={name:"HMAC",hash:"SHA-256"},bR=new TextEncoder;function d3(e,t){let r=e.split(""),n=se(t),o,s;for(let a=0;a<r.length;a++)s=(n%(a+1)+a)%r.length,o=r[a],r[a]=r[s],r[s]=o;return r.join("")}var m3=(e,t)=>UE(function*(){let r=yield*LE({try:()=>crypto.subtle.importKey("raw",bR.encode(Ao(t)),ER,!1,["sign"]),catch:o=>new nt({code:"BAD_REQUEST",message:"Invalid signing secret",cause:o})}),n=yield*$E(LE({try:()=>crypto.subtle.sign(ER,r,bR.encode(e)),catch:o=>new nt({code:"BAD_REQUEST",cause:o})}),o=>GE(new Uint8Array(o)));return`${f3}${n}`}).pipe(zd("signPayload"));var YE=(e,t,r)=>Cc(()=>{let n=JSON.stringify(r?.(e)??[e.name,e.size,e.type,e.lastModified,Date.now()]),o=d3(vu.alphabet,t),s=new Tc({alphabet:o,minLength:36}).encode([Math.abs(se(n))]);return new Tc({alphabet:o,minLength:12}).encode([Math.abs(se(t))])+s}).pipe(zd("generateKey"));var Kd=(e,t,r)=>UE(function*(){let n=new URL(e),o=r.ttlInSeconds?Vd(r.ttlInSeconds):3600,s=Date.now()+o*1e3;n.searchParams.append("expires",s.toString()),r.data&&Object.entries(r.data).forEach(([i,c])=>{if(c==null)return;let p=encodeURIComponent(c);n.searchParams.append(i,p)});let a=yield*m3(n.toString(),t);return n.searchParams.append("signature",a),n.href}).pipe(zd("generateSignedURL"));var TR=Symbol.for("effect/Chunk");function y3(e,t,r,n,o){for(let s=t;s<Math.min(e.length,t+o);s++)r[n+s-t]=e[s];return r}var vR=[],E3=e=>xo((t,r)=>t.length===r.length&&Sr(t).every((n,o)=>e(n,Hn(r,o)))),b3=E3(R),S3={[TR]:{_A:e=>e},toString(){return X(this.toJSON())},toJSON(){return{_id:"Chunk",values:Sr(this).map(Q)}},[z](){return this.toJSON()},[F](e){return XE(e)&&b3(this,e)},[N](){return G(this,or(Sr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return vR[Symbol.iterator]();default:return Sr(this)[Symbol.iterator]()}},pipe(){return C(this,arguments)}},lt=e=>{let t=Object.create(S3);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=$n,t.right=$n;break}case"ISingleton":{t.length=1,t.depth=0,t.left=$n,t.right=$n;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=$n,t.right=$n;break}}return t},XE=e=>v(e,TR),$n=lt({_tag:"IEmpty"}),Ve=()=>$n,vc=(...e)=>w3(e),Oe=e=>lt({_tag:"ISingleton",a:e}),Wr=e=>XE(e)?e:qn(ne(e)),ZE=(e,t,r)=>{switch(e.backing._tag){case"IArray":{y3(e.backing.array,0,t,r,e.length);break}case"IConcat":{ZE(e.left,t,r),ZE(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let n=0,o=r;for(;n<e.length;)t[o]=Hn(e,n),n+=1,o+=1;break}}};var _3=e=>{switch(e.backing._tag){case"IEmpty":return vR;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return ZE(e,t,0),e.backing={_tag:"IArray",array:t},e.left=$n,e.right=$n,e.depth=0,t}}},Sr=_3,C3=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return lt({_tag:"IArray",array:gE(e.backing.array)});case"IConcat":return lt({_tag:"IConcat",left:_r(e.backing.right),right:_r(e.backing.left)});case"ISlice":return qn(gE(Sr(e)))}},_r=C3,k3=u(2,(e,t)=>t<0||t>=e.length?_():w(Hn(e,t))),qn=e=>e.length===0?Ve():e.length===1?Oe(e[0]):lt({_tag:"IArray",array:e}),w3=e=>qn(e),Hn=u(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Hn(e.left,t):Hn(e.right,t-e.left.length);case"ISlice":return Hn(e.backing.chunk,t+e.backing.offset)}}),Ra=u(2,(e,t)=>ht(e,Oe(t))),Pe=u(2,(e,t)=>ht(Oe(t),e));var Gd=u(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return $n;switch(e.backing._tag){case"ISlice":return lt({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Gd(e.right,t-e.left.length):lt({_tag:"IConcat",left:Gd(e.left,t),right:e.right});default:return lt({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var ht=u(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return lt({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let n=ht(e.right,t);return lt({_tag:"IConcat",left:e.left,right:n})}else{let n=ht(e.right.right,t);if(n.depth===e.depth-3){let o=lt({_tag:"IConcat",left:e.right.left,right:n});return lt({_tag:"IConcat",left:e.left,right:o})}else{let o=lt({_tag:"IConcat",left:e.left,right:e.right.left});return lt({_tag:"IConcat",left:o,right:n})}}else if(t.right.depth>=t.left.depth){let n=ht(e,t.left);return lt({_tag:"IConcat",left:n,right:t.right})}else{let n=ht(e,t.left.left);if(n.depth===t.depth-3){let o=lt({_tag:"IConcat",left:n,right:t.left.right});return lt({_tag:"IConcat",left:o,right:t.right})}else{let o=lt({_tag:"IConcat",left:t.left.right,right:t.right});return lt({_tag:"IConcat",left:n,right:o})}}});var Jd=u(2,(e,t)=>qn(vd(e,t)));var Aa=e=>e.length===0,xt=e=>e.length>0,Ia=k3(0),eb=e=>Hn(e,0),gt=eb;var tb=u(2,(e,t)=>e.backing._tag==="ISingleton"?Oe(t(e.backing.a,0)):qn(f(Sr(e),$r((r,n)=>t(r,n)))));var Mt=e=>Gd(e,1);var RR=Dn;var rb=Math.pow(2,5),AR=rb-1,IR=rb/2,PR=rb/4;function O3(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function hs(e,t){return t>>>e&AR}function xs(e){return 1<<e}function Qd(e,t){return O3(e&t-1)}var MR=(e,t)=>({value:e,previous:t});function Pa(e,t,r,n){let o=n;if(!e){let s=n.length;o=new Array(s);for(let a=0;a<s;++a)o[a]=n[a]}return o[t]=r,o}function nb(e,t,r){let n=r.length-1,o=0,s=0,a=r;if(e)o=s=t;else for(a=new Array(n);o<t;)a[s++]=r[o++];for(++o;o<=n;)a[s++]=r[o++];return e&&(a.length=n),a}function FR(e,t,r,n){let o=n.length;if(e){let c=o;for(;c>=t;)n[c--]=n[c];return n[t]=r,n}let s=0,a=0,i=new Array(o+1);for(;s<t;)i[a++]=n[s++];for(i[t]=r;s<o;)i[++a]=n[s++];return i}var Io=class e{_tag="EmptyNode";modify(t,r,n,o,s,a){let i=n(_());return Ee(i)?new e:(++a.value,new Rc(t,o,s,i))}};function zr(e){return ha(e,"EmptyNode")}function v3(e){return zr(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Yd(e,t){return zr(e)?!1:t===e.edit}var Rc=class e{edit;hash;key;value;_tag="LeafNode";constructor(t,r,n,o){this.edit=t,this.hash=r,this.key=n,this.value=o}modify(t,r,n,o,s,a){if(R(s,this.key)){let c=n(this.value);return c===this.value?this:Ee(c)?(--a.value,new Io):Yd(this,t)?(this.value=c,this):new e(t,o,s,c)}let i=n(_());return Ee(i)?this:(++a.value,NR(t,r,this.hash,this,o,new e(t,o,s,i)))}},ob=class e{edit;hash;children;_tag="CollisionNode";constructor(t,r,n){this.edit=t,this.hash=r,this.children=n}modify(t,r,n,o,s,a){if(o===this.hash){let c=Yd(this,t),p=this.updateCollisionList(c,t,this.hash,this.children,n,s,a);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let i=n(_());return Ee(i)?this:(++a.value,NR(t,r,this.hash,this,o,new Rc(t,o,s,i)))}updateCollisionList(t,r,n,o,s,a,i){let c=o.length;for(let l=0;l<c;++l){let d=o[l];if("key"in d&&R(a,d.key)){let m=d.value,h=s(m);return h===m?o:Ee(h)?(--i.value,nb(t,l,o)):Pa(t,l,new Rc(r,n,a,h),o)}}let p=s(_());return Ee(p)?o:(++i.value,Pa(t,c,new Rc(r,n,a,p),o))}},Ru=class e{edit;mask;children;_tag="IndexedNode";constructor(t,r,n){this.edit=t,this.mask=r,this.children=n}modify(t,r,n,o,s,a){let i=this.mask,c=this.children,p=hs(r,o),l=xs(p),d=Qd(i,l),m=i&l,h=Yd(this,t);if(!m){let O=new Io().modify(t,r+5,n,o,s,a);return O?c.length>=IR?A3(t,p,O,i,c):new e(t,i|l,FR(h,d,O,c)):this}let x=c[d],b=x.modify(t,r+5,n,o,s,a);if(x===b)return this;let S=i,y;if(zr(b)){if(S&=~l,!S)return new Io;if(c.length<=2&&v3(c[d^1]))return c[d^1];y=nb(h,d,c)}else y=Pa(h,d,b,c);return h?(this.mask=S,this.children=y,this):new e(t,S,y)}},sb=class e{edit;size;children;_tag="ArrayNode";constructor(t,r,n){this.edit=t,this.size=r,this.children=n}modify(t,r,n,o,s,a){let i=this.size,c=this.children,p=hs(r,o),l=c[p],d=(l||new Io).modify(t,r+5,n,o,s,a);if(l===d)return this;let m=Yd(this,t),h;if(zr(l)&&!zr(d))++i,h=Pa(m,p,d,c);else if(!zr(l)&&zr(d)){if(--i,i<=PR)return R3(t,i,p,c);h=Pa(m,p,new Io,c)}else h=Pa(m,p,d,c);return m?(this.size=i,this.children=h,this):new e(t,i,h)}};function R3(e,t,r,n){let o=new Array(t-1),s=0,a=0;for(let i=0,c=n.length;i<c;++i)if(i!==r){let p=n[i];p&&!zr(p)&&(o[s++]=p,a|=1<<i)}return new Ru(e,a,o)}function A3(e,t,r,n,o){let s=[],a=n,i=0;for(let c=0;a;++c)a&1&&(s[c]=o[i++]),a>>>=1;return s[t]=r,new sb(e,i+1,s)}function I3(e,t,r,n,o,s){if(r===o)return new ob(e,r,[s,n]);let a=hs(t,r),i=hs(t,o);if(a===i)return c=>new Ru(e,xs(a)|xs(i),[c]);{let c=a<i?[n,s]:[s,n];return new Ru(e,xs(a)|xs(i),c)}}function NR(e,t,r,n,o,s){let a,i=t;for(;;){let c=I3(e,i,r,n,o,s);if(typeof c=="function")a=MR(c,a),i=i+5;else{let p=c;for(;a!=null;)p=a.value(p),a=a.previous;return p}}}var DR="effect/HashMap",Zd=Symbol.for(DR),M3={[Zd]:Zd,[Symbol.iterator](){return new Xd(this,(e,t)=>[e,t])},[N](){let e=A(DR);for(let t of this)e^=f(A(t[0]),W(A(t[1])));return G(this,e)},[F](e){if(HR(e)){if(e._size!==this._size)return!1;for(let t of this){let r=f(e,tm(t[0],A(t[0])));if(Ee(r))return!1;if(!R(t[1],r.value))return!1}return!0}return!1},toString(){return X(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},ab=(e,t,r,n)=>{let o=Object.create(M3);return o._editable=e,o._edit=t,o._root=r,o._size=n,o},Xd=class e{map;f;v;constructor(t,r){this.map=t,this.f=r,this.v=LR(this.map._root,this.f,void 0)}next(){if(Ee(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=em(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},em=e=>e?UR(e[0],e[1],e[2],e[3],e[4]):_(),LR=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return ae(e.value)?w({value:t(e.key,e.value.value),cont:r}):em(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return UR(n.length,n,0,t,r)}default:return em(r)}},UR=(e,t,r,n,o)=>{for(;r<e;){let s=t[r++];if(s&&!zr(s))return LR(s,n,[e,t,r,n,o])}return em(o)},F3=ab(!1,0,new Io,0),Ic=()=>F3;var $R=e=>{let t=nm(Ic());for(let r of e)Ma(t,r[0],r[1]);return zR(t)},HR=e=>v(e,Zd),qR=e=>e&&zr(e._root),WR=u(2,(e,t)=>tm(e,t,A(t))),tm=u(3,(e,t,r)=>{let n=e._root,o=0;for(;;)switch(n._tag){case"LeafNode":return R(t,n.key)?n.value:_();case"CollisionNode":{if(r===n.hash){let s=n.children;for(let a=0,i=s.length;a<i;++a){let c=s[a];if("key"in c&&R(t,c.key))return c.value}}return _()}case"IndexedNode":{let s=hs(o,r),a=xs(s);if(n.mask&a){n=n.children[Qd(n.mask,a)],o+=5;break}return _()}case"ArrayNode":{if(n=n.children[hs(o,r)],n){o+=5;break}return _()}default:return _()}});var ib=u(2,(e,t)=>ae(tm(e,t,A(t))));var Ma=u(3,(e,t,r)=>om(e,t,()=>w(r))),N3=u(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:ab(e._editable,e._edit,t,r)),rm=e=>new Xd(e,t=>t);var Pc=e=>e._size;var nm=e=>ab(!0,e._edit+1,e._root,e._size),zR=e=>(e._editable=!1,e);var om=u(3,(e,t,r)=>BR(e,t,A(t),r)),BR=u(4,(e,t,r,n)=>{let o={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,n,r,t,o);return f(e,N3(s,o.value))});var sm=u(2,(e,t)=>om(e,t,_));var jR=u(2,(e,t)=>Mc(e,Ic(),(r,n,o)=>Ma(r,o,t(n,o))));var am=u(2,(e,t)=>Mc(e,void 0,(r,n,o)=>t(n,o))),Mc=u(3,(e,t,r)=>{let n=e._root;if(n._tag==="LeafNode")return ae(n.value)?r(t,n.value.value,n.key):t;if(n._tag==="EmptyNode")return t;let o=[n.children],s;for(;s=o.pop();)for(let a=0,i=s.length;a<i;){let c=s[a++];c&&!zr(c)&&(c._tag==="LeafNode"?ae(c.value)&&(t=r(t,c.value.value,c.key)):o.push(c.children))}return t});var KR="effect/HashSet",im=Symbol.for(KR),D3={[im]:im,[Symbol.iterator](){return rm(this._keyMap)},[N](){return G(this,W(A(this._keyMap))(A(KR)))},[F](e){return GR(e)?Pc(this._keyMap)===Pc(e._keyMap)&&R(this._keyMap,e._keyMap):!1},toString(){return X(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},cm=e=>{let t=Object.create(D3);return t._keyMap=e,t},GR=e=>v(e,im),L3=cm(Ic()),Au=()=>L3,JR=e=>{let t=pm(Au());for(let r of e)Fc(t,r);return um(t)},QR=(...e)=>{let t=pm(Au());for(let r of e)Fc(t,r);return um(t)},YR=u(2,(e,t)=>ib(e._keyMap,t));var ZR=e=>Pc(e._keyMap),pm=e=>cm(nm(e._keyMap)),um=e=>(e._keyMap._editable=!1,e),cb=u(2,(e,t)=>{let r=pm(e);return t(r),um(r)}),Fc=u(2,(e,t)=>e._keyMap._editable?(Ma(t,!0)(e._keyMap),e):cm(Ma(t,!0)(e._keyMap))),pb=u(2,(e,t)=>e._keyMap._editable?(sm(t)(e._keyMap),e):cm(sm(t)(e._keyMap))),XR=u(2,(e,t)=>cb(e,r=>{for(let n of t)pb(r,n)}));var e0=u(2,(e,t)=>cb(Au(),r=>{t0(e,n=>Fc(r,n));for(let n of t)Fc(r,n)}));var t0=u(2,(e,t)=>am(e._keyMap,(r,n)=>t(n))),r0=u(3,(e,t,r)=>Mc(e._keyMap,t,(n,o,s)=>r(n,s)));var Wn=Au,ub=JR,Fa=QR,n0=YR;var Na=ZR;var Po=Fc,Iu=pb,lb=XR;var zn=e0;var gs=r0;var Es="Empty",bs="Fail",Da="Interrupt",La="Parallel",Ua="Sequential";var a0="effect/Cause",db=Symbol.for(a0),H3={_E:e=>e},Dc={[db]:H3,[N](){return f(A(a0),W(A(W3(this))),G(this))},[F](e){return fm(e)&&q3(this,e)},pipe(){return C(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Q(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Q(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Q(this.left),right:Q(this.right)}}},toString(){return cr(this)},[z](){return this.toJSON()}},Cr=(()=>{let e=Object.create(Dc);return e._tag=Es,e})(),Bn=e=>{let t=Object.create(Dc);return t._tag=bs,t.error=e,t},yt=e=>{let t=Object.create(Dc);return t._tag="Die",t.defect=e,t},ir=e=>{let t=Object.create(Dc);return t._tag=Da,t.fiberId=e,t},jn=(e,t)=>{let r=Object.create(Dc);return r._tag=La,r.left=e,r.right=t,r},We=(e,t)=>{let r=Object.create(Dc);return r._tag=Ua,r.left=e,r.right=t,r},fm=e=>v(e,db),mb=e=>e._tag===Es,i0=e=>e._tag===bs,Pu=e=>e._tag==="Die";var qa=e=>e._tag===Es?!0:$a(e,!0,(t,r)=>{switch(r._tag){case Es:return w(t);case"Die":case bs:case Da:return w(!1);default:return _()}});var Lc=e=>ae(c0(e)),Uc=e=>ym(void 0,B3)(e),dm=e=>_r($a(e,Ve(),(t,r)=>r._tag===bs?w(f(t,Pe(r.error))):_())),mm=e=>_r($a(e,Ve(),(t,r)=>r._tag==="Die"?w(f(t,Pe(r.defect))):_())),$c=e=>$a(e,Wn(),(t,r)=>r._tag===Da?w(f(t,Po(r.fiberId))):_()),hm=e=>Hc(e,t=>t._tag===bs?w(t.error):_()),Mo=e=>{let t=hm(e);switch(t._tag){case"None":return $(e);case"Some":return U(t.value)}};var c0=e=>Hc(e,t=>t._tag===Da?w(t.fiberId):_());var xm=e=>gm(e,{onEmpty:Cr,onFail:()=>Cr,onDie:yt,onInterrupt:ir,onSequential:We,onParallel:jn}),p0=e=>gm(e,{onEmpty:Cr,onFail:yt,onDie:yt,onInterrupt:ir,onSequential:We,onParallel:jn});var hb=u(2,(e,t)=>u0(e,r=>Bn(t(r)))),u0=u(2,(e,t)=>gm(e,{onEmpty:Cr,onFail:r=>t(r),onDie:r=>yt(r),onInterrupt:r=>ir(r),onSequential:(r,n)=>We(r,n),onParallel:(r,n)=>jn(r,n)}));var q3=(e,t)=>{let r=Oe(e),n=Oe(t);for(;xt(r)&&xt(n);){let[o,s]=f(gt(r),$a([Wn(),Ve()],([c,p],l)=>{let[d,m]=fb(l);return w([f(c,zn(d)),f(p,ht(m))])})),[a,i]=f(gt(n),$a([Wn(),Ve()],([c,p],l)=>{let[d,m]=fb(l);return w([f(c,zn(d)),f(p,ht(m))])}));if(!R(o,a))return!1;r=s,n=i}return!0},W3=e=>z3(Oe(e),Ve()),z3=(e,t)=>{for(;;){let[r,n]=f(e,Dn([Wn(),Ve()],([s,a],i)=>{let[c,p]=fb(i);return[f(s,zn(c)),f(a,ht(p))]})),o=Na(r)>0?f(t,Pe(r)):t;if(Aa(n))return _r(o);e=n,t=o}throw new Error(ya("Cause.flattenCauseLoop"))},Hc=u(2,(e,t)=>{let r=[e];for(;r.length>0;){let n=r.pop(),o=t(n);switch(o._tag){case"None":{switch(n._tag){case Ua:case La:{r.push(n.right),r.push(n.left);break}}break}case"Some":return o}}return _()});var fb=e=>{let t=e,r=[],n=Wn(),o=Ve();for(;t!==void 0;)switch(t._tag){case Es:{if(r.length===0)return[n,o];t=r.pop();break}case bs:{if(n=Po(n,vc(t._tag,t.error)),r.length===0)return[n,o];t=r.pop();break}case"Die":{if(n=Po(n,vc(t._tag,t.defect)),r.length===0)return[n,o];t=r.pop();break}case Da:{if(n=Po(n,vc(t._tag,t.fiberId)),r.length===0)return[n,o];t=r.pop();break}case Ua:{switch(t.left._tag){case Es:{t=t.right;break}case Ua:{t=We(t.left.left,We(t.left.right,t.right));break}case La:{t=jn(We(t.left.left,t.right),We(t.left.right,t.right));break}default:{o=Pe(o,t.right),t=t.left;break}}break}case La:{r.push(t.right),t=t.left;break}}throw new Error(ya("Cause.evaluateCauseLoop"))};var B3={emptyCase:Dr,failCase:rr,dieCase:rr,interruptCase:Dr,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var o0="SequentialCase",s0="ParallelCase",gm=u(2,(e,{onDie:t,onEmpty:r,onFail:n,onInterrupt:o,onParallel:s,onSequential:a})=>ym(e,void 0,{emptyCase:()=>r,failCase:(i,c)=>n(c),dieCase:(i,c)=>t(c),interruptCase:(i,c)=>o(c),sequentialCase:(i,c,p)=>a(c,p),parallelCase:(i,c,p)=>s(c,p)})),$a=u(3,(e,t,r)=>{let n=t,o=e,s=[];for(;o!==void 0;){let a=r(n,o);switch(n=ae(a)?a.value:n,o._tag){case Ua:{s.push(o.right),o=o.left;break}case La:{s.push(o.right),o=o.left;break}default:{o=void 0;break}}o===void 0&&s.length>0&&(o=s.pop())}return n}),ym=u(3,(e,t,r)=>{let n=[e],o=[];for(;n.length>0;){let a=n.pop();switch(a._tag){case Es:{o.push($(r.emptyCase(t)));break}case bs:{o.push($(r.failCase(t,a.error)));break}case"Die":{o.push($(r.dieCase(t,a.defect)));break}case Da:{o.push($(r.interruptCase(t,a.fiberId)));break}case Ua:{n.push(a.right),n.push(a.left),o.push(U({_tag:o0}));break}case La:{n.push(a.right),n.push(a.left),o.push(U({_tag:s0}));break}}}let s=[];for(;o.length>0;){let a=o.pop();switch(a._tag){case"Left":{switch(a.left._tag){case o0:{let i=s.pop(),c=s.pop(),p=r.sequentialCase(t,i,c);s.push(p);break}case s0:{let i=s.pop(),c=s.pop(),p=r.parallelCase(t,i,c);s.push(p);break}}break}case"Right":{s.push(a.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),cr=(e,t)=>Uc(e)?"All fibers interrupted without errors.":Em(e).map(function(r){return t?.renderErrorCause!==!0||r.cause===void 0?r.stack:`${r.stack} {
${l0(r.cause,"  ")}
}`}).join(`
`),l0=(e,t)=>{let r=e.stack.split(`
`),n=`${t}[cause]: ${r[0]}`;for(let o=1,s=r.length;o<s;o++)n+=`
${t}${r[o]}`;return e.cause&&(n+=` {
${l0(e.cause,`${t}  `)}
${t}}`),n},lm=class e extends globalThis.Error{span=void 0;constructor(t){let r=typeof t=="object"&&t!==null,n=Error.stackTraceLimit;Error.stackTraceLimit=1,super(xb(t),r&&"cause"in t&&typeof t.cause<"u"?{cause:new e(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=n,this.name=t instanceof Error?t.name:"Error",r&&(Ha in t&&(this.span=t[Ha]),Object.keys(t).forEach(o=>{o in this||(this[o]=t[o])})),this.stack=V3(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}},xb=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(v(e,"toString")&&sn(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return xu(e)},j3=/\((.*)\)/g,Mu=D("effect/Tracer/spanToTrace",()=>new WeakMap),V3=(e,t,r)=>{let n=[e],o=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let s=1;s<o.length;s++){if(o[s].includes(" at new BaseEffectError")||o[s].includes(" at new YieldableError")){s++;continue}if(o[s].includes("Generator.next")||o[s].includes("effect_internal_function"))break;n.push(o[s].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let s=r,a=0;for(;s&&s._tag==="Span"&&a<10;){let i=Mu.get(s);if(typeof i=="function"){let c=i();if(typeof c=="string"){let p=c.matchAll(j3),l=!1;for(let[,d]of p)l=!0,n.push(`    at ${s.name} (${d})`);l||n.push(`    at ${s.name} (${c.replace(/^at /,"")})`)}else n.push(`    at ${s.name}`)}else n.push(`    at ${s.name}`);s=ar(s.parent),a++}}return n.join(`
`)},Ha=Symbol.for("effect/SpanAnnotation"),Em=e=>ym(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[new lm(r)],failCase:(t,r)=>[new lm(r)],interruptCase:()=>[],parallelCase:(t,r,n)=>[...r,...n],sequentialCase:(t,r,n)=>[...r,...n]});var yb=Symbol.for("effect/Duration"),x0=BigInt(0),f0=BigInt(24),bm=BigInt(60),Eb=BigInt(1e3),d0=BigInt(1e6),m0=BigInt(1e9),K3=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,kr=e=>{if(g0(e))return e;if(At(e))return Ss(e);if(ps(e))return gb(e);if(Array.isArray(e)&&e.length===2&&e.every(At))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?_s:e[0]===1/0||e[1]===1/0?Y3:gb(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Ne(e)){let t=K3.exec(e);if(t){let[r,n,o]=t,s=Number(n);switch(o){case"nano":case"nanos":return gb(BigInt(n));case"micro":case"micros":return Z3(BigInt(n));case"milli":case"millis":return Ss(s);case"second":case"seconds":return bb(s);case"minute":case"minutes":return X3(s);case"hour":case"hours":return eW(s);case"day":case"days":return tW(s);case"week":case"weeks":return rW(s)}}}throw new Error("Invalid DurationInput")};var h0={_tag:"Millis",millis:0},G3={_tag:"Infinity"},J3={[yb]:yb,[N](){return G(this,xd(this.value))},[F](e){return g0(e)&&iW(this,e)},toString(){return`Duration(${pW(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:oW(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},Vn=e=>{let t=Object.create(J3);return At(e)?isNaN(e)||e<=0?t.value=h0:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=G3:e<=x0?t.value=h0:t.value={_tag:"Nanos",nanos:e},t},g0=e=>v(e,yb);var Q3=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===x0;case"Infinity":return!1}},_s=Vn(0),Y3=Vn(1/0),gb=e=>Vn(e),Z3=e=>Vn(e*Eb),Ss=e=>Vn(e),bb=e=>Vn(e*1e3),X3=e=>Vn(e*6e4),eW=e=>Vn(e*36e5),tW=e=>Vn(e*864e5),rW=e=>Vn(e*6048e5),Fu=e=>sW(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6});var nW=e=>{let t=kr(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},oW=e=>{let t=kr(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/m0),Number(t.value.nanos%m0)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},sW=u(2,(e,t)=>{let r=kr(e);switch(r.value._tag){case"Nanos":return t.onNanos(r.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(r.value.millis)}}),Sb=u(3,(e,t,r)=>{let n=kr(e),o=kr(t);if(n.value._tag==="Infinity"||o.value._tag==="Infinity")return r.onMillis(Fu(n),Fu(o));if(n.value._tag==="Nanos"||o.value._tag==="Nanos"){let s=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6)),a=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6));return r.onNanos(s,a)}return r.onMillis(n.value.millis,o.value.millis)});var aW=(e,t)=>Sb(e,t,{onMillis:(r,n)=>r===n,onNanos:(r,n)=>r===n});var y0=u(2,(e,t)=>Sb(e,t,{onMillis:(r,n)=>r<=n,onNanos:(r,n)=>r<=n}));var _b=u(2,(e,t)=>Sb(e,t,{onMillis:(r,n)=>r>=n,onNanos:(r,n)=>r>=n})),iW=u(2,(e,t)=>aW(kr(e),kr(t))),cW=e=>{let t=kr(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};let r=nW(t),n=r/d0,o=n/Eb,s=o/bm,a=s/bm,i=a/f0;return{days:Number(i),hours:Number(a%f0),minutes:Number(s%bm),seconds:Number(o%bm),millis:Number(n%Eb),nanos:Number(r%d0)}},pW=e=>{let t=kr(e);if(t.value._tag==="Infinity")return"Infinity";if(Q3(t))return"0";let r=cW(t),n=[];return r.days!==0&&n.push(`${r.days}d`),r.hours!==0&&n.push(`${r.hours}h`),r.minutes!==0&&n.push(`${r.minutes}m`),r.seconds!==0&&n.push(`${r.seconds}s`),r.millis!==0&&n.push(`${r.millis}ms`),r.nanos!==0&&n.push(`${r.nanos}ns`),n.join(" ")};var E0=Symbol.for("effect/MutableRef"),uW={[E0]:E0,toString(){return X(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Q(this.current)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},Kn=e=>{let t=Object.create(uW);return t.current=e,t},b0=u(3,(e,t,r)=>R(t,e.current)?(e.current=r,!0):!1);var Ie=e=>e.current;var Br=u(2,(e,t)=>(e.current=t,e));var Sm="effect/FiberId",Cs=Symbol.for(Sm),Wc="None",Cb="Runtime",kb="Composite",lW=se(`${Sm}-${Wc}`),wb=class{[Cs]=Cs;_tag=Wc;id=-1;startTimeMillis=-1;[N](){return lW}[F](t){return _m(t)&&t._tag===Wc}toString(){return X(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[z](){return this.toJSON()}},Ob=class{id;startTimeMillis;[Cs]=Cs;_tag=Cb;constructor(t,r){this.id=t,this.startTimeMillis=r}[N](){return G(this,se(`${Sm}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[F](t){return _m(t)&&t._tag===Cb&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return X(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[z](){return this.toJSON()}},Tb=class{left;right;[Cs]=Cs;_tag=kb;constructor(t,r){this.left=t,this.right=r}_hash;[N](){return f(se(`${Sm}-${this._tag}`),W(A(this.left)),W(A(this.right)),G(this))}[F](t){return _m(t)&&t._tag===kb&&R(this.left,t.left)&&R(this.right,t.right)}toString(){return X(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Q(this.left),right:Q(this.right)}}[z](){return this.toJSON()}},Lu=new wb;var _m=e=>v(e,Cs);var vb=u(2,(e,t)=>e._tag===Wc?t:t._tag===Wc?e:new Tb(e,t)),_0=e=>f(e,gs(Lu,(t,r)=>vb(r)(t)));var Du=e=>{switch(e._tag){case Wc:return Wn();case Cb:return Fa(e.id);case kb:return f(Du(e.left),zn(Du(e.right)))}},S0=D(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Kn(0));var Wa=e=>Array.from(Du(e)).map(r=>`#${r}`).join(",");var C0=()=>{let e=Ie(S0);return f(S0,Br(e+1)),new Ob(e,Date.now())};var wr=Lu;var k0=vb,w0=_0;var Ab=Du;var O0=Wa;var Cm=C0;var No=Ic;var T0=$R,v0=qR,Ib=WR;var Gn=Ma,Pb=rm;var km=Pc;var R0=om;var A0=jR;var I0=am,Mb=Mc;var Uu=Symbol.for("effect/List"),Fb=e=>ne(e),fW=e=>Qy(wo(e),Fb),dW=fW(R),mW={[Uu]:Uu,_tag:"Cons",toString(){return X(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Fb(this).map(Q)}},[z](){return this.toJSON()},[F](e){return M0(e)&&this._tag===e._tag&&dW(this,e)},[N](){return G(this,or(Fb(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();let r=t.head;return t=t.tail,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},pipe(){return C(this,arguments)}},wm=(e,t)=>{let r=Object.create(mW);return r.head=e,r.tail=t,r},hW=se("Nil"),xW={[Uu]:Uu,_tag:"Nil",toString(){return X(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[z](){return this.toJSON()},[N](){return hW},[F](e){return M0(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return C(this,arguments)}},P0=Object.create(xW),M0=e=>v(e,Uu),Jn=e=>e._tag==="Nil",Ba=e=>e._tag==="Cons";var gW=()=>P0,Do=(e,t)=>wm(e,t),ln=gW,$u=e=>wm(e,P0);var F0=u(2,(e,t)=>yW(t,e)),Nb=u(2,(e,t)=>Do(t,e)),yW=u(2,(e,t)=>{if(Jn(e))return t;if(Jn(t))return e;{let r=wm(t.head,e),n=r,o=t.tail;for(;!Jn(o);){let s=wm(o.head,e);n.tail=s,n=s,o=o.tail}return r}});var N0=u(3,(e,t,r)=>{let n=t,o=e;for(;!Jn(o);)n=r(n,o.head),o=o.tail;return n});var D0=e=>{let t=ln(),r=e;for(;!Jn(r);)t=Nb(t,r.head),r=r.tail;return t};var EW=Object.assign(Object.create(Array.prototype),{[N](){return G(this,or(this))},[F](e){return Array.isArray(e)&&this.length===e.length?this.every((t,r)=>R(t,e[r])):!1}}),ks=(function(){function e(t){t&&Object.assign(this,t)}return e.prototype=wa,e})();var bW=Symbol.for("effect/DifferContextPatch");function U0(e){return e}var qu={...ks.prototype,[bW]:{_Value:U0,_Patch:U0}},SW=Object.assign(Object.create(qu),{_tag:"Empty"}),_W=Object.create(SW),Db=()=>_W,CW=Object.assign(Object.create(qu),{_tag:"AndThen"}),kW=(e,t)=>{let r=Object.create(CW);return r.first=e,r.second=t,r},wW=Object.assign(Object.create(qu),{_tag:"AddService"}),OW=(e,t)=>{let r=Object.create(wW);return r.key=e,r.service=t,r},TW=Object.assign(Object.create(qu),{_tag:"RemoveService"}),vW=e=>{let t=Object.create(TW);return t.key=e,t},RW=Object.assign(Object.create(qu),{_tag:"UpdateService"}),AW=(e,t)=>{let r=Object.create(RW);return r.key=e,r.update=t,r},$0=(e,t)=>{let r=new Map(e.unsafeMap),n=Db();for(let[o,s]of t.unsafeMap.entries())if(r.has(o)){let a=r.get(o);r.delete(o),R(a,s)||(n=Hu(AW(o,()=>s))(n))}else r.delete(o),n=Hu(OW(o,s))(n);for(let[o]of r.entries())n=Hu(vW(o))(n);return n},Hu=u(2,(e,t)=>kW(e,t)),H0=u(2,(e,t)=>{if(e._tag==="Empty")return t;let r=!1,n=Oe(e),o=new Map(t.unsafeMap);for(;xt(n);){let a=gt(n),i=Mt(n);switch(a._tag){case"Empty":{n=i;break}case"AddService":{o.set(a.key,a.service),n=i;break}case"AndThen":{n=Pe(Pe(i,a.second),a.first);break}case"RemoveService":{o.delete(a.key),n=i;break}case"UpdateService":{o.set(a.key,a.update(o.get(a.key))),r=!0,n=i;break}}}if(!r)return ds(o);let s=new Map;for(let[a]of t.unsafeMap)o.has(a)&&(s.set(a,o.get(a)),o.delete(a));for(let[a,i]of o)s.set(a,i);return ds(s)});var PW=Symbol.for("effect/DifferHashSetPatch");function Lb(e){return e}var Tm={...ks.prototype,[PW]:{_Value:Lb,_Key:Lb,_Patch:Lb}},MW=Object.assign(Object.create(Tm),{_tag:"Empty"}),FW=Object.create(MW),Ub=()=>FW,NW=Object.assign(Object.create(Tm),{_tag:"AndThen"}),DW=(e,t)=>{let r=Object.create(NW);return r.first=e,r.second=t,r},LW=Object.assign(Object.create(Tm),{_tag:"Add"}),UW=e=>{let t=Object.create(LW);return t.value=e,t},$W=Object.assign(Object.create(Tm),{_tag:"Remove"}),HW=e=>{let t=Object.create($W);return t.value=e,t},q0=(e,t)=>{let[r,n]=gs([e,Ub()],([o,s],a)=>n0(a)(o)?[Iu(a)(o),s]:[o,Om(UW(a))(s)])(t);return gs(n,(o,s)=>Om(HW(s))(o))(r)},Om=u(2,(e,t)=>DW(e,t)),W0=u(2,(e,t)=>{if(e._tag==="Empty")return t;let r=t,n=Oe(e);for(;xt(n);){let o=gt(n),s=Mt(n);switch(o._tag){case"Empty":{n=s;break}case"AndThen":{n=Pe(o.first)(Pe(o.second)(s));break}case"Add":{r=Po(o.value)(r),n=s;break}case"Remove":r=Iu(o.value)(r),n=s}}return r});var WW=Symbol.for("effect/DifferReadonlyArrayPatch");function z0(e){return e}var zu={...ks.prototype,[WW]:{_Value:z0,_Patch:z0}},zW=Object.assign(Object.create(zu),{_tag:"Empty"}),BW=Object.create(zW),$b=()=>BW,jW=Object.assign(Object.create(zu),{_tag:"AndThen"}),VW=(e,t)=>{let r=Object.create(jW);return r.first=e,r.second=t,r},KW=Object.assign(Object.create(zu),{_tag:"Append"}),GW=e=>{let t=Object.create(KW);return t.values=e,t},JW=Object.assign(Object.create(zu),{_tag:"Slice"}),QW=(e,t)=>{let r=Object.create(JW);return r.from=e,r.until=t,r},YW=Object.assign(Object.create(zu),{_tag:"Update"}),ZW=(e,t)=>{let r=Object.create(YW);return r.index=e,r.patch=t,r},B0=e=>{let t=0,r=$b();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],o=e.newValue[t],s=e.differ.diff(n,o);R(s,e.differ.empty)||(r=Wu(r,ZW(t,s))),t=t+1}return t<e.oldValue.length&&(r=Wu(r,QW(0,t))),t<e.newValue.length&&(r=Wu(r,GW(Sv(t)(e.newValue)))),r},Wu=u(2,(e,t)=>VW(e,t)),j0=u(3,(e,t,r)=>{if(e._tag==="Empty")return t;let n=t.slice(),o=Ot(e);for(;fs(o);){let s=rt(o),a=pn(o);switch(s._tag){case"Empty":{o=a;break}case"AndThen":{a.unshift(s.first,s.second),o=a;break}case"Append":{for(let i of s.values)n.push(i);o=a;break}case"Slice":{n=n.slice(s.from,s.until),o=a;break}case"Update":{n[s.index]=r.patch(s.patch,n[s.index]),o=a;break}}}return n});var V0=Symbol.for("effect/Differ"),ez={[V0]:{_P:L,_V:L},pipe(){return C(this,arguments)}},ws=e=>{let t=Object.create(ez);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},Hb=()=>ws({empty:Db(),combine:(e,t)=>Hu(t)(e),diff:(e,t)=>$0(e,t),patch:(e,t)=>H0(t)(e)});var qb=()=>ws({empty:Ub(),combine:(e,t)=>Om(t)(e),diff:(e,t)=>q0(e,t),patch:(e,t)=>W0(t)(e)});var Wb=e=>ws({empty:$b(),combine:(t,r)=>Wu(t,r),diff:(t,r)=>B0({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>j0(t,r,e)});var vm=()=>K0((e,t)=>t),K0=e=>ws({empty:L,combine:(t,r)=>t===L?r:r===L?t:n=>r(t(n)),diff:(t,r)=>R(t,r)?L:fu(r),patch:(t,r)=>e(r,t(r))});var Bu=255,G0=8,Rm=e=>e&Bu,Am=e=>e>>G0&Bu,ja=(e,t)=>(e&Bu)+((t&e&Bu)<<G0),Bb=ja(0,0),J0=e=>ja(e,e),Q0=e=>ja(e,0);var Y0=u(2,(e,t)=>ja(Rm(e)&~t,Am(e)));var jb=u(2,(e,t)=>e|t);var Z0=e=>~e>>>0&Bu;var tz=0,Qn=1,eA=2,Vb=4,Im=16,Kb=32;var tA=e=>Pm(e,Kb),Gb=u(2,(e,t)=>e&~t);var Jb=u(2,(e,t)=>e|t);var Lo=e=>Qb(e)&&!rz(e),Qb=e=>Pm(e,Qn);var Pm=u(2,(e,t)=>(e&t)!==0),Yb=(...e)=>e.reduce((t,r)=>t|r,0),rA=Yb(tz);var Zb=e=>Pm(e,Vb);var rz=e=>Pm(e,Im);var fn=u(2,(e,t)=>ja(e^t,t)),Os=u(2,(e,t)=>e&(Z0(Rm(t))|Am(t))|Rm(t)&Am(t));var Xb=ws({empty:Bb,diff:(e,t)=>fn(e,t),combine:(e,t)=>jb(t)(e),patch:(e,t)=>Os(t,e)});var nA=J0,eS=Q0;var tS=Y0;var nS=(e,t)=>({_tag:"Par",left:e,right:t}),Mm=(e,t)=>({_tag:"Seq",left:e,right:t});var aA=e=>{let t=$u(e),r=ln();for(;;){let[n,o]=N0(t,[iA(),ln()],([s,a],i)=>{let[c,p]=nz(i);return[uz(s,c),F0(a,p)]});if(r=oz(r,n),Jn(o))return D0(r);t=o}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},nz=e=>{let t=e,r=iA(),n=ln(),o=ln();for(;;)switch(t._tag){case"Empty":{if(Jn(n))return[r,o];t=n.head,n=n.tail;break}case"Par":{n=Do(t.right,n),t=t.left;break}case"Seq":{let s=t.left,a=t.right;switch(s._tag){case"Empty":{t=a;break}case"Par":{let i=s.left,c=s.right;t=nS(Mm(i,a),Mm(c,a));break}case"Seq":{let i=s.left,c=s.right;t=Mm(i,Mm(c,a));break}case"Single":{t=s,o=Do(a,o);break}}break}case"Single":{if(r=pz(r,t),Jn(n))return[r,o];t=n.head,n=n.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},oz=(e,t)=>{if(Jn(e))return $u(rS(t));if(lz(t))return e;let r=gz(e.head),n=fz(t);return r.length===1&&n.length===1&&R(r[0],n[0])?Do(xz(e.head,rS(t)),e.tail):Do(rS(t),e)},sz=Symbol.for("effect/RequestBlock/Entry"),sA=class{request;result;listeners;ownerId;state;[sz]=az;constructor(t,r,n,o,s){this.request=t,this.result=r,this.listeners=n,this.ownerId=o,this.state=s}},az={_R:e=>e};var iz=Symbol.for("effect/RequestBlock/RequestBlockParallel"),cz={_R:e=>e},Vu=class{map;[iz]=cz;constructor(t){this.map=t}},iA=()=>new Vu(No());var pz=(e,t)=>new Vu(R0(e.map,t.dataSource,r=>pv(Pt(r,Ra(t.blockedRequest)),()=>Oe(t.blockedRequest)))),uz=(e,t)=>new Vu(Mb(e.map,t.map,(r,n,o)=>Gn(r,o,ce(Ib(r,o),{onNone:()=>n,onSome:s=>ht(n,s)})))),lz=e=>v0(e.map),fz=e=>Array.from(Pb(e.map)),rS=e=>hz(A0(e.map,t=>Oe(t))),dz=Symbol.for("effect/RequestBlock/RequestBlockSequential"),mz={_R:e=>e},Fm=class{map;[dz]=mz;constructor(t){this.map=t}},hz=e=>new Fm(e),xz=(e,t)=>new Fm(Mb(t.map,e.map,(r,n,o)=>Gn(r,o,ce(Ib(r,o),{onNone:()=>Ve(),onSome:s=>ht(s,n)}))));var gz=e=>Array.from(Pb(e.map)),cA=e=>Array.from(e.map);var Va="Pending",jc="Done";var Ez="effect/Deferred",uA=Symbol.for(Ez),lA={_E:e=>e,_A:e=>e},fA=e=>({_tag:Va,joiners:e}),oS=e=>({_tag:jc,effect:e});var Vc=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var Hm=(e,t)=>{let r=new Ke("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},fS=e=>{let t=new Ke("RunBlocked");return t.effect_instruction_i0=e,t},Ts=Symbol.for("effect/Effect"),Nm=class{patch;op;_op=yu;constructor(t,r){this.patch=t,this.op=r}},Ke=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ts]=ls;constructor(t){this._op=t}[F](t){return this===t}[N](){return G(this,nc(this))}pipe(){return C(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Q(this.effect_instruction_i0),effect_instruction_i1:Q(this.effect_instruction_i1),effect_instruction_i2:Q(this.effect_instruction_i2)}}toString(){return X(this.toJSON())}[z](){return this.toJSON()}[Symbol.iterator](){return new Vc(new Pn(this))}},Dm=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ts]=ls;constructor(t){this._op=t,this._tag=t}[F](t){return rl(t)&&t._op==="Failure"&&R(this.effect_instruction_i0,t.effect_instruction_i0)}[N](){return f(se(this._tag),W(A(this.effect_instruction_i0)),G(this))}get cause(){return this.effect_instruction_i0}pipe(){return C(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return X(this.toJSON())}[z](){return this.toJSON()}[Symbol.iterator](){return new Vc(new Pn(this))}},Lm=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ts]=ls;constructor(t){this._op=t,this._tag=t}[F](t){return rl(t)&&t._op==="Success"&&R(this.effect_instruction_i0,t.effect_instruction_i0)}[N](){return f(se(this._tag),W(A(this.effect_instruction_i0)),G(this))}get value(){return this.effect_instruction_i0}pipe(){return C(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Q(this.value)}}toString(){return X(this.toJSON())}[z](){return this.toJSON()}[Symbol.iterator](){return new Vc(new Pn(this))}},Nt=e=>v(e,Ts),Y=e=>{let t=new Ke(bd);return t.effect_instruction_i0=e,t},dS=u(3,(e,t,r)=>Tt(n=>E(e,o=>E(Or(J(()=>n(t(o)))),s=>J(()=>r(o,s)).pipe(ot({onFailure:a=>{switch(s._tag){case He:return ge(We(s.effect_instruction_i0,a));case qe:return ge(a)}},onSuccess:()=>s})))))),Me=u(2,(e,t)=>E(e,()=>I(t))),st=e=>Me(e,void 0),mS=function(){let e=new Ke(Ca);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(ya("you're not supposed to end up here"))}return e},Gc=(e,t=wr)=>{let r=new Ke(_a),n;return r.effect_instruction_i0=o=>{n=e(o)},r.effect_instruction_i1=t,Ho(r,o=>Nt(n)?n:re)},Gu=(e,t=wr)=>J(()=>Gc(e,t)),pr=(e,t=wr)=>mS(e,function(){let r,n;function o(c){r?r(c):n===void 0&&(n=c)}let s=new Ke(_a);s.effect_instruction_i0=c=>{r=c,n&&c(n)},s.effect_instruction_i1=t;let a,i;return this.effect_instruction_i0.length!==1?(i=new AbortController,a=tt(()=>this.effect_instruction_i0(o,i.signal))):a=tt(()=>this.effect_instruction_i0(o)),a||i?Ho(s,c=>(i&&i.abort(),a??re)):s});var Jc=u(2,(e,t)=>{let r=new Ke(sc);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),jr=u(2,(e,t)=>Tr(e,{onFailure:t,onSuccess:I})),qm=u(3,(e,t,r)=>Jc(e,n=>{let o=Mo(n);switch(o._tag){case"Left":return t(o.left)?r(o.left):ge(n);case"Right":return ge(o.right)}}));var dA=Symbol.for("effect/OriginalAnnotation");var Wm=(e,t)=>ae(t)?new Proxy(e,{has(r,n){return n===Ha||n===dA||n in r},get(r,n){return n===Ha?t.value:n===dA?e:r[n]}}):e,dn=e=>Wt(e)&&!(Ha in e)?Y(t=>ge(yt(Wm(e,oh(t))))):ge(yt(e)),Qc=e=>Yc(()=>yt(new wA(e)));var mn=e=>Tr(e,{onFailure:t=>I(U(t)),onSuccess:t=>I($(t))}),Or=e=>zm(e,{onFailure:xe,onSuccess:Se}),be=e=>Wt(e)&&!(Ha in e)?Y(t=>ge(Bn(Wm(e,oh(t))))):ge(Bn(e)),vs=e=>E(k(e),be),ge=e=>{let t=new Dm(He);return t.effect_instruction_i0=e,t},Yc=e=>E(k(e),ge),Ka=Y(e=>I(e.id())),Uo=e=>Y(t=>e(t.id())),E=u(2,(e,t)=>{let r=new Ke(ac);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),hA=u(2,(e,t)=>E(e,r=>{let n=typeof t=="function"?t(r):t;return Nt(n)?n:Yy(n)?Gc(o=>{n.then(s=>o(I(s)),s=>o(be(new ap(s,"An unknown error occurred in Effect.andThen"))))}):I(n)})),hS=e=>{let t=new Ke("OnStep");return t.effect_instruction_i0=e,t},hn=e=>E(e,L);var zm=u(2,(e,t)=>ot(e,{onFailure:r=>I(t.onFailure(r)),onSuccess:r=>I(t.onSuccess(r))})),ot=u(2,(e,t)=>{let r=new Ke(ic);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r}),Tr=u(2,(e,t)=>ot(e,{onFailure:r=>{if(mm(r).length>0)return ge(p0(r));let o=dm(r);return o.length>0?t.onFailure(eb(o)):ge(r)},onSuccess:t.onSuccess})),ur=u(2,(e,t)=>J(()=>{let r=ne(e),n=Oa(r.length),o=0;return Me(Yu({while:()=>o<r.length,body:()=>t(r[o],o),step:s=>{n[o++]=s}}),n)})),$o=u(2,(e,t)=>J(()=>{let r=ne(e),n=0;return Yu({while:()=>n<r.length,body:()=>t(r[n],n),step:()=>{n++}})}));var Vr=E(Ka,e=>xS(e)),xS=e=>ge(ir(e)),Zc=e=>{let t=new Ke(us);return t.effect_instruction_i0=nA(Qn),t.effect_instruction_i1=()=>e,t};var Xc=u(2,(e,t)=>Tt(r=>E(Or(r(e)),n=>FA(t,n)))),B=u(2,(e,t)=>E(e,r=>k(()=>t(r)))),Ju=u(2,(e,t)=>Tr(e,{onFailure:r=>vs(()=>t.onFailure(r)),onSuccess:r=>k(()=>t.onSuccess(r))})),Rs=u(2,(e,t)=>ot(e,{onFailure:r=>{let n=Mo(r);switch(n._tag){case"Left":return vs(()=>t(n.left));case"Right":return ge(n.right)}},onSuccess:I}));var vr=u(2,(e,t)=>Tt(r=>ot(r(e),{onFailure:n=>{let o=xe(n);return ot(t(o),{onFailure:s=>xe(We(n,s)),onSuccess:()=>o})},onSuccess:n=>{let o=Se(n);return ye(t(o),o)}}))),Ho=u(2,(e,t)=>vr(e,si({onFailure:r=>Uc(r)?st(t($c(r))):re,onSuccess:()=>re})));var Bm=e=>xA(e,L),xA=u(2,(e,t)=>Tr(e,{onFailure:r=>dn(t(r)),onSuccess:I}));var jm=Y((e,t)=>I(t.runtimeFlags)),I=e=>{let t=new Lm(qe);return t.effect_instruction_i0=e,t},J=e=>{let t=new Ke(Ca);return t.commit=e,t},k=e=>{let t=new Ke(Ed);return t.effect_instruction_i0=e,t},Kr=u(e=>e.length===3||e.length===2&&!(Wt(e[1])&&"onlyEffect"in e[1]),(e,t)=>E(e,r=>{let n=typeof t=="function"?t(r):t;return Nt(n)?Me(n,r):Yy(n)?Gc(o=>{n.then(s=>o(I(r)),s=>o(be(new ap(s,"An unknown error occurred in Effect.tap"))))}):I(r)})),gS=e=>Y(t=>{let r=t.getFiberRef(Um),n=f(r,fe(()=>t.scope()));return e(Gr(Um,w(n)))});var As=e=>{let t=new Ke(us);return t.effect_instruction_i0=eS(Qn),t.effect_instruction_i1=()=>e,t},Tt=e=>mS(e,function(){let t=new Ke(us);return t.effect_instruction_i0=eS(Qn),t.effect_instruction_i1=r=>Qb(r)?tt(()=>this.effect_instruction_i0(Zc)):tt(()=>this.effect_instruction_i0(As)),t}),re=I(void 0);var Qu=e=>{let t=new Ke(us);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},Ga=u(2,(e,t)=>E(t,r=>r?f(e,B(w)):I(_()))),Yu=e=>{let t=new Ke(cc);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},yS=e=>J(()=>{let t=new Ke(ka);return t.effect_instruction_i0=e(),t}),gA=function(){let e=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return yS(()=>e(f))};var ES=u(2,(e,t)=>{let r=new Ke(us);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r});var Ja=e=>{let t=new Ke(pc);return typeof e?.priority<"u"?_A(t,e.priority):t},Qa=u(2,(e,t)=>E(e,r=>B(t,n=>[r,n])));var Ya=u(2,(e,t)=>E(e,r=>Me(t,r))),ye=u(2,(e,t)=>E(e,()=>t)),Za=u(3,(e,t,r)=>E(e,n=>B(t,o=>r(n,o)))),ep=Gu(()=>{let e=setInterval(()=>{},2147483647);return k(()=>clearInterval(e))}),Xa=e=>E(Ka,t=>f(e,Yn(t))),Yn=u(2,(e,t)=>E(e.interruptAsFork(t),()=>e.await)),bS={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return C(this,arguments)}},SS={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return C(this,arguments)}},_S={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return C(this,arguments)}},Vm={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return C(this,arguments)}},tp={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return C(this,arguments)}},Km={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return C(this,arguments)}},CS={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return C(this,arguments)}},kS={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return C(this,arguments)}},yA=[bS,CS,Km,tp,Vm,_S,SS,kS],_z="effect/FiberRef",EA=Symbol.for(_z),Cz={_A:e=>e},ei=e=>Y(t=>Se(t.getFiberRef(e)));var Zn=u(2,(e,t)=>E(ei(e),t)),Kc=u(2,(e,t)=>wS(e,()=>[void 0,t]));var wS=u(2,(e,t)=>Y(r=>{let[n,o]=t(r.getFiberRef(e));return r.setFiberRef(e,o),I(n)}));var OS=u(2,(e,t)=>wS(e,r=>[void 0,t(r)]));var kz="effect/RequestResolver",bA=Symbol.for(kz),wz={_A:e=>e,_R:e=>e},mA=class e{runAll;target;[bA]=wz;constructor(t,r){this.runAll=t,this.target=r}[N](){return G(this,this.target?A(this.target):nc(this))}[F](t){return this.target?Oz(t)&&R(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Wr(t))}pipe(){return C(this,arguments)}},Oz=e=>v(e,bA);var Gr=u(3,(e,t,r)=>dS(Ya(ei(t),Kc(t,r)),()=>e,n=>Kc(t,n))),Is=u(3,(e,t,r)=>Zn(t,n=>Gr(e,t,r(n)))),ze=(e,t)=>Ps(e,{differ:vm(),fork:t?.fork??L,join:t?.join}),TS=e=>{let t=qb();return Ps(e,{differ:t,fork:t.empty})},Tz=e=>{let t=Wb(vm());return Ps(e,{differ:t,fork:t.empty})},Zu=e=>{let t=Hb();return Ps(e,{differ:t,fork:t.empty})},Ps=(e,t)=>({...cn,[EA]:Cz,initial:e,commit(){return ei(this)},diff:(n,o)=>t.differ.diff(n,o),combine:(n,o)=>t.differ.combine(n,o),patch:n=>o=>t.differ.patch(n,o),fork:t.fork,join:t.join??((n,o)=>o)}),SA=e=>Ps(e,{differ:Xb,fork:Xb.empty}),Dt=D(Symbol.for("effect/FiberRef/currentContext"),()=>Zu(Er())),Xn=D(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>ze(0)),Gm=D(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>ze(2048)),rp=D(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>ze(No())),Jm=D(Symbol.for("effect/FiberRef/currentLogLevel"),()=>ze(tp)),Xu=D(Symbol.for("effect/FiberRef/currentLogSpan"),()=>ze(ln())),_A=u(2,(e,t)=>Gr(e,Xn,t));var vS=D(Symbol.for("effect/FiberRef/currentConcurrency"),()=>ze("unbounded")),RS=D(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>ze(!0)),AS=D(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>ze(w(Km))),IS=D(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>ze(w(Vm)));var ti=D(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>Tz(jt()));var Um=D(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>ze(_(),{fork:()=>_(),join:(e,t)=>e})),ri=D(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>ze(Cr,{fork:()=>Cr,join:(e,t)=>e})),Qm=D(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>ze(!0)),el=D(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>ze(!0)),Ym=D(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>ze(No())),PS=D(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>ze(Ve())),Zm=Symbol.for("effect/Scope"),Xm=Symbol.for("effect/CloseableScope"),np=(e,t)=>e.addFinalizer(()=>st(t)),ni=(e,t)=>e.addFinalizer(t),op=(e,t)=>e.close(t),sp=(e,t)=>e.fork(t),CA=e=>kA(L)(e),kA=u(2,(e,t)=>{let r=f(e,hm,Pt(t));switch(r._tag){case"None":return f(mm(e),Ia,ce({onNone:()=>{let n=ne($c(e)).flatMap(o=>ne(Ab(o)).map(s=>`#${s}`));return new OA(n?`Interrupted by fibers: ${n.join(", ")}`:void 0)},onSome:L}));case"Some":return r.value}}),tl=(function(){class e extends globalThis.Error{commit(){return be(this)}toJSON(){let r={...this};return this.message&&(r.message=this.message),this.cause&&(r.cause=this.cause),r}[z](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?cr(Bn(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,eE),e})(),oi=(e,t)=>{class r extends tl{_tag=t}return Object.assign(r.prototype,e),r.prototype.name=t,r},sS=Symbol.for("effect/Cause/errors/RuntimeException"),wA=oi({[sS]:sS},"RuntimeException");var $m=Symbol.for("effect/Cause/errors/InterruptedException"),OA=oi({[$m]:$m},"InterruptedException"),MS=e=>v(e,$m),aS=Symbol.for("effect/Cause/errors/IllegalArgument"),eh=oi({[aS]:aS},"IllegalArgumentException");var iS=Symbol.for("effect/Cause/errors/NoSuchElement"),qo=oi({[iS]:iS},"NoSuchElementException");var cS=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),HQ=oi({[cS]:cS},"InvalidPubSubCapacityException"),pS=Symbol.for("effect/Cause/errors/ExceededCapacityException"),vz=oi({[pS]:pS},"ExceededCapacityException");var uS=Symbol.for("effect/Cause/errors/Timeout"),Rz=oi({[uS]:uS},"TimeoutException");var lS=Symbol.for("effect/Cause/errors/UnknownException"),ap=(function(){class e extends tl{_tag="UnknownException";error;constructor(r,n){super(n??"An unknown error occurred",{cause:r}),this.error=r}}return Object.assign(e.prototype,{[lS]:lS,name:"UnknownException"}),e})();var rl=e=>Nt(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),th=e=>e._tag==="Failure",FS=e=>e._tag==="Success",TA=e=>{switch(e._tag){case He:return Lc(e.effect_instruction_i0);case qe:return!1}},vA=u(2,(e,t)=>{switch(e._tag){case He:return xe(e.effect_instruction_i0);case qe:return Se(t)}}),nl=e=>vA(e,void 0);var Ms=(e,t)=>Az(e,t?.parallel?jn:We),Wo=e=>xe(yt(e));var ip=e=>xe(Bn(e)),xe=e=>{let t=new Dm(He);return t.effect_instruction_i0=e,t},RA=u(2,(e,t)=>{switch(e._tag){case He:return xe(e.effect_instruction_i0);case qe:return t(e.effect_instruction_i0)}});var AA=e=>f(e,RA(L));var NS=e=>xe(ir(e)),Ku=u(2,(e,t)=>{switch(e._tag){case He:return xe(e.effect_instruction_i0);case qe:return Se(t(e.effect_instruction_i0))}});var si=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case He:return t(e.effect_instruction_i0);case qe:return r(e.effect_instruction_i0)}}),cp=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case He:return t(e.effect_instruction_i0);case qe:return r(e.effect_instruction_i0)}}),Se=e=>{let t=new Lm(qe);return t.effect_instruction_i0=e,t},Et=Se(void 0),IA=u(2,(e,t)=>ol(e,t,{onSuccess:(r,n)=>[r,n],onFailure:We}));var PA=u(2,(e,t)=>ol(e,t,{onSuccess:(r,n)=>n,onFailure:We}));var ol=u(3,(e,t,{onFailure:r,onSuccess:n})=>{switch(e._tag){case He:switch(t._tag){case qe:return xe(e.effect_instruction_i0);case He:return xe(r(e.effect_instruction_i0,t.effect_instruction_i0))}case qe:switch(t._tag){case qe:return Se(n(e.effect_instruction_i0,t.effect_instruction_i0));case He:return xe(t.effect_instruction_i0)}}}),Az=(e,t)=>{let r=Wr(e);return xt(r)?f(Mt(r),Dn(f(gt(r),Ku(Oe)),(n,o)=>f(n,ol(o,{onSuccess:(s,a)=>f(s,Pe(a)),onFailure:t}))),Ku(_r),Ku(n=>Sr(n)),w):_()},ai=e=>({...cn,[uA]:lA,state:Kn(fA([])),commit(){return Kt(this)},blockingOn:e}),xn=()=>E(Ka,e=>MA(e)),MA=e=>k(()=>ai(e)),Kt=e=>Gu(t=>{let r=Ie(e.state);switch(r._tag){case jc:return t(r.effect);case Va:return r.joiners.push(t),Iz(e,t)}},e.blockingOn);var sl=u(2,(e,t)=>k(()=>{let r=Ie(e.state);switch(r._tag){case jc:return!1;case Va:{Br(e.state,oS(t));for(let n=0,o=r.joiners.length;n<o;n++)r.joiners[n](t);return!0}}})),FA=u(2,(e,t)=>sl(e,t));var pp=u(2,(e,t)=>sl(e,ge(t)));var rh=u(2,(e,t)=>sl(e,xS(t))),NA=e=>k(()=>Ie(e.state)._tag===jc);var ii=u(2,(e,t)=>sl(e,I(t)));var ci=(e,t)=>{let r=Ie(e.state);if(r._tag===Va){Br(e.state,oS(t));for(let n=0,o=r.joiners.length;n<o;n++)r.joiners[n](t)}},Iz=(e,t)=>k(()=>{let r=Ie(e.state);if(r._tag===Va){let n=r.joiners.indexOf(t);n>=0&&r.joiners.splice(n,1)}}),Pz=Y(e=>Se(e.currentContext)),pi=()=>Pz;var gn=e=>E(pi(),e),yn=u(2,(e,t)=>Gr(Dt,t)(e)),nh=u(2,(e,t)=>Is(Dt,r=>br(r,t))(e)),up=u(2,(e,t)=>gn(r=>yn(e,t(r))));var oh=e=>{let t=e.currentSpan;return t!==void 0&&t._tag==="Span"?w(t):_()},Mz={_tag:"Span",spanId:"noop",traceId:"noop",sampled:!1,status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Et},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){},addLinks(){}},DA=e=>Object.assign(Object.create(Mz),e);var LA=Cr,sh=Bn,ui=yt,UA=ir;var $A=i0,DS=Pu;var lp=Lc;var HA=$c;var fp=Mo;var ah=hb;var ih=CA;var qA=cr;var ch="InvalidData",ph="MissingData",uh="SourceUnavailable",lh="Unsupported";var Uz="effect/ConfigError",LS=Symbol.for(Uz),dp={_tag:"ConfigError",[LS]:LS},al=(e,t)=>{let r=Object.create(dp);return r._op="And",r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(r,"message",{enumerable:!1,get(){return this.toString()}}),r},il=(e,t)=>{let r=Object.create(dp);return r._op="Or",r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(r,"message",{enumerable:!1,get(){return this.toString()}}),r},li=(e,t,r={pathDelim:"."})=>{let n=Object.create(dp);return n._op=ch,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Invalid data at ${f(this.path,Ln(r.pathDelim))}: "${this.message}")`}}),n},Jr=(e,t,r={pathDelim:"."})=>{let n=Object.create(dp);return n._op=ph,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Missing data at ${f(this.path,Ln(r.pathDelim))}: "${this.message}")`}}),n},WA=(e,t,r,n={pathDelim:"."})=>{let o=Object.create(dp);return o._op=uh,o.path=e,o.message=t,o.cause=r,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Source unavailable at ${f(this.path,Ln(n.pathDelim))}: "${this.message}")`}}),o},HS=(e,t,r={pathDelim:"."})=>{let n=Object.create(dp);return n._op=lh,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${f(this.path,Ln(r.pathDelim))}: "${this.message}")`}}),n};var zo=u(2,(e,t)=>{switch(e._op){case"And":return al(zo(e.left,t),zo(e.right,t));case"Or":return il(zo(e.left,t),zo(e.right,t));case ch:return li([...t,...e.path],e.message);case ph:return Jr([...t,...e.path],e.message);case uh:return WA([...t,...e.path],e.message,e.cause);case lh:return HS([...t,...e.path],e.message)}}),$z={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:rr,missingDataCase:Dr,sourceUnavailableCase:rr,unsupportedCase:rr},zA=u(3,(e,t,r)=>{let n=[e],o=[];for(;n.length>0;){let a=n.pop();switch(a._op){case"And":{n.push(a.right),n.push(a.left),o.push(U({_op:"AndCase"}));break}case"Or":{n.push(a.right),n.push(a.left),o.push(U({_op:"OrCase"}));break}case ch:{o.push($(r.invalidDataCase(t,a.path,a.message)));break}case ph:{o.push($(r.missingDataCase(t,a.path,a.message)));break}case uh:{o.push($(r.sourceUnavailableCase(t,a.path,a.message,a.cause)));break}case lh:{o.push($(r.unsupportedCase(t,a.path,a.message)));break}}}let s=[];for(;o.length>0;){let a=o.pop();switch(a._op){case"Left":{switch(a.left._op){case"AndCase":{let i=s.pop(),c=s.pop(),p=r.andCase(t,i,c);s.push(p);break}case"OrCase":{let i=s.pop(),c=s.pop(),p=r.orCase(t,i,c);s.push(p);break}}break}case"Right":{s.push(a.right);break}}}if(s.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),BA=e=>zA(e,void 0,$z);var dh=li;var jA=BA;var Hz="effect/Clock",WS=Symbol.for(Hz),to=pt("effect/Clock"),qz=2**31-1,VA={unsafeSchedule(e,t){let r=Fu(t);if(r>qz)return rr;let n=!1,o=setTimeout(()=>{n=!0,e()},r);return()=>(clearTimeout(o),!n)}},KA=(function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))})(),Wz=(function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return KA;let t=KA()-e.bigint();return()=>t+e.bigint()})(),zS=class{[WS]=WS;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return Wz()}currentTimeMillis=k(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=k(()=>this.unsafeCurrentTimeNanos());scheduler(){return I(VA)}sleep(t){return pr(r=>{let n=VA.unsafeSchedule(()=>r(re),t);return st(k(n))})}},BS=()=>new zS;var ro=iv;var mp=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&");var hh={_tag:"Empty"},JA=u(2,(e,t)=>({_tag:"AndThen",first:e,second:t})),QA=u(2,(e,t)=>JA(e,{_tag:"MapName",f:t})),YA=u(2,(e,t)=>JA(e,{_tag:"Nested",name:t}));var Fs=u(2,(e,t)=>{let r=$u(t),n=e;for(;Ba(r);){let o=r.head;switch(o._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=Do(o.first,Do(o.second,r.tail));break}case"MapName":{n=$r(n,o.f),r=r.tail;break}case"Nested":{n=mc(n,o.name),r=r.tail;break}case"Unnested":{if(f(So(n),mv(o.name)))n=pn(n),r=r.tail;else return U(Jr(n,`Expected ${o.name} to be in path in ConfigProvider#unnested`));break}}}return $(n)});var xh="Constant",VS="Fail",cl="Fallback",KS="Described",gh="Lazy",yh="MapOrFail",Eh="Nested",bh="Primitive",GS="Sequence",JS="HashMap",QS="ZipWith";var eI=e=>e.toLowerCase(),tI=e=>e.toUpperCase(),XA=(e,t,r)=>t instanceof RegExp?e.replace(t,r):t.reduce((n,o)=>n.replace(o,r),e),Kz=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Gz=/[^A-Z0-9]+/gi,Jz=(e,t={})=>{let{delimiter:r=" ",splitRegexp:n=Kz,stripRegexp:o=Gz,transform:s=eI}=t,a=XA(XA(e,n,"$1\0$2"),o,"\0"),i=0,c=a.length;for(;a.charAt(i)==="\0";)i++;for(;a.charAt(c-1)==="\0";)c--;return a.slice(i,c).split("\0").map(s).join(r)};var rI=(e,t)=>Jz(e,{delimiter:"_",transform:tI,...t});var Sh=(e,t)=>[...e,...t],Yz="effect/ConfigProvider",YS=Symbol.for(Yz),hp=pt("effect/ConfigProvider"),Zz="effect/ConfigProviderFlat",ZS=Symbol.for(Zz),nI=e=>({[YS]:YS,pipe(){return C(this,arguments)},...e}),xp=e=>({[ZS]:ZS,patch:e.patch,load:(t,r,n=!0)=>e.load(t,r,n),enumerateChildren:e.enumerateChildren}),gp=e=>nI({load:t=>E(Qr(e,jt(),t,!1),r=>ce(So(r),{onNone:()=>be(Jr(jt(),`Expected a single value having structure: ${t}`)),onSome:I})),flattened:e}),_h=e=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=c=>f(c,Ln(t)),o=c=>c.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return gp(xp({load:(c,p,l=!0)=>{let d=n(c),m=s(),h=d in m?w(m[d]):_();return f(h,Rs(()=>Jr(c,`Expected ${d} to exist in the process context`)),E(x=>cI(x,c,p,r,l)))},enumerateChildren:c=>k(()=>{let p=s(),m=Object.keys(p).map(h=>o(h.toUpperCase())).filter(h=>{for(let x=0;x<c.length;x++){let b=f(c,wd(x)),S=h[x];if(S===void 0||b!==S)return!1}return!0}).flatMap(h=>h.slice(c.length,c.length+1));return ub(m)}),patch:hh}))},XS=(e,t)=>{let{pathDelim:r,seqDelim:n}=Object.assign({seqDelim:",",pathDelim:"."},t),o=p=>f(p,Ln(r)),s=p=>p.split(r),a=uB(e,p=>s(p),o);return gp(xp({load:(p,l,d=!0)=>{let m=o(p),h=a.has(m)?w(a.get(m)):_();return f(h,Rs(()=>Jr(p,`Expected ${m} to exist in the provided map`)),E(x=>cI(x,p,l,n,d)))},enumerateChildren:p=>k(()=>{let d=ne(a.keys()).map(s).filter(m=>{for(let h=0;h<p.length;h++){let x=f(p,wd(h)),b=m[h];if(b===void 0||x!==b)return!1}return!0}).flatMap(m=>m.slice(p.length,p.length+1));return ub(d)}),patch:hh}))},Xz=(e,t,r,n)=>{let o=bE(r.length,c=>c>=n.length?_():w([e(c),c+1])),s=bE(n.length,c=>c>=r.length?_():w([t(c),c+1])),a=Sh(r,o),i=Sh(n,s);return[a,i]},eB=(e,t)=>{let r=t;if(r._tag==="Nested"){let n=e.slice();for(;r._tag==="Nested";)n.push(r.name),r=r.config;return n}return e},Qr=(e,t,r,n)=>{let o=r;switch(o._tag){case xh:return I(Ot(o.value));case KS:return J(()=>Qr(e,t,o.config,n));case VS:return be(Jr(t,o.message));case cl:return f(J(()=>Qr(e,t,o.first,n)),jr(s=>o.condition(s)?f(Qr(e,t,o.second,n),jr(a=>be(il(s,a)))):be(s)));case gh:return J(()=>Qr(e,t,o.config(),n));case yh:return J(()=>f(Qr(e,t,o.original,n),E(ur(s=>f(o.mapOrFail(s),Rs(zo(eB(t,o.original))))))));case Eh:return J(()=>Qr(e,Sh(t,Ot(o.name)),o.config,n));case bh:return f(Fs(t,e.patch),E(s=>f(e.load(s,o,n),E(a=>{if(a.length===0){let i=f(Od(s),fe(()=>"<n/a>"));return be(Jr([],`Expected ${o.description} with name ${i}`))}return I(a)}))));case GS:return f(Fs(t,e.patch),E(s=>f(e.enumerateChildren(s),E(aB),E(a=>a.length===0?J(()=>B(Qr(e,t,o.config,!0),Ot)):f(ur(a,i=>Qr(e,_u(t,`[${i}]`),o.config,!0)),B(i=>{let c=Td(i);return c.length===0?Ot(jt()):Ot(c)}))))));case JS:return J(()=>f(Fs(t,e.patch),E(s=>f(e.enumerateChildren(s),E(a=>f(a,ur(i=>Qr(e,Sh(s,Ot(i)),o.valueConfig,n)),B(i=>i.length===0?Ot(No()):f(sB(i),$r(c=>T0(yE(ne(a),c)))))))))));case QS:return J(()=>f(Qr(e,t,o.left,n),mn,E(s=>f(Qr(e,t,o.right,n),mn,E(a=>{if(De(s)&&De(a))return be(al(s.left,a.left));if(De(s)&&It(a))return be(s.left);if(It(s)&&De(a))return be(a.left);if(It(s)&&It(a)){let i=f(t,Ln(".")),c=tB(t,i),[p,l]=Xz(c,c,f(s.right,$r($)),f(a.right,$r($)));return f(p,yE(l),ur(([d,m])=>f(Qa(d,m),B(([h,x])=>o.zip(h,x)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},tB=(e,t)=>r=>U(Jr(e,`The element at index ${r} in a sequence at path "${t}" was missing`)),oI=u(2,(e,t)=>gp(rB(e.flattened,t))),rB=(e,t)=>xp({load:(r,n,o=!0)=>e.load(r,n,o),enumerateChildren:r=>e.enumerateChildren(r),patch:QA(e.patch,t)}),sI=u(2,(e,t)=>gp(xp({load:(r,n)=>e.flattened.load(r,n,!0),enumerateChildren:r=>e.flattened.enumerateChildren(r),patch:YA(e.flattened.patch,t)})));var aI=u(2,(e,t)=>gp(nB(e.flattened,()=>t().flattened))),nB=(e,t)=>xp({load:(r,n,o)=>f(Fs(r,e.patch),E(s=>e.load(s,n,o)),jr(s=>f(k(t),E(a=>f(Fs(r,a.patch),E(i=>a.load(i,n,o)),jr(i=>be(il(s,i)))))))),enumerateChildren:r=>f(Fs(r,e.patch),E(n=>e.enumerateChildren(n)),mn,E(n=>f(k(t),E(o=>f(Fs(r,o.patch),E(s=>o.enumerateChildren(s)),mn,E(s=>{if(De(n)&&De(s))return be(al(n.left,s.left));if(De(n)&&It(s))return I(s.right);if(It(n)&&De(s))return I(n.right);if(It(n)&&It(s))return I(f(n.right,zn(s.right)));throw new Error("BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),patch:hh}),iI=e=>oI(e,rI);var oB=(e,t)=>e.split(new RegExp(`\\s*${mp(t)}\\s*`)),cI=(e,t,r,n,o)=>o?f(oB(e,n),ur(s=>r.parse(s.trim())),Rs(zo(t))):f(r.parse(e),Ju({onFailure:zo(t),onSuccess:Ot})),sB=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),aB=e=>f(ur(e,pB),Ju({onFailure:()=>jt(),onSuccess:_o(ro)}),mn,B(ov)),iB=/(^.+)(\[(\d+)\])$/,cB=/^(\[(\d+)\])$/,pB=e=>{let t=e.match(cB);if(t!==null){let r=t[2];return f(r!==void 0&&r.length>0?w(r):_(),zt(pI))}return _()},uB=(e,t,r)=>{let n=new Map;for(let[o,s]of e){let a=f(t(o),ko(i=>ce(lB(i),{onNone:()=>Ot(i),onSome:([c,p])=>dc(c,`[${p}]`)})));n.set(r(a),s)}return n},lB=e=>{let t=e.match(iB);if(t!==null){let r=t[1],n=t[3],o=r!==void 0&&r.length>0?w(r):_(),s=f(n!==void 0&&n.length>0?w(n):_(),zt(pI));return fv([o,s])}return _()},pI=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?_():w(t)},fB=e=>({_tag:"KeyName",name:e}),dB=e=>({_tag:"KeyIndex",index:e}),uI=e=>{let r=$r(hB(e),([n,o])=>[mB(n).join("\uFEFF"),o]);return XS(new Map(r),{pathDelim:"\uFEFF",seqDelim:"\uFEFF"})},mB=e=>{let t=[],r=0;for(;r<e.length;){let n=e[r];if(n._tag==="KeyName")if(r+1<e.length){let o=e[r+1];o._tag==="KeyIndex"?(t.push(`${n.name}[${o.index}]`),r+=2):(t.push(n.name),r+=1)}else t.push(n.name),r+=1}return t},hB=e=>{let t=(o,s)=>typeof s=="string"?dc([o,s]):typeof s=="number"||typeof s=="boolean"?dc([o,String(s)]):kd(s)?r(o,s):typeof s=="object"&&s!==null?n(o,s):jt(),r=(o,s)=>mE(s,{onEmpty:()=>dc([o,"<nil>"]),onNonEmpty:ko((a,i)=>t(_u(o,dB(i)),a))}),n=(o,s)=>Object.entries(s).filter(([,a])=>ud(a)).flatMap(([a,i])=>{let c=_u(o,fB(a)),p=t(c,i);return hE(p)?dc([c,""]):p});return n(jt(),e)};var fI=Symbol.for("effect/Console"),Bo=pt("effect/Console"),dI={[fI]:fI,assert(e,...t){return k(()=>{console.assert(e,...t)})},clear:k(()=>{console.clear()}),count(e){return k(()=>{console.count(e)})},countReset(e){return k(()=>{console.countReset(e)})},debug(...e){return k(()=>{console.debug(...e)})},dir(e,t){return k(()=>{console.dir(e,t)})},dirxml(...e){return k(()=>{console.dirxml(...e)})},error(...e){return k(()=>{console.error(...e)})},group(e){return e?.collapsed?k(()=>console.groupCollapsed(e?.label)):k(()=>console.group(e?.label))},groupEnd:k(()=>{console.groupEnd()}),info(...e){return k(()=>{console.info(...e)})},log(...e){return k(()=>{console.log(...e)})},table(e,t){return k(()=>{console.table(e,t)})},time(e){return k(()=>console.time(e))},timeEnd(e){return k(()=>console.timeEnd(e))},timeLog(e,...t){return k(()=>{console.timeLog(e,...t)})},trace(...e){return k(()=>{console.trace(...e)})},warn(...e){return k(()=>{console.warn(...e)})},unsafe:console};var gB="effect/Random",Ch=Symbol.for(gB),hI=pt("effect/Random"),e_=class{seed;[Ch]=Ch;PRNG;constructor(t){this.seed=t,this.PRNG=new fd(t)}get next(){return k(()=>this.PRNG.number())}get nextBoolean(){return B(this.next,t=>t>.5)}get nextInt(){return k(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return B(this.next,n=>(r-t)*n+t)}nextIntBetween(t,r){return k(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return xI(t,r=>this.nextIntBetween(0,r))}},xI=(e,t)=>J(()=>f(k(()=>Array.from(e)),E(r=>{let n=[];for(let o=r.length;o>=2;o=o-1)n.push(o);return f(n,$o(o=>f(t(o),B(s=>yB(r,o-1,s)))),Me(Wr(r)))}))),yB=(e,t,r)=>{let n=e[t];return e[t]=e[r],e[r]=n,e},gI=e=>new e_(A(e)),mI=class{values;[Ch]=Ch;index=0;constructor(t){if(this.values=t,t.length===0)throw new Error("Requires at least one value")}getNextValue(){let t=this.values[this.index];return this.index=(this.index+1)%this.values.length,t}get next(){return k(()=>{let t=this.getNextValue();return typeof t=="number"?Math.max(0,Math.min(1,t)):A(t)/2147483647})}get nextBoolean(){return k(()=>{let t=this.getNextValue();return typeof t=="boolean"?t:A(t)%2===0})}get nextInt(){return k(()=>{let t=this.getNextValue();return typeof t=="number"&&Number.isFinite(t)?Math.round(t):Math.abs(A(t))})}nextRange(t,r){return B(this.next,n=>(r-t)*n+t)}nextIntBetween(t,r){return k(()=>{let n=this.getNextValue();if(typeof n=="number"&&Number.isFinite(n))return Math.max(t,Math.min(r-1,Math.round(n)));let o=Math.abs(A(n));return t+o%(r-t)})}shuffle(t){return xI(t,r=>this.nextIntBetween(0,r))}};var yI=Symbol.for("effect/Tracer"),bB=e=>({[yI]:yI,...e}),yp=pt("effect/Tracer"),fi=pt("effect/ParentSpan"),EI=(function(){let e="abcdef0123456789",t=e.length;return function(r){let n="";for(let o=0;o<r;o++)n+=e.charAt(Math.floor(Math.random()*t));return n}})(),t_=class{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(t,r,n,o,s,a){this.name=t,this.parent=r,this.context=n,this.startTime=s,this.kind=a,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:EI(32),this.spanId=EI(16),this.links=Array.from(o)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime}}attribute(t,r){this.attributes.set(t,r)}event(t,r,n){this.events.push([t,r,n??{}])}addLinks(t){this.links.push(...t)}},bI=bB({span:(e,t,r,n,o,s)=>new t_(e,t,r,n,o,s),context:e=>e()});var kh=e=>{if(e?.captureStackTrace===!1)return e;if(e?.captureStackTrace!==void 0&&typeof e.captureStackTrace!="boolean")return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let r=new Error;Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(n!==!1)return n;if(r.stack!==void 0){let o=r.stack.split(`
`);if(o[3]!==void 0)return n=o[3].trim(),n}}}},Ep=Hr()("effect/Tracer/DisablePropagation",{defaultValue:rr});var SB=f(Er(),Vt(to,BS()),Vt(Bo,dI),Vt(hI,gI(Math.random())),Vt(hp,_h()),Vt(yp,bI)),lr=D(Symbol.for("effect/DefaultServices/currentServices"),()=>Zu(SB)),SI=e=>{let t=kr(e);return r_(r=>r.sleep(t))},_I=e=>Y(t=>e(t.currentDefaultServices)),r_=e=>_I(t=>e(t.unsafeMap.get(to.key))),CI=r_(e=>e.currentTimeMillis);var _B=e=>_I(t=>e(t.unsafeMap.get(hp.key))),kI=e=>_B(t=>t.load(e));var kB="effect/Config",wI=Symbol.for(kB),wB={_A:e=>e},di={...cn,[wI]:wB,commit(){return kI(this)}},OI=e=>{let t=Th("a boolean property",r=>{switch(r){case"true":case"yes":case"on":case"1":return $(!0);case"false":case"no":case"off":case"0":return $(!1);default:{let n=li([],`Expected a boolean value but received ${r}`);return U(n)}}});return e===void 0?t:ul(t,e)};var TI=(...e)=>t=>{let r=e.map(String).join(", "),n=Th(`one of (${r})`,o=>{let s=e.find(a=>String(a)===o);return s===void 0?U(li([],`Expected one of (${r}) but received ${o}`)):$(s)});return t===void 0?n:ul(n,t)};var vI=u(2,(e,t)=>Oh(e,r=>$(t(r)))),RI=u(2,(e,t)=>Oh(e,r=>{try{return $(t(r))}catch(n){return U(li([],n instanceof Error?n.message:`${n}`))}})),Oh=u(2,(e,t)=>{let r=Object.create(di);return r._tag=yh,r.original=e,r.mapOrFail=t,r}),ul=u(2,(e,t)=>{let r=Object.create(di);return r._tag=Eh,r.name=t,r.config=e,r}),AI=u(2,(e,t)=>{let r=Object.create(di);return r._tag=cl,r.first=e,r.second=o_(t),r.condition=Dr,r}),II=u(2,(e,t)=>{let r=Object.create(di);return r._tag=cl,r.first=e,r.second=o_(t.orElse),r.condition=t.if,r});var Th=(e,t)=>{let r=Object.create(di);return r._tag=bh,r.description=e,r.parse=t,r};var PI=e=>{let t=Th("a text property",$);return e===void 0?t:ul(t,e)};var n_=e=>{let t=Object.create(di);return t._tag=xh,t.value=e,t.parse=()=>$(e),t},o_=e=>{let t=Object.create(di);return t._tag=gh,t.config=e,t};var MI=u(2,(e,t)=>II(e,{orElse:()=>n_(t),if:jA}));var FI=OI;var s_=TI;var vh=vI,a_=RI,Rh=Oh,NI=ul,DI=AI;var Ns=PI;var LI=n_;var jo=MI;var $I=ks;var bp=(function(){let e=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends tl{constructor(r){super(r?.message,r?.cause?{cause:r.cause}:void 0),r&&(Object.assign(this,r),Object.defineProperty(this,e,{value:r,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}.BaseEffectError})(),Ah=e=>{let t={BaseEffectError:class extends bp{_tag=e}};return t.BaseEffectError.prototype.name=e,t.BaseEffectError};var Yr=xn;var bt=Kt;var c_=pp;var ll=NA;var Zr=ii;var HI="Sequential",qI="Parallel",TB="ParallelN",mi={_tag:HI},WI={_tag:qI},zI=e=>({_tag:TB,parallelism:e}),u_=e=>e._tag===HI,l_=e=>e._tag===qI;var Sp=mi,Ih=WI,Ph=zI;function jI(e){return new no(e)}function Mh(){return jI(new Map)}var d_=Symbol.for("effect/FiberRefs"),no=class{locals;[d_]=d_;constructor(t){this.locals=t}pipe(){return C(this,arguments)}},vB=(e,t,r,n=!1)=>{let o=e,s=t,a=r,i=n,c;for(;c===void 0;)if(Ce(s)&&Ce(a)){let p=rt(s)[0],l=pn(s),d=rt(a)[0],m=rt(a)[1],h=pn(a);p.startTimeMillis<d.startTimeMillis?(a=h,i=!0):p.startTimeMillis>d.startTimeMillis?s=l:p.id<d.id?(a=h,i=!0):p.id>d.id?s=l:c=[m,i]}else c=[o.initial,!0];return c},h_=u(3,(e,t,r)=>{let n=new Map(e.locals);return r.locals.forEach((o,s)=>{let a=o[0][1];if(!o[0][0][F](t)){if(!n.has(s)){if(R(a,s.initial))return;n.set(s,[[t,s.join(s.initial,a)]]);return}let i=n.get(s),[c,p]=vB(s,i,o);if(p){let l=s.diff(c,a),d=i[0][1],m=s.join(d,s.patch(l)(d));if(!R(d,m)){let h,x=i[0][0];x[F](t)?h=[[x,m],...i.slice(1)]:h=[[t,m],...i],n.set(s,h)}}}}),new no(n)}),x_=u(2,(e,t)=>{let r=new Map;return VI(e,r,t),new no(r)}),VI=(e,t,r)=>{e.locals.forEach((n,o)=>{let s=n[0][1],a=o.patch(o.fork)(s);R(s,a)?t.set(o,n):t.set(o,[[r,a],...n])})};var fl=u(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new no(r)}),dl=u(2,(e,t)=>e.locals.has(t)?w(rt(e.locals.get(t))[1]):_()),Ds=u(2,(e,t)=>f(dl(e,t),fe(()=>t.initial))),_p=u(2,(e,{fiberId:t,fiberRef:r,value:n})=>{if(e.locals.size===0)return new no(new Map([[r,[[t,n]]]]));let o=new Map(e.locals);return m_(o,t,r,n),new no(o)}),m_=(e,t,r,n)=>{let o=e.get(r)??[],s;if(Ce(o)){let[a,i]=rt(o);if(a[F](t)){if(R(i,n))return;s=[[t,n],...o.slice(1)]}else s=[[t,n],...o]}else s=[[t,n]];e.set(r,s)},KI=u(2,(e,{entries:t,forkAs:r})=>{if(e.locals.size===0)return new no(new Map(t));let n=new Map(e.locals);return r!==void 0&&VI(e,n,r),t.forEach(([o,s])=>{s.length===1?m_(n,s[0][0],o,s[0][1]):s.forEach(([a,i])=>{m_(n,a,o,i)})}),new no(n)});var g_=dl,Vo=Ds;var GI=KI;var JI=Mh;var QI="Empty",YI="Add",ZI="Remove",XI="Update",eP="AndThen",tP={_tag:QI},hl=(e,t)=>{let r=new Map(e.locals),n=tP;for(let[o,s]of t.locals.entries()){let a=rt(s)[1],i=r.get(o);if(i!==void 0){let c=rt(i)[1];R(c,a)||(n=Nh({_tag:XI,fiberRef:o,patch:o.diff(c,a)})(n))}else n=Nh({_tag:YI,fiberRef:o,value:a})(n);r.delete(o)}for(let[o]of r.entries())n=Nh({_tag:ZI,fiberRef:o})(n);return n},Nh=u(2,(e,t)=>({_tag:eP,first:e,second:t})),Dh=u(3,(e,t,r)=>{let n=r,o=Ot(e);for(;Ce(o);){let s=rt(o),a=pn(o);switch(s._tag){case QI:{o=a;break}case YI:{n=_p(n,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),o=a;break}case ZI:{n=fl(n,s.fiberRef),o=a;break}case XI:{let i=Ds(n,s.fiberRef);n=_p(n,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(i)}),o=a;break}case eP:{o=mc(s.first)(mc(s.second)(a));break}}}return n});var hi=hl;var xi=Dh;var Uh="effect/FiberStatus",Ls=Symbol.for(Uh),Lh="Done",oP="Running",sP="Suspended",RB=se(`${Uh}-${Lh}`),y_=class{[Ls]=Ls;_tag=Lh;[N](){return RB}[F](t){return $h(t)&&t._tag===Lh}},E_=class{runtimeFlags;[Ls]=Ls;_tag=oP;constructor(t){this.runtimeFlags=t}[N](){return f(A(Uh),W(A(this._tag)),W(A(this.runtimeFlags)),G(this))}[F](t){return $h(t)&&t._tag===oP&&this.runtimeFlags===t.runtimeFlags}},b_=class{runtimeFlags;blockingOn;[Ls]=Ls;_tag=sP;constructor(t,r){this.runtimeFlags=t,this.blockingOn=r}[N](){return f(A(Uh),W(A(this._tag)),W(A(this.runtimeFlags)),W(A(this.blockingOn)),G(this))}[F](t){return $h(t)&&t._tag===sP&&this.runtimeFlags===t.runtimeFlags&&R(this.blockingOn,t.blockingOn)}},aP=new y_,iP=e=>new E_(e),cP=(e,t)=>new b_(e,t),$h=e=>v(e,Ls),pP=e=>e._tag===Lh;var uP=aP,S_=iP,lP=cP;var fP=pP;var PB=bS,dP=SS,__=_S,mP=Vm,Hh=tp,C_=Km,hP=CS,MB=kS,xP=yA;var FB=f(ro,Cd(e=>e.ordinal));var gP=lE(FB);var qh=e=>{switch(e){case"All":return PB;case"Debug":return C_;case"Error":return __;case"Fatal":return dP;case"Info":return Hh;case"Trace":return hP;case"None":return MB;case"Warning":return mP}};var Us=Symbol.for("effect/Readable");var AZ={[Us]:Us,pipe(){return C(this,arguments)}};var Wh=Symbol.for("effect/Ref"),O_={_A:e=>e},w_=class extends un{ref;commit(){return this.get}[Wh]=O_;[Us]=Us;constructor(t){super(),this.ref=t,this.get=k(()=>Ie(this.ref))}get;modify(t){return k(()=>{let r=Ie(this.ref),[n,o]=t(r);return r!==o&&Br(o)(this.ref),n})}},Cp=e=>new w_(Kn(e)),gi=e=>k(()=>Cp(e)),fr=e=>e.get,Ko=u(2,(e,t)=>e.modify(()=>[void 0,t])),EP=u(2,(e,t)=>e.modify(r=>[r,t]));var zh=u(2,(e,t)=>e.modify(t));var yi=u(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var kp=gi,T_=fr,bP=EP;var Ei=zh;var SP=yi;var jh=class{buckets=[];scheduleTask(t,r){let n=this.buckets.length,o,s=0;for(;s<n&&this.buckets[s][0]<=r;s++)o=this.buckets[s];o&&o[0]===r?o[1].push(t):s===n?this.buckets.push([r,[t]]):this.buckets.splice(s,0,[r,[t]])}},R_=class{maxNextTickBeforeTimer;running=!1;tasks=new jh;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[n,o]of r)for(let s=0;s<o.length;s++)o[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(Gm)?t.getFiberRef(Xn):!1}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},_P=D(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new R_(2048)),wp=class{tasks=new jh;deferred=!1;scheduleTask(t,r){this.deferred?_P.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}shouldYield(t){return t.currentOpCount>t.getFiberRef(Gm)?t.getFiberRef(Xn):!1}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,n]of t)for(let o=0;o<n.length;o++)n[o]()}this.deferred=!0}};var Op=D(Symbol.for("effect/FiberRef/currentScheduler"),()=>ze(_P));var Vh=D(Symbol.for("effect/FiberRef/currentRequestMap"),()=>ze(new Map));var A_=(e,t,r,n)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return Zn(vS,o=>o==="unbounded"?r():o>1?n(o):t());default:return e>1?n(e):t()}};var kP=SI,Kh=CI;var wP=to;var TP=(e,t)=>({label:e,startTime:t}),I_=e=>e.replace(/[\s="]/g,"_"),xl=e=>t=>`${I_(t.label)}=${e-t.startTime}ms`;var RP=TP;var AP="effect/MetricLabel",P_=Symbol.for(AP),M_=class{key;value;[P_]=P_;_hash;constructor(t,r){this.key=t,this.value=r,this._hash=se(AP+this.key+this.value)}[N](){return this._hash}[F](t){return UB(t)&&this.key===t.key&&this.value===t.value}pipe(){return C(this,arguments)}},IP=(e,t)=>new M_(e,t),UB=e=>v(e,P_);var MP=u(e=>Nt(e[0]),function(){let e=arguments;return Is(e[0],rp,typeof e[1]=="string"?Gn(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[n,o])=>Gn(r,n,o),t))}),N_=e=>B(e,w);var D_=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),J(()=>{try{return I(tt(t))}catch(n){return be(r?tt(()=>r(n)):new ap(n,"An unknown error occurred in Effect.try"))}})};var FP=u(e=>Nt(e[0]),(e,...t)=>{let r=t[t.length-1],n;return t.length===2?n=ha(t[0]):n=o=>{let s=v(o,"_tag")?o._tag:void 0;if(!s)return!1;for(let a=0;a<t.length-1;a++)if(t[a]===s)return!0;return!1},qm(e,n,r)}),NP=u(2,(e,t)=>{let r;return qm(e,n=>(r??=Object.keys(t),v(n,"_tag")&&Ne(n._tag)&&r.includes(n._tag)),n=>t[n._tag](n))});var Qh=e=>z_(e,$_,hl),qB=e=>z_(e,Qa($_,jm),([t,r],[n,o])=>[hl(t,n),fn(r,o)]);var L_=u(2,(e,t)=>Tr(e,{onFailure:r=>I(t.onFailure(r)),onSuccess:r=>I(t.onSuccess(r))}));var U_=e=>{let t=E(E(e,()=>Ja()),()=>t);return t},$_=Y(e=>I(e.getFiberRefs()));var DP=e=>L_(e,{onFailure:Lr,onSuccess:Lr});var Yh=e=>(...t)=>{let r=Nn(e),n;for(let o=0,s=t.length;o<s;o++){let a=t[o];fm(a)&&(n!==void 0?n=We(n,a):n=a,t=[...t.slice(0,o),...t.slice(o+1)],o--)}return n===void 0&&(n=Cr),Y(o=>(o.log(t,n,r),re))};var LP=Yh(C_);var UP=Yh(__);var $P=u(2,(e,t)=>E(Kh,r=>Is(e,Xu,Nb(RP(t,r)))));var Zh=u(2,(e,t)=>ot(e,{onFailure:r=>Yc(()=>t(r)),onSuccess:I})),H_=e=>f(xn(),E(t=>f(qB(e),Xc(t),HP,B(r=>ye(r,f(Kt(t),E(([n,o])=>Me(Qa(gl(n[0]),Qu(n[1])),o))))))));var q_=e=>B(e,t=>!t);var HP=e=>B(kp(!0),t=>st(Ga(e,bP(t,!1))));var gl=e=>KP((t,r)=>f(e,Dh(t,r))),qP=e=>e.length>=1?pr((t,r)=>{try{e(r).then(n=>t(Se(n)),n=>t(Wo(n)))}catch(n){t(Wo(n))}}):pr(t=>{try{e().then(r=>t(Se(r)),r=>t(Wo(r)))}catch(r){t(Wo(r))}}),yl=u(3,(e,t,r)=>gn(n=>yn(e,Vt(n,t,r)))),Xh=u(3,(e,t,r)=>gn(n=>E(r,o=>yn(e,f(n,Vt(t,o))))));var Tp=kP,W_=I(_());var z_=u(3,(e,t,r)=>E(t,n=>E(e,o=>B(t,s=>[r(n,s),o]))));var WP=u(2,(e,{onFailure:t,onSuccess:r})=>ot(e,{onFailure:n=>{let o=Mo(n);switch(o._tag){case"Left":return ye(t(o.left),ge(n));case"Right":return ge(n)}},onSuccess:n=>Me(r(n),n)}));var zP=u(2,(e,t)=>ot(e,{onFailure:r=>{let n=Mo(r);switch(n._tag){case"Left":return ye(t(n.left),ge(r));case"Right":return ge(r)}},onSuccess:I}));var BP=u(2,(e,t)=>ot(e,{onFailure:r=>ye(t(r),ge(r)),onSuccess:I}));var jP=e=>{let t,r;typeof e=="function"?t=e:(t=e.try,r=e.catch);let n=o=>r?vs(()=>r(o)):be(new ap(o,"An unknown error occurred in Effect.tryPromise"));return t.length>=1?pr((o,s)=>{try{t(s).then(a=>o(Se(a)),a=>o(n(a)))}catch(a){o(n(a))}}):pr(o=>{try{t().then(s=>o(Se(s)),s=>o(n(s)))}catch(s){o(n(s))}})},VP=u(2,(e,t)=>E(e,r=>D_({try:()=>t.try(r),catch:t.catch})));var KP=e=>Y(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),re));var GP=u(2,(e,t)=>J(()=>t()?B(e,w):I(_())));var JP=e=>new Proxy({},{get(t,r,n){return(...o)=>E(e,s=>s[r](...o))}});var QP=BigInt(0),YP=zt(e=>ut(e.context,Ep)?e._tag==="Span"?YP(e.parent):_():w(e)),ZP=(e,t,r)=>{let n=!e.getFiberRef(Qm)||r.context&&ut(r.context,Ep),o=e.getFiberRef(Dt),s=r.parent?w(r.parent):r.root?_():YP(Un(o,fi)),a;if(n)a=DA({name:t,parent:s,context:Vt(r.context??Er(),Ep,!0)});else{let i=e.getFiberRef(lr),c=ut(i,yp),p=ut(i,wP),l=e.getFiberRef(el),d=e.getFiberRefs(),m=g_(d,Ym),h=g_(d,PS),x=h._tag==="Some"?r.links!==void 0?[...Sr(h.value),...r.links??[]]:Sr(h.value):r.links??jt();a=c.span(t,s,r.context??Er(),x,l?p.unsafeCurrentTimeNanos():QP,r.kind??"internal"),m._tag==="Some"&&I0(m.value,(b,S)=>a.attribute(S,b)),r.attributes!==void 0&&Object.entries(r.attributes).forEach(([b,S])=>a.attribute(b,S))}return typeof r.captureStackTrace=="function"&&Mu.set(a,r.captureStackTrace),a};var XP=(e,t,r,n)=>k(()=>{e.status._tag!=="Ended"&&(th(t)&&Mu.has(e)&&e.attribute("code.stacktrace",Mu.get(e)()),e.end(n?r.unsafeCurrentTimeNanos():QP,t))}),Gh=(e,...t)=>{let r=kh(t.length===1?void 0:t[0]),n=t[t.length-1];return Y(o=>{let s=ZP(o,e,r),a=o.getFiberRef(el),i=ut(o.getFiberRef(lr),to);return vr(n(s),c=>XP(s,c,i,a))})},Jh=u(2,(e,t)=>yl(e,fi,t)),eM=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=kh(e?arguments[2]:arguments[1]);if(e){let n=arguments[0];return Gh(t,r,o=>Jh(n,o))}return n=>Gh(t,r,o=>Jh(n,o))};var ex=th,tM=FS,rM=TA;var nM=Ms,oM=Wo;var sM=ip,dr=xe;var aM=AA;var iM=Ku;var En=si;var Rr=Se,cM=Et;var B_=IA;var bi=PA;var tx="InterruptSignal",rx="Stateful",nx="Resume",ox="YieldNow",sx=e=>({_tag:tx,cause:e}),vp=e=>({_tag:rx,onFiber:e}),Si=e=>({_tag:nx,effect:e}),pM=()=>({_tag:ox});var WB="effect/FiberScope",ax=Symbol.for(WB),j_=class{[ax]=ax;fiberId=wr;roots=new Set;add(t,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}},V_=class{fiberId;parent;[ax]=ax;constructor(t,r){this.fiberId=t,this.parent=r}add(t,r){this.parent.tell(vp(n=>{n.addChild(r),r.addObserver(()=>{n.removeChild(r)})}))}},lM=e=>new V_(e.id(),e),_i=D(Symbol.for("effect/FiberScope/Global"),()=>new j_);var zB="effect/Fiber",ix=Symbol.for(zB),K_={_E:e=>e,_A:e=>e},BB={[ix]:K_,pipe(){return C(this,arguments)}},jB="effect/Fiber",G_=Symbol.for(jB);var J_=e=>e.await;var Q_=e=>e.inheritAll;var Hs=e=>Ya(hn(e.await),e.inheritAll);var xX={...cn,commit(){return Hs(this)},...BB,id:()=>wr,await:ep,children:I([]),inheritAll:ep,poll:I(_()),interruptAsFork:()=>ep};var qs="effect/FiberCurrent";var VB="effect/Logger",Rp=Symbol.for(VB),Y_={_Message:e=>e,_Output:e=>e},St=e=>({[Rp]:Y_,log:e,pipe(){return C(this,arguments)}}),mM=u(2,(e,t)=>St(r=>e.log({...r,message:t(r.message)}))),cx=u(2,(e,t)=>St(r=>e.log(t(r)))),hM=u(2,(e,t)=>St(r=>t(r.logLevel)?w(e.log(r)):_())),Sl=u(2,(e,t)=>St(r=>t(e.log(r)))),xM={[Rp]:Y_,log:Lr,pipe(){return C(this,arguments)}},px=e=>({[Rp]:Y_,log:({message:t})=>e(t),pipe(){return C(this,arguments)}}),gM=e=>px(()=>e),yM=e=>px(e),ux=u(2,(e,t)=>St(r=>[e.log(r),t.log(r)])),EM=u(2,(e,t)=>Sl(ux(e,t),r=>r[0])),bM=u(2,(e,t)=>Sl(ux(e,t),r=>r[1])),KB=/^[^\s"=]*$/,SM=(e,t)=>({annotations:r,cause:n,date:o,fiberId:s,logLevel:a,message:i,spans:c})=>{let p=x=>x.match(KB)?x:e(x),l=(x,b)=>`${I_(x)}=${p(b)}`,d=(x,b)=>" "+l(x,b),m=l("timestamp",o.toISOString());m+=d("level",a.label),m+=d("fiber",Wa(s));let h=Bt(i);for(let x=0;x<h.length;x++)m+=d("message",Eo(h[x],t));mb(n)||(m+=d("cause",cr(n,{renderErrorCause:!0})));for(let x of c)m+=" "+xl(o.getTime())(x);for(let[x,b]of r)m+=d(x,Eo(b,t));return m},GB=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,lx=St(SM(GB)),fx=St(SM(JSON.stringify,0)),_l=St(({annotations:e,cause:t,date:r,fiberId:n,logLevel:o,message:s,spans:a})=>{let i=r.getTime(),c={},p={};if(km(e)>0)for(let[d,m]of e)c[d]=bl(m);if(Ba(a))for(let d of a)p[d.label]=i-d.startTime;let l=Bt(s);return{message:l.length===1?bl(l[0]):l.map(bl),logLevel:o.label,timestamp:r.toISOString(),cause:qa(t)?void 0:cr(t,{renderErrorCause:!0}),annotations:c,spans:p,fiberId:Wa(n)}}),bl=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return Q(e)}},dx=Sl(_l,xu),_M=e=>typeof e=="object"&&e!=null&&Rp in e,JB=(e,...t)=>{let r="";for(let n=0;n<t.length;n++)r+=`\x1B[${t[n]}m`;return r+e+"\x1B[0m"},QB=(e,...t)=>e,Xr={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},YB={None:[],All:[],Trace:[Xr.gray],Debug:[Xr.blue],Info:[Xr.green],Warning:[Xr.yellow],Error:[Xr.red],Fatal:[Xr.bgBrightRed,Xr.black]},ZB={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},XB=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,CM=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null,e5=CM&&process.stdout.isTTY===!0,t5=CM||"Deno"in globalThis,Z_=e=>{let t=e?.mode??"auto",n=(t==="auto"?t5?"tty":"browser":t)==="browser",o=typeof e?.colors=="boolean"?e.colors:e5||n,s=e?.formatDate??XB;return n?n5({colors:o,formatDate:s}):r5({colors:o,formatDate:s,stderr:e?.stderr===!0})},r5=e=>{let t=typeof process=="object"&&"isBun"in process&&process.isBun===!0,r=e.colors?JB:QB;return St(({annotations:n,cause:o,context:s,date:a,fiberId:i,logLevel:c,message:p,spans:l})=>{let d=Vo(s,lr),m=ut(d,Bo).unsafe,h=e.stderr===!0?m.error:m.log,x=Bt(p),b=r(`[${e.formatDate(a)}]`,Xr.white)+` ${r(c.label,...YB[c._tag])} (${Wa(i)})`;if(Ba(l)){let y=a.getTime(),O=xl(y);for(let g of l)b+=" "+O(g)}b+=":";let S=0;if(x.length>0){let y=bl(x[0]);typeof y=="string"&&(b+=" "+r(y,Xr.bold,Xr.cyan),S++)}if(h(b),t||m.group(),qa(o)||h(cr(o,{renderErrorCause:!0})),S<x.length)for(;S<x.length;S++)h(Mn(x[S]));if(km(n)>0)for(let[y,O]of n)h(r(`${y}:`,Xr.bold,Xr.white),Mn(O));t||m.groupEnd()})},n5=e=>{let t=e.colors?"%c":"";return St(({annotations:r,cause:n,context:o,date:s,fiberId:a,logLevel:i,message:c,spans:p})=>{let l=Vo(o,lr),d=ut(l,Bo).unsafe,m=Bt(c),h=`${t}[${e.formatDate(s)}]`,x=[];if(e.colors&&x.push("color:gray"),h+=` ${t}${i.label}${t} (${Wa(a)})`,e.colors&&x.push(ZB[i._tag],""),Ba(p)){let S=s.getTime(),y=xl(S);for(let O of p)h+=" "+y(O)}h+=":";let b=0;if(m.length>0){let S=bl(m[0]);typeof S=="string"&&(h+=` ${t}${S}`,e.colors&&x.push("color:deepskyblue"),b++)}if(d.groupCollapsed(h,...x),qa(n)||d.error(cr(n,{renderErrorCause:!0})),b<m.length)for(;b<m.length;b++)d.log(Mn(m[b]));if(km(r)>0)for(let[S,y]of r){let O=Mn(y);e.colors?d.log(`%c${S}:`,"color:gray",O):d.log(`${S}:`,O)}d.groupEnd()})},mx=D("effect/Logger/prettyLoggerDefault",()=>Z_());var wM="effect/MetricBoundaries",X_=Symbol.for(wM),eC=class{values;[X_]=X_;constructor(t){this.values=t,this._hash=f(se(wM),W(or(this.values)))}_hash;[N](){return this._hash}[F](t){return o5(t)&&R(this.values,t.values)}pipe(){return C(this,arguments)}},o5=e=>v(e,X_),s5=e=>{let t=f(e,Cu(Oe(Number.POSITIVE_INFINITY)),SE);return new eC(t)};var OM=e=>f(dE(e.count-1,t=>e.start*Math.pow(e.factor,t)),qn,s5);var i5="effect/MetricKeyType",Cl=Symbol.for(i5),AM="effect/MetricKeyType/Counter",tC=Symbol.for(AM),IM="effect/MetricKeyType/Frequency",rC=Symbol.for(IM),PM="effect/MetricKeyType/Gauge",nC=Symbol.for(PM),MM="effect/MetricKeyType/Histogram",oC=Symbol.for(MM),FM="effect/MetricKeyType/Summary",sC=Symbol.for(FM),kl={_In:e=>e,_Out:e=>e},aC=class{incremental;bigint;[Cl]=kl;[tC]=tC;constructor(t,r){this.incremental=t,this.bigint=r,this._hash=se(AM)}_hash;[N](){return this._hash}[F](t){return cC(t)}pipe(){return C(this,arguments)}},c5=se(IM),TM=class{preregisteredWords;[Cl]=kl;[rC]=rC;constructor(t){this.preregisteredWords=t}[N](){return c5}[F](t){return pC(t)}pipe(){return C(this,arguments)}},p5=se(PM),vM=class{bigint;[Cl]=kl;[nC]=nC;constructor(t){this.bigint=t}[N](){return p5}[F](t){return uC(t)}pipe(){return C(this,arguments)}},iC=class{boundaries;[Cl]=kl;[oC]=oC;constructor(t){this.boundaries=t,this._hash=f(se(MM),W(A(this.boundaries)))}_hash;[N](){return this._hash}[F](t){return lC(t)&&R(this.boundaries,t.boundaries)}pipe(){return C(this,arguments)}},RM=class{maxAge;maxSize;error;quantiles;[Cl]=kl;[sC]=sC;constructor(t,r,n,o){this.maxAge=t,this.maxSize=r,this.error=n,this.quantiles=o,this._hash=f(se(FM),W(A(this.maxAge)),W(A(this.maxSize)),W(A(this.error)),W(or(this.quantiles)))}_hash;[N](){return this._hash}[F](t){return fC(t)&&R(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&R(this.quantiles,t.quantiles)}pipe(){return C(this,arguments)}},NM=e=>new aC(e?.incremental??!1,e?.bigint??!1);var DM=e=>new iC(e);var cC=e=>v(e,tC),pC=e=>v(e,rC),uC=e=>v(e,nC),lC=e=>v(e,oC),fC=e=>v(e,sC);var u5="effect/MetricKey",UM=Symbol.for(u5),l5={_Type:e=>e},f5=wo(R),wl=class{name;keyType;description;tags;[UM]=l5;constructor(t,r,n,o=[]){this.name=t,this.keyType=r,this.description=n,this.tags=o,this._hash=f(se(this.name+this.description),W(A(this.keyType)),W(or(this.tags)))}_hash;[N](){return this._hash}[F](t){return d5(t)&&this.name===t.name&&R(this.keyType,t.keyType)&&R(this.description,t.description)&&f5(this.tags,t.tags)}pipe(){return C(this,arguments)}},d5=e=>v(e,UM),$M=(e,t)=>new wl(e,NM(t),Nn(t?.description));var HM=(e,t,r)=>new wl(e,DM(t),Nn(r));var qM=u(2,(e,t)=>t.length===0?e:new wl(e.name,e.keyType,e.description,Co(e.tags,t)));var WM=Symbol.for("effect/MutableHashMap"),h5={[WM]:WM,[Symbol.iterator](){return new dC(this)},toString(){return X(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},dC=class e{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let t=this.referentialIterator.next();return t.done?(this.bucketIterator=new mC(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new e(this.self)}},mC=class{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){let r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}let t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}},zM=()=>{let e=Object.create(h5);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e};var Ws=u(2,(e,t)=>{if(oc(t)===!1)return e.referential.has(t)?w(e.referential.get(t)):_();let r=t[N](),n=e.buckets.get(r);return n===void 0?_():x5(e,n,t)});var x5=(e,t,r,n=!1)=>{for(let o=0,s=t.length;o<s;o++)if(r[F](t[o][0])){let a=t[o][1];return n&&(t.splice(o,1),e.bucketsSize--),w(a)}return _()},Ap=u(2,(e,t)=>ae(Ws(e,t))),Ip=u(3,(e,t,r)=>{if(oc(t)===!1)return e.referential.set(t,r),e;let n=t[N](),o=e.buckets.get(n);return o===void 0?(e.buckets.set(n,[[t,r]]),e.bucketsSize++,e):(g5(e,o,t),o.push([t,r]),e.bucketsSize++,e)}),g5=(e,t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r[F](t[n][0])){t.splice(n,1),e.bucketsSize--;return}};var E5="effect/MetricState",Ol=Symbol.for(E5),BM="effect/MetricState/Counter",hC=Symbol.for(BM),jM="effect/MetricState/Frequency",xC=Symbol.for(jM),VM="effect/MetricState/Gauge",gC=Symbol.for(VM),KM="effect/MetricState/Histogram",yC=Symbol.for(KM),GM="effect/MetricState/Summary",EC=Symbol.for(GM),Tl={_A:e=>e},bC=class{count;[Ol]=Tl;[hC]=hC;constructor(t){this.count=t}[N](){return f(A(BM),W(A(this.count)),G(this))}[F](t){return S5(t)&&this.count===t.count}pipe(){return C(this,arguments)}},b5=wo(R),SC=class{occurrences;[Ol]=Tl;[xC]=xC;constructor(t){this.occurrences=t}_hash;[N](){return f(se(jM),W(or(ne(this.occurrences.entries()))),G(this))}[F](t){return _5(t)&&b5(ne(this.occurrences.entries()),ne(t.occurrences.entries()))}pipe(){return C(this,arguments)}},_C=class{value;[Ol]=Tl;[gC]=gC;constructor(t){this.value=t}[N](){return f(A(VM),W(A(this.value)),G(this))}[F](t){return C5(t)&&this.value===t.value}pipe(){return C(this,arguments)}},CC=class{buckets;count;min;max;sum;[Ol]=Tl;[yC]=yC;constructor(t,r,n,o,s){this.buckets=t,this.count=r,this.min=n,this.max=o,this.sum=s}[N](){return f(A(KM),W(A(this.buckets)),W(A(this.count)),W(A(this.min)),W(A(this.max)),W(A(this.sum)),G(this))}[F](t){return k5(t)&&R(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},kC=class{error;quantiles;count;min;max;sum;[Ol]=Tl;[EC]=EC;constructor(t,r,n,o,s,a){this.error=t,this.quantiles=r,this.count=n,this.min=o,this.max=s,this.sum=a}[N](){return f(A(GM),W(A(this.error)),W(A(this.quantiles)),W(A(this.count)),W(A(this.min)),W(A(this.max)),W(A(this.sum)),G(this))}[F](t){return w5(t)&&this.error===t.error&&R(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},JM=e=>new bC(e),QM=e=>new SC(e),YM=e=>new _C(e),ZM=e=>new CC(e.buckets,e.count,e.min,e.max,e.sum),XM=e=>new kC(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var S5=e=>v(e,hC),_5=e=>v(e,xC),C5=e=>v(e,gC),k5=e=>v(e,yC),w5=e=>v(e,EC);var T5="effect/MetricHook",v5=Symbol.for(T5),R5={_In:e=>e,_Out:e=>e},vl=e=>({[v5]:R5,pipe(){return C(this,arguments)},...e});var eF=BigInt(0),rF=e=>{let t=e.keyType.bigint?eF:0,r=e.keyType.incremental?e.keyType.bigint?o=>o>=eF:o=>o>=0:o=>!0,n=o=>{r(o)&&(t=t+o)};return vl({get:()=>JM(t),update:n,modify:n})},nF=e=>{let t=new Map;for(let n of e.keyType.preregisteredWords)t.set(n,0);let r=n=>{let o=t.get(n)??0;t.set(n,o+1)};return vl({get:()=>QM(t),update:r,modify:r})},oF=(e,t)=>{let r=t;return vl({get:()=>YM(r),update:n=>{r=n},modify:n=>{r=r+n}})},sF=e=>{let t=e.keyType.boundaries.values,r=t.length,n=new Uint32Array(r+1),o=new Float32Array(r),s=0,a=0,i=Number.MAX_VALUE,c=Number.MIN_VALUE;f(t,_o(ro),$r((d,m)=>{o[m]=d}));let p=d=>{let m=0,h=r;for(;m!==h;){let x=Math.floor(m+(h-m)/2),b=o[x];d<=b?h=x:m=x,h===m+1&&(d<=o[m]?h=m:m=h)}n[m]=n[m]+1,s=s+1,a=a+d,d<i&&(i=d),d>c&&(c=d)},l=()=>{let d=Oa(r),m=0;for(let h=0;h<r;h++){let x=o[h],b=n[h];m=m+b,d[h]=[x,m]}return d};return vl({get:()=>ZM({buckets:l(),count:s,min:i,max:c,sum:a}),update:p,modify:p})},aF=e=>{let{error:t,maxAge:r,maxSize:n,quantiles:o}=e.keyType,s=f(o,_o(ro)),a=Oa(n),i=0,c=0,p=0,l=0,d=0,m=x=>{let b=[],S=0;for(;S!==n-1;){let y=a[S];if(y!=null){let[O,g]=y,T=Ss(x-O);_b(T,_s)&&y0(T,r)&&b.push(g)}S=S+1}return A5(t,s,_o(b,ro))},h=(x,b)=>{if(n>0){i=i+1;let S=i%n;a[S]=[b,x]}l=c===0?x:Math.min(l,x),d=c===0?x:Math.max(d,x),c=c+1,p=p+x};return vl({get:()=>XM({error:t,quantiles:m(Date.now()),count:c,min:l,max:d,sum:p}),update:([x,b])=>h(x,b),modify:([x,b])=>h(x,b)})},A5=(e,t,r)=>{let n=r.length;if(!Ce(t))return jt();let o=t[0],s=t.slice(1),a=tF(e,n,_(),0,o,r),i=Ot(a);return s.forEach(c=>{i.push(tF(e,n,a.value,a.consumed,c,a.rest))}),$r(i,c=>[c.quantile,c.value])},tF=(e,t,r,n,o,s)=>{let a=e,i=t,c=r,p=n,l=o,d=s,m=e,h=t,x=r,b=n,S=o,y=s;for(;;){if(!Ce(d))return{quantile:l,value:_(),consumed:p,rest:[]};if(l===1)return{quantile:l,value:w(xE(d)),consumed:p+d.length,rest:[]};let O=rt(d),g=bv(d,V=>V===O),T=l*i,P=a/2*T,M=p+g[0].length,H=Math.abs(M-T);if(M<T-P){m=a,h=i,x=So(d),b=M,S=l,y=g[1],a=m,i=h,c=x,p=b,l=S,d=y;continue}if(M>T+P){let V=Ee(c)?w(O):c;return{quantile:l,value:V,consumed:p,rest:d}}switch(c._tag){case"None":{m=a,h=i,x=So(d),b=M,S=l,y=g[1],a=m,i=h,c=x,p=b,l=S,d=y;continue}case"Some":{let V=Math.abs(T-c.value);if(H<V){m=a,h=i,x=So(d),b=M,S=l,y=g[1],a=m,i=h,c=x,p=b,l=S,d=y;continue}return{quantile:l,value:w(c.value),consumed:p,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};var P5="effect/MetricPair",M5=Symbol.for(P5),F5={_Type:e=>e};var iF=(e,t)=>({[M5]:F5,metricKey:e,metricState:t,pipe(){return C(this,arguments)}});var D5="effect/MetricRegistry",cF=Symbol.for(D5),wC=class{[cF]=cF;map=zM();snapshot(){let t=[];for(let[r,n]of this.map)t.push(iF(r,n.get()));return t}get(t){let r=f(this.map,Ws(t),ar);if(r==null){if(cC(t.keyType))return this.getCounter(t);if(uC(t.keyType))return this.getGauge(t);if(pC(t.keyType))return this.getFrequency(t);if(lC(t.keyType))return this.getHistogram(t);if(fC(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(t){let r=f(this.map,Ws(t),ar);if(r==null){let n=rF(t);f(this.map,Ap(t))||f(this.map,Ip(t,n)),r=n}return r}getFrequency(t){let r=f(this.map,Ws(t),ar);if(r==null){let n=nF(t);f(this.map,Ap(t))||f(this.map,Ip(t,n)),r=n}return r}getGauge(t){let r=f(this.map,Ws(t),ar);if(r==null){let n=oF(t,t.keyType.bigint?BigInt(0):0);f(this.map,Ap(t))||f(this.map,Ip(t,n)),r=n}return r}getHistogram(t){let r=f(this.map,Ws(t),ar);if(r==null){let n=sF(t);f(this.map,Ap(t))||f(this.map,Ip(t,n)),r=n}return r}getSummary(t){let r=f(this.map,Ws(t),ar);if(r==null){let n=aF(t);f(this.map,Ap(t))||f(this.map,Ip(t,n)),r=n}return r}},pF=()=>new wC;var U5="effect/Metric",$5=Symbol.for(U5),H5={_Type:e=>e,_In:e=>e,_Out:e=>e},uF=D(Symbol.for("effect/Metric/globalMetricRegistry"),()=>pF()),lF=function(e,t,r,n){let o=Object.assign(s=>Kr(s,a=>W5(o,a)),{[$5]:H5,keyType:e,unsafeUpdate:t,unsafeValue:r,unsafeModify:n,register(){return this.unsafeValue([]),this},pipe(){return C(this,arguments)}});return o};var Rl=(e,t)=>fF($M(e,t));var fF=e=>{let t,r=new WeakMap,n=o=>{if(o.length===0)return t!==void 0||(t=uF.get(e)),t;let s=r.get(o);return s!==void 0||(s=uF.get(qM(e,o)),r.set(o,s)),s};return lF(e.keyType,(o,s)=>n(s).update(o),o=>n(o).get(),(o,s)=>n(s).modify(o))};var dF=(e,t,r)=>fF(HM(e,t,r));var mF=u(3,(e,t,r)=>q5(e,[IP(t,r)]));var q5=u(2,(e,t)=>lF(e.keyType,(r,n)=>e.unsafeUpdate(r,Co(t,n)),r=>e.unsafeValue(Co(t,r)),(r,n)=>e.unsafeModify(r,Co(t,n))));var W5=u(2,(e,t)=>Zn(ti,r=>k(()=>e.unsafeUpdate(t,r))));var B5="effect/Request",j5=Symbol.for(B5),V5={_E:e=>e,_A:e=>e},YX={...wa,[j5]:V5};var hF=u(2,(e,t)=>Zn(Vh,r=>k(()=>{if(r.has(e)){let n=r.get(e);n.state.completed||(n.state.completed=!0,ci(n.result,t))}})));var zs={Forward:0,Backward:1},hx=class e{self;stack;direction;count=0;constructor(t,r,n){this.self=t,this.stack=r,this.direction=n}clone(){return new e(this.self,this.stack.slice(),this.direction)}reversed(){return new e(this.self,this.stack.slice(),this.direction===zs.Forward?zs.Backward:zs.Forward)}next(){let t=this.entry;switch(this.count++,this.direction===zs.Forward?this.moveNext():this.movePrev(),t._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:t.value}}}get key(){return this.stack.length>0?w(this.stack[this.stack.length-1].key):_()}get value(){return this.stack.length>0?w(this.stack[this.stack.length-1].value):_()}get entry(){return Pt(Od(this.stack),t=>[t.key,t.value])}get index(){let t=0,r=this.stack;if(r.length===0){let n=this.self._root;return n!=null?n.count:0}else r[r.length-1].left!=null&&(t=r[r.length-1].left.count);for(let n=r.length-2;n>=0;--n)r[n+1]===r[n].right&&(++t,r[n].left!=null&&(t+=r[n].left.count));return t}moveNext(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r.right!=null)for(r=r.right;r!=null;)t.push(r),r=r.left;else for(t.pop();t.length>0&&t[t.length-1].right===r;)r=t[t.length-1],t.pop()}get hasNext(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].right!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].left===t[r])return!0;return!1}movePrev(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r!=null&&r.left!=null)for(r=r.left;r!=null;)t.push(r),r=r.right;else for(t.pop();t.length>0&&t[t.length-1].left===r;)r=t[t.length-1],t.pop()}get hasPrev(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].left!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].right===t[r])return!0;return!1}};var q={Red:0,Black:1},bn=({color:e,count:t,key:r,left:n,right:o,value:s})=>({color:e,key:r,value:s,left:n,right:o,count:t});function OC(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}var Go=({count:e,key:t,left:r,right:n,value:o},s)=>({color:s,key:t,value:o,left:r,right:n,count:e}),Le=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var xF="effect/RedBlackTree",TC=Symbol.for(xF),G5={_Key:e=>e,_Value:e=>e},J5={[TC]:G5,[N](){let e=A(xF);for(let t of this)e^=f(A(t[0]),W(A(t[1])));return G(this,e)},[F](e){if(gF(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;let t=Array.from(e);return Array.from(this).every((r,n)=>{let o=t[n];return R(r[0],o[0])&&R(r[1],o[1])})}return!1},[Symbol.iterator](){let e=[],t=this._root;for(;t!=null;)e.push(t),t=t.left;return new hx(this,e,zs.Forward)},toString(){return X(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},Al=(e,t)=>{let r=Object.create(J5);return r._ord=e,r._root=t,r},gF=e=>v(e,TC);var yF=u(2,(e,t)=>{let r=e._ord,n=e._root;for(;n!==void 0;){let o=r(t,n.key);if(R(t,n.key))return w(n.value);o<=0?n=n.left:n=n.right}return _()});var vC=u(2,(e,t)=>ae(yF(e,t))),EF=u(3,(e,t,r)=>{let n=e._ord,o=e._root,s=[],a=[];for(;o!=null;){let i=n(t,o.key);s.push(o),a.push(i),i<=0?o=o.left:o=o.right}s.push({color:q.Red,key:t,value:r,left:void 0,right:void 0,count:1});for(let i=s.length-2;i>=0;--i){let c=s[i];a[i]<=0?s[i]={color:c.color,key:c.key,value:c.value,left:s[i+1],right:c.right,count:c.count+1}:s[i]={color:c.color,key:c.key,value:c.value,left:c.left,right:s[i+1],count:c.count+1}}for(let i=s.length-1;i>1;--i){let c=s[i-1],p=s[i];if(c.color===q.Black||p.color===q.Black)break;let l=s[i-2];if(l.left===c)if(c.left===p){let d=l.right;if(d&&d.color===q.Red)c.color=q.Black,l.right=Go(d,q.Black),l.color=q.Red,i-=1;else{if(l.color=q.Red,l.left=c.right,c.color=q.Black,c.right=l,s[i-2]=c,s[i-1]=p,Le(l),Le(c),i>=3){let m=s[i-3];m.left===l?m.left=c:m.right=c}break}}else{let d=l.right;if(d&&d.color===q.Red)c.color=q.Black,l.right=Go(d,q.Black),l.color=q.Red,i-=1;else{if(c.right=p.left,l.color=q.Red,l.left=p.right,p.color=q.Black,p.left=c,p.right=l,s[i-2]=p,s[i-1]=c,Le(l),Le(c),Le(p),i>=3){let m=s[i-3];m.left===l?m.left=p:m.right=p}break}}else if(c.right===p){let d=l.left;if(d&&d.color===q.Red)c.color=q.Black,l.left=Go(d,q.Black),l.color=q.Red,i-=1;else{if(l.color=q.Red,l.right=c.left,c.color=q.Black,c.left=l,s[i-2]=c,s[i-1]=p,Le(l),Le(c),i>=3){let m=s[i-3];m.right===l?m.right=c:m.left=c}break}}else{let d=l.left;if(d&&d.color===q.Red)c.color=q.Black,l.left=Go(d,q.Black),l.color=q.Red,i-=1;else{if(c.left=p.right,l.color=q.Red,l.right=p.left,p.color=q.Black,p.right=c,p.left=l,s[i-2]=p,s[i-1]=c,Le(l),Le(c),Le(p),i>=3){let m=s[i-3];m.right===l?m.right=p:m.left=p}break}}}return s[0].color=q.Black,Al(e._ord,s[0])}),bF=e=>SF(e,zs.Forward);var SF=(e,t)=>{let r=e[Symbol.iterator](),n=0;return{[Symbol.iterator]:()=>SF(e,t),next:()=>{n++;let o=r.key;switch(t===zs.Forward?r.moveNext():r.movePrev(),o._tag){case"None":return{done:!0,value:n};case"Some":return{done:!1,value:o.value}}}}};var _F=u(2,(e,t)=>{if(!vC(e,t))return e;let r=e._ord,n=r,o=e._root,s=[];for(;o!==void 0;){let c=n(t,o.key);s.push(o),R(t,o.key)?o=void 0:c<=0?o=o.left:o=o.right}if(s.length===0)return e;let a=new Array(s.length),i=s[s.length-1];a[a.length-1]={color:i.color,key:i.key,value:i.value,left:i.left,right:i.right,count:i.count};for(let c=s.length-2;c>=0;--c)i=s[c],i.left===s[c+1]?a[c]={color:i.color,key:i.key,value:i.value,left:a[c+1],right:i.right,count:i.count}:a[c]={color:i.color,key:i.key,value:i.value,left:i.left,right:a[c+1],count:i.count};if(i=a[a.length-1],i.left!==void 0&&i.right!==void 0){let c=a.length;for(i=i.left;i.right!=null;)a.push(i),i=i.right;let p=a[c-1];a.push({color:i.color,key:p.key,value:p.value,left:i.left,right:i.right,count:i.count}),a[c-1].key=i.key,a[c-1].value=i.value;for(let l=a.length-2;l>=c;--l)i=a[l],a[l]={color:i.color,key:i.key,value:i.value,left:i.left,right:a[l+1],count:i.count};a[c-1].left=a[c]}if(i=a[a.length-1],i.color===q.Red){let c=a[a.length-2];c.left===i?c.left=void 0:c.right===i&&(c.right=void 0),a.pop();for(let p=0;p<a.length;++p)a[p].count--;return Al(r,a[0])}else if(i.left!==void 0||i.right!==void 0){i.left!==void 0?OC(i,i.left):i.right!==void 0&&OC(i,i.right),i.color=q.Black;for(let c=0;c<a.length-1;++c)a[c].count--;return Al(r,a[0])}else{if(a.length===1)return Al(r,void 0);{for(let p=0;p<a.length;++p)a[p].count--;let c=a[a.length-2];Q5(a),c.left===i?c.left=void 0:c.right=void 0}}return Al(r,a[0])});var Q5=e=>{let t,r,n,o;for(let s=e.length-1;s>=0;--s){if(t=e[s],s===0){t.color=q.Black;return}if(r=e[s-1],r.left===t){if(n=r.right,n!==void 0&&n.right!==void 0&&n.right.color===q.Red){if(n=r.right=bn(n),o=n.right=bn(n.right),r.right=n.left,n.left=r,n.right=o,n.color=r.color,t.color=q.Black,r.color=q.Black,o.color=q.Black,Le(r),Le(n),s>1){let a=e[s-2];a.left===r?a.left=n:a.right=n}e[s-1]=n;return}else if(n!==void 0&&n.left!==void 0&&n.left.color===q.Red){if(n=r.right=bn(n),o=n.left=bn(n.left),r.right=o.left,n.left=o.right,o.left=r,o.right=n,o.color=r.color,r.color=q.Black,n.color=q.Black,t.color=q.Black,Le(r),Le(n),Le(o),s>1){let a=e[s-2];a.left===r?a.left=o:a.right=o}e[s-1]=o;return}if(n!==void 0&&n.color===q.Black)if(r.color===q.Red){r.color=q.Black,r.right=Go(n,q.Red);return}else{r.right=Go(n,q.Red);continue}else if(n!==void 0){if(n=bn(n),r.right=n.left,n.left=r,n.color=r.color,r.color=q.Red,Le(r),Le(n),s>1){let a=e[s-2];a.left===r?a.left=n:a.right=n}e[s-1]=n,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}else{if(n=r.left,n!==void 0&&n.left!==void 0&&n.left.color===q.Red){if(n=r.left=bn(n),o=n.left=bn(n.left),r.left=n.right,n.right=r,n.left=o,n.color=r.color,t.color=q.Black,r.color=q.Black,o.color=q.Black,Le(r),Le(n),s>1){let a=e[s-2];a.right===r?a.right=n:a.left=n}e[s-1]=n;return}else if(n!==void 0&&n.right!==void 0&&n.right.color===q.Red){if(n=r.left=bn(n),o=n.right=bn(n.right),r.left=o.right,n.right=o.left,o.right=r,o.left=n,o.color=r.color,r.color=q.Black,n.color=q.Black,t.color=q.Black,Le(r),Le(n),Le(o),s>1){let a=e[s-2];a.right===r?a.right=o:a.left=o}e[s-1]=o;return}if(n!==void 0&&n.color===q.Black)if(r.color===q.Red){r.color=q.Black,r.left=Go(n,q.Red);return}else{r.left=Go(n,q.Red);continue}else if(n!==void 0){if(n=bn(n),r.left=n.right,n.right=r,n.color=r.color,r.color=q.Red,Le(r),Le(n),s>1){let a=e[s-2];a.right===r?a.right=n:a.left=n}e[s-1]=n,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}}};var CF=vC,kF=EF,wF=bF;var OF=_F;var RC=Symbol.for("effect/SortedSet"),X5={[RC]:{_A:e=>e},[N](){return f(A(this.keyTree),W(A(RC)),G(this))},[F](e){return e4(e)&&R(this.keyTree,e.keyTree)},[Symbol.iterator](){return wF(this.keyTree)},toString(){return X(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},TF=e=>{let t=Object.create(X5);return t.keyTree=e,t},e4=e=>v(e,RC);var vF=u(2,(e,t)=>CF(e.keyTree,t)?e:TF(kF(e.keyTree,t,!0)));var RF=u(2,(e,t)=>TF(OF(e.keyTree,t)));var r4="effect/Supervisor",Fp=Symbol.for(r4),Il={_T:e=>e},Pp=class e{underlying;value0;[Fp]=Il;constructor(t,r){this.underlying=t,this.value0=r}get value(){return this.value0}onStart(t,r,n,o){this.underlying.onStart(t,r,n,o)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,f(this.value,B(t)))}zip(t){return new Mp(this,t)}},Mp=class e{left;right;_tag="Zip";[Fp]=Il;constructor(t,r){this.left=t,this.right=r}get value(){return Qa(this.left.value,this.right.value)}onStart(t,r,n,o){this.left.onStart(t,r,n,o),this.right.onStart(t,r,n,o)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Pp(this,f(this.value,B(t)))}zip(t){return new e(this,t)}},IC=e=>v(e,Fp)&&ha(e,"Zip"),AF=class{[Fp]=Il;fibers=new Set;get value(){return k(()=>Array.from(this.fibers))}onStart(t,r,n,o){this.fibers.add(o)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Pp(this,f(this.value,B(t)))}zip(t){return new Mp(this,t)}onRun(t,r){return t()}},AC=class{effect;[Fp]=Il;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,r,n,o){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Pp(this,f(this.value,B(t)))}zip(t){return new Mp(this,t)}onRun(t,r){return t()}},IF=class{ref;[Fp]=Il;constructor(t){this.ref=t}get value(){return k(()=>Ie(this.ref))}onStart(t,r,n,o){f(this.ref,Br(f(Ie(this.ref),vF(o))))}onEnd(t,r){f(this.ref,Br(f(Ie(this.ref),RF(r))))}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Pp(this,f(this.value,B(t)))}zip(t){return new Mp(this,t)}onRun(t,r){return t()}};var n4=e=>new AC(e),Ci=D("effect/Supervisor/none",()=>n4(re));var PF=ws;var MF="Empty",FF="AddSupervisor",NF="RemoveSupervisor",DF="AndThen",Np={_tag:MF},xx=(e,t)=>({_tag:DF,first:e,second:t}),s4=(e,t)=>a4(t,Oe(e)),a4=(e,t)=>{let r=e,n=t;for(;xt(n);){let o=gt(n);switch(o._tag){case MF:{n=Mt(n);break}case FF:{r=r.zip(o.supervisor),n=Mt(n);break}case NF:{r=MC(r,o.supervisor),n=Mt(n);break}case DF:{n=Pe(o.first)(Pe(o.second)(Mt(n)));break}}}return r},MC=(e,t)=>R(e,t)?Ci:IC(e)?MC(e.left,t).zip(MC(e.right,t)):e,gx=e=>R(e,Ci)?Wn():IC(e)?f(gx(e.left),zn(gx(e.right))):Fa(e),i4=(e,t)=>{if(R(e,t))return Np;let r=gx(e),n=gx(t),o=f(n,lb(r),gs(Np,(a,i)=>xx(a,{_tag:FF,supervisor:i}))),s=f(r,lb(n),gs(Np,(a,i)=>xx(a,{_tag:NF,supervisor:i})));return xx(o,s)},LF=PF({empty:Np,patch:s4,combine:xx,diff:i4});var m4=Rl("effect_fiber_started",{incremental:!0}),UF=Rl("effect_fiber_active"),h4=Rl("effect_fiber_successes",{incremental:!0}),x4=Rl("effect_fiber_failures",{incremental:!0}),g4=mF(dF("effect_fiber_lifetimes",OM({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Pl="Continue",y4="Done",$F="Yield",E4={_E:e=>e,_A:e=>e},yx=e=>{throw new Error(`BUG: FiberRuntime - ${Eo(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Jo=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Qo=D("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Ml={[ac]:(e,t,r)=>tt(()=>t.effect_instruction_i1(r)),OnStep:(e,t,r)=>Se(Se(r)),[ic]:(e,t,r)=>tt(()=>t.effect_instruction_i2(r)),[yu]:(e,t,r)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Lo(e.currentRuntimeFlags)&&e.isInterrupted()?xe(e.getInterruptedCause()):Se(r)),[cc]:(e,t,r)=>(tt(()=>t.effect_instruction_i2(r)),tt(()=>t.effect_instruction_i0())?(e.pushStack(t),tt(()=>t.effect_instruction_i1())):re),[ka]:(e,t,r)=>{let n=tt(()=>t.effect_instruction_i0.next(r));return n.done?Se(n.value):(e.pushStack(t),dd(n.value))}},b4={[tx]:(e,t,r,n)=>(e.processNewInterruptSignal(n.cause),Lo(t)?xe(n.cause):r),[nx]:(e,t,r,n)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[rx]:(e,t,r,n)=>(n.onFiber(e,S_(t)),r),[ox]:(e,t,r,n)=>E(Ja(),()=>r)},S4=e=>$o(aA(e),t=>oo(cA(t),([r,n])=>{let o=new Map,s=[];for(let i of n){s.push(Sr(i));for(let c of i)o.set(c.request,c)}let a=s.flat();return Gr(I4(r.runAll(s),a,()=>a.forEach(i=>{i.listeners.interrupted=!0})),Vh,o)},!1,!1)),_4=bu(),Fl=class extends un{[ix]=K_;[G_]=E4;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(t,r,n){if(super(),this.currentRuntimeFlags=n,this._fiberId=t,this._fiberRefs=r,Zb(n)){let o=this.getFiberRef(ti);m4.unsafeUpdate(1,o),UF.unsafeUpdate(1,o)}this.refreshRefCache()}commit(){return Hs(this)}id(){return this._fiberId}resume(t){this.tell(Si(t))}get status(){return this.ask((t,r)=>r)}get runtimeFlags(){return this.ask((t,r)=>fP(r)?t.currentRuntimeFlags:r.runtimeFlags)}scope(){return lM(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ri)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return J(()=>{let r=ai(this._fiberId);return this.tell(vp((n,o)=>{ci(r,k(()=>t(n,o)))})),Kt(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return pr(t=>{let r=n=>t(I(n));return this.tell(vp((n,o)=>{n._exitValue!==null?r(this._exitValue):n.addObserver(r)})),k(()=>this.tell(vp((n,o)=>{n.removeObserver(r)})))},this.id())}get inheritAll(){return Y((t,r)=>{let n=t.id(),o=t.getFiberRefs(),s=r.runtimeFlags,a=this.getFiberRefs(),i=h_(o,n,a);t.setFiberRefs(i);let c=t.getFiberRef(qF),p=f(fn(s,c),tS(Qn),tS(Im));return Qu(p)})}get poll(){return k(()=>Nn(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return k(()=>this.tell(sx(ir(t))))}unsafeInterruptAsFork(t){this.tell(sx(ir(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(r=>r!==t)}getFiberRefs(){return this.setFiberRef(qF,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=fl(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=_p(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(lr),this.currentTracer=this.currentDefaultServices.unsafeMap.get(yp.key),this.currentSupervisor=this.getFiberRef(qC),this.currentScheduler=this.getFiberRef(Op),this.currentContext=this.getFiberRef(Dt),this.currentSpan=this.currentContext.unsafeMap.get(fi.key)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}transferChildren(t){let r=this._children;if(this._children=null,r!==null&&r.size>0)for(let n of r)n._exitValue===null&&t.add(this.currentRuntimeFlags,n)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Pl,n=globalThis[qs];globalThis[qs]=this;try{for(;r===Pl;)r=this._queue.length===0?y4:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[qs]=n}this._queue.length>0&&!this._running?(this._running=!0,r===$F?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(Xn))}drainQueueWhileRunning(t,r){let n=r;for(;this._queue.length>0;){let o=this._queue.splice(0,1)[0];n=b4[o._tag](this,t,n,o)}return n}isInterrupted(){return!qa(this.getFiberRef(ri))}addInterruptedCause(t){let r=this.getFiberRef(ri);this.setFiberRef(ri,We(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(sx(ir(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Yu({while:()=>!r,body:()=>{let o=t.next();return o.done?k(()=>{r=!0}):st(o.value.await)},step:()=>{}})}return null}reportExitValue(t){if(Zb(this.currentRuntimeFlags)){let r=this.getFiberRef(ti),n=this.id().startTimeMillis,o=Date.now();switch(g4.unsafeUpdate(o-n,r),UF.unsafeUpdate(-1,r),t._tag){case qe:{h4.unsafeUpdate(1,r);break}case He:{x4.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(AS);!Uc(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,r)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t);this._observers=[]}getLoggers(){return this.getFiberRef(Sx)}log(t,r,n){let o=ae(n)?n.value:this.getFiberRef(Jm),s=this.getFiberRef(bx);if(gP(s,o))return;let a=this.getFiberRef(Xu),i=this.getFiberRef(rp),c=this.getLoggers(),p=this.getFiberRefs();if(Na(c)>0){let l=ut(this.getFiberRef(lr),to),d=new Date(l.unsafeCurrentTimeMillis());zT(p,()=>{for(let m of c)m.log({fiberId:this.id(),logLevel:o,message:t,cause:r,context:p,spans:a,annotations:i,date:d})})}}evaluateMessageWhileSuspended(t){switch(t._tag){case ox:return $F;case tx:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(xe(t.cause)),this._asyncInterruptor=null),Pl;case nx:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Pl;case rx:return t.onFiber(this,this._exitValue!==null?uP:lP(this.currentRuntimeFlags,this._asyncBlockingOn)),Pl;default:return yx(t)}}evaluateEffect(t){this.currentSupervisor.onResume(this);try{let r=Lo(this.currentRuntimeFlags)&&this.isInterrupted()?xe(this.getInterruptedCause()):t;for(;r!==null;){let n=r,o=this.runLoop(n);if(o===Jo){let s=Qo.currentOp;Qo.currentOp=null,s._op===pc?tA(this.currentRuntimeFlags)?(this.tell(pM()),this.tell(Si(Et)),r=null):r=Et:s._op===_a&&(r=null)}else{this.currentRuntimeFlags=f(this.currentRuntimeFlags,Jb(Im));let s=this.interruptAllChildren();s!==null?r=E(s,()=>o):(this._queue.length===0?this.setExitValue(o):this.tell(Si(o)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(t){if(this._running)this.tell(Si(t));else{this._running=!0;let r=globalThis[qs];globalThis[qs]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[qs]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(Si(t))}patchRuntimeFlags(t,r){let n=Os(t,r);return globalThis[qs]=this,this.currentRuntimeFlags=n,n}initiateAsync(t,r){let n=!1,o=s=>{n||(n=!0,this.tell(Si(s)))};Lo(t)&&(this._asyncInterruptor=o);try{r(o)}catch(s){o(ge(yt(s)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){let t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==sc)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==ac&&t._op!==cc&&t._op!==ka)return t;t=this.popStack()}}Tag(t){return k(()=>gc(this.currentContext,t))}Left(t){return be(t.left)}None(t){return be(new qo)}Right(t){return Se(t.right)}Some(t){return Se(t.value)}Micro(t){return Gc(r=>{let n=r,o=Xv(Qv(t,this.currentContext));return o.addObserver(s=>{if(s._tag==="Success")return n(Se(s.value));switch(s.cause._tag){case"Interrupt":return n(xe(ir(wr)));case"Fail":return n(be(s.cause.error));case"Die":return n(dn(s.cause.defect))}}),Gc(s=>{n=a=>{s(re)},o.unsafeInterrupt()})})}[Ed](t){let r=tt(()=>t.effect_instruction_i0()),n=this.getNextSuccessCont();return n!==void 0?(n._op in Ml||yx(n),Ml[n._op](this,n,r)):(Qo.currentOp=Se(r),Jo)}[qe](t){let r=t,n=this.getNextSuccessCont();return n!==void 0?(n._op in Ml||yx(n),Ml[n._op](this,n,r.effect_instruction_i0)):(Qo.currentOp=r,Jo)}[He](t){let r=t.effect_instruction_i0,n=this.getNextFailCont();if(n!==void 0)switch(n._op){case sc:case ic:return Lo(this.currentRuntimeFlags)&&this.isInterrupted()?xe(xm(r)):tt(()=>n.effect_instruction_i1(r));case"OnStep":return Lo(this.currentRuntimeFlags)&&this.isInterrupted()?xe(xm(r)):Se(xe(r));case yu:return this.patchRuntimeFlags(this.currentRuntimeFlags,n.patch),Lo(this.currentRuntimeFlags)&&this.isInterrupted()?xe(We(r,this.getInterruptedCause())):xe(r);default:yx(n)}else return Qo.currentOp=xe(r),Jo}[bd](t){return tt(()=>t.effect_instruction_i0(this,S_(this.currentRuntimeFlags)))}Blocked(t){let r=this.getFiberRefs(),n=this.currentRuntimeFlags;if(this._steps.length>0){let o=[],s=this._steps[this._steps.length-1],a=this.popStack();for(;a&&a._op!=="OnStep";)o.push(a),a=this.popStack();this.setFiberRefs(s.refs),this.currentRuntimeFlags=s.flags;let i=hi(s.refs,r),c=fn(s.flags,n);return Se(Hm(t.effect_instruction_i0,Y(p=>{for(;o.length>0;)p.pushStack(o.pop());return p.setFiberRefs(xi(p.id(),p.getFiberRefs())(i)),p.currentRuntimeFlags=Os(c)(p.currentRuntimeFlags),t.effect_instruction_i1})))}return Tt(o=>E(Dl(fS(t.effect_instruction_i0)),()=>o(t.effect_instruction_i1)))}RunBlocked(t){return S4(t.effect_instruction_i0)}[us](t){let r=t.effect_instruction_i0,n=this.currentRuntimeFlags,o=Os(n,r);if(Lo(o)&&this.isInterrupted())return xe(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),t.effect_instruction_i1){let s=fn(o,n);return this.pushStack(new Nm(s,t)),tt(()=>t.effect_instruction_i1(n))}else return Et}[ac](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[sc](t){return this.pushStack(t),t.effect_instruction_i0}[ic](t){return this.pushStack(t),t.effect_instruction_i0}[_a](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,t.effect_instruction_i0),Qo.currentOp=t,Jo}[pc](t){return this._isYielding=!1,Qo.currentOp=t,Jo}[cc](t){let r=t.effect_instruction_i0,n=t.effect_instruction_i1;return r()?(this.pushStack(t),n()):Et}[ka](t){return Ml[ka](this,t,void 0)}[Ca](t){return tt(()=>t.commit())}runLoop(t){let r=t;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&eA)!==0&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;let n=this.currentScheduler.shouldYield(this);if(n!==!1){this._isYielding=!0,this.currentOpCount=0;let o=r;r=E(Ja({priority:n}),()=>o)}}try{if(r=this.currentTracer.context(()=>{if(_4!==r[Ts]._V){let n=this.getFiberRef(IS);if(n._tag==="Some"){let o=r[Ts]._V;this.log(`Executing an Effect versioned ${o} with a Runtime of version ${bu()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,Cr,n)}}return this[r._op](r)},this),r===Jo){let n=Qo.currentOp;return n._op===pc||n._op===_a?Jo:(Qo.currentOp=null,n._op===qe||n._op===He?n:xe(yt(n)))}}catch(n){r!==Jo&&!v(r,"_op")||!(r._op in this)?r=Qc(`Not a valid effect: ${Eo(r)}`):MS(n)?r=xe(We(yt(n),ir(wr))):r=dn(n)}}}run=()=>{this.drainQueueOnCurrentThread()}},bx=D("effect/FiberRef/currentMinimumLogLevel",()=>ze(qh("Info"))),Lp=e=>St(t=>{let r=Vo(t.context,lr);ut(r,Bo).unsafe.log(e.log(t))}),zF=e=>St(t=>{let r=Vo(t.context,lr),n=ut(r,Bo).unsafe;switch(t.logLevel._tag){case"Debug":return n.debug(e.log(t));case"Info":return n.info(e.log(t));case"Trace":return n.trace(e.log(t));case"Warning":return n.warn(e.log(t));case"Error":case"Fatal":return n.error(e.log(t));default:return n.log(e.log(t))}}),BF=e=>St(t=>{let r=Vo(t.context,lr);ut(r,Bo).unsafe.error(e.log(t))}),wi=D(Symbol.for("effect/Logger/defaultLogger"),()=>Lp(lx)),jF=D(Symbol.for("effect/Logger/jsonLogger"),()=>Lp(dx)),VF=D(Symbol.for("effect/Logger/logFmtLogger"),()=>Lp(fx)),KF=D(Symbol.for("effect/Logger/prettyLogger"),()=>mx),GF=D(Symbol.for("effect/Logger/structuredLogger"),()=>Lp(_l)),LC=D(Symbol.for("effect/Logger/tracerLogger"),()=>St(({annotations:e,cause:t,context:r,fiberId:n,logLevel:o,message:s})=>{let a=Un(Ds(r,Dt),fi);if(a._tag==="None"||a.value._tag==="ExternalSpan")return;let i=gc(Ds(r,lr),to),c={};for(let[p,l]of e)c[p]=l;c["effect.fiberId"]=O0(n),c["effect.logLevel"]=o.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=cr(t,{renderErrorCause:!0})),a.value.event(Eo(Array.isArray(s)?s[0]:s),i.unsafeCurrentTimeNanos(),c)})),JF=e=>cx(e,t=>{let r=zt(dl(t.context,Dt),Un(fi));return r._tag==="None"?t:{...t,annotations:f(t.annotations,Gn("effect.traceId",r.value.traceId),Gn("effect.spanId",r.value.spanId),r.value._tag==="Span"?Gn("effect.spanName",r.value.name):L)}}),Sx=D(Symbol.for("effect/FiberRef/currentLoggers"),()=>TS(Fa(wi,LC))),QF=u(3,(e,t,r)=>E(wx,n=>{let o=[],s=J(()=>{if(o.length===0)return re;let a=o;return o=[],r(a)});return Tt(a=>f(Tp(t),ye(s),U_,a,Dl,E(i=>np(n,Xa(i))),ye(Nl(()=>s)),Me(St(i=>{o.push(e.log(i))}))))}));var _x=u(e=>Nt(e[0]),(e,t)=>As(Kr(e,r=>Nl(n=>t(r,n)))));var Nl=e=>Y(t=>{let r=t.getFiberRefs(),n=Gb(t.currentRuntimeFlags,Qn);return E(wx,o=>ni(o,s=>Y(a=>{let i=a.getFiberRefs(),c=a.currentRuntimeFlags,p=hi(i,r),l=fn(c,n),d=hi(r,i);return a.setFiberRefs(xi(p,a.id(),r)),Gs(ES(e(s),l),k(()=>{a.setFiberRefs(xi(d,a.id(),a.getFiberRefs()))}))})))});var C4=e=>{if(Array.isArray(e)||ga(e))return[e,_()];let t=Object.keys(e),r=t.length;return[t.map(n=>e[n]),w(n=>{let o={};for(let s=0;s<r;s++)o[t[s]]=n[s];return o})]},k4=(e,t,r)=>{let n=[];for(let o of e)n.push(mn(o));return E(ki(n,L,{concurrency:r?.concurrency,batching:r?.batching,concurrentFinalizers:r?.concurrentFinalizers}),o=>{let s=_(),a=o.length,i=new Array(a),c=new Array(a),p=!1;for(let l=0;l<a;l++){let d=o[l];d._tag==="Left"?(i[l]=w(d.left),p=!0):(c[l]=d.right,i[l]=s)}return p?t._tag==="Some"?be(t.value(i)):be(i):r?.discard?re:t._tag==="Some"?I(t.value(c)):I(c)})},w4=(e,t,r)=>{let n=[];for(let o of e)n.push(mn(o));return r?.discard?ki(n,L,{concurrency:r?.concurrency,batching:r?.batching,discard:!0,concurrentFinalizers:r?.concurrentFinalizers}):B(ki(n,L,{concurrency:r?.concurrency,batching:r?.batching,concurrentFinalizers:r?.concurrentFinalizers}),o=>t._tag==="Some"?t.value(o):o)},Cx=(e,t)=>{let[r,n]=C4(e);return t?.mode==="validate"?k4(r,n,t):t?.mode==="either"?w4(r,n,t):t?.discard!==!0&&n._tag==="Some"?B(ki(r,L,t),n.value):ki(r,L,t)};var ki=u(e=>ga(e[0]),(e,t,r)=>Y(n=>{let o=r?.batching===!0||r?.batching==="inherit"&&n.getFiberRef(RS);return r?.discard?A_(r.concurrency,()=>Dp(Sp,r?.concurrentFinalizers)(s=>o?oo(e,(a,i)=>s(t(a,i)),!0,!1,1):$o(e,(a,i)=>s(t(a,i)))),()=>Dp(Ih,r?.concurrentFinalizers)(s=>oo(e,(a,i)=>s(t(a,i)),o,!1)),s=>Dp(Ph(s),r?.concurrentFinalizers)(a=>oo(e,(i,c)=>a(t(i,c)),o,!1,s))):A_(r?.concurrency,()=>Dp(Sp,r?.concurrentFinalizers)(s=>o?FC(e,1,(a,i)=>s(t(a,i)),!0):ur(e,(a,i)=>s(t(a,i)))),()=>Dp(Ih,r?.concurrentFinalizers)(s=>YF(e,(a,i)=>s(t(a,i)),o)),s=>Dp(Ph(s),r?.concurrentFinalizers)(a=>FC(e,s,(i,c)=>a(t(i,c)),o)))})),YF=(e,t,r)=>J(()=>{let n=ne(e),o=new Array(n.length);return ye(oo(n,(a,i)=>E(t(a,i),c=>k(()=>o[i]=c)),r,!1),I(o))}),oo=(e,t,r,n,o)=>Tt(s=>gS(a=>Y(i=>{let c=Array.from(e).reverse(),p=c.length;if(p===0)return re;let l=0,d=!1,m=o?Math.min(c.length,o):c.length,h=new Set,x=new Array,b=()=>h.forEach(V=>{V.currentScheduler.scheduleTask(()=>{V.unsafeInterruptAsFork(i.id())},0)}),S=new Array,y=new Array,O=new Array,g=()=>{let V=x.filter(({exit:pe})=>pe._tag==="Failure").sort((pe,ue)=>pe.index<ue.index?-1:pe.index===ue.index?0:1).map(({exit:pe})=>pe);return V.length===0&&V.push(Et),V},T=(V,pe=!1)=>{let ue=As(a(V)),K=O4(ue,i,i.currentRuntimeFlags,_i);return i.currentScheduler.scheduleTask(()=>{pe&&K.unsafeInterruptAsFork(i.id()),K.resume(ue)},0),K},P=()=>{n||(p-=c.length,c=[]),d=!0,b()},M=r?hS:Or,H=T(pr(V=>{let pe=(K,oe)=>{K._op==="Blocked"?O.push(K):(x.push({index:oe,exit:K}),K._op==="Failure"&&!d&&P())},ue=()=>{if(c.length>0){let K=c.pop(),oe=l++,Ye=()=>{let ct=c.pop();return oe=l++,E(Ja(),()=>E(M(s(t(ct,oe))),$e))},$e=ct=>c.length>0&&(pe(ct,oe),c.length>0)?Ye():I(ct),Z=E(M(s(t(K,oe))),$e),Re=T(Z);S.push(Re),h.add(Re),d&&Re.currentScheduler.scheduleTask(()=>{Re.unsafeInterruptAsFork(i.id())},0),Re.addObserver(ct=>{let tr;if(ct._op==="Failure"?tr=ct:tr=ct.effect_instruction_i0,y.push(Re),h.delete(Re),pe(tr,oe),x.length===p)V(I(fe(Ms(g(),{parallel:!0}),()=>Et)));else if(O.length+x.length===p){let tc=g(),jy=O.map(lu=>lu.effect_instruction_i0).reduce(nS);V(I(Hm(jy,oo([fe(Ms(tc,{parallel:!0}),()=>Et),...O.map(lu=>lu.effect_instruction_i1)],lu=>lu,r,!0,o))))}else ue()})}};for(let K=0;K<m;K++)ue()}));return st(vr(hn(s(Hs(H))),si({onFailure:V=>{P();let pe=O.length+1,ue=Math.min(typeof o=="number"?o:O.length,O.length),K=Array.from(O);return pr(oe=>{let Ye=[],$e=0,Z=0,Re=(tr,tc)=>jy=>{Ye[tr]=jy,$e++,$e===pe&&oe(Se(xe(V))),K.length>0&&tc&&ct()},ct=()=>{T(K.pop(),!0).addObserver(Re(Z,!0)),Z++};H.addObserver(Re(Z,!1)),Z++;for(let tr=0;tr<ue;tr++)ct()})},onSuccess:()=>ur(y,V=>V.inheritAll)})))}))),FC=(e,t,r,n)=>J(()=>{let o=ne(e),s=new Array(o.length);return ye(oo(o,(i,c)=>B(r(i,c),p=>s[c]=p),n,!1,t),I(s))});var Dl=e=>T4(e,_i);var UC=(e,t,r,n=null)=>{let o=Ex(e,t,r,n);return o.resume(e),o},O4=(e,t,r,n=null)=>Ex(e,t,r,n),Ex=(e,t,r,n=null)=>{let o=Cm(),s=t.getFiberRefs(),a=x_(s,o),i=new Fl(o,a,r),c=Ds(a,Dt),p=i.currentSupervisor;return p.onStart(c,e,w(t),i),i.addObserver(d=>p.onEnd(d,i)),(n!==null?n:f(t.getFiberRef(Um),fe(()=>t.scope()))).add(r,i),i},T4=(e,t)=>Y((r,n)=>I(UC(e,r,n.runtimeFlags,t)));var NC=e=>gn(t=>ce(Un(t,js),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return E(sp(r,Ih),n=>Ks(e,n))}}})),HF=e=>t=>gn(r=>ce(Un(r,js),{onNone:()=>t,onSome:n=>n.strategy._tag==="ParallelN"&&n.strategy.parallelism===e?t:E(sp(n,Ph(e)),o=>Ks(t,o))}));var Dp=(e,t)=>r=>gn(n=>ce(Un(n,js),{onNone:()=>r(L),onSome:o=>{if(t===!0){let s=e._tag==="Parallel"?NC:e._tag==="Sequential"?DC:HF(e.parallelism);switch(o.strategy._tag){case"Parallel":return s(r(NC));case"Sequential":return s(r(DC));case"ParallelN":return s(r(HF(o.strategy.parallelism)))}}else return r(L)}})),Ll=e=>E(js,e),kx=e=>E(Vs(),t=>vr(e(t),r=>t.close(r))),$C=e=>E(Vs(),t=>r1(e,t)),DC=e=>gn(t=>ce(Un(t,js),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return E(sp(r,Sp),n=>Ks(e,n))}}}));var HC=e=>Up(lr,Vt(hp,e));var ZF=u(e=>Nt(e[1]),(e,t,r)=>Bs(e,t,(n,o)=>[n,o],r)),XF=u(e=>Nt(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?Ya(e,t):Bs(e,t,(n,o)=>n,r)),e1=u(e=>Nt(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?ye(e,t):Bs(e,t,(n,o)=>o,r)),Bs=u(e=>Nt(e[1]),(e,t,r,n)=>B(Cx([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),([o,s])=>r(o,s)));var js=pt("effect/Scope"),wx=js,v4=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.set({},t)},R4={[Zm]:Zm,[Xm]:Xm,pipe(){return C(this,arguments)},fork(e){return k(()=>{let t=t1(e);if(this.state._tag==="Closed")return t.state=this.state,t;let r={},n=o=>t.close(o);return this.state.finalizers.set(r,n),v4(t,o=>k(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),t})},close(e){return J(()=>{if(this.state._tag==="Closed")return re;let t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?re:u_(this.strategy)?f(ur(t,r=>Or(r(e))),E(r=>f(Ms(r),Pt(nl),fe(()=>Et)))):l_(this.strategy)?f(YF(t,r=>Or(r(e)),!1),E(r=>f(Ms(r,{parallel:!0}),Pt(nl),fe(()=>Et)))):f(FC(t,this.strategy.parallelism,r=>Or(r(e)),!1),E(r=>f(Ms(r,{parallel:!0}),Pt(nl),fe(()=>Et))))})},addFinalizer(e){return J(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.set({},e),re))}},t1=(e=mi)=>{let t=Object.create(R4);return t.strategy=e,t.state={_tag:"Open",finalizers:new Map},t},Vs=(e=mi)=>k(()=>t1(e)),Ks=u(2,(e,t)=>up(e,br(xc(js,t)))),r1=u(2,(e,t)=>f(e,Ks(t),vr(r=>t.close(r)))),A4=e=>Ps(e,{differ:LF,fork:Np}),Ul=u(2,(e,t)=>st(_x(E(ei(e),r=>Me(Kc(e,t),r)),r=>Kc(e,r)))),Up=u(2,(e,t)=>Zn(e,r=>Ul(e,t(r))));var qF=SA(rA),qC=A4(Ci);var WC=u(3,(e,t,r)=>n1(e,t,{onSelfWin:(n,o)=>E(n.await,s=>{switch(s._tag){case qe:return E(n.inheritAll,()=>r.onSelfDone(s,o));case He:return r.onSelfDone(s,o)}}),onOtherWin:(n,o)=>E(n.await,s=>{switch(s._tag){case qe:return E(n.inheritAll,()=>r.onOtherDone(s,o));case He:return r.onOtherDone(s,o)}})}));var zC=u(2,(e,t)=>Uo(r=>WC(e,t,{onSelfDone:(n,o)=>cp(n,{onFailure:s=>f(Hs(o),Zh(a=>jn(s,a))),onSuccess:s=>f(o,Yn(r),Me(s))}),onOtherDone:(n,o)=>cp(n,{onFailure:s=>f(Hs(o),Zh(a=>jn(a,s))),onSuccess:s=>f(o,Yn(r),Me(s))})}))),n1=u(3,(e,t,r)=>Y((n,o)=>{let s=o.runtimeFlags,a=Kn(!0),i=Ex(e,n,s,r.selfScope),c=Ex(t,n,s,r.otherScope);return pr(p=>{i.addObserver(()=>WF(i,c,r.onSelfWin,a,p)),c.addObserver(()=>WF(c,i,r.onOtherWin,a,p)),i.startFork(e),c.startFork(t)},k0(i.id(),c.id()))})),WF=(e,t,r,n,o)=>{b0(!0,!1)(n)&&o(r(e,t))},Gs=u(2,(e,t)=>Tt(r=>ot(r(e),{onFailure:n=>ot(t,{onFailure:o=>ge(We(n,o)),onSuccess:()=>ge(n)}),onSuccess:n=>Me(t,n)}))),I4=(e,t,r)=>Uo(n=>E(E(Dl(Zc(e)),o=>pr(s=>{let a=t.map(p=>p.listeners.count),i=()=>{a.every(p=>p===0)&&t.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&rl(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&Lc(p.result.state.current.effect.cause)))&&(c.forEach(p=>p()),r?.(),s(Xa(o)))};o.addObserver(p=>{c.forEach(l=>l()),s(p)});let c=t.map((p,l)=>{let d=m=>{a[l]=m,i()};return p.listeners.addObserver(d),()=>p.listeners.removeObserver(d)});return i(),k(()=>{c.forEach(p=>p())})})),()=>J(()=>{let o=t.flatMap(s=>s.state.completed?[]:[s]);return $o(o,s=>hF(s.request,NS(n)))})));var P4="effect/ScheduleInterval",$l=Symbol.for(P4),BC={[$l]:$l,startMillis:0,endMillis:0},jC=(e,t)=>e>t?BC:{[$l]:$l,startMillis:e,endMillis:t},o1=u(2,(e,t)=>s1(e,t)===e),s1=u(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t);var a1=e=>e.startMillis>=e.endMillis;var i1=u(2,(e,t)=>{let r=Math.max(e.startMillis,t.startMillis),n=Math.min(e.endMillis,t.endMillis);return jC(r,n)});var c1=e=>jC(e,Number.POSITIVE_INFINITY);var VC=BC,p1=o1;var u1=a1;var l1=i1;var f1=c1;var N4="effect/ScheduleIntervals",KC=Symbol.for(N4),GC=e=>({[KC]:KC,intervals:e});var m1=u(2,(e,t)=>D4(e.intervals,t.intervals,Ve())),D4=(e,t,r)=>{let n=e,o=t,s=r;for(;xt(n)&&xt(o);){let a=f(gt(n),l1(gt(o))),i=u1(a)?s:f(s,Pe(a));f(gt(n),p1(gt(o)))?n=Mt(n):o=Mt(o),s=i}return GC(_r(s))},Ox=e=>f(e.intervals,Ia,fe(()=>VC)).startMillis,h1=e=>f(e.intervals,Ia,fe(()=>VC)).endMillis,x1=u(2,(e,t)=>Ox(e)<Ox(t)),g1=e=>xt(e.intervals);var y1=GC;var E1=m1,b1=Ox,JC=h1,S1=x1,_1=g1;var QC="Continue",k1="Done",w1=e=>({_tag:QC,intervals:e}),O1=e=>({_tag:QC,intervals:y1(Oe(e))}),T1={_tag:k1},v1=e=>e._tag===QC,R1=e=>e._tag===k1;var A1=w1;var I1=O1,$p=T1,YC=v1,Hl=R1;var ql=np,P1=ni,Oi=op,Tx=Ks,vx=sp;var M1=Vs;var XC=class{permits;waiters=new Set;taken=0;constructor(t){this.permits=t}get free(){return this.permits-this.taken}take=t=>Gu(r=>{if(this.free<t){let n=()=>{this.free<t||(this.waiters.delete(n),this.taken+=t,r(I(t)))};return this.waiters.add(n),k(()=>{this.waiters.delete(n)})}return this.taken+=t,r(I(t))});updateTaken=t=>Y(r=>(this.taken=t(this.taken),this.waiters.size>0&&r.getFiberRef(Op).scheduleTask(()=>{let n=this.waiters.values(),o=n.next();for(;o.done===!1&&this.free>0;)o.value(),o=n.next()},r.getFiberRef(Xn)),I(this.free)));release=t=>this.updateTaken(r=>r-t);releaseAll=this.updateTaken(t=>0);withPermits=t=>r=>Tt(n=>E(n(this.take(t)),o=>Gs(n(r),this.release(o))));withPermitsIfAvailable=t=>r=>Tt(n=>J(()=>this.free<t?W_:(this.taken+=t,Gs(n(N_(r)),this.release(t)))))},rk=e=>new XC(e),D1=e=>k(()=>rk(e)),ek=class extends un{isOpen;waiters=[];scheduled=!1;constructor(t){super(),this.isOpen=t}commit(){return this.await}unsafeSchedule(t){return this.scheduled||this.waiters.length===0?re:(this.scheduled=!0,t.currentScheduler.scheduleTask(this.flushWaiters,t.getFiberRef(Xn)),re)}flushWaiters=()=>{this.scheduled=!1;let t=this.waiters;this.waiters=[];for(let r=0;r<t.length;r++)t[r](Et)};open=Y(t=>this.isOpen?re:(this.isOpen=!0,this.unsafeSchedule(t)));unsafeOpen(){this.isOpen||(this.isOpen=!0,this.flushWaiters())}release=Y(t=>this.isOpen?re:this.unsafeSchedule(t));await=Gu(t=>this.isOpen?t(re):(this.waiters.push(t),k(()=>{let r=this.waiters.indexOf(t);r!==-1&&this.waiters.splice(r,1)})));unsafeClose(){this.isOpen=!1}close=k(()=>{this.isOpen=!1});whenOpen=t=>ye(this.await,t)},L1=e=>new ek(e??!1);var U1=u(2,(e,t)=>Y((r,n)=>{let o=t,s=UC(e,r,n.runtimeFlags,_i);if(o.state._tag==="Open"){let a=()=>Uo(c=>R(c,s.id())?re:st(Xa(s))),i={};o.state.finalizers.set(i,a),s.addObserver(()=>{o.state._tag!=="Closed"&&o.state.finalizers.delete(i)})}else s.unsafeInterruptAsFork(r.id());return I(s)}));var ZC=Symbol.for("effect/Effect/memoizeFunction.key"),F1=class{a;eq;[ZC]=ZC;constructor(t,r){this.a=t,this.eq=r}[F](t){return v(t,ZC)?this.eq?this.eq(this.a,t.a):R(this.a,t.a):!1}[N](){return this.eq?0:G(this,A(this.a))}};var q4="effect/Ref/SynchronizedRef",W4=Symbol.for(q4),z4={_A:e=>e},tk=class extends un{ref;withLock;[W4]=z4;[Wh]=O_;[Us]=Us;constructor(t,r){super(),this.ref=t,this.withLock=r,this.get=fr(this.ref)}get;commit(){return this.get}modify(t){return this.modifyEffect(r=>I(t(r)))}modifyEffect(t){return this.withLock(f(E(fr(this.ref),t),E(([r,n])=>Me(Ko(this.ref,n),r))))}},$1=e=>k(()=>nk(e)),nk=e=>{let t=Cp(e),r=rk(1);return new tk(t,r.withPermits(1))};var Wl=Symbol.for("effect/ManagedRuntime");var W1="Fold",z1="Fresh",B1="FromEffect",j1="Scoped",V1="Suspend",K1="Provide",ok="ProvideMerge",G1="ZipWith";var Ax=J_;var sk=Q_,Sn=Xa;var Ix=Yn;var Px=Hs;var Hp=e=>function(){if(arguments.length===1){let t=arguments[0];return(r,...n)=>e(t,r,...n)}return e.apply(this,arguments)},Js=Hp((e,t,r)=>{let n=Cm(),o=[[Dt,[[n,e.context]]]];r?.scheduler&&o.push([Op,[[n,r.scheduler]]]);let s=GI(e.fiberRefs,{entries:o,forkAs:n});r?.updateRefs&&(s=r.updateRefs(s,n));let a=new Fl(n,s,e.runtimeFlags),i=t;r?.scope&&(i=E(vx(r.scope,mi),p=>ye(np(p,Uo(l=>R(l,a.id())?re:Yn(a,l))),vr(t,l=>Oi(p,l)))));let c=a.currentSupervisor;return c!==Ci&&(c.onStart(e.context,i,_(),a),a.addObserver(p=>c.onEnd(p,a))),_i.add(e.runtimeFlags,a),r?.immediate===!1?a.resume(i):a.start(i),a}),Bl=Hp((e,t,r={})=>{let n=Js(e,t,r);return r.onExit&&n.addObserver(o=>{r.onExit(o)}),(o,s)=>Bl(e)(f(n,Ix(o??wr)),{...s,onExit:s?.onExit?a=>s.onExit(aM(a)):void 0})}),Nx=Hp((e,t)=>{let r=jl(e)(t);if(r._tag==="Failure")throw pk(r.effect_instruction_i0);return r.effect_instruction_i0}),ik=class extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}},j4=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new ik(e);return Error.stackTraceLimit=t,r};var ak=Symbol.for("effect/Runtime/FiberFailure"),zl=Symbol.for("effect/Runtime/FiberFailure/Cause"),ck=class extends Error{[ak];[zl];constructor(t){let r=Em(t)[0];super(r?.message||"An error has occurred"),this[ak]=ak,this[zl]=t,this.name=r?`(FiberFailure) ${r.name}`:"FiberFailure",r?.stack&&(this.stack=r.stack)}toJSON(){return{_id:"FiberFailure",cause:this[zl].toJSON()}}toString(){return"(FiberFailure) "+cr(this[zl],{renderErrorCause:!0})}[z](){return this.toString()}},pk=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new ck(e);return Error.stackTraceLimit=t,r};var J1=e=>{let t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return ip(t.left);case"Right":return Se(t.right);case"Some":return Se(t.value);case"None":return ip(qo())}},jl=Hp((e,t)=>{let r=J1(t);if(r)return r;let n=new wp,o=Js(e)(t,{scheduler:n});n.flush();let s=o.unsafePoll();return s||Wo(Wm(j4(o),oh(o)))}),Dx=Hp((e,t,r)=>Vl(e,t,r).then(n=>{switch(n._tag){case qe:return n.effect_instruction_i0;case He:throw pk(n.effect_instruction_i0)}})),Vl=Hp((e,t,r)=>new Promise(n=>{let o=J1(t);o&&n(o);let s=Js(e)(t);s.addObserver(a=>{n(a)}),r?.signal!==void 0&&(r.signal.aborted?s.unsafeInterruptAsFork(s.id()):r.signal.addEventListener("abort",()=>{s.unsafeInterruptAsFork(s.id())},{once:!0}))})),Fx=class{context;runtimeFlags;fiberRefs;constructor(t,r,n){this.context=t,this.runtimeFlags=r,this.fiberRefs=n}pipe(){return C(this,arguments)}},Q1=e=>new Fx(e.context,e.runtimeFlags,e.fiberRefs),Lx=()=>Y((e,t)=>I(new Fx(e.getFiberRef(Dt),t.runtimeFlags,e.getFiberRefs()))),Y1=Yb(Qn,Kb,Vb),_n=Q1({context:Er(),runtimeFlags:Y1,fiberRefs:JI()});var Kl=Js(_n),qp=Dx(_n),uk=Vl(_n),Gl=Nx(_n),lk=jl(_n);var Z1=u(2,(e,t)=>e.modifyEffect(t));var K4="effect/Layer",fk=Symbol.for(K4),G4={_RIn:e=>e,_E:e=>e,_ROut:e=>e},Qs={[fk]:G4,pipe(){return C(this,arguments)}},J4="effect/Layer/MemoMap",$x=Symbol.for(J4),r2=Hr()("effect/Layer/CurrentMemoMap",{defaultValue:()=>dk()}),n2=e=>v(e,fk),o2=e=>e._op_layer===z1,Hx=class{ref;[$x];constructor(t){this.ref=t,this[$x]=$x}getOrElseMemoize(t,r){return f(Z1(this.ref,n=>{let o=n.get(t);if(o!==void 0){let[s,a]=o,i=f(s,E(([c,p])=>f(gl(c),Me(p))),vr(si({onFailure:()=>re,onSuccess:()=>ni(r,a)})));return I([i,n])}return f(gi(0),E(s=>f(xn(),E(a=>f(gi(()=>re),B(i=>{let c=Tt(l=>f(Vs(),E(d=>f(l(E(a2(t,d,!0),m=>Qh(m(this)))),Or,E(m=>{switch(m._tag){case He:return f(pp(a,m.effect_instruction_i0),ye(op(d,m)),ye(ge(m.effect_instruction_i0)));case qe:return f(Ko(i,h=>f(op(d,h),Ga(zh(s,x=>[x===1,x-1])),st)),ye(yi(s,h=>h+1)),ye(ni(r,h=>f(k(()=>n.delete(t)),ye(fr(i)),E(x=>x(h))))),ye(ii(a,m.effect_instruction_i0)),Me(m.effect_instruction_i0[1]))}}))))),p=[f(Kt(a),vr(cp({onFailure:()=>re,onSuccess:()=>yi(s,l=>l+1)}))),l=>f(fr(i),E(d=>d(l)))];return[c,o2(t)?n:n.set(t,p)]}))))))}),hn)}},s2=J(()=>B($1(new Map),e=>new Hx(e))),dk=()=>new Hx(nk(new Map));var mk=u(2,(e,t)=>E(s2,r=>hk(e,r,t))),hk=u(3,(e,t,r)=>E(a2(e,r),n=>yl(n(t),r2,t))),a2=(e,t,r=!1)=>{let n=e;switch(n._op_layer){case"Locally":return k(()=>o=>n.f(o.getOrElseMemoize(n.self,t)));case"ExtendScope":return k(()=>o=>Ll(s=>o.getOrElseMemoize(n.layer,s)));case"Fold":return k(()=>o=>f(o.getOrElseMemoize(n.layer,t),ot({onFailure:s=>o.getOrElseMemoize(n.failureK(s),t),onSuccess:s=>o.getOrElseMemoize(n.successK(s),t)})));case"Fresh":return k(()=>o=>f(n.layer,mk(t)));case"FromEffect":return r?k(()=>o=>n.effect):k(()=>o=>o.getOrElseMemoize(e,t));case"Provide":return k(()=>o=>f(o.getOrElseMemoize(n.first,t),E(s=>f(o.getOrElseMemoize(n.second,t),yn(s)))));case"Scoped":return r?k(()=>o=>Ks(n.effect,t)):k(()=>o=>o.getOrElseMemoize(e,t));case"Suspend":return k(()=>o=>o.getOrElseMemoize(n.evaluate(),t));case"ProvideMerge":return k(()=>o=>f(o.getOrElseMemoize(n.first,t),Za(o.getOrElseMemoize(n.second,t),n.zipK)));case"ZipWith":return k(()=>o=>f(o.getOrElseMemoize(n.first,t),Bs(o.getOrElseMemoize(n.second,t),n.zipK,{concurrent:!0})))}};var i2=()=>Wp(pi());var c2=e=>xk(sh(e));var xk=e=>Wp(ge(e));var Ti=u(2,(e,t)=>l2(e,{onFailure:c2,onSuccess:t}));var qx=u(2,(e,t)=>{let r=Rd(e),n=r?e:t;return Wp(B(r?t:e,s=>xc(n,s)))}),p2=e=>Wp(B(e,()=>Er()));function Wp(e){let t=Object.create(Qs);return t._op_layer=B1,t.effect=e,t}var u2=u(2,(e,{onFailure:t,onSuccess:r})=>{let n=Object.create(Qs);return n._op_layer=W1,n.layer=e,n.failureK=t,n.successK=r,n}),l2=u(2,(e,{onFailure:t,onSuccess:r})=>u2(e,{onFailure:n=>{let o=fp(n);switch(o._tag){case"Left":return t(o.left);case"Right":return xk(o.right)}},onSuccess:r}));var f2=u(2,(e,t)=>m2(e,t,(r,n)=>br(r,n))),Wx=(...e)=>{let t=e[0];for(let r=1;r<e.length;r++)t=f2(t,e[r]);return t};var zx=u(2,(e,t)=>{let r=Rd(e),n=r?e:t;return gk(B(r?t:e,s=>xc(n,s)))}),zp=e=>gk(f(e,Me(Er()))),gk=e=>{let t=Object.create(Qs);return t._op_layer=j1,t.effect=e,t};var yk=u(2,(e,t)=>{let r=Rd(e);return Wp(I(xc(r?e:t,r?t:e)))});var Ek=e=>{let t=Object.create(Qs);return t._op_layer=V1,t.evaluate=e,t};var bk=u(2,(e,t)=>E(Ll(r=>hk(e,t,r)),r=>f(Lx(),yn(r)))),Bx=u(2,(e,t)=>Ek(()=>{let r=Object.create(Qs);return r._op_layer=K1,r.first=Object.create(Qs,{_op_layer:{value:ok,enumerable:!0},first:{value:i2(),enumerable:!0},second:{value:Array.isArray(t)?Wx(...t):t},zipK:{value:(n,o)=>f(n,br(o))}}),r.second=e,r})),d2=u(2,(e,t)=>{let r=Object.create(Qs);return r._op_layer=ok,r.first=t,r.second=Bx(e,t),r.zipK=(n,o)=>f(n,br(o)),r}),m2=u(3,(e,t,r)=>Ek(()=>{let n=Object.create(Qs);return n._op_layer=G1,n.first=e,n.second=t,n.zipK=r,n})),jx=e=>{let t=pt("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return Ti(qx(t,e),r=>ut(r,t))},Sk=e=>{let t=pt("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return Ti(zx(t,e),r=>ut(r,t))};var X1=u(2,(e,t)=>kx(r=>E(mk(t,r),n=>nh(e,n)))),e2=u(2,(e,t)=>{let r=hi(_n.fiberRefs,t.fiberRefs),n=fn(_n.runtimeFlags,t.runtimeFlags);return Tt(o=>Y(s=>{let a=s.getFiberRef(Dt),i=s.getFiberRefs(),c=xi(s.id(),i)(r),p=s.currentRuntimeFlags,l=Os(n)(p),d=hi(c,i),m=fn(l,p);return s.setFiberRefs(c),s.currentRuntimeFlags=l,Gs(nh(o(e),br(a,t.context)),Y(h=>(h.setFiberRefs(xi(h.id(),h.getFiberRefs())(d)),h.currentRuntimeFlags=Os(m)(h.currentRuntimeFlags),re)))}))}),h2=u(2,(e,t)=>Array.isArray(t)?X1(e,Wx(...t)):n2(t)?X1(e,t):Dv(t)?nh(e,t):Wl in t?E(t.runtimeEffect,r=>e2(e,r)):e2(e,t));var Q4="effect/Schedule",b2=Symbol.for(Q4),Y4=e=>v(e,b2),Z4="effect/ScheduleDriver",X4=Symbol.for(Z4),_k={start:0,now:0,input:void 0,output:void 0,elapsed:_s,elapsedSincePrevious:_s,recurrence:0},x2=Hr()("effect/Schedule/CurrentIterationMetadata",{defaultValue:()=>_k}),ej={_Out:e=>e,_In:e=>e,_R:e=>e},tj={_Out:e=>e,_In:e=>e,_R:e=>e},Ck=class{initial;step;[b2]=ej;constructor(t,r){this.initial=t,this.step=r}pipe(){return C(this,arguments)}},g2=(e,t,r,n)=>yi(e,o=>o.recurrence===0?{now:t,input:r,output:n,recurrence:o.recurrence+1,elapsed:_s,elapsedSincePrevious:_s,start:t}:{now:t,input:r,output:n,recurrence:o.recurrence+1,elapsed:Ss(t-o.start),elapsedSincePrevious:Ss(t-o.now),start:o.start}),kk=class{schedule;ref;[X4]=tj;constructor(t,r){this.schedule=t,this.ref=r}get state(){return B(fr(this.ref),t=>t[1])}get last(){return E(fr(this.ref),([t,r])=>{switch(t._tag){case"None":return vs(()=>new qo);case"Some":return I(t.value)}})}iterationMeta=Cp(_k);get reset(){return Ko(this.ref,[_(),this.schedule.initial]).pipe(Ya(Ko(this.iterationMeta,_k)))}next(t){return f(B(fr(this.ref),r=>r[1]),E(r=>f(Kh,E(n=>f(J(()=>this.schedule.step(n,t,r)),E(([o,s,a])=>{let i=Ko(this.ref,[w(s),o]);if(Hl(a))return i.pipe(ye(be(_())));let c=b1(a.intervals)-n;if(c<=0)return i.pipe(ye(g2(this.iterationMeta,n,t,s)),Me(s));let p=Ss(c);return f(i,ye(g2(this.iterationMeta,n,t,s)),ye(Tp(p)),Me(s))}))))))}},Jl=(e,t)=>new Ck(e,t);var rj=u(2,(e,t)=>Tk(e,(r,n)=>k(()=>t(r,n)))),Tk=u(2,(e,t)=>Jl(e.initial,(r,n,o)=>E(e.step(r,n,o),([s,a,i])=>Hl(i)?I([s,a,$p]):B(t(n,a),c=>c?[s,a,i]:[s,a,$p]))));var nj=e=>f(gi([_(),e.initial]),B(t=>new kk(e,t)));var oj=u(2,(e,t)=>sj(e,t,E1)),sj=u(3,(e,t,r)=>Jl([e.initial,t.initial],(n,o,s)=>f(Za(e.step(n,o,s[0]),t.step(n,o,s[1]),(a,i)=>[a,i]),E(([[a,i,c],[p,l,d]])=>YC(c)&&YC(d)?wk(e,t,o,a,i,c.intervals,p,l,d.intervals,r):I([[a,p],[i,l],$p]))))),wk=(e,t,r,n,o,s,a,i,c,p)=>{let l=p(s,c);return _1(l)?I([[n,a],[o,i],A1(l)]):f(s,S1(c))?E(e.step(JC(s),r,n),([d,m,h])=>Hl(h)?I([[d,a],[m,i],$p]):wk(e,t,r,d,m,h.intervals,a,i,c,p)):E(t.step(JC(c),r,a),([d,m,h])=>Hl(h)?I([[n,d],[o,m],$p]):wk(e,t,r,n,o,s,d,m,h.intervals,p))};var aj=u(2,(e,t)=>ij(e,r=>k(()=>t(r)))),ij=u(2,(e,t)=>Jl(e.initial,(r,n,o)=>E(e.step(r,n,o),([s,a,i])=>B(t(a),c=>[s,c,i]))));var cj=e=>Jl(e.initial,(t,r,n)=>f(e.step(t,r,n),B(([o,s,a])=>[o,r,a])));var pj=e=>dj(k2,t=>t<e);var uj=(e,t)=>Jl(e,(r,n,o)=>k(()=>[t(o),o,I1(f1(r))]));var lj=u(2,(e,t)=>Tk(e,(r,n)=>q_(t(r))));var fj=u(2,(e,t)=>Tk(e,(r,n)=>t(r))),dj=u(2,(e,t)=>rj(e,(r,n)=>t(n)));var Kx=Symbol.for("effect/Schedule/ScheduleDefect"),Ok=class{error;[Kx];constructor(t){this.error=t,this[Kx]=Kx}},mj=e=>v(e,Kx),y2=e=>jr(e,t=>dn(new Ok(t))),hj=e=>ce(Hc(e,t=>Pu(t)&&mj(t.defect)?w(t.defect):_()),{onNone:()=>e,onSome:t=>Bn(t.error)}),xj=e=>Jc(e,t=>ge(hj(t))),E2=u(2,(e,t)=>_2(e,t,(r,n)=>be(r))),S2=u(2,(e,t)=>{if(Y4(t))return E2(e,t);let r=t.schedule??cj(k2),n=t.while?fj(r,a=>{let i=t.while(a);return typeof i=="boolean"?I(i):y2(i)}):r,o=t.until?lj(n,a=>{let i=t.until(a);return typeof i=="boolean"?I(i):y2(i)}):n,s=t.times?oj(o,pj(t.times)).pipe(aj(a=>a[0])):o;return xj(E2(e,s))}),_2=u(3,(e,t,r)=>E(nj(t),n=>Tr(e,{onFailure:o=>r(o,_()),onSuccess:o=>C2(Xh(e,x2,fr(n.iterationMeta)),n,(s,a)=>Xh(r(s,a),x2,fr(n.iterationMeta)),o)}))),C2=(e,t,r,n)=>Tr(t.next(n),{onFailure:()=>Bm(t.last),onSuccess:o=>Tr(e,{onFailure:s=>r(s,w(o)),onSuccess:s=>C2(e,t,r,s)})});var k2=uj(0,e=>e+1);var w2=Symbol.for("effect/MutableList"),yj={[w2]:w2,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();let r=t.value;return t=t.next,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},toString(){return X(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},Ej=e=>({value:e,removed:!1,prev:void 0,next:void 0}),O2=()=>{let e=Object.create(yj);return e.head=void 0,e.tail=void 0,e._length=0,e};var vk=e=>Gx(e)===0,Gx=e=>e._length;var T2=u(2,(e,t)=>{let r=Ej(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),v2=e=>{let t=e.head;if(t!==void 0)return bj(e,t),t.value};var bj=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var R2=Symbol.for("effect/MutableQueue"),Lt=Symbol.for("effect/mutable/MutableQueue/Empty"),_j={[R2]:R2,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return X(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Q)}},[z](){return this.toJSON()},pipe(){return C(this,arguments)}},A2=e=>{let t=Object.create(_j);return t.queue=O2(),t.capacity=e,t},I2=e=>A2(e),Jx=()=>A2(void 0),Qx=e=>Gx(e.queue),Yx=e=>vk(e.queue);var P2=e=>e.capacity===void 0?1/0:e.capacity,Bp=u(2,(e,t)=>{let r=Gx(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(T2(t)(e.queue),!0)}),Rk=u(2,(e,t)=>{let r=t[Symbol.iterator](),n,o=Ve(),s=!0;for(;s&&(n=r.next())&&!n.done;)s=Bp(n.value)(e);for(;n!=null&&!n.done;)o=Pe(n.value)(o),n=r.next();return _r(o)}),Zo=u(2,(e,t)=>vk(e.queue)?t:v2(e.queue)),Zx=u(2,(e,t)=>{let r=Ve(),n=0;for(;n<t;){let o=Zo(Lt)(e);if(o===Lt)break;r=Pe(o)(r),n+=1}return _r(r)});var Cn=Nt;var eg=H_;var tg=Cx;var vt=ki;var Ql=Y,mr=be;var Gt=ge;var Xx=dn,rg=Qc;var Ut=gA;var Ak=qP,we=I;var Fe=J,Ge=k,te=re;var Yl=jr,Zl=Jc;var kn=FP,Ik=NP;var N2=DP;var D2=D_;var L2=VP;var Xo=jP;var vi=Vr;var Ar=Zc;var U2=Ho,Ri=As,Ai=Tt;var Xl=Me;var ef=st;var de=B;var $2=Ju,Ys=Rs;var Pk=_x;var H2=dS;var es=Gs;var q2=wx;var ng=kx,jp=$C;var W2=Uo;var og=Dl;var so=U1;var tf=pi;var z2=up,rf=h2;var B2=JP;var Ii=mn,at=Or,Mk=Xc;var Fk=GP;var j=E,nf=hA,ts=hn,sg=zC;var ag=WC;var Zs=Kr,Nk=WP;var of=zP;var ig=BP;var Dk=S2;var sf=L_,af=zm,Jt=ot;var j2=(e,...t)=>Yh(e)(...t);var cf=LP;var Lk=UP;var _t=$P,Xs=MP;var cg=Lx;var Uk=D1,V2=L1;var $k=Kl;var pg=qp;var en=Gl;var Pi=ZF,Hk=XF,Je=e1,Mi=Bs;var K2=Gh,Tj=eM;var G2=Jh;var J2=function(e,...t){let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=new Error;if(Error.stackTraceLimit=r,typeof e!="string")return M2(e.length,function(...a){let i=Error.stackTraceLimit;Error.stackTraceLimit=2;let c=new Error;return Error.stackTraceLimit=i,F2({self:this,body:e,args:a,pipeables:t,spanName:"<anonymous>",spanOptions:{context:Ep.context(!0)},errorDef:n,errorCall:c})});let o=e,s=t[0];return(a,...i)=>M2(a.length,{[o](...c){let p=Error.stackTraceLimit;Error.stackTraceLimit=2;let l=new Error;return Error.stackTraceLimit=p,F2({self:this,body:a,args:c,pipeables:i,spanName:o,spanOptions:s,errorDef:n,errorCall:l})}}[o])};function M2(e,t){return Object.defineProperty(t,"length",{value:e,configurable:!0})}function F2(e){let t,r;if(qT(e.body))t=yS(()=>e.body.apply(e.self,e.args));else try{t=e.body.apply(e.self,e.args)}catch(a){r=a,t=Xx(a)}if(e.pipeables.length>0)try{for(let a of e.pipeables)t=a(t,...e.args)}catch(a){t=r?Gt(We(yt(r),yt(a))):Xx(a)}let n=!1,o=()=>{if(n!==!1)return n;if(e.errorCall.stack){let a=e.errorDef.stack.trim().split(`
`),i=e.errorCall.stack.trim().split(`
`),c=a.slice(2).join(`
`).trim();c.includes("(")||(c=c.replace(/at (.*)/,"at ($1)"));let p=i.slice(2).join(`
`).trim();return p.includes("(")||(p=p.replace(/at (.*)/,"at ($1)")),n=`${c}
${p}`,n}},s=e.spanOptions&&"captureStackTrace"in e.spanOptions?e.spanOptions:{captureStackTrace:o,...e.spanOptions};return Tj(t,e.spanName,s)}var Q2=e=>zp(Ul(bx,e)),Y2=u(2,(e,t)=>Gr(bx,t)(e)),pf=e=>zp(Up(Sx,Po(e))),qk=e=>jx(B(e,pf)),Wk=e=>Sk(B(e,pf)),uf=e=>zp(Up(Sx,Iu(e))),Z2=u(2,(e,t)=>Ti(uf(e),()=>pf(t))),X2=u(2,(e,t)=>Ti(uf(e),()=>qk(t))),eN=u(2,(e,t)=>Ti(uf(e),()=>Wk(t)));var tN=e=>zp(HC(e));var nN=qx,oN=p2;var sN=Wx;var aN=yk;var iN=Bx,cN=d2;var zk=jx;var pN=tN;var Bk=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Bk(e,t.from)}},Ir=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),lf=e=>{let t=!1,r;return()=>(t||(r=e(),t=!0),r)},fN=e=>{try{return e.toISOString()}catch{return String(e)}},$t=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(r=>$t(r,t)).join(",")}]`;if(ld(e))return fN(e);if(v(e,"toString")&&sn(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(Ne(e))return JSON.stringify(e);if(At(e)||e==null||go(e)||ma(e))return String(e);if(ps(e))return String(e)+"n";if(ga(e))return`${e.constructor.name}(${$t(Array.from(e),t)})`;try{t&&JSON.stringify(e);let r=`{${Ir(e).map(o=>`${Ne(o)?JSON.stringify(o):String(o)}:${$t(e[o],!1)}`).join(",")}}`,n=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${n}(${r})`:r}catch{return"<circular structure>"}},ff=e=>typeof e=="string"?JSON.stringify(e):String(e),jk=e=>Array.isArray(e),dN=e=>!Array.isArray(e),lN=e=>`[${ff(e)}]`,ug=e=>jk(e)?e.map(lN).join(""):lN(e);var ea=(e,t,r,n)=>{let o=e;return r&&Ce(r)&&(o+=`
at path: ${ug(r)}`),t!==void 0&&(o+=`
details: ${t}`),n&&(o+=`
schema (${n._tag}): ${n}`),o};var Vk=(e,t,r)=>ea("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,r);var mN=e=>ea("Unsupported key schema",void 0,void 0,e),hN=e=>ea("Unsupported literal",`literal value: ${$t(e)}`),Kk=e=>ea("Duplicate index signature",`${e} index signature`),xN=ea("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),gN=ea("Invalid element","A required element cannot follow an optional element. ts(1257)"),Gk=e=>ea("Duplicate property signature transformation",`Duplicate key ${$t(e)}`);var fg=e=>ea("Duplicate property signature",`Duplicate key ${$t(e)}`);var EN=Symbol.for("effect/SchemaId/DateFromSelf");var SN=Symbol.for("effect/annotation/Brand"),_N=Symbol.for("effect/annotation/SchemaId"),pw=Symbol.for("effect/annotation/Message"),mg=Symbol.for("effect/annotation/MissingMessage"),hg=Symbol.for("effect/annotation/Identifier"),hr=Symbol.for("effect/annotation/Title"),$i=Symbol.for("effect/annotation/AutoTitle"),rs=Symbol.for("effect/annotation/Description"),uw=Symbol.for("effect/annotation/Examples"),lw=Symbol.for("effect/annotation/Default"),fw=Symbol.for("effect/annotation/JSONSchema"),dw=Symbol.for("effect/annotation/Arbitrary"),mw=Symbol.for("effect/annotation/Pretty"),hw=Symbol.for("effect/annotation/Equivalence"),CN=Symbol.for("effect/annotation/Documentation"),xw=Symbol.for("effect/annotation/Concurrency"),gw=Symbol.for("effect/annotation/Batching"),yw=Symbol.for("effect/annotation/ParseIssueTitle"),Ew=Symbol.for("effect/annotation/ParseOptions"),bw=Symbol.for("effect/annotation/DecodingFallback"),hf=Symbol.for("effect/annotation/Surrogate"),kN=Symbol.for("effect/annotation/StableFilter"),Ht=u(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?w(e.annotations[t]):_()),wN=Ht(SN);var ON=Ht(pw),TN=Ht(mg),Sw=Ht(hr),_w=Ht($i),xf=Ht(hg),Cw=Ht(rs);var vN=Ht(xw),RN=Ht(gw),AN=Ht(yw),IN=Ht(Ew),PN=Ht(bw),kw=Ht(hf),Aj=Ht(kN),ww=e=>hv(Aj(e),t=>t===!0),xg=Symbol.for("effect/annotation/JSONIdentifier"),Ij=Ht(xg),Pj=e=>Ur(Ij(e),()=>xf(e)),MN=Symbol.for("effect/schema/ParseJson"),Fi=class{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(t,r,n,o={}){this.typeParameters=t,this.decodeUnknown=r,this.encodeUnknown=n,this.annotations=o}toString(){return fe(co(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:Be(this.annotations)}}},ns=e=>t=>t._tag===e;var ta=class{literal;annotations;_tag="Literal";constructor(t,r={}){this.literal=t,this.annotations=r}toString(){return fe(co(this),()=>$t(this.literal))}toJSON(){return{_tag:this._tag,literal:ps(this.literal)?String(this.literal):this.literal,annotations:Be(this.annotations)}}},Hi=ns("Literal"),FN=new ta(null);var df=class{symbol;annotations;_tag="UniqueSymbol";constructor(t,r={}){this.symbol=t,this.annotations=r}toString(){return fe(co(this),()=>$t(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Be(this.annotations)}}};var Qk=class{annotations;_tag="UndefinedKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},gg=new Qk({[hr]:"undefined"});var Yk=class{annotations;_tag="VoidKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Mj=new Yk({[hr]:"void"});var Zk=class{annotations;_tag="NeverKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},yg=new Zk({[hr]:"never"});var Xk=class{annotations;_tag="UnknownKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Ow=new Xk({[hr]:"unknown"});var ew=class{annotations;_tag="AnyKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},NN=new ew({[hr]:"any"});var tw=class{annotations;_tag="StringKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Eg=new tw({[hr]:"string",[rs]:"a string"}),bg=ns("StringKeyword"),rw=class{annotations;_tag="NumberKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Sg=new rw({[hr]:"number",[rs]:"a number"}),Tw=ns("NumberKeyword"),nw=class{annotations;_tag="BooleanKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},_g=new nw({[hr]:"boolean",[rs]:"a boolean"}),vw=ns("BooleanKeyword"),ow=class{annotations;_tag="BigIntKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Fj=new ow({[hr]:"bigint",[rs]:"a bigint"});var sw=class{annotations;_tag="SymbolKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Nj=new sw({[hr]:"symbol",[rs]:"a symbol"}),DN=ns("SymbolKeyword"),aw=class{annotations;_tag="ObjectKeyword";constructor(t={}){this.annotations=t}toString(){return On(this)}toJSON(){return{_tag:this._tag,annotations:Be(this.annotations)}}},Dj=new aw({[hr]:"object",[rs]:"an object in the TypeScript meaning, i.e. the `object` type"});var Ni=class{type;annotations;constructor(t,r={}){this.type=t,this.annotations=r}toJSON(){return{type:this.type.toJSON(),annotations:Be(this.annotations)}}toString(){return String(this.type)}},wn=class extends Ni{isOptional;constructor(t,r,n={}){super(t,n),this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Be(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}},LN=e=>e.map(t=>t.type),Kp=class{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(t,r,n,o={}){this.elements=t,this.rest=r,this.isReadonly=n,this.annotations=o;let s=!1,a=!1;for(let i of t)if(i.isOptional)s=!0;else if(s){a=!0;break}if(a||s&&r.length>1)throw new Error(gN)}toString(){return fe(co(this),()=>Lj(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:Be(this.annotations)}}},Lj=e=>{let t=e.elements.map(String).join(", ");return yv(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(r,n)=>{let o=String(r),s=o.includes(" | ")?`(${o})`:o;if(n.length>0){let a=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${s}[], ${a}]`:`readonly [...${s}[], ${a}]`}else return e.elements.length>0?`readonly [${t}, ...${s}[]]`:`ReadonlyArray<${o}>`}})};var Ze=class extends wn{name;isReadonly;constructor(t,r,n,o,s){super(r,n,s),this.name=t,this.isReadonly=o}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Be(this.annotations)}}},UN=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return UN(e.from)}return!1},Di=class{type;isReadonly;parameter;constructor(t,r,n){if(this.type=r,this.isReadonly=n,UN(t))this.parameter=t;else throw new Error(xN)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}},rn=class{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(t,r,n={}){this.annotations=n;let o={};for(let a=0;a<t.length;a++){let i=t[a].name;if(Object.prototype.hasOwnProperty.call(o,i))throw new Error(fg(i));o[i]=null}let s={string:!1,symbol:!1};for(let a=0;a<r.length;a++){let i=Fw(r[a].parameter);if(bg(i)){if(s.string)throw new Error(Kk("string"));s.string=!0}else if(DN(i)){if(s.symbol)throw new Error(Kk("symbol"));s.symbol=!0}}this.propertySignatures=t,this.indexSignatures=r}toString(){return fe(co(this),()=>Uj(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:Be(this.annotations)}}},bN=e=>e.map(String).join("; "),Uj=e=>{if(e.propertySignatures.length>0){let t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${bN(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${bN(e.indexSignatures)} }`:"{}"},Rw=ns("TypeLiteral"),$j=_o(Cd(ro,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),Hj={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},$N=e=>ko(e,t=>kg(t)?$N(t.types):[t]),qj=e=>{let t=$j(e),r=[],n={},o=[];for(let s of t)switch(s._tag){case"NeverKeyword":break;case"AnyKeyword":return[NN];case"UnknownKeyword":return[Ow];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{n[s._tag]||(n[s._tag]=s,r.push(s));break}case"Literal":{let a=typeof s.literal;switch(a){case"string":case"number":case"bigint":case"boolean":{let i=Hj[a];!n[i]&&!o.includes(s.literal)&&(o.push(s.literal),r.push(s));break}case"object":{o.includes(s.literal)||(o.push(s.literal),r.push(s));break}}break}case"UniqueSymbol":{!n.SymbolKeyword&&!o.includes(s.symbol)&&(o.push(s.symbol),r.push(s));break}case"TupleType":{n.ObjectKeyword||r.push(s);break}case"TypeLiteral":{s.propertySignatures.length===0&&s.indexSignatures.length===0?n["{}"]||(n["{}"]=s,r.push(s)):n.ObjectKeyword||r.push(s);break}default:r.push(s)}return r},Yt=class e{types;annotations;static make=(t,r)=>Cg(t)?new e(t,r):t.length===1?t[0]:yg;static unify=(t,r)=>e.make(qj($N(t)),r);_tag="Union";constructor(t,r={}){this.types=t,this.annotations=r}toString(){return fe(co(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:Be(this.annotations)}}},HN=(e,t)=>e.map(t),Cg=e=>e.length>1,kg=ns("Union"),Jk=D(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap),Li=class{f;annotations;_tag="Suspend";constructor(t,r={}){this.f=t,this.annotations=r,this.f=lf(t)}toString(){return co(this).pipe(Ur(()=>zt(uv(this.f)(),t=>co(t))),fe(()=>"<suspended schema>"))}toJSON(){let t=this.f(),r=Jk.get(t);return r||(Jk.set(t,{_tag:this._tag}),r={_tag:this._tag,ast:t.toJSON(),annotations:Be(this.annotations)},Jk.set(t,r),r)}};var Ui=class{from;filter;annotations;_tag="Refinement";constructor(t,r,n={}){this.from=t,this.filter=r,this.annotations=n}toString(){return xf(this).pipe(fe(()=>ce(KN(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>na(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Be(this.annotations)}}},na=ns("Refinement"),wg={},io=class{from;to;transformation;annotations;_tag="Transformation";constructor(t,r,n,o={}){this.from=t,this.to=r,this.transformation=n,this.annotations=o}toString(){return fe(co(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Be(this.annotations)}}},qN=ns("Transformation"),mf=class{decode;encode;_tag="FinalTransformation";constructor(t,r){this.decode=t,this.encode=r}},Wj=e=>t=>t._tag===e;var iw=class{_tag="ComposeTransformation"},Aw=new iw;var dg=class{from;to;decode;encode;constructor(t,r,n,o){this.from=t,this.to=r,this.decode=n,this.encode=o}};var Gp=class{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(t){this.propertySignatureTransformations=t;let r={},n={};for(let o of t){let s=o.from;if(r[s])throw new Error(Gk(s));r[s]=!0;let a=o.to;if(n[a])throw new Error(Gk(a));n[a]=!0}}},Iw=Wj("TypeLiteralTransformation"),ra=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={...e.annotations,...t},o=kw(e);return ae(o)&&(n[hf]=ra(o.value,t)),r.annotations.value=n,Object.create(Object.getPrototypeOf(e),r)};var zj="[\\s\\S]*?",Bj="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",WN=(e,t)=>{switch(e._tag){case"Literal":return mp(String(e.literal));case"StringKeyword":return zj;case"NumberKeyword":return Bj;case"TemplateLiteral":return zN(e,t,!1);case"Union":return e.types.map(r=>WN(r,t)).join("|")}},jj=(e,t,r,n)=>{if(kg(e)){if(r&&!n)return`(?:${t})`}else if(!r||!n)return t;return`(${t})`},zN=(e,t,r)=>{let n="";if(e.head!==""){let o=mp(e.head);n+=t&&r?`(${o})`:o}for(let o of e.spans){let s=WN(o.type,t);if(n+=jj(o.type,s,t,r),o.literal!==""){let a=mp(o.literal);n+=t&&r?`(${a})`:a}}return n},BN=e=>new RegExp(`^${zN(e,!1,!0)}$`);var Pw=(e,t)=>{let r=[],n=[],o=s=>{switch(s._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new Di(s,t,!0));break;case"Literal":if(Ne(s.literal)||At(s.literal))r.push(new Ze(s.literal,t,!1,!0));else throw new Error(hN(s.literal));break;case"Enums":{for(let[a,i]of s.enums)r.push(new Ze(i,t,!1,!0));break}case"UniqueSymbol":r.push(new Ze(s.symbol,t,!1,!0));break;case"Union":s.types.forEach(o);break;default:throw new Error(mN(s))}};return o(e),{propertySignatures:r,indexSignatures:n}};var Mw=e=>t=>{let r;for(let n of e)Object.prototype.hasOwnProperty.call(t.annotations,n)&&(r===void 0&&(r={}),r[n]=t.annotations[n]);return r},jN=e=>t=>{let r={...t.annotations};for(let n of e)delete r[n];return r},Vj=Mw([uw,lw,fw,dw,mw,hw]),Qe=e=>{switch(e._tag){case"Declaration":{let t=tn(e.typeParameters,Qe);return t===e.typeParameters?e:new Fi(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=tn(e.elements,o=>{let s=Qe(o.type);return s===o.type?o:new wn(s,o.isOptional)}),r=LN(e.rest),n=tn(r,Qe);return t===e.elements&&n===r?e:new Kp(t,n.map(o=>new Ni(o)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=tn(e.propertySignatures,n=>{let o=Qe(n.type);return o===n.type?n:new Ze(n.name,o,n.isOptional,n.isReadonly)}),r=tn(e.indexSignatures,n=>{let o=Qe(n.type);return o===n.type?n:new Di(n.parameter,o,n.isReadonly)});return t===e.propertySignatures&&r===e.indexSignatures?e:new rn(t,r,e.annotations)}case"Union":{let t=tn(e.types,Qe);return t===e.types?e:Yt.make(t,e.annotations)}case"Suspend":return new Li(()=>Qe(e.f()),e.annotations);case"Refinement":{let t=Qe(e.from);return t===e.from?e:new Ui(t,e.filter,e.annotations)}case"Transformation":{let t=Vj(e);return Qe(t!==void 0?ra(e.to,t):e.to)}}return e},Vp=e=>ce(Pj(e),{onNone:()=>{},onSome:t=>({[xg]:t})});function tn(e,t){let r=!1,n=Oa(e.length);for(let o=0;o<e.length;o++){let s=e[o],a=t(s);a!==s&&(r=!0),n[o]=a}return r?n:e}var cw=e=>{switch(e._tag){case"Transformation":return e.from;case"Refinement":return cw(e.from);case"Suspend":return cw(e.f())}},ao=(e,t)=>{switch(e._tag){case"Declaration":{let r=tn(e.typeParameters,n=>ao(n,t));return r===e.typeParameters?e:new Fi(r,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let r=tn(e.elements,s=>{let a=ao(s.type,t);return a===s.type?s:new wn(a,s.isOptional)}),n=LN(e.rest),o=tn(n,s=>ao(s,t));return r===e.elements&&o===n?e:new Kp(r,o.map(s=>new Ni(s)),e.isReadonly,Vp(e))}case"TypeLiteral":{let r=tn(e.propertySignatures,o=>{let s=ao(o.type,t);return s===o.type?o:new Ze(o.name,s,o.isOptional,o.isReadonly)}),n=tn(e.indexSignatures,o=>{let s=ao(o.type,t);return s===o.type?o:new Di(o.parameter,s,o.isReadonly)});return r===e.propertySignatures&&n===e.indexSignatures?e:new rn(r,n,Vp(e))}case"Union":{let r=tn(e.types,n=>ao(n,t));return r===e.types?e:Yt.make(r,Vp(e))}case"Suspend":return new Li(()=>ao(e.f(),t),Vp(e));case"Refinement":{let r=ao(e.from,t);if(t){if(r===e.from)return e;if(cw(e.from)===void 0&&ww(e))return new Ui(r,e.filter,e.annotations)}let n=Vp(e);return n?ra(r,n):r}case"Transformation":{let r=Vp(e);return ao(r?ra(e.from,r):e.from,t)}}return e},gf=e=>ao(e,!1);var Be=e=>{let t={};for(let r of Object.getOwnPropertySymbols(e))t[String(r)]=e[r];return t},Fw=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return Fw(e.from)}};var VN=(e,t)=>new io(e,t,Aw);var On=e=>fe(co(e),()=>e._tag);function Kj(e){return ce(wN(e),{onNone:()=>"",onSome:t=>t.map(r=>` & Brand<${$t(r)}>`).join("")})}var KN=e=>Sw(e).pipe(Ur(()=>Cw(e)),Ur(()=>_w(e)),Pt(t=>t+Kj(e))),co=e=>Ur(xf(e),()=>KN(e));var it=class{path;actual;issue;_tag="Pointer";constructor(t,r,n){this.path=t,this.actual=r,this.issue=n}},Tg=class{actual;message;_tag="Unexpected";constructor(t,r){this.actual=t,this.message=r}},qi=class{ast;message;_tag="Missing";actual=void 0;constructor(t,r){this.ast=t,this.message=r}},Ue=class{ast;actual;issues;output;_tag="Composite";constructor(t,r,n,o){this.ast=t,this.actual=r,this.issues=n,this.output=o}},bf=class{ast;actual;kind;issue;_tag="Refinement";constructor(t,r,n,o){this.ast=t,this.actual=r,this.kind=n,this.issue=o}},Sf=class{ast;actual;kind;issue;_tag="Transformation";constructor(t,r,n,o){this.ast=t,this.actual=r,this.kind=n,this.issue=o}},ft=class{ast;actual;message;_tag="Type";constructor(t,r,n){this.ast=t,this.actual=r,this.message=n}},vg=class{ast;actual;message;_tag="Forbidden";constructor(t,r,n){this.ast=t,this.actual=r,this.message=n}},JN=Symbol.for("effect/Schema/ParseErrorTypeId");var Lw=class extends Ah("ParseError"){[JN]=JN;get message(){return this.toString()}toString(){return Qp.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[z](){return this.toJSON()}},$w=e=>new Lw({issue:e}),oa=$,kf=U,Hw=iE;var Xt=cE,os=u(2,(e,t)=>Xt(e)?dt(e,{onLeft:U,onRight:t}):j(e,t)),xr=u(2,(e,t)=>Xt(e)?nv(e,t):de(e,t)),_f=u(2,(e,t)=>Xt(e)?lc(e,t):Ys(e,t));var ZN=u(2,(e,t)=>Xt(e)?rv(e,{onLeft:t.onFailure,onRight:t.onSuccess}):$2(e,t)),XN=u(2,(e,t)=>Xt(e)?dt(e,{onLeft:t,onRight:$}):Yl(e,t)),Rg=(e,t)=>t===void 0||At(t)?e:e===void 0?t:{...e,...t},eD=(e,t,r)=>{let n=Ct(e,t);return(o,s)=>n(o,Rg(r,s))},Gj=(e,t,r)=>{let n=eD(e,t,r);return(o,s)=>pE(n(o,s),$w)};var tD=(e,t,r)=>{let n=Ct(e,t);return(o,s)=>n(o,{...Rg(r,s),isEffectAllowed:!0})};var rD=(e,t)=>eD(e.ast,!0,t);var Ag=(e,t)=>tD(e.ast,!0,t);var Ig=(e,t)=>tD(e.ast,!1,t);var Pg=(e,t)=>Gj(Qe(e.ast),!0,t);var nD=(e,t)=>{let r=Ct(Qe(e.ast),!0);return(n,o)=>It(r(n,{exact:!0,...Rg(t,o)}))};var Jj=D(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),Qj=D(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),Ct=(e,t)=>{let r=t?Jj:Qj,n=r.get(e);if(n)return n;let o=Yj(e,t),s=IN(e),a=ae(s)?(p,l)=>o(p,Rg(l,s.value)):o,i=PN(e),c=t&&ae(i)?(p,l)=>Ef(XN(a(p,l),i.value),e,p,l):a;return r.set(e,c),c},Nw=e=>ar(vN(e)),Dw=e=>ar(RN(e)),Yj=(e,t)=>{switch(e._tag){case"Refinement":if(t){let r=Ct(e.from,!0);return(n,o)=>{o=o??wg;let s=o?.errors==="all",a=os(XN(r(n,o),i=>{let c=new bf(e,n,"From",i);return s&&ww(e)&&cD(i)?ce(e.filter(n,o,e),{onNone:()=>U(c),onSome:p=>U(new Ue(e,n,[c,new bf(e,n,"Predicate",p)]))}):U(c)}),i=>ce(e.filter(i,o,e),{onNone:()=>$(i),onSome:c=>U(new bf(e,n,"Predicate",c))}));return Ef(a,e,n,o)}}else{let r=Ct(Qe(e),!0),n=Ct(sD(e.from),!1);return(o,s)=>Ef(os(r(o,s),a=>n(a,s)),e,o,s)}case"Transformation":{let r=Xj(e.transformation,t),n=t?Ct(e.from,!0):Ct(e.to,!1),o=t?Ct(e.to,!0):Ct(e.from,!1);return(s,a)=>Ef(os(_f(n(s,a),i=>new Sf(e,s,t?"Encoded":"Type",i)),i=>os(_f(r(i,a??wg,e,s),c=>new Sf(e,s,"Transformation",c)),c=>_f(o(c,a),p=>new Sf(e,s,t?"Type":"Encoded",p)))),e,s,a)}case"Declaration":{let r=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(n,o)=>Ef(r(n,o??wg,e),e,n,o)}case"Literal":return Pr(e,r=>r===e.literal);case"UniqueSymbol":return Pr(e,r=>r===e.symbol);case"UndefinedKeyword":return Pr(e,MT);case"NeverKeyword":return Pr(e,NT);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return $;case"StringKeyword":return Pr(e,Ne);case"NumberKeyword":return Pr(e,At);case"BooleanKeyword":return Pr(e,go);case"BigIntKeyword":return Pr(e,ps);case"SymbolKeyword":return Pr(e,ma);case"ObjectKeyword":return Pr(e,Wt);case"Enums":return Pr(e,r=>e.enums.some(([n,o])=>o===r));case"TemplateLiteral":{let r=BN(e);return Pr(e,n=>Ne(n)&&r.test(n))}case"TupleType":{let r=e.elements.map(p=>Ct(p.type,t)),n=e.rest.map(p=>Ct(p.type,t)),o=e.elements.filter(p=>!p.isOptional);e.rest.length>0&&(o=o.concat(e.rest.slice(1)));let s=o.length,a=e.elements.length>0?e.elements.map((p,l)=>l).join(" | "):"never",i=Nw(e),c=Dw(e);return(p,l)=>{if(!kd(p))return U(new ft(e,p));let d=l?.errors==="all",m=[],h=0,x=[],b=p.length;for(let g=b;g<=s-1;g++){let T=new it(g,p,new qi(o[g-b]));if(d){m.push([h++,T]);continue}else return U(new Ue(e,p,T,x))}if(e.rest.length===0)for(let g=e.elements.length;g<=b-1;g++){let T=new it(g,p,new Tg(p[g],`is unexpected, expected: ${a}`));if(d){m.push([h++,T]);continue}else return U(new Ue(e,p,T,x))}let S=0,y;for(;S<r.length;S++)if(b<S+1){if(e.elements[S].isOptional)continue}else{let g=r[S],T=g(p[S],l);if(Xt(T)){if(De(T)){let P=new it(S,p,T.left);if(d){m.push([h++,P]);continue}else return U(new Ue(e,p,P,Tn(x)))}x.push([h++,T.right])}else{let P=h++,M=S;y||(y=[]),y.push(({es:H,output:V})=>j(Ii(T),pe=>{if(De(pe)){let ue=new it(M,p,pe.left);return d?(H.push([P,ue]),te):U(new Ue(e,p,ue,Tn(V)))}return V.push([P,pe.right]),te}))}}if(Ce(n)){let[g,...T]=n;for(;S<b-T.length;S++){let P=g(p[S],l);if(Xt(P))if(De(P)){let M=new it(S,p,P.left);if(d){m.push([h++,M]);continue}else return U(new Ue(e,p,M,Tn(x)))}else x.push([h++,P.right]);else{let M=h++,H=S;y||(y=[]),y.push(({es:V,output:pe})=>j(Ii(P),ue=>{if(De(ue)){let K=new it(H,p,ue.left);return d?(V.push([M,K]),te):U(new Ue(e,p,K,Tn(pe)))}else return pe.push([M,ue.right]),te}))}}for(let P=0;P<T.length;P++)if(S+=P,!(b<S+1)){let M=T[P](p[S],l);if(Xt(M)){if(De(M)){let H=new it(S,p,M.left);if(d){m.push([h++,H]);continue}else return U(new Ue(e,p,H,Tn(x)))}x.push([h++,M.right])}else{let H=h++,V=S;y||(y=[]),y.push(({es:pe,output:ue})=>j(Ii(M),K=>{if(De(K)){let oe=new it(V,p,K.left);return d?(pe.push([H,oe]),te):U(new Ue(e,p,oe,Tn(ue)))}return ue.push([H,K.right]),te}))}}}let O=({es:g,output:T})=>fs(g)?U(new Ue(e,p,Tn(g),Tn(T))):$(Tn(T));if(y&&y.length>0){let g=y;return Fe(()=>{let T={es:hc(m),output:hc(x)};return j(vt(g,P=>P(T),{concurrency:i,batching:c,discard:!0}),()=>O(T))})}return O({output:x,es:m})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Pr(e,ud);let r=[],n={},o=[];for(let l of e.propertySignatures)r.push([Ct(l.type,t),l]),n[l.name]=null,o.push(l.name);let s=e.indexSignatures.map(l=>[Ct(l.parameter,t),Ct(l.type,t),l.parameter]),a=Yt.make(e.indexSignatures.map(l=>l.parameter).concat(o.map(l=>ma(l)?new df(l):new ta(l)))),i=Ct(a,t),c=Nw(e),p=Dw(e);return(l,d)=>{if(!yo(l))return U(new ft(e,l));let m=d?.errors==="all",h=[],x=0,b=d?.onExcessProperty==="error",S=d?.onExcessProperty==="preserve",y={},O;if(b||S){O=Ir(l);for(let M of O){let H=i(M,d);if(Xt(H)&&De(H))if(b){let V=new it(M,l,new Tg(l[M],`is unexpected, expected: ${String(a)}`));if(m){h.push([x++,V]);continue}else return U(new Ue(e,l,V,y))}else y[M]=l[M]}}let g,T=d?.exact===!0;for(let M=0;M<r.length;M++){let H=r[M][1],V=H.name,pe=Object.prototype.hasOwnProperty.call(l,V);if(!pe){if(H.isOptional)continue;if(T){let oe=new it(V,l,new qi(H));if(m){h.push([x++,oe]);continue}else return U(new Ue(e,l,oe,y))}}let ue=r[M][0],K=ue(l[V],d);if(Xt(K)){if(De(K)){let oe=new it(V,l,pe?K.left:new qi(H));if(m){h.push([x++,oe]);continue}else return U(new Ue(e,l,oe,y))}y[V]=K.right}else{let oe=x++,Ye=V;g||(g=[]),g.push(({es:$e,output:Z})=>j(Ii(K),Re=>{if(De(Re)){let ct=new it(Ye,l,pe?Re.left:new qi(H));return m?($e.push([oe,ct]),te):U(new Ue(e,l,ct,Z))}return Z[Ye]=Re.right,te}))}}for(let M=0;M<s.length;M++){let H=s[M],V=H[0],pe=H[1],ue=Bk(l,H[2]);for(let K of ue){let oe=V(K,d);if(Xt(oe)&&It(oe)){let Ye=pe(l[K],d);if(Xt(Ye))if(De(Ye)){let $e=new it(K,l,Ye.left);if(m){h.push([x++,$e]);continue}else return U(new Ue(e,l,$e,y))}else Object.prototype.hasOwnProperty.call(n,K)||(y[K]=Ye.right);else{let $e=x++,Z=K;g||(g=[]),g.push(({es:Re,output:ct})=>j(Ii(Ye),tr=>{if(De(tr)){let tc=new it(Z,l,tr.left);return m?(Re.push([$e,tc]),te):U(new Ue(e,l,tc,ct))}else return Object.prototype.hasOwnProperty.call(n,K)||(ct[K]=tr.right),te}))}}}}let P=({es:M,output:H})=>{if(fs(M))return U(new Ue(e,l,Tn(M),H));if(d?.propertyOrder==="original"){let V=O||Ir(l);for(let ue of o)V.indexOf(ue)===-1&&V.push(ue);let pe={};for(let ue of V)Object.prototype.hasOwnProperty.call(H,ue)&&(pe[ue]=H[ue]);return $(pe)}return $(H)};if(g&&g.length>0){let M=g;return Fe(()=>{let H={es:hc(h),output:Object.assign({},y)};return j(vt(M,V=>V(H),{concurrency:c,batching:p,discard:!0}),()=>P(H))})}return P({es:h,output:y})}}case"Union":{let r=oD(e.types,t),n=Ir(r.keys),o=n.length,s=e.types.length,a=new Map;for(let p=0;p<s;p++)a.set(e.types[p],Ct(e.types[p],t));let i=Nw(e)??1,c=Dw(e);return(p,l)=>{let d=[],m=0,h=[];if(o>0)if(mu(p))for(let S=0;S<o;S++){let y=n[S],O=r.keys[y].buckets;if(Object.prototype.hasOwnProperty.call(p,y)){let g=String(p[y]);if(Object.prototype.hasOwnProperty.call(O,g))h=h.concat(O[g]);else{let{candidates:T,literals:P}=r.keys[y],M=Yt.make(P),H=T.length===s?new rn([new Ze(y,M,!1,!0)],[]):Yt.make(T);d.push([m++,new Ue(H,p,new it(y,p,new ft(M,p[y])))])}}else{let{candidates:g,literals:T}=r.keys[y],P=new Ze(y,Yt.make(T),!1,!0),M=g.length===s?new rn([P],[]):Yt.make(g);d.push([m++,new Ue(M,p,new it(y,p,new qi(P)))])}}else{let S=r.candidates.length===s?e:Yt.make(r.candidates);d.push([m++,new ft(S,p)])}r.otherwise.length>0&&(h=h.concat(r.otherwise));let x;for(let S=0;S<h.length;S++){let y=h[S],O=a.get(y)(p,l);if(Xt(O)&&(!x||x.length===0)){if(It(O))return O;d.push([m++,O.left])}else{let g=m++;x||(x=[]),x.push(T=>Fe(()=>"finalResult"in T?te:j(Ii(O),P=>(It(P)?T.finalResult=P:T.es.push([g,P.left]),te))))}}let b=S=>fs(S)?S.length===1&&S[0][1]._tag==="Type"?U(S[0][1]):U(new Ue(e,p,Tn(S))):U(new ft(e,p));if(x&&x.length>0){let S=x;return Fe(()=>{let y={es:hc(d)};return j(vt(S,O=>O(y),{concurrency:i,batching:c,discard:!0}),()=>"finalResult"in y?y.finalResult:b(y.es))})}return b(d)}}case"Suspend":{let r=lf(()=>Ct(ra(e.f(),e.annotations),t));return(n,o)=>r()(n,o)}}},Pr=(e,t)=>r=>t(r)?$(r):U(new ft(e,r)),yf=(e,t)=>{switch(e._tag){case"Declaration":{let r=kw(e);if(ae(r))return yf(r.value,t);break}case"TypeLiteral":{let r=[];for(let n=0;n<e.propertySignatures.length;n++){let o=e.propertySignatures[n],s=t?gf(o.type):Qe(o.type);Hi(s)&&!o.isOptional&&r.push([o.name,s])}return r}case"TupleType":{let r=[];for(let n=0;n<e.elements.length;n++){let o=e.elements[n],s=t?gf(o.type):Qe(o.type);Hi(s)&&!o.isOptional&&r.push([n,s])}return r}case"Refinement":return yf(e.from,t);case"Suspend":return yf(e.f(),t);case"Transformation":return yf(t?e.from:e.to,t)}return[]},oD=(e,t)=>{let r={},n=[],o=[];for(let s=0;s<e.length;s++){let a=e[s],i=yf(a,t);if(i.length>0){o.push(a);for(let c=0;c<i.length;c++){let[p,l]=i[c],d=String(l.literal);r[p]=r[p]||{buckets:{},literals:[],candidates:[]};let m=r[p].buckets;if(Object.prototype.hasOwnProperty.call(m,d)){if(c<i.length-1)continue;m[d].push(a),r[p].literals.push(l),r[p].candidates.push(a)}else{m[d]=[a],r[p].literals.push(l),r[p].candidates.push(a);break}}}else n.push(a)}return{keys:r,otherwise:n,candidates:o}},sD=e=>na(e)?sD(e.from):e,Ef=(e,t,r,n)=>{if(n?.isEffectAllowed===!0||Xt(e))return e;let o=new wp,s=$k(e,{scheduler:o});o.flush();let a=s.unsafePoll();if(a){if(tM(a))return $(a.value);let i=a.cause;return $A(i)?U(i.error):U(new vg(t,r,qA(i)))}return U(new vg(t,r,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},Zj=([e],[t])=>e>t?1:e<t?-1:0;function Tn(e){return e.sort(Zj).map(t=>t[1])}var Xj=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return $;case"TypeLiteralTransformation":return r=>{let n=$(r);for(let o of e.propertySignatureTransformations){let[s,a]=t?[o.from,o.to]:[o.to,o.from],i=t?o.decode:o.encode;n=xr(n,p=>{let l=i(Object.prototype.hasOwnProperty.call(p,s)?w(p[s]):_());return delete p[s],ae(l)&&(p[a]=l.value),p})}return n}}},Zt=(e,t=[])=>({value:e,forest:t}),Qp={formatIssue:e=>xr(Jp(e),e6),formatIssueSync:e=>{let t=Qp.formatIssue(e);return Xt(t)?sv(t):en(t)},formatError:e=>Qp.formatIssue(e.issue),formatErrorSync:e=>Qp.formatIssueSync(e.issue)},e6=e=>e.value+aD(`
`,e.forest),aD=(e,t)=>{let r="",n=t.length,o;for(let s=0;s<n;s++){o=t[s];let a=s===n-1;r+=e+(a?"\u2514":"\u251C")+"\u2500 "+o.value,r+=aD(e+(n>1&&!a?"\u2502  ":"   "),o.forest)}return r},t6=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},r6=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},iD=e=>"ast"in e?w(e.ast):_(),Uw=$(void 0),n6=e=>iD(e).pipe(zt(ON),ce({onNone:()=>Uw,onSome:t=>{let r=t(e);return Ne(r)?$({message:r,override:!1}):Cn(r)?de(r,n=>({message:n,override:!1})):Ne(r.message)?$({message:r.message,override:r.override}):de(r.message,n=>({message:n,override:r.override}))}})),qw=e=>t=>t._tag===e,cD=qw("Composite"),QN=qw("Refinement"),YN=qw("Transformation"),Cf=e=>os(n6(e),t=>t!==void 0?!t.override&&(cD(e)||QN(e)&&e.kind==="From"||YN(e)&&e.kind!=="Transformation")?YN(e)||QN(e)?Cf(e.issue):Uw:$(t.message):Uw),pD=e=>iD(e).pipe(zt(AN),lv(t=>t(e)),ar);function o6(e){return Cw(e).pipe(Ur(()=>Sw(e)),Ur(()=>_w(e)),Ur(()=>xf(e)),fe(()=>`{ ${e.from} | filter }`))}function s6(e){return e.message!==void 0?e.message:`Expected ${na(e.ast)?o6(e.ast):String(e.ast)}, actual ${$t(e.actual)}`}var a6=e=>xr(Cf(e),t=>t??pD(e)??s6(e)),Og=e=>pD(e)??String(e.ast),i6=e=>e.message??"is forbidden",c6=e=>e.message??"is unexpected",p6=e=>{let t=TN(e.ast);if(ae(t)){let r=t.value();return Ne(r)?$(r):r}return $(e.message??"is missing")},Jp=e=>{switch(e._tag){case"Type":return xr(a6(e),Zt);case"Forbidden":return $(Zt(Og(e),[Zt(i6(e))]));case"Unexpected":return $(Zt(c6(e)));case"Missing":return xr(p6(e),Zt);case"Transformation":return os(Cf(e),t=>t!==void 0?$(Zt(t)):xr(Jp(e.issue),r=>Zt(Og(e),[Zt(t6(e.kind),[r])])));case"Refinement":return os(Cf(e),t=>t!==void 0?$(Zt(t)):xr(Jp(e.issue),r=>Zt(Og(e),[Zt(r6(e.kind),[r])])));case"Pointer":return xr(Jp(e.issue),t=>Zt(ug(e.path),[t]));case"Composite":return os(Cf(e),t=>{if(t!==void 0)return $(Zt(t));let r=Og(e);return jk(e.issues)?xr(vt(e.issues,Jp),n=>Zt(r,n)):xr(Jp(e.issues),n=>Zt(r,[n]))})}};var uD=u(e=>Wt(e[0]),(e,...t)=>{let r={};for(let n of t)n in e&&(r[n]=e[n]);return r}),lD=u(e=>Wt(e[0]),(e,...t)=>{let r={...e};for(let n of t)delete r[n];return r});var Bi=Symbol.for("effect/Schema");function Xe(e){return class{[Bi]=zw;static ast=e;static annotations(r){return Xe(uo(this.ast,r))}static pipe(){return C(this,arguments)}static toString(){return String(e)}static Type;static Encoded;static Context;static[Bi]=zw}}var zw={_A:e=>e,_I:e=>e,_R:e=>e};var fD={schemaId:_N,message:pw,missingMessage:mg,identifier:hg,title:hr,description:rs,examples:uw,default:lw,documentation:CN,jsonSchema:fw,arbitrary:dw,pretty:mw,equivalence:hw,concurrency:xw,batching:gw,parseIssueTitle:yw,parseOptions:Ew,decodingFallback:bw},ji=e=>{if(!e)return{};let t={...e};for(let r in fD)if(r in e){let n=fD[r];t[n]=e[r],delete t[r]}return t},uo=(e,t)=>ra(e,ji(t));var f6=e=>String(e.ast),d6=e=>Xe(gf(e.ast));var Mr=e=>Xe(Qe(e.ast));var jw=(e,t)=>{let r=Ag(e,t);return(n,o)=>_f(r(n,o),$w)};var nn=e=>v(e,Bi)&&Wt(e[Bi]);function m6(e){return Cg(e)?Yt.make(HN(e,t=>new ta(t))):new ta(e[0])}function OD(e,t=m6(e)){return class extends Xe(t){static annotations(n){return OD(this.literals,uo(this.ast,n))}static literals=[...e]}}function vn(...e){return Ce(e)?OD(e):Lg}var h6=(e,t,r)=>Vw(e,new Fi(e.map(n=>n.ast),(...n)=>t.decode(...n.map(Xe)),(...n)=>t.encode(...n.map(Xe)),ji(r))),x6=(e,t)=>{let r=()=>(o,s,a)=>e(o)?oa(o):kf(new ft(a,o)),n=r;return Vw([],new Fi([],r,n,ji(t)))};function Vw(e,t){return class extends Xe(t){static annotations(n){return Vw(this.typeParameters,uo(this.ast,n))}static typeParameters=[...e]}}var Ff=function(){if(Array.isArray(arguments[0])){let r=arguments[0],n=arguments[1],o=arguments[2];return h6(r,n,o)}let e=arguments[0],t=arguments[1];return x6(e,t)};var Ng=class extends Xe(gg){};var Dg=class extends Xe(FN){},Lg=class extends Xe(yg){},aa=class extends Xe(Ow){};var ie=class extends Xe(Eg){},er=class extends Xe(Sg){},po=class extends Xe(_g){};var g6=e=>Yt.make(e.map(t=>t.ast));function TD(e,t=g6(e)){return class extends Xe(t){static annotations(n){return TD(this.members,uo(this.ast,n))}static members=[...e]}}function Nf(...e){return Cg(e)?TD(e):Ce(e)?e[0]:Lg}var zi=e=>Nf(e,Dg),Tf=e=>Nf(e,Ng),Ww=e=>Nf(e,Dg,Ng);var dD=class e{ast;from;[Bi];_Token;constructor(t,r){this.ast=t,this.from=r}annotations(t){return new e(new wn(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...ji(t)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}},y6=(e,t)=>new Kp(e.map(r=>nn(r)?new wn(r.ast,!1):r.ast),t.map(r=>nn(r)?new Ni(r.ast):r.ast),!0);function Kw(e,t,r=y6(e,t)){return class extends Xe(r){static annotations(o){return Kw(this.elements,this.rest,uo(this.ast,o))}static elements=[...e];static rest=[...t]}}function vD(e,t){return class extends Kw([],[e],t){static annotations(n){return vD(this.value,uo(this.ast,n))}static value=e}}var Xp=e=>vD(e);function RD(e,t){return class extends Kw([e],[e],t){static annotations(n){return RD(this.value,uo(this.ast,n))}static value=e}}var AD=e=>RD(e);var Bw=e=>e?'"?:"':'":"',ia=class extends wn{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(t,r,n,o,s){super(t,r,o),this.isReadonly=n,this.defaultValue=s}toString(){let t=Bw(this.isOptional),r=String(this.type);return`PropertySignature<${t}, ${r}, never, ${t}, ${r}>`}},Ug=class extends wn{isReadonly;fromKey;constructor(t,r,n,o,s){super(t,r,o),this.isReadonly=n,this.fromKey=s}},Yp=class extends wn{isReadonly;defaultValue;constructor(t,r,n,o,s){super(t,r,o),this.isReadonly=n,this.defaultValue=s}},E6=e=>e===void 0?"never":Ne(e)?JSON.stringify(e):String(e),Zp=class{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(t,r,n,o){this.from=t,this.to=r,this.decode=n,this.encode=o}toString(){return`PropertySignature<${Bw(this.to.isOptional)}, ${this.to.type}, ${E6(this.from.fromKey)}, ${Bw(this.from.isOptional)}, ${this.from.type}>`}},ID=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new ia(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Zp(e.from,new Yp(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},PD=Symbol.for("effect/PropertySignature"),Gw=e=>v(e,PD),$g=class e{ast;[Bi];[PD]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(t){this.ast=t}pipe(){return C(this,arguments)}annotations(t){return new e(ID(this.ast,ji(t)))}toString(){return String(this.ast)}},Hg=e=>new $g(e),Af=class e extends $g{from;constructor(t,r){super(t),this.from=r}annotations(t){return new e(ID(this.ast,ji(t)),this.from)}},b6=e=>new Af(new ia(e.ast,!1,!0,{},void 0),e),vf=u(2,(e,t)=>{let r=e.ast;switch(r._tag){case"PropertySignatureDeclaration":return Hg(new ia(r.type,r.isOptional,r.isReadonly,r.annotations,t));case"PropertySignatureTransformation":return Hg(new Zp(r.from,new Yp(r.to.type,r.to.isOptional,r.to.isReadonly,r.to.annotations,t),r.decode,r.encode))}});var sa=(e,t,r)=>Hg(new Zp(new Ug(e.ast,!0,!0,{},void 0),new Yp(t.ast,!1,!0,{},void 0),n=>w(r.decode(n)),zt(r.encode)));var mD=(e,t,r)=>Hg(new Zp(new Ug(e.ast,!0,!0,{},void 0),new Yp(t.ast,!0,!0,{},void 0),r.decode,r.encode)),S6=(e,t)=>{let r=t?.exact,n=t?.default,o=t?.nullable,s=t?.as=="Option",a=t?.onNoneEncoding?Ur(t.onNoneEncoding):L;return r?n?o?vf(sa(zi(e),Mr(e),{decode:ce({onNone:n,onSome:i=>i===null?n():i}),encode:w}),n).ast:vf(sa(e,Mr(e),{decode:ce({onNone:n,onSome:L}),encode:w}),n).ast:s?o?sa(zi(e),Mg(Mr(e)),{decode:fc(pd),encode:a}).ast:sa(e,Mg(Mr(e)),{decode:L,encode:L}).ast:o?mD(zi(e),Mr(e),{decode:fc(pd),encode:L}).ast:new ia(e.ast,!0,!0,{},void 0):n?o?vf(sa(Ww(e),Mr(e),{decode:ce({onNone:n,onSome:i=>i??n()}),encode:w}),n).ast:vf(sa(Tf(e),Mr(e),{decode:ce({onNone:n,onSome:i=>i===void 0?n():i}),encode:w}),n).ast:s?o?sa(Ww(e),Mg(Mr(e)),{decode:fc(i=>i!=null),encode:a}).ast:sa(Tf(e),Mg(Mr(e)),{decode:fc(FT),encode:a}).ast:o?mD(Ww(e),Tf(Mr(e)),{decode:fc(pd),encode:L}).ast:new ia(Tf(e).ast,!0,!0,{},void 0)},lo=e=>{let t=e.ast===gg||e.ast===yg?gg:Tf(e).ast;return new Af(new ia(t,!0,!0,{},void 0),e)},Jw=u(e=>nn(e[0]),(e,t)=>new Af(S6(e,t),e)),_6=Mw([mg]),C6=(e,t)=>{let r=Ir(e),n=[];if(r.length>0){let s=[],a=[],i=[];for(let c=0;c<r.length;c++){let p=r[c],l=e[p];if(Gw(l)){let d=l.ast;switch(d._tag){case"PropertySignatureDeclaration":{let m=d.type,h=d.isOptional,x=d.annotations;s.push(new Ze(p,m,h,!0,_6(d))),a.push(new Ze(p,Qe(m),h,!0,x)),n.push(new Ze(p,m,h,!0,x));break}case"PropertySignatureTransformation":{let m=d.from.fromKey??p;s.push(new Ze(m,d.from.type,d.from.isOptional,!0,d.from.annotations)),a.push(new Ze(p,d.to.type,d.to.isOptional,!0,d.to.annotations)),i.push(new dg(m,p,d.decode,d.encode));break}}}else s.push(new Ze(p,l.ast,!1,!0)),a.push(new Ze(p,Qe(l.ast),!1,!0)),n.push(new Ze(p,l.ast,!1,!0))}if(Ce(i)){let c=[],p=[];for(let l of t){let{indexSignatures:d,propertySignatures:m}=Pw(l.key.ast,l.value.ast);m.forEach(h=>{s.push(h),a.push(new Ze(h.name,Qe(h.type),h.isOptional,h.isReadonly,h.annotations))}),d.forEach(h=>{c.push(h),p.push(new Di(h.parameter,Qe(h.type),h.isReadonly))})}return new io(new rn(s,c,{[$i]:"Struct (Encoded side)"}),new rn(a,p,{[$i]:"Struct (Type side)"}),new Gp(i))}}let o=[];for(let s of t){let{indexSignatures:a,propertySignatures:i}=Pw(s.key.ast,s.value.ast);i.forEach(c=>n.push(c)),a.forEach(c=>o.push(c))}return new rn(n,o)},MD=(e,t)=>{let r=Ir(e);for(let n of r){let o=e[n];if(t[n]===void 0&&Gw(o)){let s=o.ast,a=s._tag==="PropertySignatureDeclaration"?s.defaultValue:s.to.defaultValue;a!==void 0&&(t[n]=a())}}return t};function FD(e,t,r=C6(e,t)){return class extends Xe(r){static annotations(o){return FD(this.fields,this.records,uo(this.ast,o))}static fields={...e};static records=[...t];static make=(o,s)=>{let a=MD(e,{...o});return tO(s)?a:Pg(this)(a)};static pick(...o){return gr(uD(e,...o))}static omit(...o){return gr(lD(e,...o))}}}function gr(e,...t){return FD(e,t)}var wf=(e,t,r)=>{if(Rw(e)&&Rw(t)){let n=[...e.propertySignatures];for(let o of t.propertySignatures){let s=o.name,a=n.findIndex(i=>i.name===s);if(a===-1)n.push(o);else{let{isOptional:i,type:c}=n[a];n[a]=new Ze(s,qg(c,o.type,r.concat(s)),i,!0)}}return new rn(n,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Vk(e,t,r))},k6=jN([hg]),Of=(e,t)=>t.map(r=>new Ui(r,e.filter,k6(e))),qg=(e,t,r)=>Yt.make(ss([e],[t],r)),Wi=e=>kg(e)?e.types:[e],ss=(e,t,r)=>ko(e,n=>ko(t,o=>{switch(o._tag){case"Literal":{if(Ne(o.literal)&&bg(n)||At(o.literal)&&Tw(n)||go(o.literal)&&vw(n))return[o];break}case"StringKeyword":{if(o===Eg){if(bg(n)||Hi(n)&&Ne(n.literal))return[n];if(na(n))return Of(n,ss(Wi(n.from),[o],r))}else if(n===Eg)return[o];break}case"NumberKeyword":{if(o===Sg){if(Tw(n)||Hi(n)&&At(n.literal))return[n];if(na(n))return Of(n,ss(Wi(n.from),[o],r))}else if(n===Sg)return[o];break}case"BooleanKeyword":{if(o===_g){if(vw(n)||Hi(n)&&go(n.literal))return[n];if(na(n))return Of(n,ss(Wi(n.from),[o],r))}else if(n===_g)return[o];break}case"Union":return ss(Wi(n),o.types,r);case"Suspend":return[new Li(()=>qg(n,o.f(),r))];case"Refinement":return Of(o,ss(Wi(n),Wi(o.from),r));case"TypeLiteral":{switch(n._tag){case"Union":return ss(n.types,[o],r);case"Suspend":return[new Li(()=>qg(n.f(),o,r))];case"Refinement":return Of(n,ss(Wi(n.from),[o],r));case"TypeLiteral":return[wf(n,o,r)];case"Transformation":{let s=n.transformation,a=wf(n.from,o,r),i=wf(n.to,Qe(o),r);switch(s._tag){case"TypeLiteralTransformation":return[new io(a,i,new Gp(s.propertySignatureTransformations))];case"ComposeTransformation":return[new io(a,i,Aw)];case"FinalTransformation":return[new io(a,i,new mf((c,p,l,d)=>xr(s.decode(c,p,l,d),m=>({...c,...m})),(c,p,l,d)=>xr(s.encode(c,p,l,d),m=>({...c,...m}))))]}}}break}case"Transformation":{if(qN(n)){if(Iw(o.transformation)&&Iw(n.transformation))return[new io(wf(n.from,o.from,r),wf(n.to,o.to,r),new Gp(o.transformation.propertySignatureTransformations.concat(n.transformation.propertySignatureTransformations)))]}else return ss([o],[n],r);break}}throw new Error(Vk(n,o,r))})),ND=u(2,(e,t)=>Xe(qg(e.ast,t.ast,[]))),Wg=u(e=>nn(e[1]),(e,t)=>Qw(e,t,VN(e.ast,t.ast)));var DD=Symbol.for("effect/SchemaId/Refine");function LD(e,t,r){return class extends Xe(r){static annotations(o){return LD(this.from,this.filter,uo(this.ast,o))}static[DD]=e;static from=e;static filter=t;static make=(o,s)=>tO(s)?o:Pg(this)(o)}}var hD=(e,t,r)=>{if(go(e))return e?_():w(new ft(t,r));if(Ne(e))return w(new ft(t,r,e));if(e!==void 0){if("_tag"in e)return w(e);let n=new ft(t,r,e.message);return w(Ce(e.path)?new it(e.path,r,n):n)}return _()},w6=(e,t,r)=>{if(dN(e))return hD(e,t,r);if(Ce(e)){let n=ku(e,o=>hD(o,t,r));if(Ce(n))return w(n.length===1?n[0]:new Ue(t,r,n))}return _()};function UD(e,t){return r=>{function n(s,a,i){return w6(e(s,a,i),i,s)}let o=new Ui(r.ast,n,ji(t));return LD(r,n,o)}}function Qw(e,t,r){return class extends Xe(r){static annotations(o){return Qw(this.from,this.to,uo(this.ast,o))}static from=e;static to=t}}var If=u(e=>nn(e[0])&&nn(e[1]),(e,t,r)=>Qw(e,t,new io(e.ast,t.ast,new mf(r.decode,r.encode)))),Df=u(e=>nn(e[0])&&nn(e[1]),(e,t,r)=>If(e,t,{strict:!0,decode:(n,o,s,a)=>oa(r.decode(n,a)),encode:(n,o,s,a)=>oa(r.encode(n,a))}));var xD=Symbol.for("effect/SchemaId/Pattern"),O6=(e,t)=>r=>{let n=e.source;return r.pipe(UD(o=>(e.lastIndex=0,e.test(o)),{schemaId:xD,[xD]:{regex:e},description:`a string matching the pattern ${n}`,jsonSchema:{pattern:n},...t}))},gD=Symbol.for("effect/SchemaId/StartsWith"),$D=(e,t)=>r=>{let n=JSON.stringify(e);return r.pipe(UD(o=>o.startsWith(e),{schemaId:gD,[gD]:{startsWith:e},title:`startsWith(${n})`,description:`a string starting with ${n}`,jsonSchema:{pattern:`^${e}`},...t}))};var yD=e=>e instanceof Error?e.message:String(e),T6=e=>If(ie.annotations({description:"a string to be decoded into JSON"}),aa,{strict:!0,decode:(t,r,n)=>Hw({try:()=>JSON.parse(t,e?.reviver),catch:o=>new ft(n,t,yD(o))}),encode:(t,r,n)=>Hw({try:()=>JSON.stringify(t,e?.replacer,e?.space),catch:o=>new ft(n,t,yD(o))})}).annotations({title:"parseJson",schemaId:MN}),zg=(e,t)=>nn(e)?Wg(zg(t),e):T6(e);var v6=Symbol.for("effect/SchemaId/UUID"),ED=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,bD=class extends ie.pipe(O6(ED,{schemaId:v6,identifier:"UUID",jsonSchema:{format:"uuid",pattern:ED.source},description:"a Universally Unique Identifier",arbitrary:()=>t=>t.uuid()})){};var R6=e=>t=>e(t).map(va),HD=(e,t,r,n)=>ZN(e,{onFailure:o=>new Ue(r,n,o),onSuccess:t}),SD=e=>(t,r,n)=>gR(t)?HD(e(Ao(t),r),va,n,t):kf(new ft(n,t)),A6=e=>Ff([e],{decode:t=>SD(Ag(t)),encode:t=>SD(Ig(t))},{description:"Redacted(<redacted>)",pretty:()=>()=>"Redacted(<redacted>)",arbitrary:R6,equivalence:yR});function qD(e){return Df(e,A6(Mr(e)),{strict:!0,decode:t=>va(t),encode:t=>Ao(t)})}var Pf=class extends Ff(DT,{identifier:"Uint8ArrayFromSelf",pretty:()=>t=>`new Uint8Array(${JSON.stringify(Array.from(t))})`,arbitrary:()=>t=>t.uint8Array(),equivalence:()=>wo(R)}){};var I6=(e,t,r)=>If(ie.annotations({description:"a string to be decoded into a Uint8Array"}),Pf,{strict:!0,decode:(n,o,s)=>lc(t(n),a=>new ft(s,n,a.message)),encode:n=>oa(r(n))}).annotations({identifier:e}),WD=I6("Uint8ArrayFromBase64",fR,lR);var _D=EN,CD=class extends Ff(ld,{identifier:"DateFromSelf",schemaId:_D,[_D]:{noInvalidDate:!1},description:"a potentially invalid Date instance",pretty:()=>t=>`new Date(${JSON.stringify(t)})`,arbitrary:()=>t=>t.date({noInvalidDate:!1}),equivalence:()=>AT}){};var P6=e=>e._tag==="None"?_():w(e.value),M6=(e,t)=>r=>r.oneof(t,r.record({_tag:r.constant("None")}),r.record({_tag:r.constant("Some"),value:e(r)})).map(P6),F6=e=>ce({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),kD=e=>(t,r,n)=>cv(t)?Ee(t)?oa(_()):HD(e(t.value,r),w,n,t):kf(new ft(n,t)),Mg=e=>Ff([e],{decode:t=>kD(Ag(t)),encode:t=>kD(Ig(t))},{description:`Option<${f6(e)}>`,pretty:F6,arbitrary:M6,equivalence:dv});var N6=e=>nn(e)||Gw(e),zD=e=>Ir(e).every(t=>N6(e[t])),Yw=e=>"fields"in e?e.fields:Yw(e[DD]),Zw=e=>zD(e)?gr(e):nn(e)?e:gr(Yw(e)),Xw=e=>zD(e)?e:Yw(e),Fr=e=>(t,r)=>Rf({kind:"Class",identifier:e,schema:Zw(t),fields:Xw(t),Base:$I,annotations:r}),D6=e=>vf(b6(vn(e)),()=>e);var eO=e=>(t,r,n)=>{class o extends bp{}o.prototype.name=t;let s=Xw(r),a=Zw(r),i={_tag:D6(t)},c=Fg(i,s),p="message"in c;class l extends Rf({kind:"TaggedError",identifier:e??t,schema:ND(a,gr(i)),fields:c,Base:o,annotations:n,disableToString:!0}){static _tag=t}return p||Object.defineProperty(l.prototype,"message",{get(){return`{ ${Ir(s).map(d=>`${ff(d)}: ${$t(this[d])}`).join(", ")} }`},enumerable:!1,configurable:!0}),l},Fg=(e,t)=>{let r={...e};for(let n of Ir(t)){if(n in e)throw new Error(fg(n));r[n]=t[n]}return r};function tO(e){return go(e)?e:e?.disableValidation??!1}var wD=D("effect/Schema/astCache",()=>new WeakMap),L6=e=>e===void 0?[]:Array.isArray(e)?e:[e],Rf=({Base:e,annotations:t,disableToString:r,fields:n,identifier:o,kind:s,schema:a})=>{let i=Symbol.for(`effect/Schema/${s}/${o}`),[c,p,l]=L6(t),d=Mr(a),m=d.annotations({identifier:o,...c}),h=d.annotations({[$i]:`${o} (Type side)`,...c}),x=a.annotations({[$i]:`${o} (Constructor)`,...c}),b=a.annotations({[$i]:`${o} (Encoded side)`,...l}),S=a.annotations({[xg]:o,...l,...c,...p}),y=g=>v(g,i)&&nD(h)(g),O=class extends e{constructor(g={},T=!1){g={...g},s!=="Class"&&delete g._tag,g=MD(n,g),tO(T)||(g=Pg(x)(g)),super(g,!0)}static[Bi]=zw;static get ast(){let g=wD.get(this);if(g)return g;let T=Ff([a],{decode:()=>(P,M,H)=>P instanceof this||y(P)?oa(P):kf(new ft(H,P)),encode:()=>(P,M)=>P instanceof this?oa(P):xr(Ig(h)(P,M),H=>new this(H,!0))},{identifier:o,pretty:P=>M=>`${o}(${P(M)})`,arbitrary:P=>M=>P(M).map(H=>new this(H)),equivalence:L,[hf]:m.ast,...c});return g=Df(b,T,{strict:!0,decode:P=>new this(P,!0),encode:L}).annotations({[hf]:S.ast,...p}).ast,wD.set(this,g),g}static pipe(){return C(this,arguments)}static annotations(g){return Xe(this.ast).annotations(g)}static toString(){return`(${String(b)} <-> ${o})`}static make(...g){return new this(...g)}static fields={...n};static identifier=o;static extend(g){return(T,P)=>{let M=Xw(T),H=Zw(T),V=Fg(n,M);return Rf({kind:s,identifier:g,schema:ND(a,H),fields:V,Base:this,annotations:P})}}static transformOrFail(g){return(T,P,M)=>{let H=Fg(n,T);return Rf({kind:s,identifier:g,schema:If(a,Mr(gr(H)),P),fields:H,Base:this,annotations:M})}}static transformOrFailFrom(g){return(T,P,M)=>{let H=Fg(n,T);return Rf({kind:s,identifier:g,schema:If(d6(a),gr(H),P),fields:H,Base:this,annotations:M})}}get[i](){return i}};return r!==!0&&Object.defineProperty(O.prototype,"toString",{value(){return`${o}({ ${Ir(n).map(g=>`${ff(g)}: ${$t(this[g])}`).join(", ")} })`},configurable:!0,writable:!0}),O};var Mf=class extends Df(aa,aa,{strict:!0,decode:t=>{if(Wt(t)&&"message"in t&&typeof t.message=="string"){let r=new Error(t.message,{cause:t});return"name"in t&&typeof t.name=="string"&&(r.name=t.name),r.stack="stack"in t&&typeof t.stack=="string"?t.stack:"",r}return String(t)},encode:t=>t instanceof Error?{name:t.name,message:t.message}:xb(t)}).annotations({identifier:"Defect"}){};var BD=(e,t)=>{let r=rD(t);return Ns(e).pipe(Rh(n=>r(n).pipe(lc(o=>dh([],Qp.formatIssueSync(o))))))};var zie=vn(...SR),Bie=vn(..._R),U6=vn("upload"),jD=vn("callback","error"),$6=Df(Pf,ie,{decode:e=>new TextDecoder().decode(e),encode:e=>new TextEncoder().encode(e)}),H6=gr({apiKey:qD(ie.pipe($D("sk_"))),appId:ie,regions:AD(ie),ingestHost:ie.pipe(Jw({default:()=>"ingest.uploadthing.com"}))}),VD=WD.pipe(Wg($6),Wg(zg(H6))),KD=class extends Fr("FileUploadData")({name:ie,size:er,type:ie,lastModified:er.pipe(lo)}){},q6=class extends KD.extend("FileUploadDataWithCustomId")({customId:zi(ie)}){},W6=class extends q6.extend("UploadedFileData")({key:ie,url:ie,appUrl:ie,ufsUrl:ie,fileHash:ie}){},z6=class extends Fr("MetadataFetchStreamPart")({payload:ie,signature:ie,hook:jD}){},B6=class extends Fr("MetadataFetchResponse")({ok:po}){},j6=class extends Fr("CallbackResultResponse")({ok:po}){},V6=class extends Fr("UploadActionPayload")({files:Xp(KD),input:aa}){};var GD=Js;var G6="effect/QueueEnqueue",QD=Symbol.for(G6),J6="effect/QueueDequeue",YD=Symbol.for(J6),Q6="effect/QueueStrategy",Vg=Symbol.for(Q6),Y6="effect/BackingQueue",ZD=Symbol.for(Y6),aO={_A:e=>e},Z6={_A:e=>e},X6={_In:e=>e},e8={_Out:e=>e},rO=class extends un{queue;takers;shutdownHook;shutdownFlag;strategy;[QD]=X6;[YD]=e8;constructor(t,r,n,o,s){super(),this.queue=t,this.takers=r,this.shutdownHook=n,this.shutdownFlag=o,this.strategy=s}pipe(){return C(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return J(()=>jr(this.unsafeSize(),()=>Vr))}unsafeSize(){return Ie(this.shutdownFlag)?_():w(this.queue.length()-Qx(this.takers)+this.strategy.surplusSize())}get isEmpty(){return B(this.size,t=>t<=0)}get isFull(){return B(this.size,t=>t>=this.capacity())}get shutdown(){return As(Y(t=>(f(this.shutdownFlag,Br(!0)),f(oo(eu(this.takers),r=>rh(r,t.id()),!1,!1),ye(this.strategy.shutdown),Ga(ii(this.shutdownHook,void 0)),st))))}get isShutdown(){return k(()=>Ie(this.shutdownFlag))}get awaitShutdown(){return Kt(this.shutdownHook)}isActive(){return!Ie(this.shutdownFlag)}unsafeOffer(t){if(Ie(this.shutdownFlag))return!1;let r;if(this.queue.length()===0){let o=f(this.takers,Zo(Lt));o!==Lt?(Ki(o,t),r=!0):r=!1}else r=!1;if(r)return!0;let n=this.queue.offer(t);return Vi(this.strategy,this.queue,this.takers),n}offer(t){return J(()=>{if(Ie(this.shutdownFlag))return Vr;let r;if(this.queue.length()===0){let o=f(this.takers,Zo(Lt));o!==Lt?(Ki(o,t),r=!0):r=!1}else r=!1;if(r)return I(!0);let n=this.queue.offer(t);return Vi(this.strategy,this.queue,this.takers),n?I(!0):this.strategy.handleSurplus([t],this.queue,this.takers,this.shutdownFlag)})}offerAll(t){return J(()=>{if(Ie(this.shutdownFlag))return Vr;let r=ne(t),n=this.queue.length()===0?ne(r8(this.takers,r.length)):jt,[o,s]=f(r,EE(n.length));for(let i=0;i<n.length;i++){let c=n[i],p=o[i];Ki(c,p)}if(s.length===0)return I(!0);let a=this.queue.offerAll(s);return Vi(this.strategy,this.queue,this.takers),Aa(a)?I(!0):this.strategy.handleSurplus(a,this.queue,this.takers,this.shutdownFlag)})}get take(){return Y(t=>{if(Ie(this.shutdownFlag))return Vr;let r=this.queue.poll(Lt);if(r!==Lt)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),I(r);{let n=ai(t.id());return f(J(()=>(f(this.takers,Bp(n)),Vi(this.strategy,this.queue,this.takers),Ie(this.shutdownFlag)?Vr:Kt(n))),Ho(()=>k(()=>n8(this.takers,n))))}})}get takeAll(){return J(()=>Ie(this.shutdownFlag)?Vr:k(()=>{let t=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),Wr(t)}))}takeUpTo(t){return J(()=>Ie(this.shutdownFlag)?Vr:k(()=>{let r=this.queue.pollUpTo(t);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),Wr(r)}))}takeBetween(t,r){return J(()=>XD(this,t,r,Ve()))}},XD=(e,t,r,n)=>r<t?I(n):f(aL(e,r),E(o=>{let s=t-o.length;return s===1?f(Bg(e),B(a=>f(n,ht(o),Ra(a)))):s>1?f(Bg(e),E(a=>XD(e,s-1,r-o.length-1,f(n,ht(o),Ra(a))))):I(f(n,ht(o)))}));var eL=e=>f(k(()=>I2(e)),E(t=>iO(rL(t),iL())));var tL=()=>f(k(()=>Jx()),E(e=>iO(rL(e),cL()))),t8=(e,t,r,n,o)=>new rO(e,t,r,n,o),iO=(e,t)=>f(xn(),B(r=>t8(e,Jx(),r,Kn(!1),t))),nO=class{mutable;[ZD]=Z6;constructor(t){this.mutable=t}poll(t){return Zo(this.mutable,t)}pollUpTo(t){return Zx(this.mutable,t)}offerAll(t){return Rk(this.mutable,t)}offer(t){return Bp(this.mutable,t)}capacity(){return P2(this.mutable)}length(){return Qx(this.mutable)}},rL=e=>new nO(e);var nL=e=>e.size;var oL=e=>e.shutdown,sL=u(2,(e,t)=>e.offer(t));var Bg=e=>e.take;var aL=u(2,(e,t)=>e.takeUpTo(t));var iL=()=>new oO,cL=()=>new sO;var oO=class{[Vg]=aO;putters=Jx();surplusSize(){return Qx(this.putters)}onCompleteTakersWithEmptyQueue(t){for(;!Yx(this.putters)&&!Yx(t);){let r=Zo(t,void 0),n=Zo(this.putters,void 0);n[2]&&Ki(n[1],!0),Ki(r,n[0])}}get shutdown(){return f(Ka,E(t=>f(k(()=>eu(this.putters)),E(r=>oo(r,([n,o,s])=>s?f(rh(o,t),st):re,!1,!1)))))}handleSurplus(t,r,n,o){return Y(s=>{let a=ai(s.id());return f(J(()=>(this.unsafeOffer(t,a),this.unsafeOnQueueEmptySpace(r,n),Vi(this,r,n),Ie(o)?Vr:Kt(a))),Ho(()=>k(()=>this.unsafeRemove(a))))})}unsafeOnQueueEmptySpace(t,r){let n=!0;for(;n&&(t.capacity()===Number.POSITIVE_INFINITY||t.length()<t.capacity());){let o=f(this.putters,Zo(Lt));if(o===Lt)n=!1;else{let s=t.offer(o[0]);s&&o[2]?Ki(o[1],!0):s||jg(this.putters,f(eu(this.putters),Pe(o))),Vi(this,t,r)}}}unsafeOffer(t,r){let n=ne(t);for(let o=0;o<n.length;o++){let s=n[o];o===n.length-1?f(this.putters,Bp([s,r,!0])):f(this.putters,Bp([s,r,!1]))}}unsafeRemove(t){jg(this.putters,f(eu(this.putters),Jd(([,r])=>r!==t)))}},sO=class{[Vg]=aO;surplusSize(){return 0}get shutdown(){return re}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,r,n,o){return I(!1)}unsafeOnQueueEmptySpace(t,r){}},JD=class{[Vg]=aO;surplusSize(){return 0}get shutdown(){return re}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,r,n,o){return k(()=>(this.unsafeOffer(r,t),Vi(this,r,n),!0))}unsafeOnQueueEmptySpace(t,r){}unsafeOffer(t,r){let n=r[Symbol.iterator](),o,s=!0;for(;!(o=n.next()).done&&s;){if(t.capacity()===0)return;t.poll(Lt),s=t.offer(o.value)}}},Ki=(e,t)=>ci(e,I(t)),jg=(e,t)=>f(e,Rk(t)),eu=e=>f(e,Zx(Number.POSITIVE_INFINITY)),r8=(e,t)=>f(e,Zx(t)),n8=(e,t)=>{jg(e,f(eu(e),Jd(r=>t!==r)))},Vi=(e,t,r)=>{let n=!0;for(;n&&t.length()!==0;){let o=f(r,Zo(Lt));if(o!==Lt){let s=t.poll(Lt);s!==Lt?(Ki(o,s),e.unsafeOnQueueEmptySpace(t,r)):jg(r,f(eu(r),Pe(o))),n=!0}else n=!1}n&&t.length()===0&&!Yx(r)&&e.onCompleteTakersWithEmptyQueue(r)};var pL=eL;var uL=tL;var lL=nL;var cO=oL,Gi=sL;var pO=Bg;var Uf=ze;var fL=OS;var dL=Dt;var mL=Qm;var Gg="Continue",uO="Close",lO="Yield";var a8="effect/ChannelChildExecutorDecision",xL=Symbol.for(a8),i8={[xL]:xL},fO=e=>{let t=Object.create(i8);return t._tag=Gg,t};var tu="ContinuationK",gL="ContinuationFinalizer";var EL=Symbol.for("effect/ChannelContinuation"),bL={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e},$f=class{onSuccess;onHalt;_tag=tu;[EL]=bL;constructor(t,r){this.onSuccess=t,this.onHalt=r}onExit(t){return ex(t)?this.onHalt(t.cause):this.onSuccess(t.value)}},Jg=class{finalizer;_tag=gL;[EL]=bL;constructor(t){this.finalizer=t}};var Qg="PullAfterNext",dO="PullAfterAllEnqueued";var u8="effect/ChannelUpstreamPullStrategy",l8=Symbol.for(u8),f8={_A:e=>e},d8={[l8]:f8},mO=e=>{let t=Object.create(d8);return t._tag=Qg,t.emitSeparator=e,t};var Yg="BracketOut",Zg="Bridge",Hf="ConcatAll",Xg="Emit",ey="Ensuring",ty="Fail",ry="Fold",ny="FromEffect",oy="PipeTo",hO="Provide",sy="Read",ay="Succeed",iy="SucceedNow",cy="Suspend";var h8="effect/Channel",CL=Symbol.for(h8),x8={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},yr={[CL]:x8,pipe(){return C(this,arguments)}},xO=e=>v(e,CL)||Cn(e),kL=u(2,(e,t)=>{let r=Object.create(yr);return r._tag=Yg,r.acquire=()=>e,r.finalizer=t,r});var gO=(e,t,r)=>{let n=Object.create(yr);return n._tag=Hf,n.combineInners=t,n.combineAll=r,n.onPull=()=>mO(_()),n.onEmit=()=>fO,n.value=()=>e,n.k=L,n},wL=u(4,(e,t,r,n)=>{let o=Object.create(yr);return o._tag=Hf,o.combineInners=r,o.combineAll=n,o.onPull=()=>mO(_()),o.onEmit=()=>fO,o.value=()=>e,o.k=t,o});var yO=u(2,(e,t)=>{let r=Object.create(yr);return r._tag=Zg,r.input=t,r.channel=e,r}),qf=u(2,(e,t)=>{let r=Object.create(yr);return r._tag=ey,r.channel=e,r.finalizer=t,r}),ru=e=>qt(sh(e));var qt=e=>EO(()=>e),EO=e=>{let t=Object.create(yr);return t._tag=ty,t.error=e,t},et=u(2,(e,t)=>{let r=Object.create(yr);return r._tag=ry,r.channel=e,r.k=new $f(t,qt),r});var kt=e=>{let t=Object.create(yr);return t._tag=ny,t.effect=()=>e,t},Nr=u(2,(e,t)=>{let r=Object.create(yr);return r._tag=oy,r.left=()=>e,r.right=()=>t,r});var Wf=e=>Ji({onInput:e.onInput,onFailure:t=>dt(fp(t),{onLeft:e.onFailure,onRight:qt}),onDone:e.onDone}),Ji=e=>{let t=Object.create(yr);return t._tag=sy,t.more=e.onInput,t.done=new $f(e.onDone,e.onFailure),t},zf=e=>jf(()=>e),ca=e=>{let t=Object.create(yr);return t._tag=iy,t.terminal=e,t},Bf=e=>{let t=Object.create(yr);return t._tag=cy,t.channel=e,t},jf=e=>{let t=Object.create(yr);return t._tag=ay,t.evaluate=e,t},fo=ca(void 0);var wt=e=>{let t=Object.create(yr);return t._tag=Xg,t.out=e,t};var pa="Done",ua="Emit",as="FromEffect",la="Read";var g8=Symbol.for("effect/ChannelState"),y8={_E:e=>e,_R:e=>e},uy={[g8]:y8},Qi=()=>{let e=Object.create(uy);return e._tag=pa,e},ly=()=>{let e=Object.create(uy);return e._tag=ua,e},nu=e=>{let t=Object.create(uy);return t._tag=as,t.effect=e,t},fy=(e,t,r,n)=>{let o=Object.create(uy);return o._tag=la,o.upstream=e,o.onEffect=t,o.onEmit=r,o.onDone=n,o};var Vf=e=>e._tag===as;var OL=e=>Vf(e)?e.effect:te,SO=e=>Vf(e)?N2(e.effect):void 0;var _O="PullFromChild",dy="PullFromUpstream",my="DrainChildExecutors",CO="Emit",Yi=class{childExecutor;parentSubexecutor;onEmit;_tag=_O;constructor(t,r,n){this.childExecutor=t,this.parentSubexecutor=r,this.onEmit=n}close(t){let r=this.childExecutor.close(t),n=this.parentSubexecutor.close(t);return r!==void 0&&n!==void 0?Mi(at(r),at(n),(o,s)=>f(o,bi(s))):r!==void 0?r:n!==void 0?n:void 0}enqueuePullFromChild(t){return this}},fa=class e{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=dy;constructor(t,r,n,o,s,a,i,c){this.upstreamExecutor=t,this.createChild=r,this.lastDone=n,this.activeChildExecutors=o,this.combineChildResults=s,this.combineWithChildResult=a,this.onPull=i,this.onEmit=c}close(t){let r=this.upstreamExecutor.close(t),o=[...this.activeChildExecutors.map(s=>s!==void 0?s.childExecutor.close(t):void 0),r].reduce((s,a)=>s!==void 0&&a!==void 0?Mi(s,at(a),(i,c)=>bi(i,c)):s!==void 0?s:a!==void 0?at(a):void 0,void 0);return o}enqueuePullFromChild(t){return new e(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,t],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}},Zi=class e{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=my;constructor(t,r,n,o,s,a,i){this.upstreamExecutor=t,this.lastDone=r,this.activeChildExecutors=n,this.upstreamDone=o,this.combineChildResults=s,this.combineWithChildResult=a,this.onPull=i}close(t){let r=this.upstreamExecutor.close(t),o=[...this.activeChildExecutors.map(s=>s!==void 0?s.childExecutor.close(t):void 0),r].reduce((s,a)=>s!==void 0&&a!==void 0?Mi(s,at(a),(i,c)=>bi(i,c)):s!==void 0?s:a!==void 0?at(a):void 0,void 0);return o}enqueuePullFromChild(t){return new e(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,t],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}},ou=class{value;next;_tag=CO;constructor(t,r){this.value=t,this.next=r}close(t){let r=this.next.close(t);return r}enqueuePullFromChild(t){return this}};var TL="Pulled",vL="NoUpstream";var _8="effect/ChannelUpstreamPullRequest",C8=Symbol.for(_8),k8={_A:e=>e},RL={[C8]:k8},kO=e=>{let t=Object.create(RL);return t._tag=TL,t.value=e,t},AL=e=>{let t=Object.create(RL);return t._tag=vL,t.activeDownstreamCount=e,t};var Kf=class e{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(t,r,n){this._currentChannel=t,this._executeCloseLastSubstream=n,this._providedEnv=r}run(){let t;for(;t===void 0;)if(this._cancelled!==void 0)t=this.processCancellation();else if(this._activeSubexecutor!==void 0)t=this.runSubexecutor();else try{if(this._currentChannel===void 0)t=Qi();else switch(Cn(this._currentChannel)&&(this._currentChannel=kt(this._currentChannel)),this._currentChannel._tag){case Yg:{t=this.runBracketOut(this._currentChannel);break}case Zg:{let r=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){let n=this._input;this._input=void 0;let o=()=>j(r.awaitRead(),()=>Fe(()=>{let s=n.run();switch(s._tag){case pa:return En(n.getDone(),{onFailure:a=>r.error(a),onSuccess:a=>r.done(a)});case ua:return j(r.emit(n.getEmit()),()=>o());case as:return Jt(s.effect,{onFailure:a=>r.error(a),onSuccess:()=>o()});case la:return xy(s,()=>o(),a=>r.error(a))}}));t=nu(j(og(Ar(o())),s=>Ge(()=>this.addFinalizer(a=>j(Sn(s),()=>Fe(()=>{let i=this.restorePipe(a,n);return i!==void 0?i:te}))))))}break}case Hf:{let r=new e(this._currentChannel.value(),this._providedEnv,o=>Ge(()=>{let s=this._closeLastSubstream===void 0?te:this._closeLastSubstream;this._closeLastSubstream=f(s,Je(o))}));r._input=this._input;let n=this._currentChannel;this._activeSubexecutor=new fa(r,o=>n.k(o),void 0,[],(o,s)=>n.combineInners(o,s),(o,s)=>n.combineAll(o,s),o=>n.onPull(o),o=>n.onEmit(o)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case Xg:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:fo,t=ly();break}case ey:{this.runEnsuring(this._currentChannel);break}case ty:{t=this.doneHalt(this._currentChannel.error());break}case ry:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case ny:{let r=this._providedEnv===void 0?this._currentChannel.effect():f(this._currentChannel.effect(),rf(this._providedEnv));t=nu(Jt(r,{onFailure:n=>{let o=this.doneHalt(n);return o!==void 0&&Vf(o)?o.effect:te},onSuccess:n=>{let o=this.doneSucceed(n);return o!==void 0&&Vf(o)?o.effect:te}}));break}case oy:{let r=this._input,n=new e(this._currentChannel.left(),this._providedEnv,o=>this._executeCloseLastSubstream(o));n._input=r,this._input=n,this.addFinalizer(o=>{let s=this.restorePipe(o,r);return s!==void 0?s:te}),this._currentChannel=this._currentChannel.right();break}case hO:{let r=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>Ge(()=>{this._providedEnv=r}));break}case sy:{let r=this._currentChannel;t=fy(this._input,L,n=>{try{this._currentChannel=r.more(n)}catch(o){this._currentChannel=r.done.onExit(oM(o))}},n=>{let o=s=>r.done.onExit(s);this._currentChannel=o(n)});break}case ay:{t=this.doneSucceed(this._currentChannel.evaluate());break}case iy:{t=this.doneSucceed(this._currentChannel.terminal);break}case cy:{this._currentChannel=this._currentChannel.channel();break}}}catch(r){this._currentChannel=qt(ui(r))}return t}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(t){this._cancelled=t}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(t){this._inProgressFinalizer=t}popAllFinalizers(t){let r=[],n=this._doneStack.pop();for(;n;)n._tag==="ContinuationFinalizer"&&r.push(n.finalizer),n=this._doneStack.pop();let o=r.length===0?te:OO(r,t);return this.storeInProgressFinalizer(o),o}popNextFinalizers(){let t=[];for(;this._doneStack.length!==0;){let r=this._doneStack[this._doneStack.length-1];if(r._tag===tu)return t;t.push(r),this._doneStack.pop()}return t}restorePipe(t,r){let n=this._input;return this._input=r,n!==void 0?n.close(t):te}close(t){let r,n=this._inProgressFinalizer;n!==void 0&&(r=f(n,es(Ge(()=>this.clearInProgressFinalizer()))));let o,s=this.popAllFinalizers(t);s!==void 0&&(o=f(s,es(Ge(()=>this.clearInProgressFinalizer()))));let a=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(t);if(!(a===void 0&&r===void 0&&o===void 0))return f(at(wO(a)),Pi(at(wO(r))),Pi(at(wO(o))),de(([[i,c],p])=>f(i,bi(c),bi(p))),Ri,j(i=>Fe(()=>i)))}doneSucceed(t){if(this._doneStack.length===0)return this._done=Rr(t),this._currentChannel=void 0,Qi();let r=this._doneStack[this._doneStack.length-1];if(r._tag===tu){this._doneStack.pop(),this._currentChannel=r.onSuccess(t);return}let n=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=n.reverse(),this._done=Rr(t),this._currentChannel=void 0,Qi();let o=OO(n.map(a=>a.finalizer),Rr(t));this.storeInProgressFinalizer(o);let s=f(o,es(Ge(()=>this.clearInProgressFinalizer())),Ri,j(()=>Ge(()=>this.doneSucceed(t))));return nu(s)}doneHalt(t){if(this._doneStack.length===0)return this._done=dr(t),this._currentChannel=void 0,Qi();let r=this._doneStack[this._doneStack.length-1];if(r._tag===tu){this._doneStack.pop();try{this._currentChannel=r.onHalt(t)}catch(a){this._currentChannel=qt(ui(a))}return}let n=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=n.reverse(),this._done=dr(t),this._currentChannel=void 0,Qi();let o=OO(n.map(a=>a.finalizer),dr(t));this.storeInProgressFinalizer(o);let s=f(o,es(Ge(()=>this.clearInProgressFinalizer())),Ri,j(()=>Ge(()=>this.doneHalt(t))));return nu(s)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Qi()}runBracketOut(t){let r=Ri(Jt(this.provide(t.acquire()),{onFailure:n=>Ge(()=>{this._currentChannel=qt(n)}),onSuccess:n=>Ge(()=>{this.addFinalizer(o=>this.provide(t.finalizer(n,o))),this._currentChannel=wt(n)})}));return nu(r)}provide(t){return this._providedEnv===void 0?t:f(t,rf(this._providedEnv))}runEnsuring(t){this.addFinalizer(t.finalizer),this._currentChannel=t.channel}addFinalizer(t){this._doneStack.push(new Jg(t))}runSubexecutor(){let t=this._activeSubexecutor;switch(t._tag){case _O:return this.pullFromChild(t.childExecutor,t.parentSubexecutor,t.onEmit,t);case dy:return this.pullFromUpstream(t);case my:return this.drainChildExecutors(t);case CO:return this._emitted=t.value,this._activeSubexecutor=t.next,ly()}}replaceSubexecutor(t){this._currentChannel=void 0,this._activeSubexecutor=t}finishWithExit(t){let r=En(t,{onFailure:n=>this.doneHalt(n),onSuccess:n=>this.doneSucceed(n)});return this._activeSubexecutor=void 0,r===void 0?te:OL(r)}finishSubexecutorWithCloseEffect(t,...r){this.addFinalizer(()=>f(r,vt(o=>f(Ge(()=>o(t)),j(s=>s!==void 0?s:te)),{discard:!0})));let n=f(t,En({onFailure:o=>this.doneHalt(o),onSuccess:o=>this.doneSucceed(o)}));return this._activeSubexecutor=void 0,n}applyUpstreamPullStrategy(t,r,n){switch(n._tag){case Qg:{let o=!t||r.some(s=>s!==void 0);return[n.emitSeparator,o?[void 0,...r]:r]}case dO:{let o=!t||r.some(s=>s!==void 0);return[n.emitSeparator,o?[...r,void 0]:r]}}}pullFromChild(t,r,n,o){return fy(t,L,s=>{let a=n(s);switch(a._tag){case Gg:break;case uO:{this.finishWithDoneValue(t,r,a.value);break}case lO:{let i=r.enqueuePullFromChild(o);this.replaceSubexecutor(i);break}}this._activeSubexecutor=new ou(s,this._activeSubexecutor)},En({onFailure:s=>{let a=this.handleSubexecutorFailure(t,r,s);return a===void 0?void 0:SO(a)},onSuccess:s=>{this.finishWithDoneValue(t,r,s)}}))}finishWithDoneValue(t,r,n){let o=r;switch(o._tag){case dy:{let s=new fa(o.upstreamExecutor,o.createChild,o.lastDone!==void 0?o.combineChildResults(o.lastDone,n):n,o.activeChildExecutors,o.combineChildResults,o.combineWithChildResult,o.onPull,o.onEmit);this._closeLastSubstream=t.close(Rr(n)),this.replaceSubexecutor(s);break}case my:{let s=new Zi(o.upstreamExecutor,o.lastDone!==void 0?o.combineChildResults(o.lastDone,n):n,o.activeChildExecutors,o.upstreamDone,o.combineChildResults,o.combineWithChildResult,o.onPull);this._closeLastSubstream=t.close(Rr(n)),this.replaceSubexecutor(s);break}default:break}}handleSubexecutorFailure(t,r,n){return this.finishSubexecutorWithCloseEffect(dr(n),o=>r.close(o),o=>t.close(o))}pullFromUpstream(t){if(t.activeChildExecutors.length===0)return this.performPullFromUpstream(t);let r=t.activeChildExecutors[0],n=new fa(t.upstreamExecutor,t.createChild,t.lastDone,t.activeChildExecutors.slice(1),t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit);if(r===void 0)return this.performPullFromUpstream(n);this.replaceSubexecutor(new Yi(r.childExecutor,n,r.onEmit))}performPullFromUpstream(t){return fy(t.upstreamExecutor,r=>{let n=this._closeLastSubstream===void 0?te:this._closeLastSubstream;return this._closeLastSubstream=void 0,f(this._executeCloseLastSubstream(n),Je(r))},r=>{if(this._closeLastSubstream!==void 0){let a=this._closeLastSubstream;return this._closeLastSubstream=void 0,f(this._executeCloseLastSubstream(a),de(()=>{let i=new e(t.createChild(r),this._providedEnv,this._executeCloseLastSubstream);i._input=this._input;let[c,p]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(kO(r)));this._activeSubexecutor=new Yi(i,new fa(t.upstreamExecutor,t.createChild,t.lastDone,p,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),ae(c)&&(this._activeSubexecutor=new ou(c.value,this._activeSubexecutor))}))}let n=new e(t.createChild(r),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;let[o,s]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(kO(r)));this._activeSubexecutor=new Yi(n,new fa(t.upstreamExecutor,t.createChild,t.lastDone,s,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),ae(o)&&(this._activeSubexecutor=new ou(o.value,this._activeSubexecutor))},r=>{if(t.activeChildExecutors.some(s=>s!==void 0)){let s=new Zi(t.upstreamExecutor,t.lastDone,[void 0,...t.activeChildExecutors],t.upstreamExecutor.getDone(),t.combineChildResults,t.combineWithChildResult,t.onPull);if(this._closeLastSubstream!==void 0){let a=this._closeLastSubstream;return this._closeLastSubstream=void 0,f(this._executeCloseLastSubstream(a),de(()=>this.replaceSubexecutor(s)))}this.replaceSubexecutor(s);return}let n=this._closeLastSubstream,o=this.finishSubexecutorWithCloseEffect(f(r,iM(s=>t.combineWithChildResult(t.lastDone,s))),()=>n,s=>t.upstreamExecutor.close(s));return o===void 0?void 0:SO(o)})}drainChildExecutors(t){if(t.activeChildExecutors.length===0){let s=this._closeLastSubstream;return s!==void 0&&this.addFinalizer(()=>we(s)),this.finishSubexecutorWithCloseEffect(t.upstreamDone,()=>s,a=>t.upstreamExecutor.close(a))}let r=t.activeChildExecutors[0],n=t.activeChildExecutors.slice(1);if(r===void 0){let[s,a]=this.applyUpstreamPullStrategy(!0,n,t.onPull(AL(n.reduce((i,c)=>c!==void 0?i+1:i,0))));return this.replaceSubexecutor(new Zi(t.upstreamExecutor,t.lastDone,a,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull)),ae(s)?(this._emitted=s.value,ly()):void 0}let o=new Zi(t.upstreamExecutor,t.lastDone,n,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull);this.replaceSubexecutor(new Yi(r.childExecutor,o,r.onEmit))}},wO=e=>e!==void 0?e:te,OO=(e,t)=>f(vt(e,r=>at(r(t))),de(r=>f(nM(r),fe(()=>cM))),j(r=>Fe(()=>r))),xy=(e,t,r)=>{let n=[e],o=()=>{let s=n.pop();if(s===void 0||s.upstream===void 0)return rg("Unexpected end of input for channel execution");let a=s.upstream.run();switch(a._tag){case ua:{let i=s.onEmit(s.upstream.getEmit());return n.length===0?i===void 0?Fe(t):f(i,Jt({onFailure:r,onSuccess:t})):i===void 0?Fe(()=>o()):f(i,Jt({onFailure:r,onSuccess:()=>o()}))}case pa:{let i=s.onDone(s.upstream.getDone());return n.length===0?i===void 0?Fe(t):f(i,Jt({onFailure:r,onSuccess:t})):i===void 0?Fe(()=>o()):f(i,Jt({onFailure:r,onSuccess:()=>o()}))}case as:return n.push(s),f(s.onEffect(a.effect),Zl(i=>Fe(()=>{let c=s.onDone(dr(i));return c===void 0?te:c})),Jt({onFailure:r,onSuccess:()=>o()}));case la:return n.push(s),n.push(a),Fe(()=>o())}};return o()},IL=u(2,(e,t)=>{let r=(n,o,s)=>H2(Ge(()=>new Kf(e,void 0,L)),a=>Fe(()=>hy(a.run(),a).pipe(Mk(n),Je(bt(n)),Hk(bt(o)))),(a,i)=>{let c=a.close(i);return c===void 0?te:ig(c,p=>ql(s,Gt(p)))});return Ai(n=>tg([vx(t,Sp),Yr(),Yr()]).pipe(j(([o,s,a])=>n(r(s,a,o)).pipe(so(t),j(i=>t.addFinalizer(c=>{let p=ex(c)?HA(c.cause):void 0;return ll(s).pipe(j(l=>l?Zr(a,void 0).pipe(Je(Ax(i)),Je(sk(i))):Zr(a,void 0).pipe(Je(p&&Na(p)>0?Ix(i,w0(p)):Sn(i)),Je(sk(i)))))}).pipe(Je(n(bt(s)))))))))}),hy=(e,t)=>{let r=e;switch(r._tag){case as:return f(r.effect,j(()=>hy(t.run(),t)));case ua:return hy(t.run(),t);case pa:return Fe(()=>t.getDone());case la:return xy(r,()=>hy(t.run(),t),Gt)}};var TO="Done",PL="Await";var T8="effect/ChannelMergeDecision",v8=Symbol.for(T8),R8={[v8]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}};var vO=e=>{let t=Object.create(R8);return t._tag=PL,t.f=e,t};var gy="BothRunning",yy="LeftDone",Ey="RightDone";var I8="effect/ChannelMergeState",NL=Symbol.for(I8),RO={[NL]:NL},by=(e,t)=>{let r=Object.create(RO);return r._tag=gy,r.left=e,r.right=t,r},AO=e=>{let t=Object.create(RO);return t._tag=yy,t.f=e,t},IO=e=>{let t=Object.create(RO);return t._tag=Ey,t.f=e,t};var PO="BackPressure",MO="BufferSliding";var F8="effect/ChannelMergeStrategy",DL=Symbol.for(F8),LL={[DL]:DL},UL=e=>{let t=Object.create(LL);return t._tag=PO,t},$L=e=>{let t=Object.create(LL);return t._tag=MO,t};var HL=u(2,(e,{onBackPressure:t,onBufferSliding:r})=>{switch(e._tag){case PO:return t();case MO:return r()}});var su="Empty",Gf="Emit",Jf="Error",Qf="Done",WL=e=>({_tag:su,notifyProducer:e}),FO=e=>({_tag:Gf,notifyConsumers:e}),N8=e=>({_tag:Jf,cause:e}),D8=e=>({_tag:Qf,done:e}),NO=class{ref;constructor(t){this.ref=t}awaitRead(){return ts(Ei(this.ref,t=>t._tag===su?[bt(t.notifyProducer),t]:[te,t]))}get close(){return W2(t=>this.error(UA(t)))}done(t){return ts(Ei(this.ref,r=>{switch(r._tag){case su:return[bt(r.notifyProducer),r];case Gf:return[vt(r.notifyConsumers,n=>Zr(n,U(t)),{discard:!0}),D8(t)];case Jf:return[vi,r];case Qf:return[vi,r]}}))}emit(t){return j(Yr(),r=>ts(Ei(this.ref,n=>{switch(n._tag){case su:return[bt(n.notifyProducer),n];case Gf:{let o=n.notifyConsumers[0],s=n.notifyConsumers.slice(1);if(o!==void 0)return[Zr(o,$(t)),s.length===0?WL(r):FO(s)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case Jf:return[vi,n];case Qf:return[vi,n]}})))}error(t){return ts(Ei(this.ref,r=>{switch(r._tag){case su:return[bt(r.notifyProducer),r];case Gf:return[vt(r.notifyConsumers,n=>c_(n,t),{discard:!0}),N8(t)];case Jf:return[vi,r];case Qf:return[vi,r]}}))}get take(){return this.takeWith(t=>dr(ah(t,U)),t=>Rr(t),t=>sM($(t)))}takeWith(t,r,n){return j(Yr(),o=>ts(Ei(this.ref,s=>{switch(s._tag){case su:return[Je(Zr(s.notifyProducer,void 0),af(bt(o),{onFailure:t,onSuccess:dt({onLeft:n,onRight:r})})),FO([o])];case Gf:return[af(bt(o),{onFailure:t,onSuccess:dt({onLeft:n,onRight:r})}),FO([...s.notifyConsumers,o])];case Jf:return[we(t(s.cause)),s];case Qf:return[we(n(s.done)),s]}})))}},DO=()=>f(Yr(),j(e=>kp(WL(e))),de(e=>new NO(e)));var Sy=u(2,(e,t)=>wL(e,t,()=>{},()=>{}));var VL=e=>{let t=Ji({onInput:()=>t,onFailure:qt,onDone:zf});return Nr(e,t)};var KL=u(2,(e,t)=>qf(e,()=>t));var q8=e=>et(e,L);var $O=e=>is(e.takeWith(qt,t=>et(wt(t),()=>$O(e)),zf));var GL=u(2,(e,t)=>et(e,r=>jf(()=>t(r))));var JL=u(2,(e,t)=>{let r=Wf({onInput:n=>et(wt(t(n)),()=>r),onFailure:ru,onDone:ca});return Nr(e,r)});var W8=e=>t=>z8(e)(t,Lr);var z8=({bufferSize:e=16,concurrency:t,mergeStrategy:r=UL()})=>(n,o)=>WO(s=>Ut(function*(){let a=t==="unbounded"?Number.MAX_SAFE_INTEGER:t,i=yield*DO(),c=$O(i),p=yield*pL(e);yield*ql(s,cO(p));let l=yield*uL();yield*ql(s,cO(l));let d=yield*kp(_()),m=yield*Yr(),h=(yield*Uk(a)).withPermits,x=yield*Yf(Nr(c,n),s);function b(y){return y.pipe(j(dt({onLeft:O=>we(w(O)),onRight:O=>Xl(Gi(p,we($(O))),_())})),Dk({until:O=>ae(O)}),j(O=>SP(d,ce({onNone:()=>w(O.value),onSome:g=>w(o(g,O.value))}))),Zl(O=>lp(O)?Gt(O):Gi(p,Gt(O)).pipe(Je(Zr(m,void 0)),ef)))}yield*x.pipe(Jt({onFailure:y=>Gi(p,Gt(y)).pipe(Je(we(!1))),onSuccess:dt({onLeft:y=>ag(Ar(bt(m)),Ar(h(a)(te)),{onSelfDone:(O,g)=>Xl(Sn(g),!1),onOtherDone:(O,g)=>Je(Sn(g),T_(d).pipe(j(ce({onNone:()=>Gi(p,we(U(y))),onSome:T=>Gi(p,we(U(o(T,y))))})),Xl(!1)))}),onRight:y=>HL(r,{onBackPressure:()=>Ut(function*(){let O=yield*Yr(),g=ng(P=>Yf(Nr(c,y),P).pipe(j(M=>sg(at(b(M)),at(Ar(bt(m))))),j(L)));return yield*Zr(O,void 0).pipe(Je(g),h(1),so(s)),yield*bt(O),!(yield*ll(m))}),onBufferSliding:()=>Ut(function*(){let O=yield*Yr(),g=yield*Yr(),T=yield*lL(l);yield*pO(l).pipe(j(H=>Zr(H,void 0)),Fk(()=>T>=a)),yield*Gi(l,O);let P=ng(H=>Yf(Nr(c,y),H).pipe(j(V=>at(b(V)).pipe(sg(at(Ar(bt(m)))),sg(at(Ar(bt(O)))))),j(L)));return yield*Zr(g,void 0).pipe(Je(P),h(1),so(s)),yield*bt(g),!(yield*ll(m))})})})}),Dk({while:y=>y}),so(s));let S=f(pO(p),ts,af({onFailure:qt,onSuccess:dt({onLeft:ca,onRight:y=>et(wt(y),()=>S)})}),is);return yO(S,i)})),HO=u(3,(e,t,r)=>W8(r)(JL(e,t)));var QL=u(2,(e,t)=>{function r(n){return Ut(function*(){let o=yield*DO(),s=$O(o),a=yield*Yf(Nr(s,e),n),i=yield*Yf(Nr(s,t.other),n);function c(l,d,m){return(h,x,b)=>{function S(y){let O=y;return O._tag===TO?we(kt(Je(Sn(d),O.effect))):de(Ax(d),En({onFailure:g=>kt(O.f(dr(g))),onSuccess:dt({onLeft:g=>kt(O.f(Rr(g))),onRight:g=>BO(wt(g),p(b(O.f)))})}))}return En(l,{onFailure:y=>S(h(dr(y))),onSuccess:dt({onLeft:y=>S(h(Rr(y))),onRight:y=>we(et(wt(y),()=>et(kt(so(Ar(m),n)),O=>p(x(O,d)))))})})}}function p(l){switch(l._tag){case gy:{let d=Ar(Px(l.left)),m=Ar(Px(l.right));return is(ag(d,m,{onSelfDone:(h,x)=>Je(Sn(x),c(h,l.right,a)(t.onSelfDone,by,b=>AO(b))),onOtherDone:(h,x)=>Je(Sn(x),c(h,l.left,i)(t.onOtherDone,(b,S)=>by(S,b),b=>IO(b)))}))}case yy:return is(de(at(i),En({onFailure:d=>kt(l.f(dr(d))),onSuccess:dt({onLeft:d=>kt(l.f(Rr(d))),onRight:d=>et(wt(d),()=>p(AO(l.f)))})})));case Ey:return is(de(at(a),En({onFailure:d=>kt(l.f(dr(d))),onSuccess:dt({onLeft:d=>kt(l.f(Rr(d))),onRight:d=>et(wt(d),()=>p(IO(l.f)))})})))}}return kt(Ql(l=>{let d=Ql(x=>(x.transferChildren(l.scope()),te)),m=Ar(a).pipe(es(d),so(n)),h=Ar(i).pipe(es(d),so(n));return Mi(m,h,(x,b)=>by(x,b))})).pipe(et(p),yO(o))})}return WO(r)});var YL=u(2,(e,t)=>Bf(()=>{let r,n=Wf({onInput:s=>et(wt(s),()=>n),onFailure:s=>(r=j8(s),qt(ui(r))),onDone:ca}),o=Ji({onInput:s=>f(wt(s),et(()=>o)),onFailure:s=>DS(s)&&V8(s.defect)&&R(s.defect,r)?ru(s.defect.error):qt(s),onDone:ca});return Nr(Nr(Nr(e,n),t),o)}));var ZL=e=>ng(t=>IL(e,t));var XL=e=>ZL(VL(e));var qO=e=>is(Ai(t=>de(M1(),r=>kL(ig(t(Tx(e,r)),n=>Oi(r,dr(n))),(n,o)=>Oi(r,o))))),eU=e=>tU(de(q2,t=>et(kt(e(t)),wt)));var Yf=u(2,(e,t)=>Pi(Ge(()=>new Kf(e,void 0,L)),cg()).pipe(Zs(([r,n])=>P1(t,o=>{let s=r.close(o);return s!==void 0?rf(s,n):te})),Ri,de(([r])=>Fe(()=>LO(r.run(),r))))),LO=(e,t)=>{let r=e;switch(r._tag){case pa:return En(t.getDone(),{onFailure:Gt,onSuccess:n=>we(U(n))});case ua:return we($(t.getEmit()));case as:return f(r.effect,j(()=>LO(t.run(),t)));case la:return xy(r,()=>LO(t.run(),t),n=>Gt(n))}};var is=e=>q8(kt(e)),tU=e=>gO(qO(e),(t,r)=>t,(t,r)=>t),WO=e=>gO(eU(e),(t,r)=>t,(t,r)=>t);var zO=e=>rU(0,e.length,e),rU=(e,t,r)=>e===t?fo:f(wt(f(r,Hn(e))),et(()=>rU(e+1,t,r))),B8=u(e=>xO(e[1]),(e,t,r)=>r?.concurrent?QL(e,{other:t,onSelfDone:n=>vO(o=>Fe(()=>B_(n,o))),onOtherDone:n=>vO(o=>Fe(()=>B_(o,n)))}):et(e,n=>GL(t,o=>[n,o])));var BO=u(e=>xO(e[1]),(e,t,r)=>r?.concurrent?GL(B8(e,t,{concurrent:!0}),n=>n[1]):et(e,()=>t)),UO=Symbol.for("effect/Channel/ChannelException"),j8=e=>({_tag:"ChannelException",[UO]:UO,error:e}),V8=e=>v(e,UO);var Q8=Symbol.for("effect/Sink"),Y8={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},_y=class{channel;[Q8]=Y8;constructor(t){this.channel=t}pipe(){return C(this,arguments)}};var nU=e=>{let t=Ji({onInput:r=>f(kt(e(r)),et(()=>t)),onFailure:qt,onDone:()=>fo});return new _y(t)};var oU=e=>new _y(kt(e));var jO=e=>Cn(e)?jO(oU(e)):e.channel;var e7="effect/Stream",VO=Symbol.for(e7),t7={_R:e=>e,_E:e=>e,_A:e=>e},mo=class{channel;[VO]=t7;constructor(t){this.channel=t}pipe(){return C(this,arguments)}},Cy=e=>v(e,VO)||Cn(e);var iU=u(2,(e,t)=>new mo(qf(Rn(e),t)));var cU=e=>KO(mr(w(e)));var pU=u(e=>Cy(e[0]),(e,t,r)=>{let n=r?.bufferSize??16;return r?.switch?sU(r?.concurrency,()=>aU(e,1,n,t),o=>aU(e,o,n,t)):sU(r?.concurrency,()=>new mo(Sy(Rn(e),o=>f(o,tb(s=>Rn(t(s))),RR(fo,(s,a)=>f(s,BO(a)))))),o=>new mo(f(Rn(e),Sy(zO),HO(s=>Rn(t(s)),r))))}),sU=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r(Number.MAX_SAFE_INTEGER);default:return e>1?r(e):t()}},aU=u(4,(e,t,r,n)=>new mo(f(Rn(e),Sy(zO),HO(o=>Rn(n(o)),{concurrency:t,mergeStrategy:$L(),bufferSize:r})))),uU=u(e=>Cy(e[0]),(e,t)=>pU(e,L,t));var Rn=e=>{if("channel"in e)return e.channel;if(Cn(e))return Rn(lU(e));throw new TypeError("Expected a Stream.")};var lU=e=>f(e,Ys(w),KO),KO=e=>new mo(is(sf(e,{onFailure:ce({onNone:()=>fo,onSome:ru}),onSuccess:t=>wt(Oe(t))})));var fU=(...e)=>{let t=e.length===1?e[0].evaluate:e[0],r=e.length===1?e[0].onError:e[1],n=e.length===1?e[0].releaseLockOnEnd===!0:!1;return SU(de(Pk(Ge(()=>t().getReader()),o=>n?Ge(()=>o.releaseLock()):Ak(()=>o.cancel())),o=>mU(j(Xo({try:()=>o.read(),catch:s=>w(r(s))}),({done:s,value:a})=>s?mr(_()):we(a)))))};var dU=e=>bU(e,t=>f(de(t,r=>w([r,t])),Yl(ce({onNone:()=>we(_()),onSome:mr})))),mU=e=>dU(f(e,de(Oe)));var hU=u(2,(e,t)=>Rn(e).pipe(YL(jO(t)),XL));var xU=u(2,(e,t)=>hU(e,nU(t)));var gU=e=>new mo(KL(qO(f(e,de(Oe))),te));var GO=e=>new mo(Bf(()=>Rn(e())));var yU=u(e=>Cy(e[0]),(e,t)=>de(cg(),r=>EU(e,r,t))),EU=u(e=>Cy(e[0]),(e,t,r)=>{let n=GD(t),o,s,a=V2(!1);return new ReadableStream({start(i){s=n(xU(e,c=>c.length===0?te:a.whenOpen(Ge(()=>{a.unsafeClose();for(let p of c)i.enqueue(p);o(),o=void 0})))),s.addObserver(c=>{try{c._tag==="Failure"?i.error(ih(c.cause)):i.close()}catch{}})},pull(){return new Promise(i=>{o=i,en(a.open)})},cancel(){if(s)return pg(ef(Sn(s)))}},r?.strategy)});var bU=(e,t)=>GO(()=>{let r=n=>is(de(t(n),ce({onNone:()=>fo,onSome:([o,s])=>et(wt(o),()=>r(s))})));return new mo(r(e))});var SU=e=>uU(gU(e));var _U=iU;var CU=cU;var kU=fU;var wU=GO;var OU=yU;var ky=Symbol.for("@effect/platform/Error");var QO=(e,t)=>{class r extends bp{_tag=t}return r.prototype[e]=e,r.prototype.name=t,r},RU=vn("Clipboard","Command","FileSystem","KeyValueStore","Path","Stream","Terminal"),TU=class extends eO("@effect/platform/Error/BadArgument")("BadArgument",{module:RU,method:ie,description:lo(ie),cause:lo(Mf)}){[ky]=ky;get message(){return`${this.module}.${this.method}${this.description?`: ${this.description}`:""}`}},n7=vn("AlreadyExists","BadResource","Busy","InvalidData","NotFound","PermissionDenied","TimedOut","UnexpectedEof","Unknown","WouldBlock","WriteZero"),vU=class extends eO("@effect/platform/Error/SystemError")("SystemError",{reason:n7,module:RU,method:ie,description:lo(ie),syscall:lo(ie),pathOrDescriptor:lo(Nf(ie,er)),cause:lo(Mf)}){[ky]=ky;get message(){return`${this.reason}: ${this.module}.${this.method}${this.pathOrDescriptor!==void 0?` (${this.pathOrDescriptor})`:""}${this.description?`: ${this.description}`:""}`}};var Zf=e=>{let t=AU(e),r=[];for(let n=0;n<t.length;n++)if(Array.isArray(t[n][0])){let[o,s]=t[n];r.push([`${o[0]}[${o.slice(1).join("][")}]`,s])}else r.push(t[n]);return r},AU=e=>{let t=Symbol.iterator in e?ne(e):Object.entries(e),r=[];for(let[n,o]of t)if(Array.isArray(o))for(let s=0;s<o.length;s++)o[s]!==void 0&&r.push([n,String(o[s])]);else if(typeof o=="object"){let s=AU(o);for(let[a,i]of s)r.push([[n,...typeof a=="string"?[a]:a],i])}else o!==void 0&&r.push([n,String(o)]);return r};var IU=[];var PU=u(2,(e,t)=>{let r=Zf(t),n=r.map(([o])=>o);return Cu(vd(e,([o])=>n.includes(o)),r)});var YO=(e,t,r)=>{try{let n=new URL(e,s7());for(let o=0;o<t.length;o++){let[s,a]=t[o];a!==void 0&&n.searchParams.append(s,a)}return r._tag==="Some"&&(n.hash=r.value),$(n)}catch(n){return U(n)}};var s7=()=>{if("location"in globalThis&&globalThis.location!==void 0&&globalThis.location.origin!==void 0&&globalThis.location.pathname!==void 0)return location.origin+location.pathname};var XO=Symbol.for("@effect/platform/HttpBody");var Xf=class{[XO];constructor(){this[XO]=XO}[z](){return this.toJSON()}toString(){return X(this)}},eT=class extends Xf{_tag="Empty";toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}},MU=new eT;var tT=class extends Xf{body;contentType;_tag="Uint8Array";constructor(t,r){super(),this.body=t,this.contentType=r}get contentLength(){return this.body.length}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Uint8Array",body:this.contentType.startsWith("text/")||this.contentType.endsWith("json")?new TextDecoder().decode(this.body):`Uint8Array(${this.body.length})`,contentType:this.contentType,contentLength:this.contentLength}}},FU=(e,t)=>new tT(e,t??"application/octet-stream"),a7=new TextEncoder,NU=(e,t)=>FU(a7.encode(e),t??"text/plain"),DU=e=>NU(JSON.stringify(e),"application/json");var rT=class extends Xf{formData;_tag="FormData";constructor(t){super(),this.formData=t}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"FormData",formData:this.formData}}},LU=e=>new rT(e);var UU=Symbol.for("@effect/platform/Cookies");var $U=Symbol.for("@effect/platform/Cookies/Cookie");var c7={[UU]:UU,...Sa,toJSON(){return{_id:"@effect/platform/Cookies",cookies:gv(this.cookies,e=>e.toJSON())}},pipe(){return C(this,arguments)}},p7=e=>{let t=Object.create(c7);return t.cookies=e,t},u7=e=>{let t={};for(let r of e)t[r.name]=r;return p7(t)},qU=e=>{let t=typeof e=="string"?[e]:e,r=[];for(let n of t){let o=l7(n.trim());ae(o)&&r.push(o.value)}return u7(r)};function l7(e){let t=e.split(";").map(i=>i.trim()).filter(i=>i!=="");if(t.length===0)return _();let r=t[0].indexOf("=");if(r===-1)return _();let n=t[0].slice(0,r);if(!f7.test(n))return _();let o=t[0].slice(r+1),s=d7(o);if(t.length===1)return w(Object.assign(Object.create(HU),{name:n,value:s,valueEncoded:o}));let a={};for(let i=1;i<t.length;i++){let c=t[i],p=c.indexOf("="),l=p===-1?c:c.slice(0,p).trim(),d=p===-1?void 0:c.slice(p+1).trim();switch(l.toLowerCase()){case"domain":{if(d===void 0)break;let m=d.trim().replace(/^\./,"");m&&(a.domain=m);break}case"expires":{if(d===void 0)break;let m=new Date(d);isNaN(m.getTime())||(a.expires=m);break}case"max-age":{if(d===void 0)break;let m=parseInt(d,10);isNaN(m)||(a.maxAge=bb(m));break}case"path":{if(d===void 0)break;d[0]==="/"&&(a.path=d);break}case"priority":{if(d===void 0)break;switch(d.toLowerCase()){case"low":a.priority="low";break;case"medium":a.priority="medium";break;case"high":a.priority="high";break}break}case"httponly":{a.httpOnly=!0;break}case"secure":{a.secure=!0;break}case"partitioned":{a.partitioned=!0;break}case"samesite":{if(d===void 0)break;switch(d.toLowerCase()){case"lax":a.sameSite="lax";break;case"strict":a.sameSite="strict";break;case"none":a.sameSite="none";break}break}}}return w(Object.assign(Object.create(HU),{name:n,value:s,valueEncoded:o,options:Object.keys(a).length>0?a:void 0}))}var f7=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,HU={[$U]:$U,...Sa,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}};var d7=e=>{try{return decodeURIComponent(e)}catch{return e}};var WU=Symbol.for("@effect/platform/Headers");var ed=Object.assign(Object.create(null),{[WU]:WU,[gu](e){return Ty(this,Vo(e,rd))}}),wy=e=>Object.assign(Object.create(ed),e);var nT=Object.create(ed),td=e=>{if(e===void 0)return nT;if(Symbol.iterator in e){let r=Object.create(ed);for(let[n,o]of e)r[n.toLowerCase()]=o;return r}let t=Object.create(ed);for(let[r,n]of Object.entries(e))Array.isArray(n)?t[r.toLowerCase()]=n.join(", "):n!==void 0&&(t[r.toLowerCase()]=n);return t},zU=e=>Object.setPrototypeOf(e,ed);var Oy=u(3,(e,t,r)=>{let n=wy(e);return n[t.toLowerCase()]=r,n}),BU=u(2,(e,t)=>wy({...e,...td(t)})),jU=u(2,(e,t)=>{let r=wy(e);return Object.assign(r,t),r}),VU=u(2,(e,t)=>{let r=wy(e),n=o=>{if(typeof o=="string"){let s=o.toLowerCase();s in e&&delete r[s]}else for(let s in e)o.test(s)&&delete r[s]};if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else n(t);return r}),Ty=u(2,(e,t)=>{let r={...e},n=o=>{if(typeof o=="string"){let s=o.toLowerCase();s in e&&(r[s]=va(e[s]))}else for(let s in e)o.test(s)&&(r[s]=va(e[s]))};if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else n(t);return r}),rd=D("@effect/platform/Headers/currentRedactedNames",()=>Uf(["authorization","cookie","set-cookie","x-api-key"]));var Xi=Symbol.for("@effect/platform/HttpIncomingMessage"),oT=(e,t)=>{let r=jw(e,t);return n=>j(n.json,r)};var KU=(e,t)=>{let r=e.headers["content-type"]??"",n;if(r.includes("application/json"))try{n=en(e.json)}catch{}else if(r.includes("text/")||r.includes("urlencoded"))try{n=en(e.text)}catch{}let o={...t,headers:Mn(e.headers),remoteAddress:e.remoteAddress.toJSON()};return n!==void 0&&(o.body=n),o};var JU=e=>zU({b3:`${e.traceId}-${e.spanId}-${e.sampled?"1":"0"}${e.parent._tag==="Some"?`-${e.parent.value.spanId}`:""}`,traceparent:`00-${e.traceId}-${e.spanId}-${e.sampled?"01":"00"}`});var QU=e=>`http.request.header.${e}`,YU="http.request.method";var ZU=e=>`http.response.header.${e}`,XU="http.response.status_code";var e$="server.address",t$="server.port";var r$="url.full",n$="url.path",o$="url.query",s$="url.scheme";var a$=Symbol.for("@effect/platform/HttpClientError");var i$=a$;var iu=class extends QO(i$,"RequestError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){return this.description?`${this.reason}: ${this.description} (${this.methodAndUrl})`:`${this.reason} error (${this.methodAndUrl})`}},An=class extends QO(i$,"ResponseError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){let t=`${this.response.status} ${this.methodAndUrl}`;return this.description?`${this.reason}: ${this.description} (${t})`:`${this.reason} error (${t})`}};var c$=Symbol.for("@effect/platform/HttpClientRequest"),y7={[c$]:c$,...Sa,toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:Mn(this.headers),body:this.body.toJSON()}},pipe(){return C(this,arguments)}};function ho(e,t,r,n,o,s){let a=Object.create(y7);return a.method=e,a.url=t,a.urlParams=r,a.hash=n,a.headers=o,a.body=s,a}var E7=ho("GET","",IU,_(),nT,MU),da=e=>(t,r)=>uT(E7,{method:e,url:t,...r??void 0}),vy=da("GET"),Ry=da("POST"),Ay=da("PUT"),aT=da("PATCH"),iT=da("DELETE"),cT=da("HEAD"),pT=da("OPTIONS"),uT=u(2,(e,t)=>{let r=e;return t.method&&(r=u$(r,t.method)),t.url&&(r=fT(r,t.url)),t.headers&&(r=nd(r,t.headers)),t.urlParams&&(r=f$(r,t.urlParams)),t.hash&&(r=d$(r,t.hash)),t.body&&(r=Py(r,t.body)),t.accept&&(r=lT(r,t.accept)),t.acceptJson&&(r=p$(r)),r}),Iy=u(3,(e,t,r)=>ho(e.method,e.url,e.urlParams,e.hash,Oy(e.headers,t,r),e.body)),nd=u(2,(e,t)=>ho(e.method,e.url,e.urlParams,e.hash,BU(e.headers,t),e.body));var lT=u(2,(e,t)=>Iy(e,"Accept",t)),p$=lT("application/json"),u$=u(2,(e,t)=>ho(t,e.url,e.urlParams,e.hash,e.headers,e.body)),fT=u(2,(e,t)=>{if(typeof t=="string")return ho(e.method,t,e.urlParams,e.hash,e.headers,e.body);let r=new URL(t.toString()),n=Zf(r.searchParams),o=r.hash?w(r.hash.slice(1)):_();return r.search="",r.hash="",ho(e.method,r.toString(),n,o,e.headers,e.body)});var l$=u(2,(e,t)=>ho(e.method,t.endsWith("/")&&e.url.startsWith("/")?t+e.url.slice(1):t+e.url,e.urlParams,e.hash,e.headers,e.body));var f$=u(2,(e,t)=>ho(e.method,e.url,PU(e.urlParams,t),e.hash,e.headers,e.body)),d$=u(2,(e,t)=>ho(e.method,e.url,e.urlParams,w(t),e.headers,e.body));var Py=u(2,(e,t)=>{let r=e.headers;if(t._tag==="Empty"||t._tag==="FormData")r=VU(r,["Content-type","Content-length"]);else{let n=t.contentType;n&&(r=Oy(r,"content-type",n));let o=t.contentLength;o&&(r=Oy(r,"content-length",o.toString()))}return ho(e.method,e.url,e.urlParams,e.hash,r,t)});var m$=u(2,(e,t)=>Py(e,DU(t)));var h$=u(2,(e,t)=>Py(e,LU(t)));var cu=Symbol.for("@effect/platform/HttpClientResponse"),g$=(e,t)=>new dT(e,t),dT=class extends yd{request;source;[Xi];[cu];constructor(t,r){super(),this.request=t,this.source=r,this[Xi]=Xi,this[cu]=cu}toJSON(){return KU(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return td(this.source.headers)}cachedCookies;get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=qU(this.source.headers.getSetCookie())}get remoteAddress(){return _()}get stream(){return this.source.body?kU(()=>this.source.body,t=>new An({request:this.request,response:this,reason:"Decode",cause:t})):CU(new An({request:this.request,response:this,reason:"EmptyBody",description:"can not create stream from empty body"}))}get json(){return L2(this.text,{try:t=>t===""?null:JSON.parse(t),catch:t=>new An({request:this.request,response:this,reason:"Decode",cause:t})})}textBody;get text(){return this.textBody??=Xo({try:()=>this.source.text(),catch:t=>new An({request:this.request,response:this,reason:"Decode",cause:t})}).pipe(eg,en)}get urlParamsBody(){return j(this.text,t=>D2({try:()=>Zf(new URLSearchParams(t)),catch:r=>new An({request:this.request,response:this,reason:"Decode",cause:r})}))}formDataBody;get formData(){return this.formDataBody??=Xo({try:()=>this.source.formData(),catch:t=>new An({request:this.request,response:this,reason:"Decode",cause:t})}).pipe(eg,en)}arrayBufferBody;get arrayBuffer(){return this.arrayBufferBody??=Xo({try:()=>this.source.arrayBuffer(),catch:t=>new An({request:this.request,response:this,reason:"Decode",cause:t})}).pipe(eg,en)}};var y$=e=>e.status>=200&&e.status<300?we(e):mr(new An({response:e,request:e.request,reason:"StatusCode",description:"non 2xx status code"}));var mT=Symbol.for("@effect/platform/HttpClient"),Ny=pt("@effect/platform/HttpClient"),b$=D(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),()=>Uf(rr));var S$=D(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),()=>Uf(!0));var _$=Hr()("@effect/platform/HttpClient/SpanNameGenerator",{defaultValue:()=>e=>`http.client ${e.method}`});var b7={[mT]:mT,pipe(){return C(this,arguments)},...Sa,toJSON(){return{_id:"@effect/platform/HttpClient"}},get(e,t){return this.execute(vy(e,t))},head(e,t){return this.execute(cT(e,t))},post(e,t){return this.execute(Ry(e,t))},put(e,t){return this.execute(Ay(e,t))},patch(e,t){return this.execute(aT(e,t))},del(e,t){return this.execute(iT(e,t))},options(e,t){return this.execute(pT(e,t))}};var hT=(e,t)=>{let r=Object.create(b7);return r.preprocess=t,r.postprocess=e,r.execute=function(n){return e(t(n))},r},My=D("@effect/platform/HttpClient/responseRegistry",()=>{if("FinalizationRegistry"in globalThis&&globalThis.FinalizationRegistry){let t=new FinalizationRegistry(r=>{r.abort()});return{register(r,n){t.register(r,n,r)},unregister(r){t.unregister(r)}}}let e=new Map;return{register(t,r){e.set(t,setTimeout(()=>r.abort(),5e3))},unregister(t){let r=e.get(t);r!==void 0&&(clearTimeout(r),e.delete(t))}}}),S7=D("@effect/platform/HttpClient/scopedRequests",()=>new WeakMap),xT=e=>hT(t=>j(t,r=>Ql(n=>{let o=S7.get(r),s=o??new AbortController,a=YO(r.url,r.urlParams,r.hash);if(a._tag==="Left")return mr(new iu({request:r,reason:"InvalidUrl",cause:a.left}));let i=a.right;if(!n.getFiberRef(mL)||n.getFiberRef(b$)(r)){let l=e(r,i,s.signal,n);return o?l:Ai(d=>Jt(d(l),{onSuccess(m){return My.register(m,s),we(new Fy(m,s))},onFailure(m){return lp(m)&&s.abort(),Gt(m)}}))}let p=ut(n.currentContext,_$);return K2(p(r),{kind:"client",captureStackTrace:!1},l=>{l.attribute(YU,r.method),l.attribute(e$,i.origin),i.port!==""&&l.attribute(t$,+i.port),l.attribute(r$,i.toString()),l.attribute(n$,i.pathname),l.attribute(s$,i.protocol.slice(0,-1));let d=i.search.slice(1);d!==""&&l.attribute(o$,d);let m=n.getFiberRef(rd),h=Ty(r.headers,m);for(let x in h)l.attribute(QU(x),String(h[x]));return r=n.getFiberRef(S$)?nd(r,JU(l)):r,Ai(x=>x(e(r,i,s.signal,n)).pipe(G2(l),Jt({onSuccess:b=>{l.attribute(XU,b.status);let S=Ty(b.headers,m);for(let y in S)l.attribute(ZU(y),String(S[y]));return o?we(b):(My.register(b,s),we(new Fy(b,s)))},onFailure(b){return!o&&lp(b)&&s.abort(),Gt(b)}})))})})),we),Fy=class{original;controller;constructor(t,r){this.original=t,this.controller=r}[cu]=cu;[Xi]=Xi;applyInterrupt(t){return Fe(()=>(My.unregister(this.original),U2(t,()=>Ge(()=>{this.controller.abort()}))))}get request(){return this.original.request}get status(){return this.original.status}get headers(){return this.original.headers}get cookies(){return this.original.cookies}get remoteAddress(){return this.original.remoteAddress}get formData(){return this.applyInterrupt(this.original.formData)}get text(){return this.applyInterrupt(this.original.text)}get json(){return this.applyInterrupt(this.original.json)}get urlParamsBody(){return this.applyInterrupt(this.original.urlParamsBody)}get arrayBuffer(){return this.applyInterrupt(this.original.arrayBuffer)}get stream(){return wU(()=>(My.unregister(this.original),_U(this.original.stream,t=>(rM(t)&&this.controller.abort(),te))))}toJSON(){return this.original.toJSON()}[z](){return this.original[z]()}};var{del:_7,execute:C7,get:k7,head:w7,options:O7,patch:T7,post:v7,put:R7}=B2(Ny);var C$=e=>gT(e,j(y$)),gT=u(2,(e,t)=>{let r=e;return hT(n=>t(r.postprocess(n)),r.preprocess)});var yT=e=>nN(Ny,j(tf(),t=>de(e,r=>gT(r,z2(n=>br(t,n))))));var Dy=Ny;var Ly=C$;var w$=vy,O$=Ry;var T$=Ay;var v$=uT;var ET=Iy,R$=nd;var A$=l$;var I$=m$;var P$=h$;var M$=_h;var F$=uI,N$=XS,D$=iI;var L$=sI,bT=aI;var _T={};vT(_T,{LoggerTypeId:()=>N7,add:()=>L7,addEffect:()=>U7,addScoped:()=>$7,batched:()=>B7,defaultLogger:()=>i9,filterLogLevel:()=>W7,isLogger:()=>E9,json:()=>h9,jsonLogger:()=>c9,logFmt:()=>x9,logfmtLogger:()=>p9,make:()=>D7,map:()=>z7,mapInput:()=>H7,mapInputOptions:()=>q7,minimumLogLevel:()=>ST,none:()=>G7,pretty:()=>g9,prettyLogger:()=>l9,prettyLoggerDefault:()=>f9,remove:()=>J7,replace:()=>od,replaceEffect:()=>Q7,replaceScoped:()=>Y7,simple:()=>Z7,stringLogger:()=>u9,structured:()=>y9,structuredLogger:()=>d9,succeed:()=>X7,sync:()=>e9,test:()=>t9,tracerLogger:()=>m9,withConsoleError:()=>K7,withConsoleLog:()=>j7,withLeveledConsole:()=>V7,withMinimumLogLevel:()=>r9,withSpanAnnotations:()=>n9,zip:()=>o9,zipLeft:()=>s9,zipRight:()=>a9});var U$=u(2,(e,t)=>e.log({fiberId:Lu,logLevel:tp,message:t,cause:LA,context:Mh(),spans:ln(),annotations:No(),date:new Date}));var N7=Rp,D7=St,L7=pf,U7=qk,$7=Wk,H7=mM,q7=cx,W7=hM,z7=Sl,B7=QF,j7=Lp,V7=zF,K7=BF,G7=xM,J7=uf,od=Z2,Q7=X2,Y7=eN,Z7=px,X7=gM,e9=yM,t9=U$,r9=Y2,n9=JF,o9=ux,s9=EM,a9=bM,i9=wi,c9=dx,p9=fx,u9=lx,l9=Z_,f9=mx,d9=_l,m9=LC,h9=od(wi,jF),x9=od(wi,VF),g9=od(wi,KF),y9=od(wi,GF),ST=Q2,E9=_M;var CT="@effect/platform/FetchHttpClient/Fetch",$$="@effect/platform/FetchHttpClient/FetchOptions",b9=xT((e,t,r,n)=>{let o=n.getFiberRef(dL),s=o.unsafeMap.get(CT)??globalThis.fetch,a=o.unsafeMap.get($$)??{},i=a.headers?jU(td(a.headers),e.headers):e.headers,c=p=>de(Xo({try:()=>s(t,{...a,method:e.method,headers:i,body:p,duplex:e.body._tag==="Stream"?"half":void 0,signal:r}),catch:l=>new iu({request:e,reason:"Transport",cause:l})}),l=>g$(e,l));switch(e.body._tag){case"Raw":case"Uint8Array":return c(e.body.body);case"FormData":return c(e.body.formData);case"Stream":return j(OU(e.body.stream),c)}return c(void 0)}),H$=yT(we(b9));var Uy=class extends yc(CT)(){};var q$=H$;function pu(e,t){return E(e.runtimeEffect,r=>Y(n=>(n.setFiberRefs(r.fiberRefs),n.currentRuntimeFlags=r.runtimeFlags,yn(t,r.context))))}var C9={...Ad,[Wl]:Wl,pipe(){return C(this,arguments)},commit(){return this.runtimeEffect}},W$=(e,t)=>{t=t??dk();let r=Gl(Vs()),n,o=Y(a=>(n||(n=Kl(Kr(Tx(bk(e,t),r),i=>{s.cachedRuntime=i}),{scope:r,scheduler:a.currentScheduler})),hn(n.await))),s=Object.assign(Object.create(C9),{memoMap:t,scope:r,runtimeEffect:o,cachedRuntime:void 0,runtime(){return s.cachedRuntime===void 0?qp(s.runtimeEffect):Promise.resolve(s.cachedRuntime)},dispose(){return qp(s.disposeEffect)},disposeEffect:J(()=>(s.runtimeEffect=dn("ManagedRuntime disposed"),s.cachedRuntime=void 0,Oi(s.scope,Et))),runFork(a,i){return s.cachedRuntime===void 0?Kl(pu(s,a),i):Js(s.cachedRuntime)(a,i)},runSyncExit(a){return s.cachedRuntime===void 0?lk(pu(s,a)):jl(s.cachedRuntime)(a)},runSync(a){return s.cachedRuntime===void 0?Gl(pu(s,a)):Nx(s.cachedRuntime)(a)},runPromiseExit(a,i){return s.cachedRuntime===void 0?uk(pu(s,a),i):Vl(s.cachedRuntime)(a,i)},runCallback(a,i){return s.cachedRuntime===void 0?Bl(_n)(pu(s,a),i):Bl(s.cachedRuntime)(a,i)},runPromise(a,i){return s.cachedRuntime===void 0?qp(pu(s,a),i):Dx(s.cachedRuntime)(a,i)}});return s};var z$=W$;var N9={},O9=M$().pipe(bT(()=>N$(new Map(Object.entries(CR(N9?.env??{}))),{pathDelim:"_"})),L$("uploadthing"),D$),T9=e=>F$(e??{}).pipe(bT(()=>O9)),v9=FI("isDev").pipe(DI(()=>LI(typeof process<"u"?process.env.NODE_ENV:void 0).pipe(vh(e=>e==="development"))),jo(!1)),sd=BD("token",VD).pipe(Ik({ConfigError:e=>new nt({code:e._op==="InvalidData"?"INVALID_SERVER_CONFIG":"MISSING_ENV",message:e._op==="InvalidData"?"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.":"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.",cause:e})})),B$=Ns("apiUrl").pipe(jo("https://api.uploadthing.com"),a_(e=>new URL(e)),vh(e=>e.href.replace(/\/$/,""))),j$=J2(function*(e){let{regions:t,ingestHost:r}=yield*sd,n=e?t.find(o=>o===e)??t[0]:t[0];return yield*Ns("ingestUrl").pipe(jo(`https://${n}.${r}`),a_(o=>new URL(o)),vh(o=>o.href.replace(/\/$/,"")))}),zge=Ns("utfsHost").pipe(jo("utfs.io")),V$=Ns("ufsHost").pipe(jo("ufs.sh")),K$=s_("subdomain","path")("ufsAppIdLocation").pipe(jo("subdomain"));var R9=e=>{let t=Rh(Ns(),r=>{let n=xP.find(o=>o._tag===r);return n===void 0?U(dh([],`Expected a log level but received ${r}`)):$(n)});return e===void 0?t:NI(t,e)},A9=R9("logLevel").pipe(jo(Hh),nf(e=>ST(e)),of(e=>Lk("Invalid log level").pipe(Xs("error",e))),kn("ConfigError",e=>new nt({code:"INVALID_SERVER_CONFIG",message:"Invalid server configuration",cause:e})),zk),I9=s_("json","logFmt","structured","pretty")("logFormat"),P9=Ut(function*(){let e=yield*v9,t=yield*I9.pipe(jo(e?"pretty":"json"));return _T[t]}).pipe(kn("ConfigError",e=>new nt({code:"INVALID_SERVER_CONFIG",message:"Invalid server configuration",cause:e})),zk),kT=(e,t)=>{let r=t?.mixin??"json",n=qh(t?.level??"Debug");return o=>j(r!=="None"?o[r]:te,()=>j2(n,`${e} (${o.status})`).pipe(Xs("response",o)))},wT=e=>t=>t._tag==="ResponseError"?kT(e,{level:"Error"})(t.response):Lk(e).pipe(Xs("error",t)),Bge=class extends Ah("ParserError"){message="Input validation failed. The original error with it's validation issues is in the error cause."};var G$=(e,t)=>{let r=cN(q$,aN(Uy,e)),n=oN(fL(rd,s=>s.concat(["x-uploadthing-api-key"]))),o=iN(sN(P9,A9,r,n),pN(T9(t)));return z$(o)},M9=Symbol("uploadthing-region-symbol"),F9=Symbol("uploadthing-custom-id-symbol"),jge=class extends yc("uploadthing/AdapterArguments")(){};var D9=class extends Blob{name;lastModified;customId;constructor(e,t,r){let n={...r,type:r?.type??(cR(t)||"application/octet-stream"),lastModified:r?.lastModified??Date.now()};super(e,n),this.name=t,this.customId=n.customId,this.lastModified=n.lastModified}},L9=(e,t)=>Ut(function*(){let r=new FormData;r.append("file",e);let n=(yield*Dy).pipe(Ly),o=yield*T$(t.url).pipe(P$(r),ET("Range","bytes=0-"),ET("x-uploadthing-version",Vy),n.execute,of(wT("Failed to upload file")),Ys(s=>new nt({code:"UPLOAD_FAILED",message:"Failed to upload file",cause:s})),nf(s=>s.json),nf(Jy),jp);return yield*cf(`File ${e.name} uploaded successfully`).pipe(Xs("json",o)),{...o,get url(){return Ky("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),o.url},get appUrl(){return Ky("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),o.appUrl}}});function In(){if(typeof window<"u")throw new nt({code:"INTERNAL_SERVER_ERROR",message:"The `utapi` can only be used on the server."})}var U9=e=>Ut(function*(){let t=yo(e)?e.url:e;if(typeof t=="string"&&t.startsWith("data:"))return yield*mr({code:"BAD_REQUEST",message:"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.",data:void 0});t=new URL(t);let{name:r=t.pathname.split("/").pop()??"unknown-filename",customId:n=void 0}=yo(e)?e:{},o=(yield*Dy).pipe(Ly),s=yield*w$(t).pipe(v$({headers:{}}),o.execute,j(a=>a.arrayBuffer),Ys(a=>({code:"BAD_REQUEST",message:`Failed to download requested file: ${a.message}`,data:a.toJSON()})),jp);return new D9([s],r,{customId:n,lastModified:Date.now()})}).pipe(_t("downloadFile")),$9=(e,t,r)=>Ut(function*(){let{apiKey:n,appId:o}=yield*sd,s=yield*j$(void 0),a=yield*YE(e,o);return{url:yield*Kd(`${s}/${a}`,n,{data:{"x-ut-identifier":o,"x-ut-file-name":e.name,"x-ut-file-size":e.size,"x-ut-file-type":e.type,"x-ut-custom-id":e.customId,"x-ut-content-disposition":t,"x-ut-acl":r}}),key:a}}).pipe(_t("generatePresignedUrl")),J$=(e,t)=>Ut(function*(){let r=yield*$9(e,t.contentDisposition??"inline",t.acl).pipe(kn("UploadThingError",o=>mr(nt.toObject(o))),kn("ConfigError",()=>mr({code:"INVALID_SERVER_CONFIG",message:"Failed to generate presigned URL"}))),n=yield*L9(e,r).pipe(kn("UploadThingError",o=>mr(nt.toObject(o))),kn("ResponseError",o=>mr({code:"UPLOAD_FAILED",message:"Failed to upload file",data:o.toJSON()})));return{key:r.key,url:n.url,appUrl:n.appUrl,ufsUrl:n.ufsUrl,lastModified:e.lastModified??Date.now(),name:e.name,size:e.size,type:e.type,customId:e.customId??null,fileHash:n.fileHash}}).pipe(_t("uploadFile")),$y=class{fetch;defaultKeyType;runtime;opts;constructor(e){In(),this.opts=e??{},this.fetch=this.opts.fetch??globalThis.fetch,this.defaultKeyType=this.opts.defaultKeyType??"fileKey",this.runtime=G$(this.fetch,this.opts)}requestUploadThing=(e,t,r)=>Ut(this,function*(){let{apiKey:n}=yield*sd,o=yield*B$,s=(yield*Dy).pipe(Ly);return yield*O$(e).pipe(A$(o),I$(t),R$({"x-uploadthing-version":Vy,"x-uploadthing-be-adapter":"server-sdk","x-uploadthing-api-key":Ao(n)}),s.execute,Nk({onSuccess:kT("UploadThing API Response"),onFailure:wT("Failed to request UploadThing API")}),j(oT(r)),jp)}).pipe(kn("ConfigError",n=>new nt({code:"INVALID_SERVER_CONFIG",message:"There was an error with the server configuration. More info can be found on this error's `cause` property",cause:n})),_t("utapi.#requestUploadThing"));executeAsync=async(e,t)=>{let r=await e.pipe(_t("utapi.#executeAsync"),n=>this.runtime.runPromiseExit(n,t?{signal:t}:void 0));if(r._tag==="Failure")throw ih(r.cause);return r.value};uploadFiles(e,t){In();let r=t?.concurrency??1;if(r<1||r>25)throw new nt({code:"BAD_REQUEST",message:"concurrency must be a positive integer between 1 and 25"});let n=vt(Bt(e),o=>J$(o,t??{}).pipe(sf({onSuccess:s=>({data:s,error:null}),onFailure:s=>({data:null,error:s})})),{concurrency:r}).pipe(de(o=>Array.isArray(e)?o:o[0]),Zs(o=>cf("Finished uploading").pipe(Xs("uploadResult",o))),_t("uploadFiles"));return this.executeAsync(n,t?.signal)}uploadFilesFromUrl(e,t){In();let r=t?.concurrency??1;if(r<1||r>25)throw new nt({code:"BAD_REQUEST",message:"concurrency must be a positive integer between 1 and 25"});let n=vt(Bt(e),o=>U9(o).pipe(j(s=>J$(s,t??{})),sf({onSuccess:s=>({data:s,error:null}),onFailure:s=>({data:null,error:s})})),{concurrency:r}).pipe(de(o=>Array.isArray(e)?o:o[0]),Zs(o=>cf("Finished uploading").pipe(Xs("uploadResult",o))),_t("uploadFiles")).pipe(_t("uploadFilesFromUrl"));return this.executeAsync(n,t?.signal)}deleteFiles=async(e,t)=>{In();let{keyType:r=this.defaultKeyType}=t??{};class n extends Fr("DeleteFileResponse")({success:po,deletedCount:er}){}return await this.executeAsync(this.requestUploadThing("/v6/deleteFiles",r==="fileKey"?{fileKeys:Bt(e)}:{customIds:Bt(e)},n).pipe(_t("deleteFiles")))};getFileUrls=async(e,t)=>{In();let{keyType:r=this.defaultKeyType}=t??{};class n extends Fr("GetFileUrlResponse")({data:Xp(gr({key:ie,url:ie}))}){}return await this.executeAsync(this.requestUploadThing("/v6/getFileUrl",r==="fileKey"?{fileKeys:Bt(e)}:{customIds:Bt(e)},n).pipe(_t("getFileUrls")))};listFiles=async e=>{In();class t extends Fr("ListFileResponse")({hasMore:po,files:Xp(gr({id:ie,customId:zi(ie),key:ie,name:ie,size:er,status:vn("Deletion Pending","Failed","Uploaded","Uploading"),uploadedAt:er}))}){}return await this.executeAsync(this.requestUploadThing("/v6/listFiles",{...e},t).pipe(_t("listFiles")))};renameFiles=async e=>{In();class t extends Fr("RenameFileResponse")({success:po}){}return await this.executeAsync(this.requestUploadThing("/v6/renameFiles",{updates:Bt(e)},t).pipe(_t("renameFiles")))};getUsageInfo=async()=>{In();class e extends Fr("GetUsageInfoResponse")({totalBytes:er,appTotalBytes:er,filesUploaded:er,limitBytes:er}){}return await this.executeAsync(this.requestUploadThing("/v6/getUsageInfo",{},e).pipe(_t("getUsageInfo")))};generateSignedURL=async(e,t)=>{In();let r=Vd(t?.expiresIn??"5 minutes");if(t?.expiresIn&&isNaN(r))throw new nt({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(r>86400*7)throw new nt({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});let n=Ut(function*(){let{apiKey:o,appId:s}=yield*sd,a=yield*K$,i=yield*V$,c=i.includes("local")?"http":"https",p=a==="subdomain"?`${c}://${s}.${i}/f/${e}`:`${c}://${i}/a/${s}/${e}`;return{ufsUrl:yield*Kd(p,o,{ttlInSeconds:r})}});return await this.executeAsync(n.pipe(kn("ConfigError",o=>new nt({code:"INVALID_SERVER_CONFIG",message:"There was an error with the server configuration. More info can be found on this error's `cause` property",cause:o})),_t("generateSignedURL")))};getSignedURL=async(e,t)=>{In();let r=t?.expiresIn?Vd(t.expiresIn):void 0,{keyType:n=this.defaultKeyType}=t??{};if(t?.expiresIn&&isNaN(r))throw new nt({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(r&&r>86400*7)throw new nt({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});class o extends Fr("GetSignedUrlResponse")({url:ie,ufsUrl:ie}){}return await this.executeAsync(this.requestUploadThing("/v6/requestFileAccess",n==="fileKey"?{fileKey:e,expiresIn:r}:{customId:e,expiresIn:r},o).pipe(_t("getSignedURL")))};updateACL=async(e,t,r)=>{In();let{keyType:n=this.defaultKeyType}=r??{},o=Bt(e).map(a=>n==="fileKey"?{fileKey:a,acl:t}:{customId:a,acl:t}),s=gr({success:po});return await this.executeAsync(this.requestUploadThing("/v6/updateACL",{updates:o},s).pipe(_t("updateACL")))}};var Rt=require("@raycast/api");var H9=require("react/jsx-runtime");var Hy=()=>{let{token:e}=(0,Rt.getPreferenceValues)();return e.replace(/UPLOADTHING_TOKEN\s*=\s*['"]?(.*?)['"]?$/,"$1")};var OT={"Deletion Pending":{source:Rt.Icon.Document,tintColor:Rt.Color.Orange},Failed:{source:Rt.Icon.Document,tintColor:Rt.Color.Red},Uploaded:{source:Rt.Icon.Document,tintColor:Rt.Color.Green},Uploading:{source:Rt.Icon.Document,tintColor:Rt.Color.Blue}};var he=id(require("react")),ve=require("@raycast/api");var Q$=Object.prototype.hasOwnProperty;function qy(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&qy(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Q$.call(e,r)&&++n&&!Q$.call(t,r)||!(r in t)||!qy(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var ec=id(require("node:fs")),Wy=id(require("node:path")),tH=id(require("node:crypto"));var rH=require("react/jsx-runtime");function q9(e){let t=(0,he.useRef)(e),r=(0,he.useRef)(0);return qy(e,t.current)||(t.current=e,r.current+=1),(0,he.useMemo)(()=>t.current,[r.current])}function on(e){let t=(0,he.useRef)(e);return t.current=e,t}function W9(e,t){let r=e instanceof Error?e.message:String(e);return(0,ve.showToast)({style:ve.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??Y$(e),secondaryAction:t?.primaryAction?Y$(e):void 0})}var Y$=e=>{let t=!0,r="[Extension Name]...",n="";try{let a=JSON.parse((0,ec.readFileSync)((0,Wy.join)(ve.environment.assetsPath,"..","package.json"),"utf8"));r=`[${a.title}]...`,n=`https://raycast.com/${a.owner||a.author}/${a.name}`,(!a.owner||a.access==="public")&&(t=!1)}catch{}let o=ve.environment.isDevelopment||t,s=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:o?"Copy Logs":"Report Error",onAction(a){a.hide(),o?ve.Clipboard.copy(s):(0,ve.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function z9(e,t,r){let n=(0,he.useRef)(0),[o,s]=(0,he.useState)({isLoading:!0}),a=on(e),i=on(r?.abortable),c=on(t||[]),p=on(r?.onError),l=on(r?.onData),d=on(r?.onWillExecute),m=on(r?.failureToastOptions),h=on(o.data),x=(0,he.useRef)(null),b=(0,he.useRef)({page:0}),S=(0,he.useRef)(!1),y=(0,he.useRef)(!0),O=(0,he.useRef)(50),g=(0,he.useCallback)(()=>(i.current&&(i.current.current?.abort(),i.current.current=new AbortController),++n.current),[i]),T=(0,he.useCallback)((...K)=>{let oe=g();d.current?.(K),s(Z=>({...Z,isLoading:!0}));let Ye=B9(a.current)(...K);function $e(Z){return Z.name=="AbortError"||oe===n.current&&(p.current?p.current(Z):ve.environment.launchType!==ve.LaunchType.Background&&W9(Z,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(Re){Re.hide(),x.current?.(...c.current||[])}},...m.current}),s({error:Z,isLoading:!1})),Z}return typeof Ye=="function"?(S.current=!0,Ye(b.current).then(({data:Z,hasMore:Re,cursor:ct})=>(oe===n.current&&(b.current&&(b.current.cursor=ct,b.current.lastItem=Z?.[Z.length-1]),l.current&&l.current(Z,b.current),Re&&(O.current=Z.length),y.current=Re,s(tr=>b.current.page===0?{data:Z,isLoading:!1}:{data:(tr.data||[])?.concat(Z),isLoading:!1})),Z),Z=>(y.current=!1,$e(Z)))):(S.current=!1,Ye.then(Z=>(oe===n.current&&(l.current&&l.current(Z),s({data:Z,isLoading:!1})),Z),$e))},[l,p,c,a,s,x,d,b,m,g]);x.current=T;let P=(0,he.useCallback)(()=>{b.current={page:0};let K=c.current||[];return T(...K)},[T,c]),M=(0,he.useCallback)(async(K,oe)=>{let Ye;try{if(oe?.optimisticUpdate){g(),typeof oe?.rollbackOnError!="function"&&oe?.rollbackOnError!==!1&&(Ye=structuredClone(h.current?.value));let $e=oe.optimisticUpdate;s(Z=>({...Z,data:$e(Z.data)}))}return await K}catch($e){if(typeof oe?.rollbackOnError=="function"){let Z=oe.rollbackOnError;s(Re=>({...Re,data:Z(Re.data)}))}else oe?.optimisticUpdate&&oe?.rollbackOnError!==!1&&s(Z=>({...Z,data:Ye}));throw $e}finally{oe?.shouldRevalidateAfter!==!1&&(ve.environment.launchType===ve.LaunchType.Background||ve.environment.commandMode==="menu-bar"?await P():P())}},[P,h,s,g]),H=(0,he.useCallback)(()=>{b.current.page+=1;let K=c.current||[];T(...K)},[b,c,T]);(0,he.useEffect)(()=>{b.current={page:0},r?.execute!==!1?T(...t||[]):g()},[q9([t,r?.execute,T]),i,b]),(0,he.useEffect)(()=>()=>{g()},[g]);let V=r?.execute!==!1?o.isLoading:!1,pe={...o,isLoading:V},ue=S.current?{pageSize:O.current,hasMore:y.current,onLoadMore:H}:void 0;return{...pe,revalidate:P,mutate:M,pagination:ue}}function B9(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Z$(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function j9(e){return e instanceof URLSearchParams?e.toString():e}function nH(e,t=[]){function r(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=j9(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let o=/\[object (.*)\]/i,s=Object.prototype.toString.call(n),a=o.exec(s)?.[1]??"unknown:["+s+"]";a=a.toLowerCase();let i=null;if((i=t.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+i+"]");return}else t.push(n);if(Buffer.isBuffer(n))return r("buffer:"),r(n.toString("utf8"));if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](n);else throw new Error('Unknown object type "'+a+'"');else{let c=Object.keys(n);c=c.sort(),Z$(n)||c.splice(0,0,"prototype","__proto__","constructor"),r("object:"+c.length+":");let p=this;return c.forEach(function(l){p.dispatch(l),r(":"),p.dispatch(n[l]),r(",")})}},_array:function(n,o){o=typeof o<"u"?o:!1;let s=this;if(r("array:"+n.length+":"),!o||n.length<=1){n.forEach(function(c){s.dispatch(c)});return}let a=[],i=n.map(function(c){let p=V9(),l=t.slice();return nH(p,l).dispatch(c),a=a.concat(l.slice(t.length)),p.read().toString()});t=t.concat(a),i.sort(),this._array(i,!1)},_date:function(n){r("date:"+n.toJSON())},_symbol:function(n){r("symbol:"+n.toString())},_error:function(n){r("error:"+n.toString())},_boolean:function(n){r("bool:"+n.toString())},_string:function(n){r("string:"+n.length+":"),r(n.toString())},_function:function(n){r("fn:"),Z$(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){r("number:"+n.toString())},_xml:function(n){r("xml:"+n.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(n){r("regex:"+n.toString())},_uint8array:function(n){r("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){r("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){r("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){r("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){r("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){r("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){r("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){r("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){r("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){r("url:"+n.toString())},_map:function(n){r("map:");let o=Array.from(n);this._array(o,!0)},_set:function(n){r("set:");let o=Array.from(n);this._array(o,!0)},_file:function(n){r("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(n){r("bigint:"+n.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function V9(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function K9(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function G9(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function X$(e){let t=tH.default.createHash("sha1");return nH(t).dispatch(e),t.digest("hex")}var J9=Symbol("cache without namespace"),eH=new Map;function Q9(e,t,r){let n=r?.cacheNamespace||J9,o=eH.get(n)||eH.set(n,new ve.Cache({namespace:r?.cacheNamespace})).get(n);if(!o)throw new Error("Missing cache");let s=on(e),a=on(t),i=(0,he.useSyncExternalStore)(o.subscribe,()=>{try{return o.get(s.current)}catch(d){console.error("Could not get Cache data:",d);return}}),c=(0,he.useMemo)(()=>{if(typeof i<"u"){if(i==="undefined")return;try{return JSON.parse(i,G9)}catch(d){return console.warn("The cached data is corrupted",d),a.current}}else return a.current},[i,a]),p=on(c),l=(0,he.useCallback)(d=>{let m=typeof d=="function"?d(p.current):d;if(typeof m>"u")o.set(s.current,"undefined");else{let h=JSON.stringify(m,K9);o.set(s.current,h)}return m},[o,s,p]);return[c,l]}var uu=Symbol();function oH(e,t,r){let{initialData:n,keepPreviousData:o,internal_cacheKeySuffix:s,...a}=r||{},i=(0,he.useRef)(null),[c,p]=Q9(X$(t||[])+s,uu,{cacheNamespace:X$(e)}),l=(0,he.useRef)(c!==uu?c:n),d=(0,he.useRef)(void 0),{mutate:m,revalidate:h,...x}=z9(e,t||[],{...a,onData(g,T){d.current=T,a.onData&&a.onData(g,T),!(T&&T.page>0)&&(i.current="promise",l.current=g,p(g))}}),b,S=x.pagination;d.current&&d.current.page>0&&x.data?b=x.data:i.current==="promise"?b=l.current:o&&c!==uu?(b=c,S&&(S.hasMore=!0,S.pageSize=c.length)):o&&c===uu?b=l.current:c!==uu?(b=c,S&&(S.hasMore=!0,S.pageSize=c.length)):b=n;let y=on(b),O=(0,he.useCallback)(async(g,T)=>{let P;try{if(T?.optimisticUpdate){typeof T?.rollbackOnError!="function"&&T?.rollbackOnError!==!1&&(P=structuredClone(y.current));let M=T.optimisticUpdate(y.current);i.current="cache",l.current=M,p(M)}return await m(g,{shouldRevalidateAfter:T?.shouldRevalidateAfter})}catch(M){if(typeof T?.rollbackOnError=="function"){let H=T.rollbackOnError(y.current);i.current="cache",l.current=H,p(H)}else T?.optimisticUpdate&&T?.rollbackOnError!==!1&&(i.current="cache",l.current=P,p(P));throw M}},[p,m,y,l,i]);return(0,he.useEffect)(()=>{c!==uu&&(i.current="cache",l.current=c)},[c]),{data:b,isLoading:x.isLoading,error:x.error,mutate:d.current&&d.current.page>0?m:O,pagination:S,revalidate:h}}var aH=require("node:crypto");globalThis.crypto||(globalThis.crypto=aH.webcrypto);var iH=()=>{let e=new $y({token:Hy()}),t=20,{isLoading:r,data:n,pagination:o,mutate:s}=oH(()=>async a=>{let i=await e.listFiles({offset:a.page*t,limit:t});return{data:[...i.files],hasMore:i.hasMore}},[],{initialData:[]});return{isLoading:r,files:n,pagination:o,mutate:s}};var Y9="Invalid number",Z9="Invalid rounding method";var zy="jedec";var pH="bits",uH="byte",lH="bytes",X9="kbit";var fH="array",eV="function",dH="object",tV="string",mH="exponent",rV="round";var By={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}},nV=[1,1024,1048576,1073741824,1099511627776,0x4000000000000,1152921504606847e3,11805916207174113e5,12089258196146292e8],oV=[1,1e3,1e6,1e9,1e12,1e15,1e18,1e21,1e24],sV=Math.log(1024),aV=Math.log(1e3),cH={si:{isDecimal:!0,ceil:1e3,actualStandard:zy},iec:{isDecimal:!1,ceil:1024,actualStandard:"iec"},[zy]:{isDecimal:!1,ceil:1024,actualStandard:zy}};function iV(e,t){return cH[e]?cH[e]:t===2?{isDecimal:!1,ceil:1024,actualStandard:"iec"}:{isDecimal:!0,ceil:1e3,actualStandard:zy}}function cV(e,t,r,n,o,s,a,i){let c=[];c[0]=e>0?0 .toPrecision(e):0;let p=c[1]=By.symbol[t][r?pH:lH][0];return a===mH?0:(n[c[1]]&&(c[1]=n[c[1]]),o&&(c[1]=s[0]||By.fullform[t][0]+(r?"bit":uH)),a===fH?c:a===dH?{value:c[0],symbol:c[1],exponent:0,unit:p}:c.join(i))}function hH(e,t,r,n,o){let s=r?oV[t]:nV[t],a=e/s;return n&&(a*=8,a>=o&&t<8&&(a/=o,t++)),{result:a,e:t}}function pV(e,t,r,n,o,s,a,i,c){let p=e.toPrecision(t);if(p.includes("e")&&r<8){r++;let{result:l}=hH(n,r,o,s,a),d=c>0?Math.pow(10,c):1;p=(d===1?i(l):i(l*d)/d).toPrecision(t)}return{value:p,e:r}}function uV(e,t,r,n,o,s){let a=e;if(t===!0?a=a.toLocaleString():t.length>0?a=a.toLocaleString(t,r):n.length>0&&(a=a.toString().replace(".",n)),o&&s>0){let i=a.toString(),c=n||(i.match(/(\D)/g)||[]).pop()||".",p=i.split(c),l=p[1]||"",d=l.length,m=s-d;a=`${p[0]}${c}${l.padEnd(d+m,"0")}`}return a}function xH(e,{bits:t=!1,pad:r=!1,base:n=-1,round:o=2,locale:s="",localeOptions:a={},separator:i="",spacer:c=" ",symbols:p={},standard:l="",output:d=tV,fullform:m=!1,fullforms:h=[],exponent:x=-1,roundingMethod:b=rV,precision:S=0}={}){let y=x,O=Number(e),g=[],T=0,P="",{isDecimal:M,ceil:H,actualStandard:V}=iV(l,n),pe=m===!0,ue=O<0,K=Math[b];if(typeof e!="bigint"&&isNaN(e))throw new TypeError(Y9);if(typeof K!==eV)throw new TypeError(Z9);if(ue&&(O=-O),O===0)return cV(S,V,t,p,pe,h,d,c);if((y===-1||isNaN(y))&&(y=Math.floor(M?Math.log(O)/aV:Math.log(O)/sV),y<0&&(y=0)),y>8&&(S>0&&(S+=8-y),y=8),d===mH)return y;let{result:oe,e:Ye}=hH(O,y,M,t,H);T=oe,y=Ye;let $e=y>0&&o>0?Math.pow(10,o):1;if(g[0]=$e===1?K(T):K(T*$e)/$e,g[0]===H&&y<8&&x===-1&&(g[0]=1,y++),S>0){let Re=pV(g[0],S,y,O,M,t,H,K,o);g[0]=Re.value,y=Re.e}let Z=By.symbol[V][t?pH:lH];return P=g[1]=M&&y===1?t?X9:"kB":Z[y],ue&&(g[0]=-g[0]),p[g[1]]&&(g[1]=p[g[1]]),g[0]=uV(g[0],s,a,i,r,o),pe&&(g[1]=h[y]||By.fullform[V][y]+(t?"bit":uH)+(g[0]===1?"":"s")),d===fH?g:d===dH?{value:g[0],symbol:g[1],exponent:y,unit:P}:c===" "?`${g[0]} ${g[1]}`:g.join(c)}var EH=require("react");var je=require("react/jsx-runtime"),bH=new $y({token:Hy()}),SH=async e=>{let{url:t}=await bH.getSignedURL(e);return t},lV=async e=>await bH.deleteFiles(e),fV=()=>{let{isLoading:e,files:t,pagination:r,mutate:n}=iH(),[o,s]=(0,EH.useState)(""),{defaultAction:a}=(0,ee.getPreferenceValues)();return(0,je.jsxs)(ee.List,{isLoading:e,pagination:r,searchBarAccessory:(0,je.jsxs)(ee.List.Dropdown,{tooltip:"Filter",onChange:s,children:[(0,je.jsx)(ee.List.Dropdown.Item,{icon:ee.Icon.Document,title:"All",value:""}),(0,je.jsx)(ee.List.Dropdown.Section,{title:"Status",children:Object.entries(OT).map(([i,c])=>(0,je.jsx)(ee.List.Dropdown.Item,{icon:c,title:i,value:`status_${i}`},i))})]}),children:[!e&&!t.length&&(0,je.jsx)(ee.List.EmptyView,{title:"No files uploaded yet",description:"Upload some files to get started!"}),t.filter(i=>{if(!o)return!0;let c=o.split("status_")[1];return i.status===c}).map(i=>(0,je.jsx)(ee.List.Item,{icon:OT[i.status],title:i.name,subtitle:i.status,accessories:[{text:xH(i.size,{standard:"jedec"})},{date:new Date(i.uploadedAt)}],actions:(0,je.jsxs)(ee.ActionPanel,{children:[a==="open"?(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(yH,{name:i.name,fileKey:i.key}),(0,je.jsx)(gH,{name:i.name,fileKey:i.key})]}):(0,je.jsxs)(je.Fragment,{children:[(0,je.jsx)(gH,{name:i.name,fileKey:i.key}),(0,je.jsx)(yH,{name:i.name,fileKey:i.key})]}),(0,je.jsx)(ee.ActionPanel.Section,{children:(0,je.jsx)(ee.Action,{icon:ee.Icon.Trash,title:"Delete File",style:ee.Action.Style.Destructive,onAction:async()=>{if(await(0,ee.confirmAlert)({title:"Are you sure you want to delete this file?",message:i.name,primaryAction:{title:"Delete",style:ee.Alert.ActionStyle.Destructive}})){let c=await(0,ee.showToast)(ee.Toast.Style.Animated,"Deleting File",i.name);try{await n(lV(i.key).then(p=>{if(!p.deletedCount)throw new Error("Something went wrong")}),{optimisticUpdate(p){return p.filter(l=>l.id!==i.id)},shouldRevalidateAfter:!1}),c.style=ee.Toast.Style.Success,c.title="Deleted File"}catch{c.style=ee.Toast.Style.Failure,c.title="Deletion Failed"}}},shortcut:ee.Keyboard.Shortcut.Common.Remove})})]})},i.key))]})};function gH({name:e,fileKey:t}){return(0,je.jsx)(ee.Action,{icon:ee.Icon.Paperclip,title:"Copy URL to Clipboard",onAction:async()=>{let r=await(0,ee.showToast)(ee.Toast.Style.Animated,"Getting URL",e),n=await SH(t);await r.hide(),await ee.Clipboard.copy(n)}})}function yH({name:e,fileKey:t}){return(0,je.jsx)(ee.Action,{icon:ee.Icon.Globe,title:"Open in Browser",onAction:async()=>{let r=await(0,ee.showToast)(ee.Toast.Style.Animated,"Getting URL",e),n=await SH(t);await r.hide(),await(0,ee.open)(n)}})}
/*! Bundled license information:

filesize/dist/filesize.js:
  (**
   * filesize
   *
   * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 11.0.13
   *)
*/
