"use strict";var MH=Object.create;var Md=Object.defineProperty;var FH=Object.getOwnPropertyDescriptor;var DH=Object.getOwnPropertyNames;var NH=Object.getPrototypeOf,LH=Object.prototype.hasOwnProperty;var bT=(e,t)=>{for(var r in t)Md(e,r,{get:t[r],enumerable:!0})},ST=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of DH(t))!LH.call(e,o)&&o!==r&&Md(e,o,{get:()=>t[o],enumerable:!(n=FH(t,o))||n.enumerable});return e};var wi=(e,t,r)=>(r=e!=null?MH(NH(e)):{},ST(t||!e||!e.__esModule?Md(r,"default",{value:e,enumerable:!0}):r,e)),UH=e=>ST(Md({},"__esModule",{value:!0}),e);var dV={};bT(dV,{default:()=>lV});module.exports=UH(dV);var nt=require("@raycast/api");var Lr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var $H={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},qH=class{#e=$H;#t=!1;setTimeoutProvider(e){process.env.NODE_ENV!=="production"&&this.#t&&e!==this.#e&&console.error("[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.",{previous:this.#e,provider:e}),this.#e=e,process.env.NODE_ENV!=="production"&&(this.#t=!1)}setTimeout(e,t){return process.env.NODE_ENV!=="production"&&(this.#t=!0),this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return process.env.NODE_ENV!=="production"&&(this.#t=!0),this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Nn=new qH;function _T(e){setTimeout(e,0)}var Zt=typeof window>"u"||"Deno"in globalThis;function He(){}function kT(e,t){return typeof e=="function"?e(t):e}function Rp(e){return typeof e=="number"&&e>=0&&e!==1/0}function Dd(e,t){return Math.max(e+(t||0)-Date.now(),0)}function cn(e,t){return typeof e=="function"?e(t):e}function Xt(e,t){return typeof e=="function"?e(t):e}function Nd(e,t){let{type:r="all",exact:n,fetchStatus:o,predicate:s,queryKey:i,stale:a}=e;if(i){if(n){if(t.queryHash!==Ap(i,t.options))return!1}else if(!vi(t.queryKey,i))return!1}if(r!=="all"){let c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||o&&o!==t.state.fetchStatus||s&&!s(t))}function Ld(e,t){let{exact:r,status:n,predicate:o,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ln(t.options.mutationKey)!==Ln(s))return!1}else if(!vi(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||o&&!o(t))}function Ap(e,t){return(t?.queryKeyHashFn||Ln)(e)}function Ln(e){return JSON.stringify(e,(t,r)=>wE(r)?Object.keys(r).sort().reduce((n,o)=>(n[o]=r[o],n),{}):r)}function vi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>vi(e[r],t[r])):!1}var HH=Object.prototype.hasOwnProperty;function Fd(e,t){if(e===t)return e;let r=CT(e)&&CT(t);if(!r&&!(wE(e)&&wE(t)))return t;let o=(r?e:Object.keys(e)).length,s=r?t:Object.keys(t),i=s.length,a=r?new Array(i):{},c=0;for(let p=0;p<i;p++){let l=r?p:s[p],d=e[l],h=t[l];if(d===h){a[l]=d,(r?p<o:HH.call(e,l))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[l]=h;continue}let m=Fd(d,h);a[l]=m,m===d&&c++}return o===i&&c===o?e:a}function xc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}function CT(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wE(e){if(!wT(e))return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(!wT(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wT(e){return Object.prototype.toString.call(e)==="[object Object]"}function vT(e){return new Promise(t=>{Nn.setTimeout(t,e)})}function Ip(e,t,r){if(typeof r.structuralSharing=="function")return r.structuralSharing(e,t);if(r.structuralSharing!==!1){if(process.env.NODE_ENV!=="production")try{return Fd(e,t)}catch(n){throw console.error(`Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${r.queryHash}]: ${n}`),n}return Fd(e,t)}return t}function OT(e,t,r=0){let n=[...e,t];return r&&n.length>r?n.slice(1):n}function TT(e,t,r=0){let n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ki=Symbol();function Ud(e,t){return process.env.NODE_ENV!=="production"&&e.queryFn===ki&&console.error(`Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${e.queryHash}'`),!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===ki?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Pp(e,t){return typeof e=="function"?e(...t):!!e}var WH=class extends Lr{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Zt&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){let e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},gc=new WH;function Mp(){let e,t,r=new Promise((o,s)=>{e=o,t=s});r.status="pending",r.catch(()=>{});function n(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{n({status:"fulfilled",value:o}),e(o)},r.reject=o=>{n({status:"rejected",reason:o}),t(o)},r}var RT=_T;function zH(){let e=[],t=0,r=a=>{a()},n=a=>{a()},o=RT,s=a=>{t?e.push(a):o(()=>{r(a)})},i=()=>{let a=e;e=[],a.length&&o(()=>{n(()=>{a.forEach(c=>{r(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||i()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{o=a}}}var _e=zH();var BH=class extends Lr{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Zt&&window.addEventListener){let t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},yc=new BH;function jH(e){return Math.min(1e3*2**e,3e4)}function kE(e){return(e??"online")==="online"?yc.isOnline():!0}var $d=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function qd(e){let t=!1,r=0,n,o=Mp(),s=()=>o.status!=="pending",i=y=>{if(!s()){let b=new $d(y);h(b),e.onCancel?.(b)}},a=()=>{t=!0},c=()=>{t=!1},p=()=>gc.isFocused()&&(e.networkMode==="always"||yc.isOnline())&&e.canRun(),l=()=>kE(e.networkMode)&&e.canRun(),d=y=>{s()||(n?.(),o.resolve(y))},h=y=>{s()||(n?.(),o.reject(y))},m=()=>new Promise(y=>{n=b=>{(s()||p())&&y(b)},e.onPause?.()}).then(()=>{n=void 0,s()||e.onContinue?.()}),x=()=>{if(s())return;let y,b=r===0?e.initialPromise:void 0;try{y=b??e.fn()}catch(S){y=Promise.reject(S)}Promise.resolve(y).then(d).catch(S=>{if(s())return;let O=e.retry??(Zt?0:3),w=e.retryDelay??jH,P=typeof w=="function"?w(r,S):w,M=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,S);if(t||!M){h(S);return}r++,e.onFail?.(r,S),vT(P).then(()=>p()?void 0:m()).then(()=>{t?h(S):x()})})};return{promise:o,status:()=>o.status,cancel:i,continue:()=>(n?.(),o),cancelRetry:a,continueRetry:c,canStart:l,start:()=>(l()?x():m().then(x),o)}}var Hd=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rp(this.gcTime)&&(this.#e=Nn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zt?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Nn.clearTimeout(this.#e),this.#e=void 0)}};var PT=class extends Hd{#e;#t;#r;#o;#n;#i;#a;constructor(e){super(),this.#a=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#o=e.client,this.#r=this.#o.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=IT(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){let t=IT(this.options);t.data!==void 0&&(this.setState(AT(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){let r=Ip(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(He).catch(He):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Xt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ki||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Dd(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){let a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}process.env.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||console.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));let r=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},o=()=>{let a=Ud(this.options,t),p=(()=>{let l={client:this.#o,queryKey:this.queryKey,meta:this.meta};return n(l),l})();return this.#a=!1,this.options.persister?this.options.persister(a,p,this):a(p)},i=(()=>{let a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#o,state:this.state,fetchFn:o};return n(a),a})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#s({type:"fetch",meta:i.fetchOptions?.meta}),this.#n=qd({initialPromise:t?.initialPromise,fn:i.fetchFn,onCancel:a=>{a instanceof $d&&a.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(a,c)=>{this.#s({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0});try{let a=await this.#n.start();if(a===void 0)throw process.env.NODE_ENV!=="production"&&console.error(`Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`),new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof $d){if(a.silent)return this.#n.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#s({type:"error",error:a}),this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#s(e){let t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...vE(r.data,this.options),fetchMeta:e.meta??null};case"success":let n={...r,...AT(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":let o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),_e.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function vE(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kE(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function AT(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function IT(e){let t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var TE=class extends Lr{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#a=Mp(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#o=void 0;#n;#i;#a;#s;#m;#f;#d;#u;#p;#c;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),MT(this.#t,this.options)?this.#l():this.updateResult(),this.#E())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return OE(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return OE(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#S(),this.#t.removeObserver(this)}setOptions(e){let t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xt(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),t._defaulted&&!xc(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});let n=this.hasListeners();n&&FT(this.#t,r,this.options,t)&&this.#l(),this.updateResult(),n&&(this.#t!==r||Xt(this.options.enabled,this.#t)!==Xt(t.enabled,this.#t)||cn(this.options.staleTime,this.#t)!==cn(t.staleTime,this.#t))&&this.#x();let o=this.#g();n&&(this.#t!==r||Xt(this.options.enabled,this.#t)!==Xt(t.enabled,this.#t)||o!==this.#c)&&this.#y(o)}getOptimisticResult(e){let t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return VH(this,r)&&(this.#o=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#o}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#l({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#o))}#l(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(He)),t}#x(){this.#b();let e=cn(this.options.staleTime,this.#t);if(Zt||this.#o.isStale||!Rp(e))return;let r=Dd(this.#o.dataUpdatedAt,e)+1;this.#u=Nn.setTimeout(()=>{this.#o.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#S(),this.#c=e,!(Zt||Xt(this.options.enabled,this.#t)===!1||!Rp(this.#c)||this.#c===0)&&(this.#p=Nn.setInterval(()=>{(this.options.refetchIntervalInBackground||gc.isFocused())&&this.#l()},this.#c))}#E(){this.#x(),this.#y(this.#g())}#b(){this.#u&&(Nn.clearTimeout(this.#u),this.#u=void 0)}#S(){this.#p&&(Nn.clearInterval(this.#p),this.#p=void 0)}createResult(e,t){let r=this.#t,n=this.options,o=this.#o,s=this.#n,i=this.#i,c=e!==r?e.state:this.#r,{state:p}=e,l={...p},d=!1,h;if(t._optimisticResults){let H=this.hasListeners(),ae=!H&&MT(e,t),re=H&&FT(e,r,t,n);(ae||re)&&(l={...l,...vE(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:m,errorUpdatedAt:x,status:y}=l;h=l.data;let b=!1;if(t.placeholderData!==void 0&&h===void 0&&y==="pending"){let H;o?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(H=o.data,b=!0):H=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,H!==void 0&&(y="success",h=Ip(o?.data,H,t),d=!0)}if(t.select&&h!==void 0&&!b)if(o&&h===s?.data&&t.select===this.#m)h=this.#f;else try{this.#m=t.select,h=t.select(h),h=Ip(o?.data,h,t),this.#f=h,this.#s=null}catch(H){this.#s=H}this.#s&&(m=this.#s,h=this.#f,x=Date.now(),y="error");let S=l.fetchStatus==="fetching",O=y==="pending",w=y==="error",P=O&&S,M=h!==void 0,q={status:y,fetchStatus:l.fetchStatus,isPending:O,isSuccess:y==="success",isError:w,isInitialLoading:P,isLoading:P,data:h,dataUpdatedAt:l.dataUpdatedAt,error:m,errorUpdatedAt:x,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>c.dataUpdateCount||l.errorUpdateCount>c.errorUpdateCount,isFetching:S,isRefetching:S&&!O,isLoadingError:w&&!M,isPaused:l.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:w&&M,isStale:RE(e,t),refetch:this.refetch,promise:this.#a,isEnabled:Xt(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){let H=Y=>{q.status==="error"?Y.reject(q.error):q.data!==void 0&&Y.resolve(q.data)},ae=()=>{let Y=this.#a=q.promise=Mp();H(Y)},re=this.#a;switch(re.status){case"pending":e.queryHash===r.queryHash&&H(re);break;case"fulfilled":(q.status==="error"||q.data!==re.value)&&ae();break;case"rejected":(q.status!=="error"||q.error!==re.reason)&&ae();break}}return q}updateResult(){let e=this.#o,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#d=this.#t),xc(t,e))return;this.#o=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!this.#h.size)return!0;let s=new Set(o??this.#h);return this.options.throwOnError&&s.add("error"),Object.keys(this.#o).some(i=>{let a=i;return this.#o[a]!==e[a]&&s.has(a)})};this.#C({listeners:r()})}#_(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;let t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#E()}#C(e){_e.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#o)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function KH(e,t){return Xt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function MT(e,t){return KH(e,t)||e.state.data!==void 0&&OE(e,t,t.refetchOnMount)}function OE(e,t,r){if(Xt(t.enabled,e)!==!1&&cn(t.staleTime,e)!=="static"){let n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&RE(e,t)}return!1}function FT(e,t,r,n){return(e!==t||Xt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&RE(e,r)}function RE(e,t){return Xt(t.enabled,e)!==!1&&e.isStaleByTime(cn(t.staleTime,e))}function VH(e,t){return!xc(e.getCurrentResult(),t)}function AE(e){return{onFetch:(t,r)=>{let n=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],i=t.state.data?.pageParams||[],a={pages:[],pageParams:[]},c=0,p=async()=>{let l=!1,d=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?l=!0:t.signal.addEventListener("abort",()=>{l=!0}),t.signal)})},h=Ud(t.options,t.fetchOptions),m=async(x,y,b)=>{if(l)return Promise.reject();if(y==null&&x.pages.length)return Promise.resolve(x);let O=(()=>{let L={client:t.client,queryKey:t.queryKey,pageParam:y,direction:b?"backward":"forward",meta:t.options.meta};return d(L),L})(),w=await h(O),{maxPages:P}=t.options,M=b?TT:OT;return{pages:M(x.pages,w,P),pageParams:M(x.pageParams,y,P)}};if(o&&s.length){let x=o==="backward",y=x?GH:DT,b={pages:s,pageParams:i},S=y(n,b);a=await m(b,S,x)}else{let x=e??s.length;do{let y=c===0?i[0]??n.initialPageParam:DT(n,a);if(c>0&&y==null)break;a=await m(a,y),c++}while(c<x)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=p}}}function DT(e,{pages:t,pageParams:r}){let n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function GH(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var NT=class extends Hd{#e;#t;#r;#o;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||IE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#o?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#o=qd({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(s,i)=>{this.#n({type:"failed",failureCount:s,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});let n=this.state.status==="pending",o=!this.#o.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:o}),await this.#r.config.onMutate?.(e,this,r);let i=await this.options.onMutate?.(e,r);i!==this.state.context&&this.#n({type:"pending",context:i,variables:e,isPaused:o})}let s=await this.#o.start();return await this.#r.config.onSuccess?.(s,e,this.state.context,this,r),await this.options.onSuccess?.(s,e,this.state.context,r),await this.#r.config.onSettled?.(s,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(s,null,e,this.state.context,r),this.#n({type:"success",data:s}),s}catch(s){try{throw await this.#r.config.onError?.(s,e,this.state.context,this,r),await this.options.onError?.(s,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,s,e,this.state.context,r),s}finally{this.#n({type:"error",error:s})}}finally{this.#r.runNext(this)}}#n(e){let t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),_e.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function IE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var LT=class extends Lr{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){let n=new NT({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);let t=Wd(e);if(typeof t=="string"){let r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){let t=Wd(e);if(typeof t=="string"){let r=this.#t.get(t);if(r)if(r.length>1){let n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=Wd(e);if(typeof t=="string"){let n=this.#t.get(t)?.find(o=>o.state.status==="pending");return!n||n===e}else return!0}runNext(e){let t=Wd(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){_e.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){let t={exact:!0,...e};return this.getAll().find(r=>Ld(t,r))}findAll(e={}){return this.getAll().filter(t=>Ld(e,t))}notify(e){_e.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(t=>t.state.isPaused);return _e.batch(()=>Promise.all(e.map(t=>t.continue().catch(He))))}};function Wd(e){return e.options.scope?.id}var PE=class extends Lr{#e;#t=void 0;#r;#o;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),xc(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&Ln(t.mutationKey)!==Ln(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(e,t){return this.#o=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#n(){let e=this.#r?.state??IE();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){_e.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#o.onSuccess?.(e.data,t,r,n),this.#o.onSettled?.(e.data,null,t,r,n)):e?.type==="error"&&(this.#o.onError?.(e.error,t,r,n),this.#o.onSettled?.(void 0,e.error,t,r,n))}this.listeners.forEach(t=>{t(this.#t)})})}};var UT=class extends Lr{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){let n=t.queryKey,o=t.queryHash??Ap(n,t),s=this.get(o);return s||(s=new PT({client:e,queryKey:n,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(s)),s}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_e.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(r=>Nd(t,r))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Nd(e,r)):t}notify(e){_e.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){_e.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_e.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}};var ME=class{#e;#t;#r;#o;#n;#i;#a;#s;constructor(e={}){this.#e=e.queryCache||new UT,this.#t=e.mutationCache||new LT,this.#r=e.defaultOptions||{},this.#o=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=gc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=yc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(cn(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{let n=r.data;return[t,n]})}setQueryData(e,t,r){let n=this.defaultQueryOptions({queryKey:e}),s=this.#e.get(n.queryHash)?.state.data,i=kT(t,s);if(i!==void 0)return this.#e.build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return _e.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){let t=this.#e;_e.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){let r=this.#e;return _e.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let r={revert:!0,...t},n=_e.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(n).then(He).catch(He)}invalidateQueries(e,t={}){return _e.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){let r={...t,cancelRefetch:t.cancelRefetch??!0},n=_e.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let s=o.fetch(void 0,r);return r.throwOnError||(s=s.catch(He)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(He)}fetchQuery(e){let t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);let r=this.#e.build(this,t);return r.isStaleByTime(cn(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(He).catch(He)}fetchInfiniteQuery(e){return e.behavior=AE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(He).catch(He)}ensureInfiniteQueryData(e){return e.behavior=AE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return yc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#o.set(Ln(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],r={};return t.forEach(n=>{vi(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Ln(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#n.values()],r={};return t.forEach(n=>{vi(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ap(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ki&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};var Ec=wi(require("react"),1),$T=require("react/jsx-runtime"),FE=Ec.createContext(void 0),Fp=e=>{let t=Ec.useContext(FE);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},DE=({client:e,children:t})=>(Ec.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),(0,$T.jsx)(FE.Provider,{value:e,children:t}));var zd=wi(require("react"),1),qT=zd.createContext(!1),HT=()=>zd.useContext(qT),KG=qT.Provider;var Dp=wi(require("react"),1),QH=require("react/jsx-runtime");function JH(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var YH=Dp.createContext(JH()),WT=()=>Dp.useContext(YH);var zT=wi(require("react"),1);var BT=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},jT=e=>{zT.useEffect(()=>{e.clearReset()},[e])},KT=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&e.data===void 0||Pp(r,[e.error,n]));var VT=e=>{if(e.suspense){let r=o=>o==="static"?o:Math.max(o??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...o)=>r(n(...o)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},GT=(e,t)=>e.isLoading&&e.isFetching&&!t,QT=(e,t)=>e?.suspense&&t.isPending,NE=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});var ms=wi(require("react"),1);function JT(e,t,r){if(process.env.NODE_ENV!=="production"&&(typeof e!="object"||Array.isArray(e)))throw new Error('Bad argument type. Starting with v5, only the "Object" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object');let n=HT(),o=WT(),s=Fp(r),i=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(i),process.env.NODE_ENV!=="production"&&(i.queryFn||console.error(`[${i.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`)),i._optimisticResults=n?"isRestoring":"optimistic",VT(i),BT(i,o),jT(o);let a=!s.getQueryCache().get(i.queryHash),[c]=ms.useState(()=>new t(s,i)),p=c.getOptimisticResult(i),l=!n&&e.subscribed!==!1;if(ms.useSyncExternalStore(ms.useCallback(d=>{let h=l?c.subscribe(_e.batchCalls(d)):He;return c.updateResult(),h},[c,l]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),ms.useEffect(()=>{c.setOptions(i)},[i,c]),QT(i,p))throw NE(i,c,o);if(KT({result:p,errorResetBoundary:o,throwOnError:i.throwOnError,query:s.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw p.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(i,p),i.experimental_prefetchInRender&&!Zt&&GT(p,n)&&(a?NE(i,c,o):s.getQueryCache().get(i.queryHash)?.promise)?.catch(He).finally(()=>{c.updateResult()}),i.notifyOnChangeProps?p:c.trackResult(p)}function Np(e,t){return JT(e,TE,t)}var _o=wi(require("react"),1);function LE(e,t){let r=Fp(t),[n]=_o.useState(()=>new PE(r,e));_o.useEffect(()=>{n.setOptions(e)},[n,e]);let o=_o.useSyncExternalStore(_o.useCallback(i=>n.subscribe(_e.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=_o.useCallback((i,a)=>{n.mutate(i,a).catch(He)},[n]);if(o.error&&Pp(n.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:s,mutateAsync:o.mutate}}var _i=require("@raycast/api");var _E=require("react");var UE="7.7.4";var $E=e=>{console.warn(`\u26A0\uFE0F [uploadthing][deprecated] ${e}`)};var qE=e=>typeof e=="function",u=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,n){return arguments.length>=2?t(r,n):function(o){return t(o,r)}};case 3:return function(r,n,o){return arguments.length>=3?t(r,n,o):function(s){return t(s,r,n)}};case 4:return function(r,n,o,s){return arguments.length>=4?t(r,n,o,s):function(i){return t(i,r,n,o)}};case 5:return function(r,n,o,s,i){return arguments.length>=5?t(r,n,o,s,i):function(a){return t(a,r,n,o,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(n){return t(n,...r)}}}};var N=e=>e;var HE=N,Lp=e=>()=>e,Ur=Lp(!0),er=Lp(!1);var Bd=Lp(void 0),$r=Bd;function f(e,t,r,n,o,s,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return o(n(r(t(e))));case 6:return s(o(n(r(t(e)))));case 7:return i(s(o(n(r(t(e))))));case 8:return a(i(s(o(n(r(t(e)))))));case 9:return c(a(i(s(o(n(r(t(e))))))));default:{let p=arguments[0];for(let l=1;l<arguments.length;l++)p=arguments[l](p);return p}}}var Co=e=>(t,r)=>t===r||e(t,r),ZH=(e,t)=>e===t,XH=()=>ZH;var e3=XH();var WE=u(2,(e,t)=>Co((r,n)=>e(t(r),t(n)))),YT=WE(e3,e=>e.getTime());var ZT=e=>Co((t,r)=>{if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0});var XT="effect/GlobalValue",Up,D=(e,t)=>(Up||(globalThis[XT]??=new Map,Up=globalThis[XT]),Up.has(e)||Up.set(e,t()),Up.get(e));var Ae=e=>typeof e=="string",vt=e=>typeof e=="number",wo=e=>typeof e=="boolean",gs=e=>typeof e=="bigint",Oi=e=>typeof e=="symbol";var un=qE,eR=e=>e===void 0,tR=e=>e!==void 0;var jd=e=>e!==null,rR=e=>!1;var $p=e=>typeof e=="object"&&e!==null,$t=e=>$p(e)||un(e),v=u(2,(e,t)=>$t(e)&&t in e),Ti=u(2,(e,t)=>v(e,"_tag")&&e._tag===t),Ri=e=>e==null,Kd=e=>e!=null;var nR=e=>e instanceof Uint8Array,Vd=e=>e instanceof Date,Ai=e=>v(e,Symbol.iterator),ko=e=>$p(e)&&!Array.isArray(e);var zE=e=>v(e,"then")&&un(e.then);var Ii=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;var oR=Symbol.for("effect/Gen/GenKind");var sR=class{value;constructor(t){this.value=t}get _F(){return N}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[oR]=oR;[Symbol.iterator](){return new Pi(this)}},Pi=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var t3=335903614,r3=4150755663,n3=1481765933,o3=1284865837,s3=9007199254740992,i3=134217728,Gd=class{_state;constructor(t,r,n,o){return Ri(r)&&Ri(t)?(r=Math.random()*4294967295>>>0,t=0):Ri(r)&&(r=t,t=0),Ri(o)&&Ri(n)?(o=this._state?this._state[3]:r3,n=this._state?this._state[2]:t3):Ri(o)&&(o=n,n=0),this._state=new Int32Array([0,0,n>>>0,((o||0)|1)>>>0]),this._next(),iR(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*i3+r)/s3}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;a3(this._state,t,r,n3,o3),iR(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=t>>>18,o=(r>>>18|t<<14)>>>0;n=(n^t)>>>0,o=(o^r)>>>0;let s=(o>>>27|n<<5)>>>0,i=t>>>27,a=(-i>>>0&31)>>>0;return(s>>>i|s<<a)>>>0}};function a3(e,t,r,n,o){let s=(r>>>16)*(o&65535)>>>0,i=(r&65535)*(o>>>16)>>>0,a=(r&65535)*(o&65535)>>>0,c=(r>>>16)*(o>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(c=c+1>>>0),c=c+Math.imul(r,n)>>>0,c=c+Math.imul(t,o)>>>0,e[0]=c,e[1]=a}function iR(e,t,r,n,o){let s=t+n>>>0,i=r+o>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var BE=Symbol.for("effect/Utils/YieldWrap"),Un=class{#e;constructor(t){this.#e=t}[BE](){return this.#e}};function Qd(e){if(typeof e=="object"&&e!==null&&BE in e)return e[BE]();throw new Error(Ii("yieldWrapGet"))}var tr=D("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var aR={effect_internal_function:e=>e()},c3={effect_internal_function:e=>{try{return e()}finally{}}},u3=aR.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,Je=u3?aR.effect_internal_function:c3.effect_internal_function,p3=function*(){}.constructor,cR=e=>$t(e)&&e.constructor===p3;var jE=D(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),F=Symbol.for("effect/Hash"),R=e=>{if(tr.enabled===!0)return 0;switch(typeof e){case"number":return Yd(e);case"bigint":return ne(e.toString(10));case"boolean":return ne(String(e));case"symbol":return ne(String(e));case"string":return ne(e);case"undefined":return ne("undefined");case"function":case"object":return e===null?ne("null"):e instanceof Date?R(e.toISOString()):e instanceof URL?R(e.href):f3(e)?e[F]():Sc(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Sc=e=>(jE.has(e)||jE.set(e,Yd(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),jE.get(e)),z=e=>t=>t*53^e,Jd=e=>e&3221225471|e>>>1&1073741824,f3=e=>v(e,F),Yd=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Jd(t)},ne=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return Jd(t)},d3=(e,t)=>{let r=12289;for(let n=0;n<t.length;n++)r^=f(ne(t[n]),z(R(e[t[n]])));return Jd(r)},Zd=e=>d3(e,Object.keys(e)),rr=e=>{let t=6151;for(let r=0;r<e.length;r++)t=f(t,z(R(e[r])));return Jd(t)},V=function(){if(arguments.length===1){let r=arguments[0];return function(n){return Object.defineProperty(r,F,{value(){return n},enumerable:!1}),n}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,F,{value(){return t},enumerable:!1}),t};var I=Symbol.for("effect/Equal");function T(){return arguments.length===1?e=>Xd(e,arguments[0]):Xd(arguments[0],arguments[1])}function Xd(e,t){if(e===t)return!0;let r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null){if(_c(e)&&_c(t))return R(e)===R(t)&&e[I](t)?!0:tr.enabled&&tr.tester?tr.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(tr.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((n,o)=>Xd(n,t[o]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),o=Object.keys(t);if(n.length===o.length){for(let s of n)if(!(s in t&&Xd(e[s],t[s])))return tr.tester?tr.tester(e,t):!1;return!0}}return tr.tester?tr.tester(e,t):!1}}return tr.enabled&&tr.tester?tr.tester(e,t):!1}var _c=e=>v(e,I),qp=()=>T;var B=Symbol.for("nodejs.util.inspect.custom"),Q=e=>{try{if(v(e,"toJSON")&&un(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Q)}catch{return{}}return $n(e)},Z=e=>JSON.stringify(e,null,2),Fi={toJSON(){return Q(this)},[B](){return this.toJSON()},toString(){return Z(this.toJSON())}},eh=class{[B](){return this.toJSON()}toString(){return Z(this.toJSON())}},vo=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?Hp(e,t):String(e)}catch{return String(e)}},Hp=(e,t)=>{let r=[],n=JSON.stringify(e,(o,s)=>typeof s=="object"&&s!==null?r.includes(s)?void 0:r.push(s)&&(Mi.fiberRefs!==void 0&&uR(s)?s[Wp](Mi.fiberRefs):s):s,t);return r=void 0,n},Wp=Symbol.for("effect/Inspectable/Redactable"),uR=e=>typeof e=="object"&&e!==null&&Wp in e,Mi=D("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),pR=(e,t)=>{let r=Mi.fiberRefs;Mi.fiberRefs=e;try{return t()}finally{Mi.fiberRefs=r}},$n=e=>uR(e)&&Mi.fiberRefs!==void 0?e[Wp](Mi.fiberRefs):e;var _=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let n=0,o=t.length;n<o;n++)r=t[n](r);return r}}};var Di="Async",Ni="Commit",De="Failure",Cc="OnFailure",wc="OnSuccess",kc="OnSuccessAndFailure",Ne="Success",th="Sync";var ys="UpdateRuntimeFlags",vc="While",Li="Iterator",rh="WithRuntime",Oc="Yield",zp="RevertFlags";var h3="3.17.7",jp=()=>h3;var fR=Symbol.for("effect/Effect"),dR=Symbol.for("effect/Stream"),hR=Symbol.for("effect/Sink"),mR=Symbol.for("effect/Channel"),Es={_R:e=>e,_E:e=>e,_A:e=>e,_V:jp()},m3={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},x3={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Oo={[fR]:Es,[dR]:Es,[hR]:m3,[mR]:x3,[I](e){return this===e},[F](){return V(this,Sc(this))},[Symbol.iterator](){return new Pi(new Un(this))},pipe(){return _(this,arguments)}},Ui={[F](){return V(this,Zd(this))},[I](e){let t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(let n of t)if(!(n in e&&T(this[n],e[n])))return!1;return!0}},ln={...Oo,_op:Ni},KE={...ln,...Ui},xR=(function(){function e(){}return e.prototype=ln,e})();var gR=Symbol.for("effect/Option"),yR={...Oo,[gR]:{_A:e=>e},[B](){return this.toJSON()},toString(){return Z(this.toJSON())}},g3=Object.assign(Object.create(yR),{_tag:"Some",_op:"Some",[I](e){return nh(e)&&QE(e)&&T(this.value,e.value)},[F](){return V(this,z(R(this._tag))(R(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Q(this.value)}}}),y3=R("None"),E3=Object.assign(Object.create(yR),{_tag:"None",_op:"None",[I](e){return nh(e)&&GE(e)},[F](){return y3},toJSON(){return{_id:"Option",_tag:this._tag}}}),nh=e=>v(e,gR),GE=e=>e._tag==="None",QE=e=>e._tag==="Some",Kp=Object.create(E3),Tc=e=>{let t=Object.create(g3);return t.value=e,t};var JE=Symbol.for("effect/Either"),bR={...Oo,[JE]:{_R:e=>e},[B](){return this.toJSON()},toString(){return Z(this.toJSON())}},b3=Object.assign(Object.create(bR),{_tag:"Right",_op:"Right",[I](e){return oh(e)&&ZE(e)&&T(this.right,e.right)},[F](){return z(R(this._tag))(R(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Q(this.right)}}}),S3=Object.assign(Object.create(bR),{_tag:"Left",_op:"Left",[I](e){return oh(e)&&YE(e)&&T(this.left,e.left)},[F](){return z(R(this._tag))(R(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Q(this.left)}}}),oh=e=>v(e,JE),YE=e=>e._tag==="Left",ZE=e=>e._tag==="Right",SR=e=>{let t=Object.create(S3);return t.left=e,t},_R=e=>{let t=Object.create(b3);return t.right=e,t};var $=_R;var U=SR;var XE=e=>{if(un(e))try{return $(e())}catch(t){return U(t)}else try{return $(e.try())}catch(t){return U(e.catch(t))}};var eb=oh,Ie=YE,Ot=ZE;var CR=u(2,(e,{onLeft:t,onRight:r})=>Ie(e)?U(t(e.left)):$(r(e.right))),Rc=u(2,(e,t)=>Ie(e)?U(t(e.left)):$(e.right)),wR=u(2,(e,t)=>Ot(e)?$(t(e.right)):U(e.left)),ct=u(2,(e,{onLeft:t,onRight:r})=>Ie(e)?t(e.left):r(e.right));var kR=ct({onLeft:N,onRight:N});var tb=u(2,(e,t)=>{if(Ot(e))return e.right;throw t(e.left)}),vR=tb(()=>new Error("getOrThrow called on a Left"));var rb=e=>e.length>0;var OR=e=>(t,r)=>t===r?0:e(t,r);var TR=OR((e,t)=>e<t?-1:1);var sh=u(2,(e,t)=>OR((r,n)=>e(t(r),t(n))));var nb=e=>u(2,(t,r)=>e(t,r)===1);var E=()=>Kp,k=Tc,RR=nh,me=GE,oe=QE,ie=u(2,(e,{onNone:t,onSome:r})=>me(e)?t():r(e.value));var ue=u(2,(e,t)=>me(e)?t():e.value),qr=u(2,(e,t)=>me(e)?t():e),AR=u(2,(e,t)=>me(e)?k(t()):e);var Hn=e=>e==null?E():k(e);var or=ue(Bd),IR=e=>(...t)=>{try{return k(e(...t))}catch{return E()}};var Tt=u(2,(e,t)=>me(e)?E():k(t(e.value)));var qt=u(2,(e,t)=>me(e)?E():t(e.value));var PR=u(2,(e,t)=>me(e)?E():Hn(t(e.value)));var MR=e=>{if(Symbol.iterator in e){let r=[];for(let n of e){if(me(n))return E();r.push(n.value)}return k(r)}let t={};for(let r of Object.keys(e)){let n=e[r];if(me(n))return E();t[r]=n.value}return k(t)};var k3=qt,Ac=u(2,(e,t)=>k3(e,r=>t(r)?Tc(r):Kp)),FR=e=>Co((t,r)=>me(t)?me(r):me(r)?!1:e(t.value,r.value));var v3=e=>u(2,(t,r)=>me(t)?!1:e(t.value,r)),O3=qp(),DR=v3(O3),NR=u(2,(e,t)=>me(e)?!1:t(e.value));var LR=(...e)=>e;var UR=u(2,(e,t)=>{let r={...e};for(let n of R3(e))r[n]=t(e[n],n);return r});var R3=e=>Object.keys(e);var Ic=(...e)=>e,$i=e=>new Array(e),sb=u(2,(e,t)=>{let r=Math.max(1,Math.floor(e)),n=new Array(r);for(let o=0;o<r;o++)n[o]=t(o);return n});var te=e=>Array.isArray(e)?e:Array.from(e),Ht=e=>Array.isArray(e)?e:[e];var ib=u(2,(e,{onEmpty:t,onNonEmpty:r})=>Ee(e)?r(e):t()),$R=u(2,(e,{onEmpty:t,onNonEmpty:r})=>Ee(e)?r(Ye(e),fn(e)):t());var Pc=u(2,(e,t)=>[t,...e]);var Vp=u(2,(e,t)=>[...e,t]),Gp=u(2,(e,t)=>te(e).concat(te(t)));var ih=Array.isArray,I3=e=>e.length===0,ab=I3,bs=rb,Ee=rb;var qR=(e,t)=>e<0||e>=t.length,P3=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),M3=u(2,(e,t)=>{let r=Math.floor(t);return qR(r,e)?E():k(e[r])}),ah=u(2,(e,t)=>{let r=Math.floor(t);if(qR(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var To=M3(0),Ye=ah(0),ch=e=>Ee(e)?k(cb(e)):E(),cb=e=>e[e.length-1];var fn=e=>e.slice(1);var F3=(e,t)=>{let r=0;for(let n of e){if(!t(n,r))break;r++}return r},HR=u(2,(e,t)=>lb(e,F3(e,t))),WR=u(2,(e,t)=>{let r=te(e);return r.slice(P3(t,r),r.length)});var ub=e=>Array.from(e).reverse(),Ro=u(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var pb=u(2,(e,t)=>zR(e,t,LR)),zR=u(3,(e,t,r)=>{let n=te(e),o=te(t);if(Ee(n)&&Ee(o)){let s=[r(Ye(n),Ye(o))],i=Math.min(n.length,o.length);for(let a=1;a<i;a++)s[a]=r(n[a],o[a]);return s}return[]});var D3=qp();var lb=u(2,(e,t)=>{let r=Array.from(e),n=Math.floor(t);return Ee(r)?n>=1?N3(r,n):[[],r]:[r,[]]}),N3=u(2,(e,t)=>{let r=Math.max(1,Math.floor(t));return r>=e.length?[Mc(e),[]]:[Pc(e.slice(1,r),Ye(e)),e.slice(r)]});var Mc=e=>e.slice();var L3=u(3,(e,t,r)=>{let n=te(e),o=te(t);return Ee(n)?Ee(o)?BR(r)(Gp(n,o)):n:o}),Ao=u(2,(e,t)=>L3(e,t,D3));var Wt=()=>[],_t=e=>[e],Hr=u(2,(e,t)=>e.map(t)),Io=u(2,(e,t)=>{if(ab(e))return[];let r=[];for(let n=0;n<e.length;n++){let o=t(e[n],n);for(let s=0;s<o.length;s++)r.push(o[s])}return r}),uh=Io(N),Qp=u(2,(e,t)=>{let r=te(e),n=[];for(let o=0;o<r.length;o++){let s=t(r[o],o);oe(s)&&n.push(s.value)}return n});var ph=u(2,(e,t)=>{let r=te(e),n=[];for(let o=0;o<r.length;o++)t(r[o],o)&&n.push(r[o]);return n});var Wn=u(3,(e,t,r)=>te(e).reduce((n,o,s)=>r(n,o,s),t));var fb=(e,t)=>{let r=[],n=e,o;for(;oe(o=t(n));){let[s,i]=o.value;r.push(s),n=i}return r};var Po=ZT;var BR=u(2,(e,t)=>{let r=te(e);if(Ee(r)){let n=[Ye(r)],o=fn(r);for(let s of o)n.every(i=>!t(s,i))&&n.push(s);return n}return[]}),db=e=>BR(e,qp());var zn=u(2,(e,t)=>te(e).join(t));var mb=Symbol.for("effect/Context/Tag"),Jp=Symbol.for("effect/Context/Reference"),U3="effect/STM",$3=Symbol.for(U3),xb={...Oo,_op:"Tag",[$3]:Es,[mb]:{_Service:e=>e,_Identifier:e=>e},toString(){return Z(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[B](){return this.toJSON()},of(e){return e},context(e){return Eb(this,e)}},q3={...xb,[Jp]:Jp},jR=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;let n=Object.create(xb);return Object.defineProperty(n,"stack",{get(){return r.stack}}),n.key=e,n},KR=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;function n(){}return Object.setPrototypeOf(n,xb),n.key=e,Object.defineProperty(n,"stack",{get(){return r.stack}}),n},VR=()=>(e,t)=>{let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=new Error;Error.stackTraceLimit=r;function o(){}return Object.setPrototypeOf(o,q3),o.key=e,o.defaultValue=t.defaultValue,Object.defineProperty(o,"stack",{get(){return n.stack}}),o},gb=Symbol.for("effect/Context"),H3={[gb]:{_Services:e=>e},[I](e){if(yb(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!T(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[F](){return V(this,Yd(this.unsafeMap.size))},pipe(){return _(this,arguments)},toString(){return Z(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Q)}},[B](){return this.toJSON()}},Ss=e=>{let t=Object.create(H3);return t.unsafeMap=e,t},W3=e=>{let t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let n=r[2].match(/at (.*)/);n&&(t.message=t.message+` (defined at ${n[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},yb=e=>v(e,gb),GR=e=>v(e,mb),QR=e=>v(e,Jp),z3=Ss(new Map),JR=()=>z3,Eb=(e,t)=>Ss(new Map([[e.key,t]])),YR=u(3,(e,t,r)=>{let n=new Map(e.unsafeMap);return n.set(t.key,r),Ss(n)}),hb=D("effect/Context/defaultValueCache",()=>new Map),bb=e=>{if(hb.has(e.key))return hb.get(e.key);let t=e.defaultValue();return hb.set(e.key,t),t},ZR=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):bb(t),Sb=u(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Jp in t)return bb(t);throw W3(t)}return e.unsafeMap.get(t.key)}),XR=Sb;var e0=u(2,(e,t)=>e.unsafeMap.has(t.key)?Tc(e.unsafeMap.get(t.key)):QR(t)?Tc(bb(t)):Kp),t0=u(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[n,o]of t.unsafeMap)r.set(n,o);return Ss(r)});var ot=jR;var n0=yb,lh=GR;var gr=JR,Fc=Eb,zt=YR,st=XR;var Dc=Sb,Bn=e0,yr=t0;var Nc=KR,Wr=VR;var o0=Oo,fh=ln;var B3=xR;var dn=class extends B3{};var j3=Symbol.for("effect/Micro"),dh=Symbol.for("effect/Micro/MicroExit");var s0=Symbol.for("effect/Micro/MicroCause");var K3={_E:N},Yp=class extends globalThis.Error{_tag;traces;[s0];constructor(t,r,n){let o=`MicroCause.${t}`,s,i,a;if(r instanceof globalThis.Error){s=`(${o}) ${r.name}`,i=r.message;let c=i.split(`
`).length;a=r.stack?`(${o}) ${r.stack.split(`
`).slice(0,c+3).join(`
`)}`:`${s}: ${i}`}else s=o,i=vo(r,0),a=`${s}: ${i}`;n.length>0&&(a+=`
    ${n.join(`
    `)}`),super(i),this._tag=t,this.traces=n,this[s0]=K3,this.name=s,this.stack=a}pipe(){return _(this,arguments)}toString(){return this.stack}[B](){return this.stack}},Cb=class extends Yp{error;constructor(t,r=[]){super("Fail",t,r),this.error=t}},u0=(e,t=[])=>new Cb(e,t),wb=class extends Yp{defect;constructor(t,r=[]){super("Die",t,r),this.defect=t}},p0=(e,t=[])=>new wb(e,t),kb=class extends Yp{constructor(t=[]){super("Interrupt","interrupted",t)}},l0=(e=[])=>new kb(e);var f0=e=>e._tag==="Interrupt";var V3=u(2,(e,t)=>{let r=[...e.traces,t];switch(e._tag){case"Die":return p0(e.defect,r);case"Interrupt":return l0(r);case"Fail":return u0(e.error,r)}}),i0=Symbol.for("effect/Micro/MicroFiber"),G3={_A:N,_E:N},hh=class{context;interruptible;[i0];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(t,r=!0){this.context=t,this.interruptible=r,this[i0]=G3}getRef(t){return ZR(this.context,t)}addObserver(t){return this._exit?(t(this._exit),$r):(this._observers.push(t),()=>{let r=this._observers.indexOf(t);r>=0&&this._observers.splice(r,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(Pb))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){let o=this._yielded;this._yielded=void 0,o()}let r=this.runLoop(t);if(r===Uc)return;let n=a0.interruptChildren&&a0.interruptChildren(this);if(n!==void 0)return this.evaluate(_s(n,()=>r));this._exit=r;for(let o=0;o<this._observers.length;o++)this._observers[o](r);this._observers.length=0}runLoop(t){let r=!1,n=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!r&&this.getRef(zc).shouldYield(this)){r=!0;let o=n;n=_s(X3,()=>o)}if(n=n[mh](this),n===Uc){let o=this._yielded;return dh in o?(this._yielded=void 0,o):Uc}}}catch(o){return v(n,mh)?Eh(o):Eh(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`)}}getCont(t){for(;;){let r=this._stack.pop();if(!r)return;let n=r[xh]&&r[xh](this);if(n)return{[t]:n};if(r[t])return r}}_yielded=void 0;yieldWith(t){return this._yielded=t,Uc}children(){return this._children??=new Set}},a0=D("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0}));var Q3=e=>Wc(()=>{for(let n of e)n.unsafeInterrupt();let t=e[Symbol.iterator](),r=Wc(()=>{let n=t.next();for(;!n.done;){if(n.value.unsafePoll()){n=t.next();continue}let o=n.value;return x0(s=>{o.addObserver(i=>{s(r)})})}return qi});return r}),Tb=Symbol.for("effect/Micro/identifier"),be=Symbol.for("effect/Micro/args"),mh=Symbol.for("effect/Micro/evaluate"),Mo=Symbol.for("effect/Micro/successCont"),$c=Symbol.for("effect/Micro/failureCont"),xh=Symbol.for("effect/Micro/ensureCont"),Uc=Symbol.for("effect/Micro/Yield"),J3={_A:N,_E:N,_R:N},d0={...o0,_op:"Micro",[j3]:J3,pipe(){return _(this,arguments)},[Symbol.iterator](){return new Pi(new Un(this))},toJSON(){return{_id:"Micro",op:this[Tb],...be in this?{args:this[be]}:void 0}},toString(){return Z(this)},[B](){return Z(this)}};function Y3(e){return Eh("Micro.evaluate: Not implemented")}var Sh=e=>({...d0,[Tb]:e.op,[mh]:e.eval??Y3,[Mo]:e.contA,[$c]:e.contE,[xh]:e.ensure}),Do=e=>{let t=Sh(e);return function(){let r=Object.create(t);return r[be]=e.single===!1?arguments:arguments[0],r}},h0=e=>{let t={...Sh(e),[dh]:dh,_tag:e.op,get[e.prop](){return this[be]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[be]}},[I](r){return sW(r)&&r._tag===e.op&&T(this[be],r[be])},[F](){return V(this,z(ne(e.op))(R(this[be])))}};return function(r){let n=Object.create(t);return n[be]=r,n[Mo]=void 0,n[$c]=void 0,n[xh]=void 0,n}},Fo=h0({op:"Success",prop:"value",eval(e){let t=e.getCont(Mo);return t?t[Mo](this[be],e):e.yieldWith(this)}}),qc=h0({op:"Failure",prop:"cause",eval(e){let t=e.getCont($c);for(;f0(this[be])&&t&&e.interruptible;)t=e.getCont($c);return t?t[$c](this[be],e):e.yieldWith(this)}}),gh=e=>qc(u0(e)),Hc=Do({op:"Sync",eval(e){let t=this[be](),r=e.getCont(Mo);return r?r[Mo](t,e):e.yieldWith(Ch(t))}}),Wc=Do({op:"Suspend",eval(e){return this[be]()}}),Z3=Do({op:"Yield",eval(e){let t=!1;return e.getRef(zc).scheduleTask(()=>{t||e.evaluate(qi)},this[be]??0),e.yieldWith(()=>{t=!0})}}),X3=Z3(0);var yh=Fo(void 0);var Rb=e=>m0(function(t,r){try{e.try(r).then(n=>t(Fo(n)),n=>t(gh(e.catch(n))))}catch(n){t(gh(e.catch(n)))}},e.try.length!==0),_h=Do({op:"WithMicroFiber",eval(e){return this[be](e)}});var m0=Do({op:"Async",single:!1,eval(e){let t=this[be][0],r=!1,n=!1,o=this[be][1]?new AbortController:void 0,s=t(i=>{r||(r=!0,n?e.evaluate(i):n=i)},o?.signal);return n!==!1?n:(n=!0,e._yielded=()=>{r=!0},o===void 0&&s===void 0||e._stack.push(eW(()=>(r=!0,o?.abort(),s??qi))),Uc)}}),eW=Do({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(Mb(!0)))},contE(e,t){return f0(e)?_s(this[be](),()=>qc(e)):qc(e)}}),x0=e=>m0(e,e.length>=2);var Ab=(...e)=>Wc(()=>tW(e.length===1?e[0]():e[1].call(e[0]))),tW=Do({op:"Iterator",contA(e,t){let r=this[be].next(e);return r.done?Fo(r.value):(t._stack.push(this),Qd(r.value))},eval(e){return this[Mo](void 0,e)}}),rW=u(2,(e,t)=>Ib(e,r=>t));var nW=e=>lW(e,{onFailure:wh,onSuccess:Ch});var _s=u(2,(e,t)=>{let r=Object.create(oW);return r[be]=e,r[Mo]=t,r}),oW=Sh({op:"OnSuccess",eval(e){return e._stack.push(this),this[be]}});var Ib=u(2,(e,t)=>_s(e,r=>Fo(t(r)))),sW=e=>v(e,dh),Ch=Fo,wh=qc,Pb=wh(l0());var Eh=e=>wh(p0(e));var iW=e=>e._tag==="Failure";var qi=Ch(void 0),aW=e=>{for(let t of e)if(t._tag==="Failure")return t;return qi},cW="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),bh=class{tasks=[];running=!1;scheduleTask(t,r){this.tasks.push(t),this.running||(this.running=!0,cW(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let t=this.tasks;this.tasks=[];for(let r=0,n=t.length;r<n;r++)t[r]()}shouldYield(t){return t.currentOpCount>=t.getRef(vb)}flush(){for(;this.tasks.length>0;)this.runTasks()}};var uW=u(2,(e,t)=>_h(r=>{let n=r.context;return r.context=t(n),E0(e,()=>(r.context=n,yh))}));var g0=u(2,(e,t)=>uW(e,yr(t)));var vb=class extends Wr()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){},Ob=class extends Wr()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){},zc=class extends Wr()("effect/Micro/currentScheduler",{defaultValue:()=>new bh}){};var kh=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;function r(o,s){let i=t.stack;if(!i)return s;let a=i.split(`
`)[2]?.trim().replace(/^at /,"");if(!a)return s;let c=a.match(/\((.*)\)$/);return V3(s,`at ${o} (${c?c[1]:a})`)}let n=o=>s=>dW(s,i=>qc(r(o,i)));return arguments.length===2?n(arguments[1])(arguments[0]):n(arguments[0])},y0=u(2,(e,t)=>{let r=Object.create(pW);return r[be]=e,r[Mo]=t.onSuccess,r[$c]=t.onFailure,r}),pW=Sh({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[be]}}),lW=u(2,(e,t)=>y0(e,{onFailure:r=>Hc(()=>t.onFailure(r)),onSuccess:r=>Hc(()=>t.onSuccess(r))}));var _b=Symbol.for("effect/Micro/MicroScope");var c0=class e{[_b];state={_tag:"Open",finalizers:new Set};constructor(){this[_b]=_b}unsafeAddFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.add(t)}addFinalizer(t){return Wc(()=>this.state._tag==="Open"?(this.state.finalizers.add(t),yh):t(this.state.exit))}unsafeRemoveFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.delete(t)}close(t){return Wc(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:t},_s(gW(r,n=>nW(n(t))),aW)}return yh})}get fork(){return Hc(()=>{let t=new e;if(this.state._tag==="Closed")return t.state=this.state,t;function r(n){return t.close(n)}return this.state.finalizers.add(r),t.unsafeAddFinalizer(n=>Hc(()=>this.unsafeRemoveFinalizer(r))),t})}};var E0=u(2,(e,t)=>mW(r=>y0(r(e),{onFailure:n=>_s(t(wh(n)),()=>qc(n)),onSuccess:n=>_s(t(Ch(n)),()=>Fo(n))})));var fW=u(3,(e,t,r)=>E0(e,n=>t(n)?r(n):qi)),dW=u(2,(e,t)=>fW(e,iW,r=>t(r.cause)));var Mb=Do({op:"SetInterruptible",ensure(e){if(e.interruptible=this[be],e._interrupted&&e.interruptible)return()=>Pb}}),hW=e=>_h(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(Mb(!1)),t._interrupted?Pb:e)),mW=e=>_h(t=>t.interruptible?(t.interruptible=!1,t._stack.push(Mb(!0)),e(hW)):e(N));var xW=Do({op:"While",contA(e,t){return this[be].step(e),this[be].while()?(t._stack.push(this),this[be].body()):qi},eval(e){return this[be].while()?(e._stack.push(this),this[be].body()):qi}}),gW=(e,t,r)=>_h(n=>{let o=r?.concurrency==="inherit"?n.getRef(Ob):r?.concurrency??1,s=o==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,o),i=te(e),a=i.length;if(a===0)return r?.discard?yh:Fo([]);let c=r?.discard?void 0:new Array(a),p=0;return s===1?rW(xW({while:()=>p<i.length,body:()=>t(i[p],p),step:c?l=>c[p++]=l:l=>p++}),c):x0(l=>{let d=new Set,h,m=0,x=0,y=!1,b=!1;function S(){for(y=!0;m<s&&p<a;){let O=p,w=i[O];p++,m++;try{let P=yW(n,t(w,O),!0,!0);d.add(P),P.addObserver(M=>{d.delete(P),!b&&(M._tag==="Failure"?h===void 0&&(h=M,a=p,d.forEach(L=>L.unsafeInterrupt())):c!==void 0&&(c[O]=M.value),x++,m--,x===a?l(h??Fo(c)):!y&&m<s&&S())})}catch(P){h=Eh(P),a=p,d.forEach(M=>M.unsafeInterrupt())}}y=!1}return S(),Wc(()=>(b=!0,p=a,Q3(d)))})});var yW=(e,t,r=!1,n=!1)=>{let o=new hh(e.context,e.interruptible);return n||(e.children().add(o),o.addObserver(()=>e.children().delete(o))),r?o.evaluate(t):e.getRef(zc).scheduleTask(()=>o.evaluate(t),0),o};var b0=(e,t)=>{let r=new hh(zc.context(t?.scheduler??new bh));if(r.evaluate(e),t?.signal)if(t.signal.aborted)r.unsafeInterrupt();else{let n=()=>r.unsafeInterrupt();t.signal.addEventListener("abort",n,{once:!0}),r.addObserver(()=>t.signal.removeEventListener("abort",n))}return r};var EW=(function(){class e extends globalThis.Error{}return Object.assign(e.prototype,d0,Ui,{[Tb]:"Failure",[mh](){return gh(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[B](){let t=this.stack;return t?`${this.toString()}
${t.split(`
`).slice(1).join(`
`)}`:this.toString()}}),e})(),Fb=(function(){return class extends EW{constructor(e){super(),e&&Object.assign(this,e)}}})(),zr=e=>{class t extends Fb{_tag=e}return t.prototype.name=e,t};var _0={"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applixware":{source:"apache",extensions:["aw"]},"application/atom+xml":{source:"iana",extensions:["atom"]},"application/atomcat+xml":{source:"iana",extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",extensions:["rsat"]},"application/calendar+xml":{source:"iana",extensions:["xcs"]},"application/ccxml+xml":{source:"iana",extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cpl+xml":{source:"iana",extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/dash+xml":{source:"iana",extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",extensions:["mpp"]},"application/davmount+xml":{source:"iana",extensions:["davmount"]},"application/dicom":{source:"iana",extensions:["dcm"]},"application/docbook+xml":{source:"apache",extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",extensions:["xdssc"]},"application/ecmascript":{source:"iana",extensions:["es","ecma"]},"application/emma+xml":{source:"iana",extensions:["emma"]},"application/emotionml+xml":{source:"iana",extensions:["emotionml"]},"application/epub+zip":{source:"iana",extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"]},"application/express":{source:"iana",extensions:["exp"]},"application/fdt+xml":{source:"iana",extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/geo+json":{source:"iana",extensions:["geojson"]},"application/gml+xml":{source:"iana",extensions:["gml"]},"application/gpx+xml":{source:"apache",extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/inkml+xml":{source:"iana",extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/its+xml":{source:"iana",extensions:["its"]},"application/java-archive":{source:"apache",extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",extensions:["ser"]},"application/java-vm":{source:"apache",extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",extensions:["json","map"]},"application/jsonml+json":{source:"apache",extensions:["jsonml"]},"application/ld+json":{source:"iana",extensions:["jsonld"]},"application/lgr+xml":{source:"iana",extensions:["lgr"]},"application/lost+xml":{source:"iana",extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/mads+xml":{source:"iana",extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",extensions:["mscml"]},"application/metalink+xml":{source:"apache",extensions:["metalink"]},"application/metalink4+xml":{source:"iana",extensions:["meta4"]},"application/mets+xml":{source:"iana",extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",extensions:["musd"]},"application/mods+xml":{source:"iana",extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/msword":{source:"iana",extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/node":{source:"iana",extensions:["cjs"]},"application/octet-stream":{source:"iana",extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/oebps-package+xml":{source:"iana",extensions:["opf"]},"application/ogg":{source:"iana",extensions:["ogx"]},"application/omdoc+xml":{source:"apache",extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",extensions:["xer"]},"application/pdf":{source:"iana",extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",extensions:["pls"]},"application/postscript":{source:"iana",extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/pskc+xml":{source:"iana",extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/resource-lists+xml":{source:"iana",extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",extensions:["rld"]},"application/rls-services+xml":{source:"iana",extensions:["rs"]},"application/route-apd+xml":{source:"iana",extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",extensions:["sls"]},"application/route-usd+xml":{source:"iana",extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rsd+xml":{source:"apache",extensions:["rsd"]},"application/rss+xml":{source:"apache",extensions:["rss"]},"application/rtf":{source:"iana",extensions:["rtf"]},"application/sbml+xml":{source:"iana",extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/senml+xml":{source:"iana",extensions:["senmlx"]},"application/sensml+xml":{source:"iana",extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/shf+xml":{source:"iana",extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/smil+xml":{source:"iana",extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",extensions:["grxml"]},"application/sru+xml":{source:"iana",extensions:["sru"]},"application/ssdl+xml":{source:"apache",extensions:["ssdl"]},"application/ssml+xml":{source:"iana",extensions:["ssml"]},"application/swid+xml":{source:"iana",extensions:["swidtag"]},"application/tei+xml":{source:"iana",extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.xdp+xml":{source:"iana",extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.android.package-archive":{source:"apache",extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apple.installer+xml":{source:"iana",extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.balsamiq.bmml+xml":{source:"iana",extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.chemdraw+xml":{source:"iana",extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.citationstyles.style+xml":{source:"iana",extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.dart":{source:"iana",extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.eszigno3+xml":{source:"iana",extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-earth.kml+xml":{source:"iana",extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+xml":{source:"iana",extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+xml":{source:"iana",extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.mozilla.xul+xml":{source:"iana",extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-excel":{source:"iana",extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-powerpoint":{source:"iana",extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma.dd2+xml":{source:"iana",extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.sun.wadl+xml":{source:"iana",extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",extensions:["zaz"]},"application/voicexml+xml":{source:"iana",extensions:["vxml"]},"application/wasm":{source:"iana",extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wsdl+xml":{source:"iana",extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",extensions:["bz"]},"application/x-bzip2":{source:"apache",extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",extensions:["res"]},"application/x-dvi":{source:"apache",extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",extensions:["jnlp"]},"application/x-latex":{source:"apache",extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",extensions:["xlf"]},"application/x-xpinstall":{source:"apache",extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/xaml+xml":{source:"apache",extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",extensions:["xns"]},"application/xenc+xml":{source:"iana",extensions:["xenc"]},"application/xhtml+xml":{source:"iana",extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",extensions:["xlf"]},"application/xml":{source:"iana",extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",extensions:["dtd"]},"application/xop+xml":{source:"iana",extensions:["xop"]},"application/xproc+xml":{source:"apache",extensions:["xpl"]},"application/xslt+xml":{source:"iana",extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",extensions:["xspf"]},"application/xv+xml":{source:"iana",extensions:["mxml","xhvml","xvml","xvm"]},"application/yaml":{source:"iana",extensions:["yaml","yml"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yin+xml":{source:"iana",extensions:["yin"]},"application/zip":{source:"iana",extensions:["zip"]}};var C0={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}};var w0={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}};var k0={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}};var v0={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};var bW={"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",extensions:["otf"]},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/rfc822":{source:"iana",extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/gltf+json":{source:"iana",extensions:["gltf"]},"model/gltf-binary":{source:"iana",extensions:["glb"]},"model/iges":{source:"iana",extensions:["igs","iges"]},"model/mesh":{source:"iana",extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana",extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",extensions:["stpx"]},"model/step+zip":{source:"iana",extensions:["stpz"]},"model/step-xml+zip":{source:"iana",extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]}},SW={..._0,...C0,...w0,...k0,...v0,...bW},Db=SW;function _W(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)}var CW={},O0={};function wW(){return kW(CW,O0),O0}function R0(e){if(!e||typeof e!="string")return!1;let t=_W("x."+e).toLowerCase().substring(1);return t&&wW()[t]||!1}var T0=!1;function kW(e,t){if(T0)return;T0=!0;let r=["nginx","apache",void 0,"iana"];Object.keys(Db).forEach(n=>{let o=Db[n],s=o.extensions;if(s.length){e[n]=s;for(let i of s){if(i in t){let a=r.indexOf(Db[t[i]].source),c=r.indexOf(o.source);if(t[i]!=="application/octet-stream"&&(a>c||a===c&&t[i].startsWith("application/")))continue}t[i]=n}}})}var Nb=Symbol.for("effect/Encoding/errors/Decode"),Zp=(e,t)=>{let r={_tag:"DecodeException",[Nb]:Nb,input:e};return Ae(t)&&(r.message=t),r};var Lb=new TextEncoder;var Ub=e=>{let t=e.length,r="",n;for(n=2;n<t;n+=3)r+=No[e[n-2]>>2],r+=No[(e[n-2]&3)<<4|e[n-1]>>4],r+=No[(e[n-1]&15)<<2|e[n]>>6],r+=No[e[n]&63];return n===t+1&&(r+=No[e[n-2]>>2],r+=No[(e[n-2]&3)<<4],r+="=="),n===t&&(r+=No[e[n-2]>>2],r+=No[(e[n-2]&3)<<4|e[n-1]>>4],r+=No[(e[n-1]&15)<<2],r+="="),r},I0=e=>{let t=OW(e),r=t.length;if(r%4!==0)return U(Zp(t,`Length must be a multiple of 4, but is ${r}`));let n=t.indexOf("=");if(n!==-1&&(n<r-2||n===r-2&&t[r-1]!=="="))return U(Zp(t,"Found a '=' character, but it is not at the end"));try{let o=t.endsWith("==")?2:t.endsWith("=")?1:0,s=new Uint8Array(3*(r/4)-o);for(let i=0,a=0;i<r;i+=4,a+=3){let c=vh(t.charCodeAt(i))<<18|vh(t.charCodeAt(i+1))<<12|vh(t.charCodeAt(i+2))<<6|vh(t.charCodeAt(i+3));s[a]=c>>16,s[a+1]=c>>8&255,s[a+2]=c&255}return $(s)}catch(o){return U(Zp(t,o instanceof Error?o.message:"Invalid input"))}},OW=e=>e.replace(/[\n\r]/g,"");function vh(e){if(e>=A0.length)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=A0[e];if(t===255)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}var No=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],A0=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];var $b=e=>{let t="";for(let r=0;r<e.length;++r)t+=RW[e[r]];return t};var RW=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var P0=e=>typeof e=="string"?Ub(Lb.encode(e)):Ub(e),M0=e=>I0(e);var qb=e=>typeof e=="string"?$b(Lb.encode(e)):$b(e);var D0="effect/Redacted",Bc=D("effect/Redacted/redactedRegistry",()=>new WeakMap),Hb=Symbol.for(D0),IW={[Hb]:{_A:e=>e},pipe(){return _(this,arguments)},toString(){return"<redacted>"},toJSON(){return"<redacted>"},[B](){return"<redacted>"},[F](){return f(R(D0),z(R(Bc.get(this))),V(this))},[I](e){return Wb(e)&&T(Bc.get(this),Bc.get(e))}},Wb=e=>v(e,Hb),N0=e=>{let t=Object.create(IW);return Bc.set(t,e),t},L0=e=>{if(Bc.has(e))return Bc.get(e);throw new Error("Unable to get redacted value")};var U0=Wb,Hi=N0,Lo=L0;var $0=e=>Co((t,r)=>e(Lo(t),Lo(r)));var Xp={alphabet:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",minLength:0,blocklist:new Set(["0rgasm","1d10t","1d1ot","1di0t","1diot","1eccacu10","1eccacu1o","1eccacul0","1eccaculo","1mbec11e","1mbec1le","1mbeci1e","1mbecile","a11upat0","a11upato","a1lupat0","a1lupato","aand","ah01e","ah0le","aho1e","ahole","al1upat0","al1upato","allupat0","allupato","ana1","ana1e","anal","anale","anus","arrapat0","arrapato","arsch","arse","ass","b00b","b00be","b01ata","b0ceta","b0iata","b0ob","b0obe","b0sta","b1tch","b1te","b1tte","ba1atkar","balatkar","bastard0","bastardo","batt0na","battona","bitch","bite","bitte","bo0b","bo0be","bo1ata","boceta","boiata","boob","boobe","bosta","bran1age","bran1er","bran1ette","bran1eur","bran1euse","branlage","branler","branlette","branleur","branleuse","c0ck","c0g110ne","c0g11one","c0g1i0ne","c0g1ione","c0gl10ne","c0gl1one","c0gli0ne","c0glione","c0na","c0nnard","c0nnasse","c0nne","c0u111es","c0u11les","c0u1l1es","c0u1lles","c0ui11es","c0ui1les","c0uil1es","c0uilles","c11t","c11t0","c11to","c1it","c1it0","c1ito","cabr0n","cabra0","cabrao","cabron","caca","cacca","cacete","cagante","cagar","cagare","cagna","cara1h0","cara1ho","caracu10","caracu1o","caracul0","caraculo","caralh0","caralho","cazz0","cazz1mma","cazzata","cazzimma","cazzo","ch00t1a","ch00t1ya","ch00tia","ch00tiya","ch0d","ch0ot1a","ch0ot1ya","ch0otia","ch0otiya","ch1asse","ch1avata","ch1er","ch1ng0","ch1ngadaz0s","ch1ngadazos","ch1ngader1ta","ch1ngaderita","ch1ngar","ch1ngo","ch1ngues","ch1nk","chatte","chiasse","chiavata","chier","ching0","chingadaz0s","chingadazos","chingader1ta","chingaderita","chingar","chingo","chingues","chink","cho0t1a","cho0t1ya","cho0tia","cho0tiya","chod","choot1a","choot1ya","chootia","chootiya","cl1t","cl1t0","cl1to","clit","clit0","clito","cock","cog110ne","cog11one","cog1i0ne","cog1ione","cogl10ne","cogl1one","cogli0ne","coglione","cona","connard","connasse","conne","cou111es","cou11les","cou1l1es","cou1lles","coui11es","coui1les","couil1es","couilles","cracker","crap","cu10","cu1att0ne","cu1attone","cu1er0","cu1ero","cu1o","cul0","culatt0ne","culattone","culer0","culero","culo","cum","cunt","d11d0","d11do","d1ck","d1ld0","d1ldo","damn","de1ch","deich","depp","di1d0","di1do","dick","dild0","dildo","dyke","encu1e","encule","enema","enf01re","enf0ire","enfo1re","enfoire","estup1d0","estup1do","estupid0","estupido","etr0n","etron","f0da","f0der","f0ttere","f0tters1","f0ttersi","f0tze","f0utre","f1ca","f1cker","f1ga","fag","fica","ficker","figa","foda","foder","fottere","fotters1","fottersi","fotze","foutre","fr0c10","fr0c1o","fr0ci0","fr0cio","fr0sc10","fr0sc1o","fr0sci0","fr0scio","froc10","froc1o","froci0","frocio","frosc10","frosc1o","frosci0","froscio","fuck","g00","g0o","g0u1ne","g0uine","gandu","go0","goo","gou1ne","gouine","gr0gnasse","grognasse","haram1","harami","haramzade","hund1n","hundin","id10t","id1ot","idi0t","idiot","imbec11e","imbec1le","imbeci1e","imbecile","j1zz","jerk","jizz","k1ke","kam1ne","kamine","kike","leccacu10","leccacu1o","leccacul0","leccaculo","m1erda","m1gn0tta","m1gnotta","m1nch1a","m1nchia","m1st","mam0n","mamahuev0","mamahuevo","mamon","masturbat10n","masturbat1on","masturbate","masturbati0n","masturbation","merd0s0","merd0so","merda","merde","merdos0","merdoso","mierda","mign0tta","mignotta","minch1a","minchia","mist","musch1","muschi","n1gger","neger","negr0","negre","negro","nerch1a","nerchia","nigger","orgasm","p00p","p011a","p01la","p0l1a","p0lla","p0mp1n0","p0mp1no","p0mpin0","p0mpino","p0op","p0rca","p0rn","p0rra","p0uff1asse","p0uffiasse","p1p1","p1pi","p1r1a","p1rla","p1sc10","p1sc1o","p1sci0","p1scio","p1sser","pa11e","pa1le","pal1e","palle","pane1e1r0","pane1e1ro","pane1eir0","pane1eiro","panele1r0","panele1ro","paneleir0","paneleiro","patakha","pec0r1na","pec0rina","pecor1na","pecorina","pen1s","pendej0","pendejo","penis","pip1","pipi","pir1a","pirla","pisc10","pisc1o","pisci0","piscio","pisser","po0p","po11a","po1la","pol1a","polla","pomp1n0","pomp1no","pompin0","pompino","poop","porca","porn","porra","pouff1asse","pouffiasse","pr1ck","prick","pussy","put1za","puta","puta1n","putain","pute","putiza","puttana","queca","r0mp1ba11e","r0mp1ba1le","r0mp1bal1e","r0mp1balle","r0mpiba11e","r0mpiba1le","r0mpibal1e","r0mpiballe","rand1","randi","rape","recch10ne","recch1one","recchi0ne","recchione","retard","romp1ba11e","romp1ba1le","romp1bal1e","romp1balle","rompiba11e","rompiba1le","rompibal1e","rompiballe","ruff1an0","ruff1ano","ruffian0","ruffiano","s1ut","sa10pe","sa1aud","sa1ope","sacanagem","sal0pe","salaud","salope","saugnapf","sb0rr0ne","sb0rra","sb0rrone","sbattere","sbatters1","sbattersi","sborr0ne","sborra","sborrone","sc0pare","sc0pata","sch1ampe","sche1se","sche1sse","scheise","scheisse","schlampe","schwachs1nn1g","schwachs1nnig","schwachsinn1g","schwachsinnig","schwanz","scopare","scopata","sexy","sh1t","shit","slut","sp0mp1nare","sp0mpinare","spomp1nare","spompinare","str0nz0","str0nza","str0nzo","stronz0","stronza","stronzo","stup1d","stupid","succh1am1","succh1ami","succhiam1","succhiami","sucker","t0pa","tapette","test1c1e","test1cle","testic1e","testicle","tette","topa","tr01a","tr0ia","tr0mbare","tr1ng1er","tr1ngler","tring1er","tringler","tro1a","troia","trombare","turd","twat","vaffancu10","vaffancu1o","vaffancul0","vaffanculo","vag1na","vagina","verdammt","verga","w1chsen","wank","wichsen","x0ch0ta","x0chota","xana","xoch0ta","xochota","z0cc01a","z0cc0la","z0cco1a","z0ccola","z1z1","z1zi","ziz1","zizi","zocc01a","zocc0la","zocco1a","zoccola"])},jc=class{constructor(t){var r,n,o;let s=(r=t?.alphabet)!==null&&r!==void 0?r:Xp.alphabet,i=(n=t?.minLength)!==null&&n!==void 0?n:Xp.minLength,a=(o=t?.blocklist)!==null&&o!==void 0?o:Xp.blocklist;if(new Blob([s]).size!==s.length)throw new Error("Alphabet cannot contain multibyte characters");let c=3;if(s.length<c)throw new Error(`Alphabet length must be at least ${c}`);if(new Set(s).size!==s.length)throw new Error("Alphabet must contain unique characters");let p=255;if(typeof i!="number"||i<0||i>p)throw new Error(`Minimum length has to be between 0 and ${p}`);let l=new Set,d=s.toLowerCase().split("");for(let h of a)if(h.length>=3){let m=h.toLowerCase(),x=m.split("");x.filter(b=>d.includes(b)).length===x.length&&l.add(m)}this.alphabet=this.shuffle(s),this.minLength=i,this.blocklist=l}encode(t){if(t.length===0)return"";if(t.filter(n=>n>=0&&n<=this.maxValue()).length!==t.length)throw new Error(`Encoding supports numbers between 0 and ${this.maxValue()}`);return this.encodeNumbers(t)}decode(t){let r=[];if(t==="")return r;let n=this.alphabet.split("");for(let c of t.split(""))if(!n.includes(c))return r;let o=t.charAt(0),s=this.alphabet.indexOf(o),i=this.alphabet.slice(s)+this.alphabet.slice(0,s);i=i.split("").reverse().join("");let a=t.slice(1);for(;a.length>0;){let c=i.slice(0,1),p=a.split(c);if(p.length>0){if(p[0]==="")return r;r.push(this.toNumber(p[0],i.slice(1))),p.length>1&&(i=this.shuffle(i))}a=p.slice(1).join(c)}return r}encodeNumbers(t,r=0){if(r>this.alphabet.length)throw new Error("Reached max attempts to re-generate the ID");let n=t.reduce((c,p,l)=>this.alphabet[p%this.alphabet.length].codePointAt(0)+l+c,t.length)%this.alphabet.length;n=(n+r)%this.alphabet.length;let o=this.alphabet.slice(n)+this.alphabet.slice(0,n),s=o.charAt(0);o=o.split("").reverse().join("");let i=[s];for(let c=0;c!==t.length;c++){let p=t[c];i.push(this.toId(p,o.slice(1))),c<t.length-1&&(i.push(o.slice(0,1)),o=this.shuffle(o))}let a=i.join("");if(this.minLength>a.length)for(a+=o.slice(0,1);this.minLength-a.length>0;)o=this.shuffle(o),a+=o.slice(0,Math.min(this.minLength-a.length,o.length));return this.isBlockedId(a)&&(a=this.encodeNumbers(t,r+1)),a}shuffle(t){let r=t.split("");for(let n=0,o=r.length-1;o>0;n++,o--){let s=(n*o+r[n].codePointAt(0)+r[o].codePointAt(0))%r.length;[r[n],r[s]]=[r[s],r[n]]}return r.join("")}toId(t,r){let n=[],o=r.split(""),s=t;do n.unshift(o[s%o.length]),s=Math.floor(s/o.length);while(s>0);return n.join("")}toNumber(t,r){let n=r.split("");return t.split("").reduce((o,s)=>o*n.length+n.indexOf(s),0)}isBlockedId(t){let r=t.toLowerCase();for(let n of this.blocklist)if(n.length<=r.length){if(r.length<=3||n.length<=3){if(r===n)return!0}else if(/\d/.test(n)){if(r.startsWith(n)||r.endsWith(n))return!0}else if(r.includes(n))return!0}return!1}maxValue(){return Number.MAX_SAFE_INTEGER}};var W0=["inline","attachment"],z0=["public-read","private"],FW=class extends zr("InvalidRouteConfig"){constructor(e,t){let r=t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`;super({reason:r})}},eY=class extends zr("UnknownFileType"){constructor(e){let t=`Could not determine type for ${e}`;super({reason:t})}},tY=class extends zr("InvalidFileType"){constructor(e,t){let r=`File type ${e} not allowed for ${t}`;super({reason:r})}},rY=class extends zr("InvalidFileSize"){constructor(e){let t=`Invalid file size: ${e}`;super({reason:t})}},nY=class extends zr("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}},oY=class extends zr("RetryError"){},sY=class extends zr("FetchError"){},iY=class extends zr("InvalidJson"){},aY=class extends zr("BadRequestError"){getMessage(){return ko(this.json)&&typeof this.json.message=="string"?this.json.message:this.message}},cY=class extends zr("UploadAborted"){},uY=class extends zr("UploadAborted"){};function B0(e){return Object.fromEntries(Object.entries(e).filter(t=>t[1]!=null))}function Th(e){if(typeof e=="number")return e;let t=e.split(/(\d+)/).filter(Boolean),r=Number(t[0]),n=(t[1]??"s").trim().slice(0,1),o={s:1,m:60,h:3600,d:86400}[n];return r*o}function DW(e,t){return typeof e=="string"?e:e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:t??"An unknown error occurred"}var Ze=class j0 extends Fb{_tag="UploadThingError";name="UploadThingError";cause;code;data;constructor(t){let r=typeof t=="string"?{code:"INTERNAL_SERVER_ERROR",message:t}:t,n=r.message??DW(r.cause,r.code);super({message:n}),this.code=r.code,this.data=r.data,r.cause instanceof Error?this.cause=r.cause:ko(r.cause)&&vt(r.cause.status)&&Ae(r.cause.statusText)?this.cause=new Error(`Response ${r.cause.status} ${r.cause.statusText}`):Ae(r.cause)?this.cause=new Error(r.cause):this.cause=r.cause}static toObject(t){return{code:t.code,message:t.message,data:t.data}}static serialize(t){return JSON.stringify(j0.toObject(t))}};var pY=class extends Nc("uploadthing/Fetch")(){};var NW="hmac-sha256=",q0={name:"HMAC",hash:"SHA-256"},H0=new TextEncoder;function LW(e,t){let r=e.split(""),n=ne(t),o,s;for(let i=0;i<r.length;i++)s=(n%(i+1)+i)%r.length,o=r[i],r[i]=r[s],r[s]=o;return r.join("")}var UW=(e,t)=>Ab(function*(){let r=yield*Rb({try:()=>crypto.subtle.importKey("raw",H0.encode(Lo(t)),q0,!1,["sign"]),catch:o=>new Ze({code:"BAD_REQUEST",message:"Invalid signing secret",cause:o})}),n=yield*Ib(Rb({try:()=>crypto.subtle.sign(q0,r,H0.encode(e)),catch:o=>new Ze({code:"BAD_REQUEST",cause:o})}),o=>qb(new Uint8Array(o)));return`${NW}${n}`}).pipe(kh("signPayload"));var zb=(e,t,r)=>Hc(()=>{let n=JSON.stringify(r?.(e)??[e.name,e.size,e.type,e.lastModified,Date.now()]),o=LW(Xp.alphabet,t),s=new jc({alphabet:o,minLength:36}).encode([Math.abs(ne(n))]);return new jc({alphabet:o,minLength:12}).encode([Math.abs(ne(t))])+s}).pipe(kh("generateKey"));var Rh=(e,t,r)=>Ab(function*(){let n=new URL(e),o=r.ttlInSeconds?Th(r.ttlInSeconds):3600,s=Date.now()+o*1e3;n.searchParams.append("expires",s.toString()),r.data&&Object.entries(r.data).forEach(([a,c])=>{if(c==null)return;let p=encodeURIComponent(c);n.searchParams.append(a,p)});let i=yield*UW(n.toString(),t);return n.searchParams.append("signature",i),n.href}).pipe(kh("generateSignedURL"));var G0=Symbol.for("effect/Chunk");function WW(e,t,r,n,o){for(let s=t;s<Math.min(e.length,t+o);s++)r[n+s-t]=e[s];return r}var Q0=[],zW=e=>Co((t,r)=>t.length===r.length&&Er(t).every((n,o)=>e(n,Kn(r,o)))),BW=zW(T),jW={[G0]:{_A:e=>e},toString(){return Z(this.toJSON())},toJSON(){return{_id:"Chunk",values:Er(this).map(Q)}},[B](){return this.toJSON()},[I](e){return jb(e)&&BW(this,e)},[F](){return V(this,rr(Er(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Q0[Symbol.iterator]();default:return Er(this)[Symbol.iterator]()}},pipe(){return _(this,arguments)}},it=e=>{let t=Object.create(jW);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=jn,t.right=jn;break}case"ISingleton":{t.length=1,t.depth=0,t.left=jn,t.right=jn;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=jn,t.right=jn;break}}return t},jb=e=>v(e,G0),jn=it({_tag:"IEmpty"}),We=()=>jn,Kc=(...e)=>QW(e),Ce=e=>it({_tag:"ISingleton",a:e}),Br=e=>jb(e)?e:Vn(te(e)),Bb=(e,t,r)=>{switch(e.backing._tag){case"IArray":{WW(e.backing.array,0,t,r,e.length);break}case"IConcat":{Bb(e.left,t,r),Bb(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let n=0,o=r;for(;n<e.length;)t[o]=Kn(e,n),n+=1,o+=1;break}}};var KW=e=>{switch(e.backing._tag){case"IEmpty":return Q0;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return Bb(e,t,0),e.backing={_tag:"IArray",array:t},e.left=jn,e.right=jn,e.depth=0,t}}},Er=KW,VW=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return it({_tag:"IArray",array:ub(e.backing.array)});case"IConcat":return it({_tag:"IConcat",left:br(e.backing.right),right:br(e.backing.left)});case"ISlice":return Vn(ub(Er(e)))}},br=VW,GW=u(2,(e,t)=>t<0||t>=e.length?E():k(Kn(e,t))),Vn=e=>e.length===0?We():e.length===1?Ce(e[0]):it({_tag:"IArray",array:e}),QW=e=>Vn(e),Kn=u(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Kn(e.left,t):Kn(e.right,t-e.left.length);case"ISlice":return Kn(e.backing.chunk,t+e.backing.offset)}}),Wi=u(2,(e,t)=>pt(e,Ce(t))),Oe=u(2,(e,t)=>pt(Ce(t),e));var Ah=u(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return jn;switch(e.backing._tag){case"ISlice":return it({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Ah(e.right,t-e.left.length):it({_tag:"IConcat",left:Ah(e.left,t),right:e.right});default:return it({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var pt=u(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return it({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let n=pt(e.right,t);return it({_tag:"IConcat",left:e.left,right:n})}else{let n=pt(e.right.right,t);if(n.depth===e.depth-3){let o=it({_tag:"IConcat",left:e.right.left,right:n});return it({_tag:"IConcat",left:e.left,right:o})}else{let o=it({_tag:"IConcat",left:e.left,right:e.right.left});return it({_tag:"IConcat",left:o,right:n})}}else if(t.right.depth>=t.left.depth){let n=pt(e,t.left);return it({_tag:"IConcat",left:n,right:t.right})}else{let n=pt(e,t.left.left);if(n.depth===t.depth-3){let o=it({_tag:"IConcat",left:n,right:t.left.right});return it({_tag:"IConcat",left:o,right:t.right})}else{let o=it({_tag:"IConcat",left:t.left.right,right:t.right});return it({_tag:"IConcat",left:n,right:o})}}});var Ih=u(2,(e,t)=>Vn(ph(e,t)));var zi=e=>e.length===0,lt=e=>e.length>0,Bi=GW(0),Kb=e=>Kn(e,0),ft=Kb;var Vb=u(2,(e,t)=>e.backing._tag==="ISingleton"?Ce(t(e.backing.a,0)):Vn(f(Er(e),Hr((r,n)=>t(r,n)))));var Rt=e=>Ah(e,1);var J0=Wn;var Gb=Math.pow(2,5),Y0=Gb-1,Z0=Gb/2,X0=Gb/4;function JW(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Cs(e,t){return t>>>e&Y0}function ws(e){return 1<<e}function Ph(e,t){return JW(e&t-1)}var eA=(e,t)=>({value:e,previous:t});function ji(e,t,r,n){let o=n;if(!e){let s=n.length;o=new Array(s);for(let i=0;i<s;++i)o[i]=n[i]}return o[t]=r,o}function Qb(e,t,r){let n=r.length-1,o=0,s=0,i=r;if(e)o=s=t;else for(i=new Array(n);o<t;)i[s++]=r[o++];for(++o;o<=n;)i[s++]=r[o++];return e&&(i.length=n),i}function tA(e,t,r,n){let o=n.length;if(e){let c=o;for(;c>=t;)n[c--]=n[c];return n[t]=r,n}let s=0,i=0,a=new Array(o+1);for(;s<t;)a[i++]=n[s++];for(a[t]=r;s<o;)a[++i]=n[s++];return a}var Uo=class e{_tag="EmptyNode";modify(t,r,n,o,s,i){let a=n(E());return me(a)?new e:(++i.value,new Vc(t,o,s,a))}};function jr(e){return Ti(e,"EmptyNode")}function ZW(e){return jr(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Mh(e,t){return jr(e)?!1:t===e.edit}var Vc=class e{edit;hash;key;value;_tag="LeafNode";constructor(t,r,n,o){this.edit=t,this.hash=r,this.key=n,this.value=o}modify(t,r,n,o,s,i){if(T(s,this.key)){let c=n(this.value);return c===this.value?this:me(c)?(--i.value,new Uo):Mh(this,t)?(this.value=c,this):new e(t,o,s,c)}let a=n(E());return me(a)?this:(++i.value,rA(t,r,this.hash,this,o,new e(t,o,s,a)))}},Jb=class e{edit;hash;children;_tag="CollisionNode";constructor(t,r,n){this.edit=t,this.hash=r,this.children=n}modify(t,r,n,o,s,i){if(o===this.hash){let c=Mh(this,t),p=this.updateCollisionList(c,t,this.hash,this.children,n,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let a=n(E());return me(a)?this:(++i.value,rA(t,r,this.hash,this,o,new Vc(t,o,s,a)))}updateCollisionList(t,r,n,o,s,i,a){let c=o.length;for(let l=0;l<c;++l){let d=o[l];if("key"in d&&T(i,d.key)){let h=d.value,m=s(h);return m===h?o:me(m)?(--a.value,Qb(t,l,o)):ji(t,l,new Vc(r,n,i,m),o)}}let p=s(E());return me(p)?o:(++a.value,ji(t,c,new Vc(r,n,i,p),o))}},el=class e{edit;mask;children;_tag="IndexedNode";constructor(t,r,n){this.edit=t,this.mask=r,this.children=n}modify(t,r,n,o,s,i){let a=this.mask,c=this.children,p=Cs(r,o),l=ws(p),d=Ph(a,l),h=a&l,m=Mh(this,t);if(!h){let O=new Uo().modify(t,r+5,n,o,s,i);return O?c.length>=Z0?ez(t,p,O,a,c):new e(t,a|l,tA(m,d,O,c)):this}let x=c[d],y=x.modify(t,r+5,n,o,s,i);if(x===y)return this;let b=a,S;if(jr(y)){if(b&=~l,!b)return new Uo;if(c.length<=2&&ZW(c[d^1]))return c[d^1];S=Qb(m,d,c)}else S=ji(m,d,y,c);return m?(this.mask=b,this.children=S,this):new e(t,b,S)}},Yb=class e{edit;size;children;_tag="ArrayNode";constructor(t,r,n){this.edit=t,this.size=r,this.children=n}modify(t,r,n,o,s,i){let a=this.size,c=this.children,p=Cs(r,o),l=c[p],d=(l||new Uo).modify(t,r+5,n,o,s,i);if(l===d)return this;let h=Mh(this,t),m;if(jr(l)&&!jr(d))++a,m=ji(h,p,d,c);else if(!jr(l)&&jr(d)){if(--a,a<=X0)return XW(t,a,p,c);m=ji(h,p,new Uo,c)}else m=ji(h,p,d,c);return h?(this.size=a,this.children=m,this):new e(t,a,m)}};function XW(e,t,r,n){let o=new Array(t-1),s=0,i=0;for(let a=0,c=n.length;a<c;++a)if(a!==r){let p=n[a];p&&!jr(p)&&(o[s++]=p,i|=1<<a)}return new el(e,i,o)}function ez(e,t,r,n,o){let s=[],i=n,a=0;for(let c=0;i;++c)i&1&&(s[c]=o[a++]),i>>>=1;return s[t]=r,new Yb(e,a+1,s)}function tz(e,t,r,n,o,s){if(r===o)return new Jb(e,r,[s,n]);let i=Cs(t,r),a=Cs(t,o);if(i===a)return c=>new el(e,ws(i)|ws(a),[c]);{let c=i<a?[n,s]:[s,n];return new el(e,ws(i)|ws(a),c)}}function rA(e,t,r,n,o,s){let i,a=t;for(;;){let c=tz(e,a,r,n,o,s);if(typeof c=="function")i=eA(c,i),a=a+5;else{let p=c;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var nA="effect/HashMap",Fh=Symbol.for(nA),nz={[Fh]:Fh,[Symbol.iterator](){return new Dh(this,(e,t)=>[e,t])},[F](){let e=R(nA);for(let t of this)e^=f(R(t[0]),z(R(t[1])));return V(this,e)},[I](e){if(aA(e)){if(e._size!==this._size)return!1;for(let t of this){let r=f(e,Lh(t[0],R(t[0])));if(me(r))return!1;if(!T(t[1],r.value))return!1}return!0}return!1},toString(){return Z(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},Zb=(e,t,r,n)=>{let o=Object.create(nz);return o._editable=e,o._edit=t,o._root=r,o._size=n,o},Dh=class e{map;f;v;constructor(t,r){this.map=t,this.f=r,this.v=oA(this.map._root,this.f,void 0)}next(){if(me(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=Nh(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},Nh=e=>e?sA(e[0],e[1],e[2],e[3],e[4]):E(),oA=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return oe(e.value)?k({value:t(e.key,e.value.value),cont:r}):Nh(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return sA(n.length,n,0,t,r)}default:return Nh(r)}},sA=(e,t,r,n,o)=>{for(;r<e;){let s=t[r++];if(s&&!jr(s))return oA(s,n,[e,t,r,n,o])}return Nh(o)},oz=Zb(!1,0,new Uo,0),Qc=()=>oz;var iA=e=>{let t=$h(Qc());for(let r of e)Ki(t,r[0],r[1]);return pA(t)},aA=e=>v(e,Fh),cA=e=>e&&jr(e._root),uA=u(2,(e,t)=>Lh(e,t,R(t))),Lh=u(3,(e,t,r)=>{let n=e._root,o=0;for(;;)switch(n._tag){case"LeafNode":return T(t,n.key)?n.value:E();case"CollisionNode":{if(r===n.hash){let s=n.children;for(let i=0,a=s.length;i<a;++i){let c=s[i];if("key"in c&&T(t,c.key))return c.value}}return E()}case"IndexedNode":{let s=Cs(o,r),i=ws(s);if(n.mask&i){n=n.children[Ph(n.mask,i)],o+=5;break}return E()}case"ArrayNode":{if(n=n.children[Cs(o,r)],n){o+=5;break}return E()}default:return E()}});var Xb=u(2,(e,t)=>oe(Lh(e,t,R(t))));var Ki=u(3,(e,t,r)=>qh(e,t,()=>k(r))),sz=u(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:Zb(e._editable,e._edit,t,r)),Uh=e=>new Dh(e,t=>t);var Jc=e=>e._size;var $h=e=>Zb(!0,e._edit+1,e._root,e._size),pA=e=>(e._editable=!1,e);var qh=u(3,(e,t,r)=>lA(e,t,R(t),r)),lA=u(4,(e,t,r,n)=>{let o={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,n,r,t,o);return f(e,sz(s,o.value))});var Hh=u(2,(e,t)=>qh(e,t,E));var fA=u(2,(e,t)=>Yc(e,Qc(),(r,n,o)=>Ki(r,o,t(n,o))));var Wh=u(2,(e,t)=>Yc(e,void 0,(r,n,o)=>t(n,o))),Yc=u(3,(e,t,r)=>{let n=e._root;if(n._tag==="LeafNode")return oe(n.value)?r(t,n.value.value,n.key):t;if(n._tag==="EmptyNode")return t;let o=[n.children],s;for(;s=o.pop();)for(let i=0,a=s.length;i<a;){let c=s[i++];c&&!jr(c)&&(c._tag==="LeafNode"?oe(c.value)&&(t=r(t,c.value.value,c.key)):o.push(c.children))}return t});var hA="effect/HashSet",zh=Symbol.for(hA),iz={[zh]:zh,[Symbol.iterator](){return Uh(this._keyMap)},[F](){return V(this,z(R(this._keyMap))(R(hA)))},[I](e){return mA(e)?Jc(this._keyMap)===Jc(e._keyMap)&&T(this._keyMap,e._keyMap):!1},toString(){return Z(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},Bh=e=>{let t=Object.create(iz);return t._keyMap=e,t},mA=e=>v(e,zh),az=Bh(Qc()),tl=()=>az,xA=e=>{let t=jh(tl());for(let r of e)Zc(t,r);return Kh(t)},gA=(...e)=>{let t=jh(tl());for(let r of e)Zc(t,r);return Kh(t)},yA=u(2,(e,t)=>Xb(e._keyMap,t));var EA=e=>Jc(e._keyMap),jh=e=>Bh($h(e._keyMap)),Kh=e=>(e._keyMap._editable=!1,e),eS=u(2,(e,t)=>{let r=jh(e);return t(r),Kh(r)}),Zc=u(2,(e,t)=>e._keyMap._editable?(Ki(t,!0)(e._keyMap),e):Bh(Ki(t,!0)(e._keyMap))),tS=u(2,(e,t)=>e._keyMap._editable?(Hh(t)(e._keyMap),e):Bh(Hh(t)(e._keyMap))),bA=u(2,(e,t)=>eS(e,r=>{for(let n of t)tS(r,n)}));var SA=u(2,(e,t)=>eS(tl(),r=>{_A(e,n=>Zc(r,n));for(let n of t)Zc(r,n)}));var _A=u(2,(e,t)=>Wh(e._keyMap,(r,n)=>t(n))),CA=u(3,(e,t,r)=>Yc(e._keyMap,t,(n,o,s)=>r(n,s)));var Gn=tl,rS=xA,Vi=gA,wA=yA;var Gi=EA;var $o=Zc,rl=tS,nS=bA;var Qn=SA;var ks=CA;var Os="Empty",Ts="Fail",Qi="Interrupt",Ji="Parallel",Yi="Sequential";var OA="effect/Cause",sS=Symbol.for(OA),pz={_E:e=>e},eu={[sS]:pz,[F](){return f(R(OA),z(R(fz(this))),V(this))},[I](e){return Gh(e)&&lz(this,e)},pipe(){return _(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Q(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Q(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Q(this.left),right:Q(this.right)}}},toString(){return ir(this)},[B](){return this.toJSON()}},Sr=(()=>{let e=Object.create(eu);return e._tag=Os,e})(),Jn=e=>{let t=Object.create(eu);return t._tag=Ts,t.error=e,t},dt=e=>{let t=Object.create(eu);return t._tag="Die",t.defect=e,t},sr=e=>{let t=Object.create(eu);return t._tag=Qi,t.fiberId=e,t},Yn=(e,t)=>{let r=Object.create(eu);return r._tag=Ji,r.left=e,r.right=t,r},Le=(e,t)=>{let r=Object.create(eu);return r._tag=Yi,r.left=e,r.right=t,r},Gh=e=>v(e,sS),iS=e=>e._tag===Os,TA=e=>e._tag===Ts,nl=e=>e._tag==="Die";var ea=e=>e._tag===Os?!0:Zi(e,!0,(t,r)=>{switch(r._tag){case Os:return k(t);case"Die":case Ts:case Qi:return k(!1);default:return E()}});var tu=e=>oe(RA(e)),ru=e=>em(void 0,hz)(e),Qh=e=>br(Zi(e,We(),(t,r)=>r._tag===Ts?k(f(t,Oe(r.error))):E())),Jh=e=>br(Zi(e,We(),(t,r)=>r._tag==="Die"?k(f(t,Oe(r.defect))):E())),nu=e=>Zi(e,Gn(),(t,r)=>r._tag===Qi?k(f(t,$o(r.fiberId))):E()),Yh=e=>ou(e,t=>t._tag===Ts?k(t.error):E()),qo=e=>{let t=Yh(e);switch(t._tag){case"None":return $(e);case"Some":return U(t.value)}};var RA=e=>ou(e,t=>t._tag===Qi?k(t.fiberId):E());var Zh=e=>Xh(e,{onEmpty:Sr,onFail:()=>Sr,onDie:dt,onInterrupt:sr,onSequential:Le,onParallel:Yn}),AA=e=>Xh(e,{onEmpty:Sr,onFail:dt,onDie:dt,onInterrupt:sr,onSequential:Le,onParallel:Yn});var aS=u(2,(e,t)=>IA(e,r=>Jn(t(r)))),IA=u(2,(e,t)=>Xh(e,{onEmpty:Sr,onFail:r=>t(r),onDie:r=>dt(r),onInterrupt:r=>sr(r),onSequential:(r,n)=>Le(r,n),onParallel:(r,n)=>Yn(r,n)}));var lz=(e,t)=>{let r=Ce(e),n=Ce(t);for(;lt(r)&&lt(n);){let[o,s]=f(ft(r),Zi([Gn(),We()],([c,p],l)=>{let[d,h]=oS(l);return k([f(c,Qn(d)),f(p,pt(h))])})),[i,a]=f(ft(n),Zi([Gn(),We()],([c,p],l)=>{let[d,h]=oS(l);return k([f(c,Qn(d)),f(p,pt(h))])}));if(!T(o,i))return!1;r=s,n=a}return!0},fz=e=>dz(Ce(e),We()),dz=(e,t)=>{for(;;){let[r,n]=f(e,Wn([Gn(),We()],([s,i],a)=>{let[c,p]=oS(a);return[f(s,Qn(c)),f(i,pt(p))]})),o=Gi(r)>0?f(t,Oe(r)):t;if(zi(n))return br(o);e=n,t=o}throw new Error(Ii("Cause.flattenCauseLoop"))},ou=u(2,(e,t)=>{let r=[e];for(;r.length>0;){let n=r.pop(),o=t(n);switch(o._tag){case"None":{switch(n._tag){case Yi:case Ji:{r.push(n.right),r.push(n.left);break}}break}case"Some":return o}}return E()});var oS=e=>{let t=e,r=[],n=Gn(),o=We();for(;t!==void 0;)switch(t._tag){case Os:{if(r.length===0)return[n,o];t=r.pop();break}case Ts:{if(n=$o(n,Kc(t._tag,t.error)),r.length===0)return[n,o];t=r.pop();break}case"Die":{if(n=$o(n,Kc(t._tag,t.defect)),r.length===0)return[n,o];t=r.pop();break}case Qi:{if(n=$o(n,Kc(t._tag,t.fiberId)),r.length===0)return[n,o];t=r.pop();break}case Yi:{switch(t.left._tag){case Os:{t=t.right;break}case Yi:{t=Le(t.left.left,Le(t.left.right,t.right));break}case Ji:{t=Yn(Le(t.left.left,t.right),Le(t.left.right,t.right));break}default:{o=Oe(o,t.right),t=t.left;break}}break}case Ji:{r.push(t.right),t=t.left;break}}throw new Error(Ii("Cause.evaluateCauseLoop"))};var hz={emptyCase:Ur,failCase:er,dieCase:er,interruptCase:Ur,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var kA="SequentialCase",vA="ParallelCase",Xh=u(2,(e,{onDie:t,onEmpty:r,onFail:n,onInterrupt:o,onParallel:s,onSequential:i})=>em(e,void 0,{emptyCase:()=>r,failCase:(a,c)=>n(c),dieCase:(a,c)=>t(c),interruptCase:(a,c)=>o(c),sequentialCase:(a,c,p)=>i(c,p),parallelCase:(a,c,p)=>s(c,p)})),Zi=u(3,(e,t,r)=>{let n=t,o=e,s=[];for(;o!==void 0;){let i=r(n,o);switch(n=oe(i)?i.value:n,o._tag){case Yi:{s.push(o.right),o=o.left;break}case Ji:{s.push(o.right),o=o.left;break}default:{o=void 0;break}}o===void 0&&s.length>0&&(o=s.pop())}return n}),em=u(3,(e,t,r)=>{let n=[e],o=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case Os:{o.push($(r.emptyCase(t)));break}case Ts:{o.push($(r.failCase(t,i.error)));break}case"Die":{o.push($(r.dieCase(t,i.defect)));break}case Qi:{o.push($(r.interruptCase(t,i.fiberId)));break}case Yi:{n.push(i.right),n.push(i.left),o.push(U({_tag:kA}));break}case Ji:{n.push(i.right),n.push(i.left),o.push(U({_tag:vA}));break}}}let s=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case"Left":{switch(i.left._tag){case kA:{let a=s.pop(),c=s.pop(),p=r.sequentialCase(t,a,c);s.push(p);break}case vA:{let a=s.pop(),c=s.pop(),p=r.parallelCase(t,a,c);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),ir=(e,t)=>ru(e)?"All fibers interrupted without errors.":tm(e).map(function(r){return t?.renderErrorCause!==!0||r.cause===void 0?r.stack:`${r.stack} {
${PA(r.cause,"  ")}
}`}).join(`
`),PA=(e,t)=>{let r=e.stack.split(`
`),n=`${t}[cause]: ${r[0]}`;for(let o=1,s=r.length;o<s;o++)n+=`
${t}${r[o]}`;return e.cause&&(n+=` {
${PA(e.cause,`${t}  `)}
${t}}`),n},Vh=class e extends globalThis.Error{span=void 0;constructor(t){let r=typeof t=="object"&&t!==null,n=Error.stackTraceLimit;Error.stackTraceLimit=1,super(cS(t),r&&"cause"in t&&typeof t.cause<"u"?{cause:new e(t.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=n,this.name=t instanceof Error?t.name:"Error",r&&(Xi in t&&(this.span=t[Xi]),Object.keys(t).forEach(o=>{o in this||(this[o]=t[o])})),this.stack=xz(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}},cS=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(v(e,"toString")&&un(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return Hp(e)},mz=/\((.*)\)/g,ol=D("effect/Tracer/spanToTrace",()=>new WeakMap),xz=(e,t,r)=>{let n=[e],o=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let s=1;s<o.length;s++){if(o[s].includes(" at new BaseEffectError")||o[s].includes(" at new YieldableError")){s++;continue}if(o[s].includes("Generator.next")||o[s].includes("effect_internal_function"))break;n.push(o[s].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let s=r,i=0;for(;s&&s._tag==="Span"&&i<10;){let a=ol.get(s);if(typeof a=="function"){let c=a();if(typeof c=="string"){let p=c.matchAll(mz),l=!1;for(let[,d]of p)l=!0,n.push(`    at ${s.name} (${d})`);l||n.push(`    at ${s.name} (${c.replace(/^at /,"")})`)}else n.push(`    at ${s.name}`)}else n.push(`    at ${s.name}`);s=or(s.parent),i++}}return n.join(`
`)},Xi=Symbol.for("effect/SpanAnnotation"),tm=e=>em(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>[new Vh(r)],failCase:(t,r)=>[new Vh(r)],interruptCase:()=>[],parallelCase:(t,r,n)=>[...r,...n],sequentialCase:(t,r,n)=>[...r,...n]});var pS=Symbol.for("effect/Duration"),LA=BigInt(0),MA=BigInt(24),rm=BigInt(60),lS=BigInt(1e3),FA=BigInt(1e6),DA=BigInt(1e9),gz=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,_r=e=>{if(UA(e))return e;if(vt(e))return Rs(e);if(gs(e))return uS(e);if(Array.isArray(e)&&e.length===2&&e.every(vt))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?As:e[0]===1/0||e[1]===1/0?Sz:uS(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Ae(e)){let t=gz.exec(e);if(t){let[r,n,o]=t,s=Number(n);switch(o){case"nano":case"nanos":return uS(BigInt(n));case"micro":case"micros":return _z(BigInt(n));case"milli":case"millis":return Rs(s);case"second":case"seconds":return fS(s);case"minute":case"minutes":return Cz(s);case"hour":case"hours":return wz(s);case"day":case"days":return kz(s);case"week":case"weeks":return vz(s)}}}throw new Error("Invalid DurationInput")};var NA={_tag:"Millis",millis:0},yz={_tag:"Infinity"},Ez={[pS]:pS,[F](){return V(this,Zd(this.value))},[I](e){return UA(e)&&Iz(this,e)},toString(){return`Duration(${Mz(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:Tz(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},Zn=e=>{let t=Object.create(Ez);return vt(e)?isNaN(e)||e<=0?t.value=NA:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=yz:e<=LA?t.value=NA:t.value={_tag:"Nanos",nanos:e},t},UA=e=>v(e,pS);var bz=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===LA;case"Infinity":return!1}},As=Zn(0),Sz=Zn(1/0),uS=e=>Zn(e),_z=e=>Zn(e*lS),Rs=e=>Zn(e),fS=e=>Zn(e*1e3),Cz=e=>Zn(e*6e4),wz=e=>Zn(e*36e5),kz=e=>Zn(e*864e5),vz=e=>Zn(e*6048e5),sl=e=>Rz(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6});var Oz=e=>{let t=_r(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},Tz=e=>{let t=_r(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/DA),Number(t.value.nanos%DA)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},Rz=u(2,(e,t)=>{let r=_r(e);switch(r.value._tag){case"Nanos":return t.onNanos(r.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(r.value.millis)}}),dS=u(3,(e,t,r)=>{let n=_r(e),o=_r(t);if(n.value._tag==="Infinity"||o.value._tag==="Infinity")return r.onMillis(sl(n),sl(o));if(n.value._tag==="Nanos"||o.value._tag==="Nanos"){let s=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6)),i=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(n.value.millis,o.value.millis)});var Az=(e,t)=>dS(e,t,{onMillis:(r,n)=>r===n,onNanos:(r,n)=>r===n});var $A=u(2,(e,t)=>dS(e,t,{onMillis:(r,n)=>r<=n,onNanos:(r,n)=>r<=n}));var hS=u(2,(e,t)=>dS(e,t,{onMillis:(r,n)=>r>=n,onNanos:(r,n)=>r>=n})),Iz=u(2,(e,t)=>Az(_r(e),_r(t))),Pz=e=>{let t=_r(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};let r=Oz(t),n=r/FA,o=n/lS,s=o/rm,i=s/rm,a=i/MA;return{days:Number(a),hours:Number(i%MA),minutes:Number(s%rm),seconds:Number(o%rm),millis:Number(n%lS),nanos:Number(r%FA)}},Mz=e=>{let t=_r(e);if(t.value._tag==="Infinity")return"Infinity";if(bz(t))return"0";let r=Pz(t),n=[];return r.days!==0&&n.push(`${r.days}d`),r.hours!==0&&n.push(`${r.hours}h`),r.minutes!==0&&n.push(`${r.minutes}m`),r.seconds!==0&&n.push(`${r.seconds}s`),r.millis!==0&&n.push(`${r.millis}ms`),r.nanos!==0&&n.push(`${r.nanos}ns`),n.join(" ")};var qA=Symbol.for("effect/MutableRef"),Fz={[qA]:qA,toString(){return Z(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Q(this.current)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},Xn=e=>{let t=Object.create(Fz);return t.current=e,t},HA=u(3,(e,t,r)=>T(t,e.current)?(e.current=r,!0):!1);var ve=e=>e.current;var Kr=u(2,(e,t)=>(e.current=t,e));var nm="effect/FiberId",Is=Symbol.for(nm),iu="None",mS="Runtime",xS="Composite",Dz=ne(`${nm}-${iu}`),gS=class{[Is]=Is;_tag=iu;id=-1;startTimeMillis=-1;[F](){return Dz}[I](t){return om(t)&&t._tag===iu}toString(){return Z(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[B](){return this.toJSON()}},yS=class{id;startTimeMillis;[Is]=Is;_tag=mS;constructor(t,r){this.id=t,this.startTimeMillis=r}[F](){return V(this,ne(`${nm}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[I](t){return om(t)&&t._tag===mS&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return Z(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[B](){return this.toJSON()}},ES=class{left;right;[Is]=Is;_tag=xS;constructor(t,r){this.left=t,this.right=r}_hash;[F](){return f(ne(`${nm}-${this._tag}`),z(R(this.left)),z(R(this.right)),V(this))}[I](t){return om(t)&&t._tag===xS&&T(this.left,t.left)&&T(this.right,t.right)}toString(){return Z(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Q(this.left),right:Q(this.right)}}[B](){return this.toJSON()}},cl=new gS;var om=e=>v(e,Is);var bS=u(2,(e,t)=>e._tag===iu?t:t._tag===iu?e:new ES(e,t)),zA=e=>f(e,ks(cl,(t,r)=>bS(r)(t)));var al=e=>{switch(e._tag){case iu:return Gn();case mS:return Vi(e.id);case xS:return f(al(e.left),Qn(al(e.right)))}},WA=D(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Xn(0));var ta=e=>Array.from(al(e)).map(r=>`#${r}`).join(",");var BA=()=>{let e=ve(WA);return f(WA,Kr(e+1)),new yS(e,Date.now())};var Cr=cl;var jA=bS,KA=zA;var _S=al;var VA=ta;var sm=BA;var Wo=Qc;var GA=iA,QA=cA,CS=uA;var eo=Ki,wS=Uh;var im=Jc;var JA=qh;var YA=fA;var ZA=Wh,kS=Yc;var ul=Symbol.for("effect/List"),vS=e=>te(e),Nz=e=>WE(Po(e),vS),Lz=Nz(T),Uz={[ul]:ul,_tag:"Cons",toString(){return Z(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:vS(this).map(Q)}},[B](){return this.toJSON()},[I](e){return eI(e)&&this._tag===e._tag&&Lz(this,e)},[F](){return V(this,rr(vS(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();let r=t.head;return t=t.tail,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},pipe(){return _(this,arguments)}},am=(e,t)=>{let r=Object.create(Uz);return r.head=e,r.tail=t,r},$z=ne("Nil"),qz={[ul]:ul,_tag:"Nil",toString(){return Z(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[B](){return this.toJSON()},[F](){return $z},[I](e){return eI(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return _(this,arguments)}},XA=Object.create(qz),eI=e=>v(e,ul),to=e=>e._tag==="Nil",na=e=>e._tag==="Cons";var Hz=()=>XA,zo=(e,t)=>am(e,t),hn=Hz,pl=e=>am(e,XA);var tI=u(2,(e,t)=>Wz(t,e)),OS=u(2,(e,t)=>zo(t,e)),Wz=u(2,(e,t)=>{if(to(e))return t;if(to(t))return e;{let r=am(t.head,e),n=r,o=t.tail;for(;!to(o);){let s=am(o.head,e);n.tail=s,n=s,o=o.tail}return r}});var rI=u(3,(e,t,r)=>{let n=t,o=e;for(;!to(o);)n=r(n,o.head),o=o.tail;return n});var nI=e=>{let t=hn(),r=e;for(;!to(r);)t=OS(t,r.head),r=r.tail;return t};var zz=Object.assign(Object.create(Array.prototype),{[F](){return V(this,rr(this))},[I](e){return Array.isArray(e)&&this.length===e.length?this.every((t,r)=>T(t,e[r])):!1}}),Ps=(function(){function e(t){t&&Object.assign(this,t)}return e.prototype=Ui,e})();var Bz=Symbol.for("effect/DifferContextPatch");function sI(e){return e}var fl={...Ps.prototype,[Bz]:{_Value:sI,_Patch:sI}},jz=Object.assign(Object.create(fl),{_tag:"Empty"}),Kz=Object.create(jz),TS=()=>Kz,Vz=Object.assign(Object.create(fl),{_tag:"AndThen"}),Gz=(e,t)=>{let r=Object.create(Vz);return r.first=e,r.second=t,r},Qz=Object.assign(Object.create(fl),{_tag:"AddService"}),Jz=(e,t)=>{let r=Object.create(Qz);return r.key=e,r.service=t,r},Yz=Object.assign(Object.create(fl),{_tag:"RemoveService"}),Zz=e=>{let t=Object.create(Yz);return t.key=e,t},Xz=Object.assign(Object.create(fl),{_tag:"UpdateService"}),eB=(e,t)=>{let r=Object.create(Xz);return r.key=e,r.update=t,r},iI=(e,t)=>{let r=new Map(e.unsafeMap),n=TS();for(let[o,s]of t.unsafeMap.entries())if(r.has(o)){let i=r.get(o);r.delete(o),T(i,s)||(n=ll(eB(o,()=>s))(n))}else r.delete(o),n=ll(Jz(o,s))(n);for(let[o]of r.entries())n=ll(Zz(o))(n);return n},ll=u(2,(e,t)=>Gz(e,t)),aI=u(2,(e,t)=>{if(e._tag==="Empty")return t;let r=!1,n=Ce(e),o=new Map(t.unsafeMap);for(;lt(n);){let i=ft(n),a=Rt(n);switch(i._tag){case"Empty":{n=a;break}case"AddService":{o.set(i.key,i.service),n=a;break}case"AndThen":{n=Oe(Oe(a,i.second),i.first);break}case"RemoveService":{o.delete(i.key),n=a;break}case"UpdateService":{o.set(i.key,i.update(o.get(i.key))),r=!0,n=a;break}}}if(!r)return Ss(o);let s=new Map;for(let[i]of t.unsafeMap)o.has(i)&&(s.set(i,o.get(i)),o.delete(i));for(let[i,a]of o)s.set(i,a);return Ss(s)});var rB=Symbol.for("effect/DifferHashSetPatch");function RS(e){return e}var um={...Ps.prototype,[rB]:{_Value:RS,_Key:RS,_Patch:RS}},nB=Object.assign(Object.create(um),{_tag:"Empty"}),oB=Object.create(nB),AS=()=>oB,sB=Object.assign(Object.create(um),{_tag:"AndThen"}),iB=(e,t)=>{let r=Object.create(sB);return r.first=e,r.second=t,r},aB=Object.assign(Object.create(um),{_tag:"Add"}),cB=e=>{let t=Object.create(aB);return t.value=e,t},uB=Object.assign(Object.create(um),{_tag:"Remove"}),pB=e=>{let t=Object.create(uB);return t.value=e,t},cI=(e,t)=>{let[r,n]=ks([e,AS()],([o,s],i)=>wA(i)(o)?[rl(i)(o),s]:[o,cm(cB(i))(s)])(t);return ks(n,(o,s)=>cm(pB(s))(o))(r)},cm=u(2,(e,t)=>iB(e,t)),uI=u(2,(e,t)=>{if(e._tag==="Empty")return t;let r=t,n=Ce(e);for(;lt(n);){let o=ft(n),s=Rt(n);switch(o._tag){case"Empty":{n=s;break}case"AndThen":{n=Oe(o.first)(Oe(o.second)(s));break}case"Add":{r=$o(o.value)(r),n=s;break}case"Remove":r=rl(o.value)(r),n=s}}return r});var fB=Symbol.for("effect/DifferReadonlyArrayPatch");function pI(e){return e}var hl={...Ps.prototype,[fB]:{_Value:pI,_Patch:pI}},dB=Object.assign(Object.create(hl),{_tag:"Empty"}),hB=Object.create(dB),IS=()=>hB,mB=Object.assign(Object.create(hl),{_tag:"AndThen"}),xB=(e,t)=>{let r=Object.create(mB);return r.first=e,r.second=t,r},gB=Object.assign(Object.create(hl),{_tag:"Append"}),yB=e=>{let t=Object.create(gB);return t.values=e,t},EB=Object.assign(Object.create(hl),{_tag:"Slice"}),bB=(e,t)=>{let r=Object.create(EB);return r.from=e,r.until=t,r},SB=Object.assign(Object.create(hl),{_tag:"Update"}),_B=(e,t)=>{let r=Object.create(SB);return r.index=e,r.patch=t,r},lI=e=>{let t=0,r=IS();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],o=e.newValue[t],s=e.differ.diff(n,o);T(s,e.differ.empty)||(r=dl(r,_B(t,s))),t=t+1}return t<e.oldValue.length&&(r=dl(r,bB(0,t))),t<e.newValue.length&&(r=dl(r,yB(WR(t)(e.newValue)))),r},dl=u(2,(e,t)=>xB(e,t)),fI=u(3,(e,t,r)=>{if(e._tag==="Empty")return t;let n=t.slice(),o=_t(e);for(;bs(o);){let s=Ye(o),i=fn(o);switch(s._tag){case"Empty":{o=i;break}case"AndThen":{i.unshift(s.first,s.second),o=i;break}case"Append":{for(let a of s.values)n.push(a);o=i;break}case"Slice":{n=n.slice(s.from,s.until),o=i;break}case"Update":{n[s.index]=r.patch(s.patch,n[s.index]),o=i;break}}}return n});var dI=Symbol.for("effect/Differ"),wB={[dI]:{_P:N,_V:N},pipe(){return _(this,arguments)}},Ms=e=>{let t=Object.create(wB);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},PS=()=>Ms({empty:TS(),combine:(e,t)=>ll(t)(e),diff:(e,t)=>iI(e,t),patch:(e,t)=>aI(t)(e)});var MS=()=>Ms({empty:AS(),combine:(e,t)=>cm(t)(e),diff:(e,t)=>cI(e,t),patch:(e,t)=>uI(t)(e)});var FS=e=>Ms({empty:IS(),combine:(t,r)=>dl(t,r),diff:(t,r)=>lI({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>fI(t,r,e)});var pm=()=>hI((e,t)=>t),hI=e=>Ms({empty:N,combine:(t,r)=>t===N?r:r===N?t:n=>r(t(n)),diff:(t,r)=>T(t,r)?N:Lp(r),patch:(t,r)=>e(r,t(r))});var ml=255,mI=8,lm=e=>e&ml,fm=e=>e>>mI&ml,oa=(e,t)=>(e&ml)+((t&e&ml)<<mI),NS=oa(0,0),xI=e=>oa(e,e),gI=e=>oa(e,0);var yI=u(2,(e,t)=>oa(lm(e)&~t,fm(e)));var LS=u(2,(e,t)=>e|t);var EI=e=>~e>>>0&ml;var kB=0,ro=1,SI=2,US=4,dm=16,$S=32;var _I=e=>hm(e,$S),qS=u(2,(e,t)=>e&~t);var HS=u(2,(e,t)=>e|t);var Bo=e=>WS(e)&&!vB(e),WS=e=>hm(e,ro);var hm=u(2,(e,t)=>(e&t)!==0),zS=(...e)=>e.reduce((t,r)=>t|r,0),CI=zS(kB);var BS=e=>hm(e,US);var vB=e=>hm(e,dm);var mn=u(2,(e,t)=>oa(e^t,t)),Fs=u(2,(e,t)=>e&(EI(lm(t))|fm(t))|lm(t)&fm(t));var jS=Ms({empty:NS,diff:(e,t)=>mn(e,t),combine:(e,t)=>LS(t)(e),patch:(e,t)=>Fs(t,e)});var wI=xI,KS=gI;var VS=yI;var QS=(e,t)=>({_tag:"Par",left:e,right:t}),mm=(e,t)=>({_tag:"Seq",left:e,right:t});var OI=e=>{let t=pl(e),r=hn();for(;;){let[n,o]=rI(t,[TI(),hn()],([s,i],a)=>{let[c,p]=OB(a);return[FB(s,c),tI(i,p)]});if(r=TB(r,n),to(o))return nI(r);t=o}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},OB=e=>{let t=e,r=TI(),n=hn(),o=hn();for(;;)switch(t._tag){case"Empty":{if(to(n))return[r,o];t=n.head,n=n.tail;break}case"Par":{n=zo(t.right,n),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let a=s.left,c=s.right;t=QS(mm(a,i),mm(c,i));break}case"Seq":{let a=s.left,c=s.right;t=mm(a,mm(c,i));break}case"Single":{t=s,o=zo(i,o);break}}break}case"Single":{if(r=MB(r,t),to(n))return[r,o];t=n.head,n=n.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},TB=(e,t)=>{if(to(e))return pl(GS(t));if(DB(t))return e;let r=HB(e.head),n=NB(t);return r.length===1&&n.length===1&&T(r[0],n[0])?zo(qB(e.head,GS(t)),e.tail):zo(GS(t),e)},RB=Symbol.for("effect/RequestBlock/Entry"),vI=class{request;result;listeners;ownerId;state;[RB]=AB;constructor(t,r,n,o,s){this.request=t,this.result=r,this.listeners=n,this.ownerId=o,this.state=s}},AB={_R:e=>e};var IB=Symbol.for("effect/RequestBlock/RequestBlockParallel"),PB={_R:e=>e},gl=class{map;[IB]=PB;constructor(t){this.map=t}},TI=()=>new gl(Wo());var MB=(e,t)=>new gl(JA(e.map,t.dataSource,r=>AR(Tt(r,Wi(t.blockedRequest)),()=>Ce(t.blockedRequest)))),FB=(e,t)=>new gl(kS(e.map,t.map,(r,n,o)=>eo(r,o,ie(CS(r,o),{onNone:()=>n,onSome:s=>pt(n,s)})))),DB=e=>QA(e.map),NB=e=>Array.from(wS(e.map)),GS=e=>$B(YA(e.map,t=>Ce(t))),LB=Symbol.for("effect/RequestBlock/RequestBlockSequential"),UB={_R:e=>e},xm=class{map;[LB]=UB;constructor(t){this.map=t}},$B=e=>new xm(e),qB=(e,t)=>new xm(kS(t.map,e.map,(r,n,o)=>eo(r,o,ie(CS(r,o),{onNone:()=>We(),onSome:s=>pt(s,n)}))));var HB=e=>Array.from(wS(e.map)),RI=e=>Array.from(e.map);var sa="Pending",uu="Done";var zB="effect/Deferred",II=Symbol.for(zB),PI={_E:e=>e,_A:e=>e},MI=e=>({_tag:sa,joiners:e}),JS=e=>({_tag:uu,effect:e});var pu=class e{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var _m=(e,t)=>{let r=new ze("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},o_=e=>{let t=new ze("RunBlocked");return t.effect_instruction_i0=e,t},Ds=Symbol.for("effect/Effect"),gm=class{patch;op;_op=zp;constructor(t,r){this.patch=t,this.op=r}},ze=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ds]=Es;constructor(t){this._op=t}[I](t){return this===t}[F](){return V(this,Sc(this))}pipe(){return _(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Q(this.effect_instruction_i0),effect_instruction_i1:Q(this.effect_instruction_i1),effect_instruction_i2:Q(this.effect_instruction_i2)}}toString(){return Z(this.toJSON())}[B](){return this.toJSON()}[Symbol.iterator](){return new pu(new Un(this))}},ym=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ds]=Es;constructor(t){this._op=t,this._tag=t}[I](t){return Ol(t)&&t._op==="Failure"&&T(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return f(ne(this._tag),z(R(this.effect_instruction_i0)),V(this))}get cause(){return this.effect_instruction_i0}pipe(){return _(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Z(this.toJSON())}[B](){return this.toJSON()}[Symbol.iterator](){return new pu(new Un(this))}},Em=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Ds]=Es;constructor(t){this._op=t,this._tag=t}[I](t){return Ol(t)&&t._op==="Success"&&T(this.effect_instruction_i0,t.effect_instruction_i0)}[F](){return f(ne(this._tag),z(R(this.effect_instruction_i0)),V(this))}get value(){return this.effect_instruction_i0}pipe(){return _(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Q(this.value)}}toString(){return Z(this.toJSON())}[B](){return this.toJSON()}[Symbol.iterator](){return new pu(new Un(this))}},It=e=>v(e,Ds),J=e=>{let t=new ze(rh);return t.effect_instruction_i0=e,t},s_=u(3,(e,t,r)=>Ct(n=>g(e,o=>g(wr(G(()=>n(t(o)))),s=>G(()=>r(o,s)).pipe(Xe({onFailure:i=>{switch(s._tag){case De:return de(Le(s.effect_instruction_i0,i));case Ne:return de(i)}},onSuccess:()=>s})))))),Te=u(2,(e,t)=>g(e,()=>A(t))),et=e=>Te(e,void 0),i_=function(){let e=new ze(Ni);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Ii("you're not supposed to end up here"))}return e},fu=(e,t=Cr)=>{let r=new ze(Di),n;return r.effect_instruction_i0=o=>{n=e(o)},r.effect_instruction_i1=t,Vo(r,o=>It(n)?n:ee)},El=(e,t=Cr)=>G(()=>fu(e,t)),ar=(e,t=Cr)=>i_(e,function(){let r,n;function o(c){r?r(c):n===void 0&&(n=c)}let s=new ze(Di);s.effect_instruction_i0=c=>{r=c,n&&c(n)},s.effect_instruction_i1=t;let i,a;return this.effect_instruction_i0.length!==1?(a=new AbortController,i=Je(()=>this.effect_instruction_i0(o,a.signal))):i=Je(()=>this.effect_instruction_i0(o)),i||a?Vo(s,c=>(a&&a.abort(),i??ee)):s});var du=u(2,(e,t)=>{let r=new ze(Cc);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),Vr=u(2,(e,t)=>kr(e,{onFailure:t,onSuccess:A})),Cm=u(3,(e,t,r)=>du(e,n=>{let o=qo(n);switch(o._tag){case"Left":return t(o.left)?r(o.left):de(n);case"Right":return de(o.right)}}));var FI=Symbol.for("effect/OriginalAnnotation");var wm=(e,t)=>oe(t)?new Proxy(e,{has(r,n){return n===Xi||n===FI||n in r},get(r,n){return n===Xi?t.value:n===FI?e:r[n]}}):e,xn=e=>$t(e)&&!(Xi in e)?J(t=>de(dt(wm(e,qm(t))))):de(dt(e)),hu=e=>mu(()=>dt(new KI(e)));var gn=e=>kr(e,{onFailure:t=>A(U(t)),onSuccess:t=>A($(t))}),wr=e=>km(e,{onFailure:fe,onSuccess:ge}),xe=e=>$t(e)&&!(Xi in e)?J(t=>de(Jn(wm(e,qm(t))))):de(Jn(e)),Ns=e=>g(C(e),xe),de=e=>{let t=new ym(De);return t.effect_instruction_i0=e,t},mu=e=>g(C(e),de),ia=J(e=>A(e.id())),jo=e=>J(t=>e(t.id())),g=u(2,(e,t)=>{let r=new ze(wc);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r}),NI=u(2,(e,t)=>g(e,r=>{let n=typeof t=="function"?t(r):t;return It(n)?n:zE(n)?fu(o=>{n.then(s=>o(A(s)),s=>o(xe(new wu(s,"An unknown error occurred in Effect.andThen"))))}):A(n)})),a_=e=>{let t=new ze("OnStep");return t.effect_instruction_i0=e,t},yn=e=>g(e,N);var km=u(2,(e,t)=>Xe(e,{onFailure:r=>A(t.onFailure(r)),onSuccess:r=>A(t.onSuccess(r))})),Xe=u(2,(e,t)=>{let r=new ze(kc);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r}),kr=u(2,(e,t)=>Xe(e,{onFailure:r=>{if(Jh(r).length>0)return de(AA(r));let o=Qh(r);return o.length>0?t.onFailure(Kb(o)):de(r)},onSuccess:t.onSuccess})),cr=u(2,(e,t)=>G(()=>{let r=te(e),n=$i(r.length),o=0;return Te(_l({while:()=>o<r.length,body:()=>t(r[o],o),step:s=>{n[o++]=s}}),n)})),Ko=u(2,(e,t)=>G(()=>{let r=te(e),n=0;return _l({while:()=>n<r.length,body:()=>t(r[n],n),step:()=>{n++}})}));var Gr=g(ia,e=>c_(e)),c_=e=>de(sr(e)),xu=e=>{let t=new ze(ys);return t.effect_instruction_i0=wI(ro),t.effect_instruction_i1=()=>e,t};var gu=u(2,(e,t)=>Ct(r=>g(wr(r(e)),n=>tP(t,n)))),j=u(2,(e,t)=>g(e,r=>C(()=>t(r)))),bl=u(2,(e,t)=>kr(e,{onFailure:r=>Ns(()=>t.onFailure(r)),onSuccess:r=>C(()=>t.onSuccess(r))})),Ls=u(2,(e,t)=>Xe(e,{onFailure:r=>{let n=qo(r);switch(n._tag){case"Left":return Ns(()=>t(n.left));case"Right":return de(n.right)}},onSuccess:A}));var vr=u(2,(e,t)=>Ct(r=>Xe(r(e),{onFailure:n=>{let o=fe(n);return Xe(t(o),{onFailure:s=>fe(Le(n,s)),onSuccess:()=>o})},onSuccess:n=>{let o=ge(n);return he(t(o),o)}}))),Vo=u(2,(e,t)=>vr(e,ya({onFailure:r=>ru(r)?et(t(nu(r))):ee,onSuccess:()=>ee})));var vm=e=>LI(e,N),LI=u(2,(e,t)=>kr(e,{onFailure:r=>xn(t(r)),onSuccess:A}));var Om=J((e,t)=>A(t.runtimeFlags)),A=e=>{let t=new Em(Ne);return t.effect_instruction_i0=e,t},G=e=>{let t=new ze(Ni);return t.commit=e,t},C=e=>{let t=new ze(th);return t.effect_instruction_i0=e,t},Qr=u(e=>e.length===3||e.length===2&&!($t(e[1])&&"onlyEffect"in e[1]),(e,t)=>g(e,r=>{let n=typeof t=="function"?t(r):t;return It(n)?Te(n,r):zE(n)?fu(o=>{n.then(s=>o(A(r)),s=>o(xe(new wu(s,"An unknown error occurred in Effect.tap"))))}):A(r)})),u_=e=>J(t=>{let r=t.getFiberRef(bm),n=f(r,ue(()=>t.scope()));return e(Jr(bm,k(n)))});var Us=e=>{let t=new ze(ys);return t.effect_instruction_i0=KS(ro),t.effect_instruction_i1=()=>e,t},Ct=e=>i_(e,function(){let t=new ze(ys);return t.effect_instruction_i0=KS(ro),t.effect_instruction_i1=r=>WS(r)?Je(()=>this.effect_instruction_i0(xu)):Je(()=>this.effect_instruction_i0(Us)),t}),ee=A(void 0);var Sl=e=>{let t=new ze(ys);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},aa=u(2,(e,t)=>g(t,r=>r?f(e,j(k)):A(E()))),_l=e=>{let t=new ze(vc);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},p_=e=>G(()=>{let t=new ze(Li);return t.effect_instruction_i0=e(),t}),UI=function(){let e=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return p_(()=>e(f))};var l_=u(2,(e,t)=>{let r=new ze(ys);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r});var ca=e=>{let t=new ze(Oc);return typeof e?.priority<"u"?zI(t,e.priority):t},ua=u(2,(e,t)=>g(e,r=>j(t,n=>[r,n])));var pa=u(2,(e,t)=>g(e,r=>Te(t,r))),he=u(2,(e,t)=>g(e,()=>t)),la=u(3,(e,t,r)=>g(e,n=>j(t,o=>r(n,o)))),yu=El(()=>{let e=setInterval(()=>{},2147483647);return C(()=>clearInterval(e))}),fa=e=>g(ia,t=>f(e,no(t))),no=u(2,(e,t)=>g(e.interruptAsFork(t),()=>e.await)),f_={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return _(this,arguments)}},d_={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return _(this,arguments)}},h_={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return _(this,arguments)}},Tm={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return _(this,arguments)}},Eu={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return _(this,arguments)}},Rm={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return _(this,arguments)}},m_={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return _(this,arguments)}},x_={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return _(this,arguments)}},$I=[f_,m_,Rm,Eu,Tm,h_,d_,x_],KB="effect/FiberRef",qI=Symbol.for(KB),VB={_A:e=>e},da=e=>J(t=>ge(t.getFiberRef(e)));var oo=u(2,(e,t)=>g(da(e),t)),lu=u(2,(e,t)=>g_(e,()=>[void 0,t]));var g_=u(2,(e,t)=>J(r=>{let[n,o]=t(r.getFiberRef(e));return r.setFiberRef(e,o),A(n)}));var y_=u(2,(e,t)=>g_(e,r=>[void 0,t(r)]));var GB="effect/RequestResolver",HI=Symbol.for(GB),QB={_A:e=>e,_R:e=>e},DI=class e{runAll;target;[HI]=QB;constructor(t,r){this.runAll=t,this.target=r}[F](){return V(this,this.target?R(this.target):Sc(this))}[I](t){return this.target?JB(t)&&T(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Br(t))}pipe(){return _(this,arguments)}},JB=e=>v(e,HI);var Jr=u(3,(e,t,r)=>s_(pa(da(t),lu(t,r)),()=>e,n=>lu(t,n))),$s=u(3,(e,t,r)=>oo(t,n=>Jr(e,t,r(n)))),Ue=(e,t)=>qs(e,{differ:pm(),fork:t?.fork??N,join:t?.join}),E_=e=>{let t=MS();return qs(e,{differ:t,fork:t.empty})},YB=e=>{let t=FS(pm());return qs(e,{differ:t,fork:t.empty})},Cl=e=>{let t=PS();return qs(e,{differ:t,fork:t.empty})},qs=(e,t)=>({...ln,[qI]:VB,initial:e,commit(){return da(this)},diff:(n,o)=>t.differ.diff(n,o),combine:(n,o)=>t.differ.combine(n,o),patch:n=>o=>t.differ.patch(n,o),fork:t.fork,join:t.join??((n,o)=>o)}),WI=e=>qs(e,{differ:jS,fork:jS.empty}),Pt=D(Symbol.for("effect/FiberRef/currentContext"),()=>Cl(gr())),so=D(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Ue(0)),Am=D(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Ue(2048)),bu=D(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Ue(Wo())),Im=D(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Ue(Eu)),wl=D(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Ue(hn())),zI=u(2,(e,t)=>Jr(e,so,t));var b_=D(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Ue("unbounded")),S_=D(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Ue(!0)),__=D(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Ue(k(Rm))),C_=D(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>Ue(k(Tm)));var ha=D(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>YB(Wt()));var bm=D(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Ue(E(),{fork:()=>E(),join:(e,t)=>e})),ma=D(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Ue(Sr,{fork:()=>Sr,join:(e,t)=>e})),Pm=D(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>Ue(!0)),kl=D(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>Ue(!0)),Mm=D(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>Ue(Wo())),w_=D(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>Ue(We())),Fm=Symbol.for("effect/Scope"),Dm=Symbol.for("effect/CloseableScope"),Su=(e,t)=>e.addFinalizer(()=>et(t)),xa=(e,t)=>e.addFinalizer(t),_u=(e,t)=>e.close(t),Cu=(e,t)=>e.fork(t),BI=e=>jI(N)(e),jI=u(2,(e,t)=>{let r=f(e,Yh,Tt(t));switch(r._tag){case"None":return f(Jh(e),Bi,ie({onNone:()=>{let n=te(nu(e)).flatMap(o=>te(_S(o)).map(s=>`#${s}`));return new VI(n?`Interrupted by fibers: ${n.join(", ")}`:void 0)},onSome:N}));case"Some":return r.value}}),vl=(function(){class e extends globalThis.Error{commit(){return xe(this)}toJSON(){let r={...this};return this.message&&(r.message=this.message),this.cause&&(r.cause=this.cause),r}[B](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?ir(Jn(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,KE),e})(),ga=(e,t)=>{class r extends vl{_tag=t}return Object.assign(r.prototype,e),r.prototype.name=t,r},YS=Symbol.for("effect/Cause/errors/RuntimeException"),KI=ga({[YS]:YS},"RuntimeException");var Sm=Symbol.for("effect/Cause/errors/InterruptedException"),VI=ga({[Sm]:Sm},"InterruptedException"),k_=e=>v(e,Sm),ZS=Symbol.for("effect/Cause/errors/IllegalArgument"),Nm=ga({[ZS]:ZS},"IllegalArgumentException");var XS=Symbol.for("effect/Cause/errors/NoSuchElement"),Go=ga({[XS]:XS},"NoSuchElementException");var e_=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),WX=ga({[e_]:e_},"InvalidPubSubCapacityException"),t_=Symbol.for("effect/Cause/errors/ExceededCapacityException"),ZB=ga({[t_]:t_},"ExceededCapacityException");var r_=Symbol.for("effect/Cause/errors/Timeout"),XB=ga({[r_]:r_},"TimeoutException");var n_=Symbol.for("effect/Cause/errors/UnknownException"),wu=(function(){class e extends vl{_tag="UnknownException";error;constructor(r,n){super(n??"An unknown error occurred",{cause:r}),this.error=r}}return Object.assign(e.prototype,{[n_]:n_,name:"UnknownException"}),e})();var Ol=e=>It(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),Lm=e=>e._tag==="Failure",v_=e=>e._tag==="Success",GI=e=>{switch(e._tag){case De:return tu(e.effect_instruction_i0);case Ne:return!1}},QI=u(2,(e,t)=>{switch(e._tag){case De:return fe(e.effect_instruction_i0);case Ne:return ge(t)}}),Tl=e=>QI(e,void 0);var Hs=(e,t)=>ej(e,t?.parallel?Yn:Le),Qo=e=>fe(dt(e));var ku=e=>fe(Jn(e)),fe=e=>{let t=new ym(De);return t.effect_instruction_i0=e,t},JI=u(2,(e,t)=>{switch(e._tag){case De:return fe(e.effect_instruction_i0);case Ne:return t(e.effect_instruction_i0)}});var YI=e=>f(e,JI(N));var O_=e=>fe(sr(e)),yl=u(2,(e,t)=>{switch(e._tag){case De:return fe(e.effect_instruction_i0);case Ne:return ge(t(e.effect_instruction_i0))}});var ya=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case De:return t(e.effect_instruction_i0);case Ne:return r(e.effect_instruction_i0)}}),vu=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case De:return t(e.effect_instruction_i0);case Ne:return r(e.effect_instruction_i0)}}),ge=e=>{let t=new Em(Ne);return t.effect_instruction_i0=e,t},ht=ge(void 0),ZI=u(2,(e,t)=>Rl(e,t,{onSuccess:(r,n)=>[r,n],onFailure:Le}));var XI=u(2,(e,t)=>Rl(e,t,{onSuccess:(r,n)=>n,onFailure:Le}));var Rl=u(3,(e,t,{onFailure:r,onSuccess:n})=>{switch(e._tag){case De:switch(t._tag){case Ne:return fe(e.effect_instruction_i0);case De:return fe(r(e.effect_instruction_i0,t.effect_instruction_i0))}case Ne:switch(t._tag){case Ne:return ge(n(e.effect_instruction_i0,t.effect_instruction_i0));case De:return fe(t.effect_instruction_i0)}}}),ej=(e,t)=>{let r=Br(e);return lt(r)?f(Rt(r),Wn(f(ft(r),yl(Ce)),(n,o)=>f(n,Rl(o,{onSuccess:(s,i)=>f(s,Oe(i)),onFailure:t}))),yl(br),yl(n=>Er(n)),k):E()},Ea=e=>({...ln,[II]:PI,state:Xn(MI([])),commit(){return Bt(this)},blockingOn:e}),En=()=>g(ia,e=>eP(e)),eP=e=>C(()=>Ea(e)),Bt=e=>El(t=>{let r=ve(e.state);switch(r._tag){case uu:return t(r.effect);case sa:return r.joiners.push(t),tj(e,t)}},e.blockingOn);var Al=u(2,(e,t)=>C(()=>{let r=ve(e.state);switch(r._tag){case uu:return!1;case sa:{Kr(e.state,JS(t));for(let n=0,o=r.joiners.length;n<o;n++)r.joiners[n](t);return!0}}})),tP=u(2,(e,t)=>Al(e,t));var Ou=u(2,(e,t)=>Al(e,de(t)));var Um=u(2,(e,t)=>Al(e,c_(t))),rP=e=>C(()=>ve(e.state)._tag===uu);var ba=u(2,(e,t)=>Al(e,A(t)));var Sa=(e,t)=>{let r=ve(e.state);if(r._tag===sa){Kr(e.state,JS(t));for(let n=0,o=r.joiners.length;n<o;n++)r.joiners[n](t)}},tj=(e,t)=>C(()=>{let r=ve(e.state);if(r._tag===sa){let n=r.joiners.indexOf(t);n>=0&&r.joiners.splice(n,1)}}),rj=J(e=>ge(e.currentContext)),_a=()=>rj;var bn=e=>g(_a(),e),Sn=u(2,(e,t)=>Jr(Pt,t)(e)),$m=u(2,(e,t)=>$s(Pt,r=>yr(r,t))(e)),Tu=u(2,(e,t)=>bn(r=>Sn(e,t(r))));var qm=e=>{let t=e.currentSpan;return t!==void 0&&t._tag==="Span"?k(t):E()},nj={_tag:"Span",spanId:"noop",traceId:"noop",sampled:!1,status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:ht},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){},addLinks(){}},nP=e=>Object.assign(Object.create(nj),e);var oP=Sr,Hm=Jn,Ca=dt,sP=sr;var iP=TA,T_=nl;var Ru=tu;var aP=nu;var Au=qo;var Wm=aS;var zm=BI;var cP=ir;var Bm="InvalidData",jm="MissingData",Km="SourceUnavailable",Vm="Unsupported";var cj="effect/ConfigError",R_=Symbol.for(cj),Iu={_tag:"ConfigError",[R_]:R_},Il=(e,t)=>{let r=Object.create(Iu);return r._op="And",r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(r,"message",{enumerable:!1,get(){return this.toString()}}),r},Pl=(e,t)=>{let r=Object.create(Iu);return r._op="Or",r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(r,"message",{enumerable:!1,get(){return this.toString()}}),r},wa=(e,t,r={pathDelim:"."})=>{let n=Object.create(Iu);return n._op=Bm,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Invalid data at ${f(this.path,zn(r.pathDelim))}: "${this.message}")`}}),n},Yr=(e,t,r={pathDelim:"."})=>{let n=Object.create(Iu);return n._op=jm,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Missing data at ${f(this.path,zn(r.pathDelim))}: "${this.message}")`}}),n},uP=(e,t,r,n={pathDelim:"."})=>{let o=Object.create(Iu);return o._op=Km,o.path=e,o.message=t,o.cause=r,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Source unavailable at ${f(this.path,zn(n.pathDelim))}: "${this.message}")`}}),o},P_=(e,t,r={pathDelim:"."})=>{let n=Object.create(Iu);return n._op=Vm,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${f(this.path,zn(r.pathDelim))}: "${this.message}")`}}),n};var Jo=u(2,(e,t)=>{switch(e._op){case"And":return Il(Jo(e.left,t),Jo(e.right,t));case"Or":return Pl(Jo(e.left,t),Jo(e.right,t));case Bm:return wa([...t,...e.path],e.message);case jm:return Yr([...t,...e.path],e.message);case Km:return uP([...t,...e.path],e.message,e.cause);case Vm:return P_([...t,...e.path],e.message)}}),uj={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:er,missingDataCase:Ur,sourceUnavailableCase:er,unsupportedCase:er},pP=u(3,(e,t,r)=>{let n=[e],o=[];for(;n.length>0;){let i=n.pop();switch(i._op){case"And":{n.push(i.right),n.push(i.left),o.push(U({_op:"AndCase"}));break}case"Or":{n.push(i.right),n.push(i.left),o.push(U({_op:"OrCase"}));break}case Bm:{o.push($(r.invalidDataCase(t,i.path,i.message)));break}case jm:{o.push($(r.missingDataCase(t,i.path,i.message)));break}case Km:{o.push($(r.sourceUnavailableCase(t,i.path,i.message,i.cause)));break}case Vm:{o.push($(r.unsupportedCase(t,i.path,i.message)));break}}}let s=[];for(;o.length>0;){let i=o.pop();switch(i._op){case"Left":{switch(i.left._op){case"AndCase":{let a=s.pop(),c=s.pop(),p=r.andCase(t,a,c);s.push(p);break}case"OrCase":{let a=s.pop(),c=s.pop(),p=r.orCase(t,a,c);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),lP=e=>pP(e,void 0,uj);var Qm=wa;var fP=lP;var pj="effect/Clock",F_=Symbol.for(pj),ao=ot("effect/Clock"),lj=2**31-1,dP={unsafeSchedule(e,t){let r=sl(t);if(r>lj)return er;let n=!1,o=setTimeout(()=>{n=!0,e()},r);return()=>(clearTimeout(o),!n)}},hP=(function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))})(),fj=(function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return hP;let t=hP()-e.bigint();return()=>t+e.bigint()})(),D_=class{[F_]=F_;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return fj()}currentTimeMillis=C(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=C(()=>this.unsafeCurrentTimeNanos());scheduler(){return A(dP)}sleep(t){return ar(r=>{let n=dP.unsafeSchedule(()=>r(ee),t);return et(C(n))})}},N_=()=>new D_;var co=TR;var Pu=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&");var Ym={_tag:"Empty"},xP=u(2,(e,t)=>({_tag:"AndThen",first:e,second:t})),gP=u(2,(e,t)=>xP(e,{_tag:"MapName",f:t})),yP=u(2,(e,t)=>xP(e,{_tag:"Nested",name:t}));var Ws=u(2,(e,t)=>{let r=pl(t),n=e;for(;na(r);){let o=r.head;switch(o._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=zo(o.first,zo(o.second,r.tail));break}case"MapName":{n=Hr(n,o.f),r=r.tail;break}case"Nested":{n=Pc(n,o.name),r=r.tail;break}case"Unnested":{if(f(To(n),DR(o.name)))n=fn(n),r=r.tail;else return U(Yr(n,`Expected ${o.name} to be in path in ConfigProvider#unnested`));break}}}return $(n)});var Zm="Constant",U_="Fail",Ml="Fallback",$_="Described",Xm="Lazy",ex="MapOrFail",tx="Nested",rx="Primitive",q_="Sequence",H_="HashMap",W_="ZipWith";var SP=e=>e.toLowerCase(),_P=e=>e.toUpperCase(),bP=(e,t,r)=>t instanceof RegExp?e.replace(t,r):t.reduce((n,o)=>n.replace(o,r),e),gj=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],yj=/[^A-Z0-9]+/gi,Ej=(e,t={})=>{let{delimiter:r=" ",splitRegexp:n=gj,stripRegexp:o=yj,transform:s=SP}=t,i=bP(bP(e,n,"$1\0$2"),o,"\0"),a=0,c=i.length;for(;i.charAt(a)==="\0";)a++;for(;i.charAt(c-1)==="\0";)c--;return i.slice(a,c).split("\0").map(s).join(r)};var CP=(e,t)=>Ej(e,{delimiter:"_",transform:_P,...t});var nx=(e,t)=>[...e,...t],Sj="effect/ConfigProvider",z_=Symbol.for(Sj),Mu=ot("effect/ConfigProvider"),_j="effect/ConfigProviderFlat",B_=Symbol.for(_j),wP=e=>({[z_]:z_,pipe(){return _(this,arguments)},...e}),Fu=e=>({[B_]:B_,patch:e.patch,load:(t,r,n=!0)=>e.load(t,r,n),enumerateChildren:e.enumerateChildren}),Du=e=>wP({load:t=>g(Zr(e,Wt(),t,!1),r=>ie(To(r),{onNone:()=>xe(Yr(Wt(),`Expected a single value having structure: ${t}`)),onSome:A})),flattened:e}),ox=e=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=c=>f(c,zn(t)),o=c=>c.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return Du(Fu({load:(c,p,l=!0)=>{let d=n(c),h=s(),m=d in h?k(h[d]):E();return f(m,Ls(()=>Yr(c,`Expected ${d} to exist in the process context`)),g(x=>RP(x,c,p,r,l)))},enumerateChildren:c=>C(()=>{let p=s(),h=Object.keys(p).map(m=>o(m.toUpperCase())).filter(m=>{for(let x=0;x<c.length;x++){let y=f(c,ah(x)),b=m[x];if(b===void 0||y!==b)return!1}return!0}).flatMap(m=>m.slice(c.length,c.length+1));return rS(h)}),patch:Ym}))},j_=(e,t)=>{let{pathDelim:r,seqDelim:n}=Object.assign({seqDelim:",",pathDelim:"."},t),o=p=>f(p,zn(r)),s=p=>p.split(r),i=Fj(e,p=>s(p),o);return Du(Fu({load:(p,l,d=!0)=>{let h=o(p),m=i.has(h)?k(i.get(h)):E();return f(m,Ls(()=>Yr(p,`Expected ${h} to exist in the provided map`)),g(x=>RP(x,p,l,n,d)))},enumerateChildren:p=>C(()=>{let d=te(i.keys()).map(s).filter(h=>{for(let m=0;m<p.length;m++){let x=f(p,ah(m)),y=h[m];if(y===void 0||x!==y)return!1}return!0}).flatMap(h=>h.slice(p.length,p.length+1));return rS(d)}),patch:Ym}))},Cj=(e,t,r,n)=>{let o=fb(r.length,c=>c>=n.length?E():k([e(c),c+1])),s=fb(n.length,c=>c>=r.length?E():k([t(c),c+1])),i=nx(r,o),a=nx(n,s);return[i,a]},wj=(e,t)=>{let r=t;if(r._tag==="Nested"){let n=e.slice();for(;r._tag==="Nested";)n.push(r.name),r=r.config;return n}return e},Zr=(e,t,r,n)=>{let o=r;switch(o._tag){case Zm:return A(_t(o.value));case $_:return G(()=>Zr(e,t,o.config,n));case U_:return xe(Yr(t,o.message));case Ml:return f(G(()=>Zr(e,t,o.first,n)),Vr(s=>o.condition(s)?f(Zr(e,t,o.second,n),Vr(i=>xe(Pl(s,i)))):xe(s)));case Xm:return G(()=>Zr(e,t,o.config(),n));case ex:return G(()=>f(Zr(e,t,o.original,n),g(cr(s=>f(o.mapOrFail(s),Ls(Jo(wj(t,o.original))))))));case tx:return G(()=>Zr(e,nx(t,_t(o.name)),o.config,n));case rx:return f(Ws(t,e.patch),g(s=>f(e.load(s,o,n),g(i=>{if(i.length===0){let a=f(ch(s),ue(()=>"<n/a>"));return xe(Yr([],`Expected ${o.description} with name ${a}`))}return A(i)}))));case q_:return f(Ws(t,e.patch),g(s=>f(e.enumerateChildren(s),g(Aj),g(i=>i.length===0?G(()=>j(Zr(e,t,o.config,!0),_t)):f(cr(i,a=>Zr(e,Vp(t,`[${a}]`),o.config,!0)),j(a=>{let c=uh(a);return c.length===0?_t(Wt()):_t(c)}))))));case H_:return G(()=>f(Ws(t,e.patch),g(s=>f(e.enumerateChildren(s),g(i=>f(i,cr(a=>Zr(e,nx(s,_t(a)),o.valueConfig,n)),j(a=>a.length===0?_t(Wo()):f(Rj(a),Hr(c=>GA(pb(te(i),c)))))))))));case W_:return G(()=>f(Zr(e,t,o.left,n),gn,g(s=>f(Zr(e,t,o.right,n),gn,g(i=>{if(Ie(s)&&Ie(i))return xe(Il(s.left,i.left));if(Ie(s)&&Ot(i))return xe(s.left);if(Ot(s)&&Ie(i))return xe(i.left);if(Ot(s)&&Ot(i)){let a=f(t,zn(".")),c=kj(t,a),[p,l]=Cj(c,c,f(s.right,Hr($)),f(i.right,Hr($)));return f(p,pb(l),cr(([d,h])=>f(ua(d,h),j(([m,x])=>o.zip(m,x)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},kj=(e,t)=>r=>U(Yr(e,`The element at index ${r} in a sequence at path "${t}" was missing`)),kP=u(2,(e,t)=>Du(vj(e.flattened,t))),vj=(e,t)=>Fu({load:(r,n,o=!0)=>e.load(r,n,o),enumerateChildren:r=>e.enumerateChildren(r),patch:gP(e.patch,t)}),vP=u(2,(e,t)=>Du(Fu({load:(r,n)=>e.flattened.load(r,n,!0),enumerateChildren:r=>e.flattened.enumerateChildren(r),patch:yP(e.flattened.patch,t)})));var OP=u(2,(e,t)=>Du(Oj(e.flattened,()=>t().flattened))),Oj=(e,t)=>Fu({load:(r,n,o)=>f(Ws(r,e.patch),g(s=>e.load(s,n,o)),Vr(s=>f(C(t),g(i=>f(Ws(r,i.patch),g(a=>i.load(a,n,o)),Vr(a=>xe(Pl(s,a)))))))),enumerateChildren:r=>f(Ws(r,e.patch),g(n=>e.enumerateChildren(n)),gn,g(n=>f(C(t),g(o=>f(Ws(r,o.patch),g(s=>o.enumerateChildren(s)),gn,g(s=>{if(Ie(n)&&Ie(s))return xe(Il(n.left,s.left));if(Ie(n)&&Ot(s))return A(s.right);if(Ot(n)&&Ie(s))return A(n.right);if(Ot(n)&&Ot(s))return A(f(n.right,Qn(s.right)));throw new Error("BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),patch:Ym}),TP=e=>kP(e,CP);var Tj=(e,t)=>e.split(new RegExp(`\\s*${Pu(t)}\\s*`)),RP=(e,t,r,n,o)=>o?f(Tj(e,n),cr(s=>r.parse(s.trim())),Ls(Jo(t))):f(r.parse(e),bl({onFailure:Jo(t),onSuccess:_t})),Rj=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),Aj=e=>f(cr(e,Mj),bl({onFailure:()=>Wt(),onSuccess:Ro(co)}),gn,j(kR)),Ij=/(^.+)(\[(\d+)\])$/,Pj=/^(\[(\d+)\])$/,Mj=e=>{let t=e.match(Pj);if(t!==null){let r=t[2];return f(r!==void 0&&r.length>0?k(r):E(),qt(AP))}return E()},Fj=(e,t,r)=>{let n=new Map;for(let[o,s]of e){let i=f(t(o),Io(a=>ie(Dj(a),{onNone:()=>_t(a),onSome:([c,p])=>Ic(c,`[${p}]`)})));n.set(r(i),s)}return n},Dj=e=>{let t=e.match(Ij);if(t!==null){let r=t[1],n=t[3],o=r!==void 0&&r.length>0?k(r):E(),s=f(n!==void 0&&n.length>0?k(n):E(),qt(AP));return MR([o,s])}return E()},AP=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?E():k(t)},Nj=e=>({_tag:"KeyName",name:e}),Lj=e=>({_tag:"KeyIndex",index:e}),IP=e=>{let r=Hr($j(e),([n,o])=>[Uj(n).join("\uFEFF"),o]);return j_(new Map(r),{pathDelim:"\uFEFF",seqDelim:"\uFEFF"})},Uj=e=>{let t=[],r=0;for(;r<e.length;){let n=e[r];if(n._tag==="KeyName")if(r+1<e.length){let o=e[r+1];o._tag==="KeyIndex"?(t.push(`${n.name}[${o.index}]`),r+=2):(t.push(n.name),r+=1)}else t.push(n.name),r+=1}return t},$j=e=>{let t=(o,s)=>typeof s=="string"?Ic([o,s]):typeof s=="number"||typeof s=="boolean"?Ic([o,String(s)]):ih(s)?r(o,s):typeof s=="object"&&s!==null?n(o,s):Wt(),r=(o,s)=>ib(s,{onEmpty:()=>Ic([o,"<nil>"]),onNonEmpty:Io((i,a)=>t(Vp(o,Lj(a)),i))}),n=(o,s)=>Object.entries(s).filter(([,i])=>Kd(i)).flatMap(([i,a])=>{let c=Vp(o,Nj(i)),p=t(c,a);return ab(p)?Ic([c,""]):p});return n(Wt(),e)};var MP=Symbol.for("effect/Console"),Yo=ot("effect/Console"),FP={[MP]:MP,assert(e,...t){return C(()=>{console.assert(e,...t)})},clear:C(()=>{console.clear()}),count(e){return C(()=>{console.count(e)})},countReset(e){return C(()=>{console.countReset(e)})},debug(...e){return C(()=>{console.debug(...e)})},dir(e,t){return C(()=>{console.dir(e,t)})},dirxml(...e){return C(()=>{console.dirxml(...e)})},error(...e){return C(()=>{console.error(...e)})},group(e){return e?.collapsed?C(()=>console.groupCollapsed(e?.label)):C(()=>console.group(e?.label))},groupEnd:C(()=>{console.groupEnd()}),info(...e){return C(()=>{console.info(...e)})},log(...e){return C(()=>{console.log(...e)})},table(e,t){return C(()=>{console.table(e,t)})},time(e){return C(()=>console.time(e))},timeEnd(e){return C(()=>console.timeEnd(e))},timeLog(e,...t){return C(()=>{console.timeLog(e,...t)})},trace(...e){return C(()=>{console.trace(...e)})},warn(...e){return C(()=>{console.warn(...e)})},unsafe:console};var Hj="effect/Random",sx=Symbol.for(Hj),NP=ot("effect/Random"),K_=class{seed;[sx]=sx;PRNG;constructor(t){this.seed=t,this.PRNG=new Gd(t)}get next(){return C(()=>this.PRNG.number())}get nextBoolean(){return j(this.next,t=>t>.5)}get nextInt(){return C(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return j(this.next,n=>(r-t)*n+t)}nextIntBetween(t,r){return C(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return LP(t,r=>this.nextIntBetween(0,r))}},LP=(e,t)=>G(()=>f(C(()=>Array.from(e)),g(r=>{let n=[];for(let o=r.length;o>=2;o=o-1)n.push(o);return f(n,Ko(o=>f(t(o),j(s=>Wj(r,o-1,s)))),Te(Br(r)))}))),Wj=(e,t,r)=>{let n=e[t];return e[t]=e[r],e[r]=n,e},UP=e=>new K_(R(e)),DP=class{values;[sx]=sx;index=0;constructor(t){if(this.values=t,t.length===0)throw new Error("Requires at least one value")}getNextValue(){let t=this.values[this.index];return this.index=(this.index+1)%this.values.length,t}get next(){return C(()=>{let t=this.getNextValue();return typeof t=="number"?Math.max(0,Math.min(1,t)):R(t)/2147483647})}get nextBoolean(){return C(()=>{let t=this.getNextValue();return typeof t=="boolean"?t:R(t)%2===0})}get nextInt(){return C(()=>{let t=this.getNextValue();return typeof t=="number"&&Number.isFinite(t)?Math.round(t):Math.abs(R(t))})}nextRange(t,r){return j(this.next,n=>(r-t)*n+t)}nextIntBetween(t,r){return C(()=>{let n=this.getNextValue();if(typeof n=="number"&&Number.isFinite(n))return Math.max(t,Math.min(r-1,Math.round(n)));let o=Math.abs(R(n));return t+o%(r-t)})}shuffle(t){return LP(t,r=>this.nextIntBetween(0,r))}};var $P=Symbol.for("effect/Tracer"),Bj=e=>({[$P]:$P,...e}),Nu=ot("effect/Tracer"),ka=ot("effect/ParentSpan"),qP=(function(){let e="abcdef0123456789",t=e.length;return function(r){let n="";for(let o=0;o<r;o++)n+=e.charAt(Math.floor(Math.random()*t));return n}})(),V_=class{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(t,r,n,o,s,i){this.name=t,this.parent=r,this.context=n,this.startTime=s,this.kind=i,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:qP(32),this.spanId=qP(16),this.links=Array.from(o)}end(t,r){this.status={_tag:"Ended",endTime:t,exit:r,startTime:this.status.startTime}}attribute(t,r){this.attributes.set(t,r)}event(t,r,n){this.events.push([t,r,n??{}])}addLinks(t){this.links.push(...t)}},HP=Bj({span:(e,t,r,n,o,s)=>new V_(e,t,r,n,o,s),context:e=>e()});var ix=e=>{if(e?.captureStackTrace===!1)return e;if(e?.captureStackTrace!==void 0&&typeof e.captureStackTrace!="boolean")return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let r=new Error;Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(n!==!1)return n;if(r.stack!==void 0){let o=r.stack.split(`
`);if(o[3]!==void 0)return n=o[3].trim(),n}}}},Lu=Wr()("effect/Tracer/DisablePropagation",{defaultValue:er});var jj=f(gr(),zt(ao,N_()),zt(Yo,FP),zt(NP,UP(Math.random())),zt(Mu,ox()),zt(Nu,HP)),ur=D(Symbol.for("effect/DefaultServices/currentServices"),()=>Cl(jj)),WP=e=>{let t=_r(e);return G_(r=>r.sleep(t))},zP=e=>J(t=>e(t.currentDefaultServices)),G_=e=>zP(t=>e(t.unsafeMap.get(ao.key))),BP=G_(e=>e.currentTimeMillis);var Kj=e=>zP(t=>e(t.unsafeMap.get(Mu.key))),jP=e=>Kj(t=>t.load(e));var Gj="effect/Config",KP=Symbol.for(Gj),Qj={_A:e=>e},va={...ln,[KP]:Qj,commit(){return jP(this)}},VP=e=>{let t=ux("a boolean property",r=>{switch(r){case"true":case"yes":case"on":case"1":return $(!0);case"false":case"no":case"off":case"0":return $(!1);default:{let n=wa([],`Expected a boolean value but received ${r}`);return U(n)}}});return e===void 0?t:Dl(t,e)};var GP=(...e)=>t=>{let r=e.map(String).join(", "),n=ux(`one of (${r})`,o=>{let s=e.find(i=>String(i)===o);return s===void 0?U(wa([],`Expected one of (${r}) but received ${o}`)):$(s)});return t===void 0?n:Dl(n,t)};var QP=u(2,(e,t)=>cx(e,r=>$(t(r)))),JP=u(2,(e,t)=>cx(e,r=>{try{return $(t(r))}catch(n){return U(wa([],n instanceof Error?n.message:`${n}`))}})),cx=u(2,(e,t)=>{let r=Object.create(va);return r._tag=ex,r.original=e,r.mapOrFail=t,r}),Dl=u(2,(e,t)=>{let r=Object.create(va);return r._tag=tx,r.name=t,r.config=e,r}),YP=u(2,(e,t)=>{let r=Object.create(va);return r._tag=Ml,r.first=e,r.second=J_(t),r.condition=Ur,r}),ZP=u(2,(e,t)=>{let r=Object.create(va);return r._tag=Ml,r.first=e,r.second=J_(t.orElse),r.condition=t.if,r});var ux=(e,t)=>{let r=Object.create(va);return r._tag=rx,r.description=e,r.parse=t,r};var XP=e=>{let t=ux("a text property",$);return e===void 0?t:Dl(t,e)};var Q_=e=>{let t=Object.create(va);return t._tag=Zm,t.value=e,t.parse=()=>$(e),t},J_=e=>{let t=Object.create(va);return t._tag=Xm,t.config=e,t};var eM=u(2,(e,t)=>ZP(e,{orElse:()=>Q_(t),if:fP}));var tM=VP;var Y_=GP;var px=QP,Z_=JP,lx=cx,rM=Dl,nM=YP;var zs=XP;var oM=Q_;var Zo=eM;var iM=Ps;var Uu=(function(){let e=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends vl{constructor(r){super(r?.message,r?.cause?{cause:r.cause}:void 0),r&&(Object.assign(this,r),Object.defineProperty(this,e,{value:r,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}.BaseEffectError})(),fx=e=>{let t={BaseEffectError:class extends Uu{_tag=e}};return t.BaseEffectError.prototype.name=e,t.BaseEffectError};var Xr=En;var mt=Bt;var eC=Ou;var Nl=rP;var en=ba;var aM="Sequential",cM="Parallel",Yj="ParallelN",Oa={_tag:aM},uM={_tag:cM},pM=e=>({_tag:Yj,parallelism:e}),rC=e=>e._tag===aM,nC=e=>e._tag===cM;var $u=Oa,dx=uM,hx=pM;function fM(e){return new uo(e)}function mx(){return fM(new Map)}var sC=Symbol.for("effect/FiberRefs"),uo=class{locals;[sC]=sC;constructor(t){this.locals=t}pipe(){return _(this,arguments)}},Zj=(e,t,r,n=!1)=>{let o=e,s=t,i=r,a=n,c;for(;c===void 0;)if(Ee(s)&&Ee(i)){let p=Ye(s)[0],l=fn(s),d=Ye(i)[0],h=Ye(i)[1],m=fn(i);p.startTimeMillis<d.startTimeMillis?(i=m,a=!0):p.startTimeMillis>d.startTimeMillis?s=l:p.id<d.id?(i=m,a=!0):p.id>d.id?s=l:c=[h,a]}else c=[o.initial,!0];return c},aC=u(3,(e,t,r)=>{let n=new Map(e.locals);return r.locals.forEach((o,s)=>{let i=o[0][1];if(!o[0][0][I](t)){if(!n.has(s)){if(T(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let a=n.get(s),[c,p]=Zj(s,a,o);if(p){let l=s.diff(c,i),d=a[0][1],h=s.join(d,s.patch(l)(d));if(!T(d,h)){let m,x=a[0][0];x[I](t)?m=[[x,h],...a.slice(1)]:m=[[t,h],...a],n.set(s,m)}}}}),new uo(n)}),cC=u(2,(e,t)=>{let r=new Map;return dM(e,r,t),new uo(r)}),dM=(e,t,r)=>{e.locals.forEach((n,o)=>{let s=n[0][1],i=o.patch(o.fork)(s);T(s,i)?t.set(o,n):t.set(o,[[r,i],...n])})};var Ll=u(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new uo(r)}),Ul=u(2,(e,t)=>e.locals.has(t)?k(Ye(e.locals.get(t))[1]):E()),Bs=u(2,(e,t)=>f(Ul(e,t),ue(()=>t.initial))),qu=u(2,(e,{fiberId:t,fiberRef:r,value:n})=>{if(e.locals.size===0)return new uo(new Map([[r,[[t,n]]]]));let o=new Map(e.locals);return iC(o,t,r,n),new uo(o)}),iC=(e,t,r,n)=>{let o=e.get(r)??[],s;if(Ee(o)){let[i,a]=Ye(o);if(i[I](t)){if(T(a,n))return;s=[[t,n],...o.slice(1)]}else s=[[t,n],...o]}else s=[[t,n]];e.set(r,s)},hM=u(2,(e,{entries:t,forkAs:r})=>{if(e.locals.size===0)return new uo(new Map(t));let n=new Map(e.locals);return r!==void 0&&dM(e,n,r),t.forEach(([o,s])=>{s.length===1?iC(n,s[0][0],o,s[0][1]):s.forEach(([i,a])=>{iC(n,i,o,a)})}),new uo(n)});var uC=Ul,Xo=Bs;var mM=hM;var xM=mx;var gM="Empty",yM="Add",EM="Remove",bM="Update",SM="AndThen",_M={_tag:gM},ql=(e,t)=>{let r=new Map(e.locals),n=_M;for(let[o,s]of t.locals.entries()){let i=Ye(s)[1],a=r.get(o);if(a!==void 0){let c=Ye(a)[1];T(c,i)||(n=gx({_tag:bM,fiberRef:o,patch:o.diff(c,i)})(n))}else n=gx({_tag:yM,fiberRef:o,value:i})(n);r.delete(o)}for(let[o]of r.entries())n=gx({_tag:EM,fiberRef:o})(n);return n},gx=u(2,(e,t)=>({_tag:SM,first:e,second:t})),yx=u(3,(e,t,r)=>{let n=r,o=_t(e);for(;Ee(o);){let s=Ye(o),i=fn(o);switch(s._tag){case gM:{o=i;break}case yM:{n=qu(n,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),o=i;break}case EM:{n=Ll(n,s.fiberRef),o=i;break}case bM:{let a=Bs(n,s.fiberRef);n=qu(n,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),o=i;break}case SM:{o=Pc(s.first)(Pc(s.second)(i));break}}}return n});var Ta=ql;var Ra=yx;var bx="effect/FiberStatus",js=Symbol.for(bx),Ex="Done",kM="Running",vM="Suspended",Xj=ne(`${bx}-${Ex}`),pC=class{[js]=js;_tag=Ex;[F](){return Xj}[I](t){return Sx(t)&&t._tag===Ex}},lC=class{runtimeFlags;[js]=js;_tag=kM;constructor(t){this.runtimeFlags=t}[F](){return f(R(bx),z(R(this._tag)),z(R(this.runtimeFlags)),V(this))}[I](t){return Sx(t)&&t._tag===kM&&this.runtimeFlags===t.runtimeFlags}},fC=class{runtimeFlags;blockingOn;[js]=js;_tag=vM;constructor(t,r){this.runtimeFlags=t,this.blockingOn=r}[F](){return f(R(bx),z(R(this._tag)),z(R(this.runtimeFlags)),z(R(this.blockingOn)),V(this))}[I](t){return Sx(t)&&t._tag===vM&&this.runtimeFlags===t.runtimeFlags&&T(this.blockingOn,t.blockingOn)}},OM=new pC,TM=e=>new lC(e),RM=(e,t)=>new fC(e,t),Sx=e=>v(e,js),AM=e=>e._tag===Ex;var IM=OM,dC=TM,PM=RM;var MM=AM;var r5=f_,FM=d_,hC=h_,DM=Tm,_x=Eu,mC=Rm,NM=m_,n5=x_,LM=$I;var o5=f(co,sh(e=>e.ordinal));var UM=nb(o5);var Cx=e=>{switch(e){case"All":return r5;case"Debug":return mC;case"Error":return hC;case"Fatal":return FM;case"Info":return _x;case"Trace":return NM;case"None":return n5;case"Warning":return DM}};var Ks=Symbol.for("effect/Readable");var Pte={[Ks]:Ks,pipe(){return _(this,arguments)}};var wx=Symbol.for("effect/Ref"),yC={_A:e=>e},gC=class extends dn{ref;commit(){return this.get}[wx]=yC;[Ks]=Ks;constructor(t){super(),this.ref=t,this.get=C(()=>ve(this.ref))}get;modify(t){return C(()=>{let r=ve(this.ref),[n,o]=t(r);return r!==o&&Kr(o)(this.ref),n})}},Hu=e=>new gC(Xn(e)),Aa=e=>C(()=>Hu(e)),pr=e=>e.get,es=u(2,(e,t)=>e.modify(()=>[void 0,t])),qM=u(2,(e,t)=>e.modify(r=>[r,t]));var kx=u(2,(e,t)=>e.modify(t));var Ia=u(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var Wu=Aa,EC=pr,HM=qM;var Pa=kx;var WM=Ia;var Ox=class{buckets=[];scheduleTask(t,r){let n=this.buckets.length,o,s=0;for(;s<n&&this.buckets[s][0]<=r;s++)o=this.buckets[s];o&&o[0]===r?o[1].push(t):s===n?this.buckets.push([r,[t]]):this.buckets.splice(s,0,[r,[t]])}},SC=class{maxNextTickBeforeTimer;running=!1;tasks=new Ox;constructor(t){this.maxNextTickBeforeTimer=t}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[n,o]of r)for(let s=0;s<o.length;s++)o[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(Am)?t.getFiberRef(so):!1}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},zM=D(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new SC(2048)),zu=class{tasks=new Ox;deferred=!1;scheduleTask(t,r){this.deferred?zM.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}shouldYield(t){return t.currentOpCount>t.getFiberRef(Am)?t.getFiberRef(so):!1}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,n]of t)for(let o=0;o<n.length;o++)n[o]()}this.deferred=!0}};var Bu=D(Symbol.for("effect/FiberRef/currentScheduler"),()=>Ue(zM));var Tx=D(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Ue(new Map));var _C=(e,t,r,n)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return oo(b_,o=>o==="unbounded"?r():o>1?n(o):t());default:return e>1?n(e):t()}};var jM=WP,Rx=BP;var KM=ao;var GM=(e,t)=>({label:e,startTime:t}),CC=e=>e.replace(/[\s="]/g,"_"),Hl=e=>t=>`${CC(t.label)}=${e-t.startTime}ms`;var JM=GM;var YM="effect/MetricLabel",wC=Symbol.for(YM),kC=class{key;value;[wC]=wC;_hash;constructor(t,r){this.key=t,this.value=r,this._hash=ne(YM+this.key+this.value)}[F](){return this._hash}[I](t){return c5(t)&&this.key===t.key&&this.value===t.value}pipe(){return _(this,arguments)}},ZM=(e,t)=>new kC(e,t),c5=e=>v(e,wC);var eF=u(e=>It(e[0]),function(){let e=arguments;return $s(e[0],bu,typeof e[1]=="string"?eo(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[n,o])=>eo(r,n,o),t))}),OC=e=>j(e,k);var TC=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),G(()=>{try{return A(Je(t))}catch(n){return xe(r?Je(()=>r(n)):new wu(n,"An unknown error occurred in Effect.try"))}})};var tF=u(e=>It(e[0]),(e,...t)=>{let r=t[t.length-1],n;return t.length===2?n=Ti(t[0]):n=o=>{let s=v(o,"_tag")?o._tag:void 0;if(!s)return!1;for(let i=0;i<t.length-1;i++)if(t[i]===s)return!0;return!1},Cm(e,n,r)}),rF=u(2,(e,t)=>{let r;return Cm(e,n=>(r??=Object.keys(t),v(n,"_tag")&&Ae(n._tag)&&r.includes(n._tag)),n=>t[n._tag](n))});var Px=e=>DC(e,IC,ql),l5=e=>DC(e,ua(IC,Om),([t,r],[n,o])=>[ql(t,n),mn(r,o)]);var RC=u(2,(e,t)=>kr(e,{onFailure:r=>A(t.onFailure(r)),onSuccess:r=>A(t.onSuccess(r))}));var AC=e=>{let t=g(g(e,()=>ca()),()=>t);return t},IC=J(e=>A(e.getFiberRefs()));var nF=e=>RC(e,{onFailure:$r,onSuccess:$r});var Mx=e=>(...t)=>{let r=Hn(e),n;for(let o=0,s=t.length;o<s;o++){let i=t[o];Gh(i)&&(n!==void 0?n=Le(n,i):n=i,t=[...t.slice(0,o),...t.slice(o+1)],o--)}return n===void 0&&(n=Sr),J(o=>(o.log(t,n,r),ee))};var oF=Mx(mC);var sF=Mx(hC);var iF=u(2,(e,t)=>g(Rx,r=>$s(e,wl,OS(JM(t,r)))));var Fx=u(2,(e,t)=>Xe(e,{onFailure:r=>mu(()=>t(r)),onSuccess:A})),PC=e=>f(En(),g(t=>f(l5(e),gu(t),aF,j(r=>he(r,f(Bt(t),g(([n,o])=>Te(ua(Wl(n[0]),Sl(n[1])),o))))))));var MC=e=>j(e,t=>!t);var aF=e=>j(Wu(!0),t=>et(aa(e,HM(t,!1))));var Wl=e=>hF((t,r)=>f(e,yx(t,r))),cF=e=>e.length>=1?ar((t,r)=>{try{e(r).then(n=>t(ge(n)),n=>t(Qo(n)))}catch(n){t(Qo(n))}}):ar(t=>{try{e().then(r=>t(ge(r)),r=>t(Qo(r)))}catch(r){t(Qo(r))}}),zl=u(3,(e,t,r)=>bn(n=>Sn(e,zt(n,t,r)))),Dx=u(3,(e,t,r)=>bn(n=>g(r,o=>Sn(e,f(n,zt(t,o))))));var ju=jM,FC=A(E());var DC=u(3,(e,t,r)=>g(t,n=>g(e,o=>j(t,s=>[r(n,s),o]))));var uF=u(2,(e,{onFailure:t,onSuccess:r})=>Xe(e,{onFailure:n=>{let o=qo(n);switch(o._tag){case"Left":return he(t(o.left),de(n));case"Right":return de(n)}},onSuccess:n=>Te(r(n),n)}));var pF=u(2,(e,t)=>Xe(e,{onFailure:r=>{let n=qo(r);switch(n._tag){case"Left":return he(t(n.left),de(r));case"Right":return de(r)}},onSuccess:A}));var lF=u(2,(e,t)=>Xe(e,{onFailure:r=>he(t(r),de(r)),onSuccess:A}));var fF=e=>{let t,r;typeof e=="function"?t=e:(t=e.try,r=e.catch);let n=o=>r?Ns(()=>r(o)):xe(new wu(o,"An unknown error occurred in Effect.tryPromise"));return t.length>=1?ar((o,s)=>{try{t(s).then(i=>o(ge(i)),i=>o(n(i)))}catch(i){o(n(i))}}):ar(o=>{try{t().then(s=>o(ge(s)),s=>o(n(s)))}catch(s){o(n(s))}})},dF=u(2,(e,t)=>g(e,r=>TC({try:()=>t.try(r),catch:t.catch})));var hF=e=>J(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),ee));var mF=u(2,(e,t)=>G(()=>t()?j(e,k):A(E())));var xF=e=>new Proxy({},{get(t,r,n){return(...o)=>g(e,s=>s[r](...o))}});var gF=BigInt(0),yF=qt(e=>st(e.context,Lu)?e._tag==="Span"?yF(e.parent):E():k(e)),EF=(e,t,r)=>{let n=!e.getFiberRef(Pm)||r.context&&st(r.context,Lu),o=e.getFiberRef(Pt),s=r.parent?k(r.parent):r.root?E():yF(Bn(o,ka)),i;if(n)i=nP({name:t,parent:s,context:zt(r.context??gr(),Lu,!0)});else{let a=e.getFiberRef(ur),c=st(a,Nu),p=st(a,KM),l=e.getFiberRef(kl),d=e.getFiberRefs(),h=uC(d,Mm),m=uC(d,w_),x=m._tag==="Some"?r.links!==void 0?[...Er(m.value),...r.links??[]]:Er(m.value):r.links??Wt();i=c.span(t,s,r.context??gr(),x,l?p.unsafeCurrentTimeNanos():gF,r.kind??"internal"),h._tag==="Some"&&ZA(h.value,(y,b)=>i.attribute(b,y)),r.attributes!==void 0&&Object.entries(r.attributes).forEach(([y,b])=>i.attribute(y,b))}return typeof r.captureStackTrace=="function"&&ol.set(i,r.captureStackTrace),i};var bF=(e,t,r,n)=>C(()=>{e.status._tag!=="Ended"&&(Lm(t)&&ol.has(e)&&e.attribute("code.stacktrace",ol.get(e)()),e.end(n?r.unsafeCurrentTimeNanos():gF,t))}),Ax=(e,...t)=>{let r=ix(t.length===1?void 0:t[0]),n=t[t.length-1];return J(o=>{let s=EF(o,e,r),i=o.getFiberRef(kl),a=st(o.getFiberRef(ur),ao);return vr(n(s),c=>bF(s,c,a,i))})},Ix=u(2,(e,t)=>zl(e,ka,t)),SF=function(){let e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],r=ix(e?arguments[2]:arguments[1]);if(e){let n=arguments[0];return Ax(t,r,o=>Ix(n,o))}return n=>Ax(t,r,o=>Ix(n,o))};var Nx=Lm,_F=v_,CF=GI;var wF=Hs,kF=Qo;var vF=ku,lr=fe;var OF=YI;var TF=yl;var _n=ya;var Or=ge,RF=ht;var NC=ZI;var Ma=XI;var Lx="InterruptSignal",Ux="Stateful",$x="Resume",qx="YieldNow",Hx=e=>({_tag:Lx,cause:e}),Ku=e=>({_tag:Ux,onFiber:e}),Fa=e=>({_tag:$x,effect:e}),AF=()=>({_tag:qx});var f5="effect/FiberScope",Wx=Symbol.for(f5),LC=class{[Wx]=Wx;fiberId=Cr;roots=new Set;add(t,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}},UC=class{fiberId;parent;[Wx]=Wx;constructor(t,r){this.fiberId=t,this.parent=r}add(t,r){this.parent.tell(Ku(n=>{n.addChild(r),r.addObserver(()=>{n.removeChild(r)})}))}},PF=e=>new UC(e.id(),e),Da=D(Symbol.for("effect/FiberScope/Global"),()=>new LC);var d5="effect/Fiber",zx=Symbol.for(d5),$C={_E:e=>e,_A:e=>e},h5={[zx]:$C,pipe(){return _(this,arguments)}},m5="effect/Fiber",qC=Symbol.for(m5);var HC=e=>e.await;var WC=e=>e.inheritAll;var Gs=e=>pa(yn(e.await),e.inheritAll);var yre={...ln,commit(){return Gs(this)},...h5,id:()=>Cr,await:yu,children:A([]),inheritAll:yu,poll:A(E()),interruptAsFork:()=>yu};var Qs="effect/FiberCurrent";var x5="effect/Logger",Vu=Symbol.for(x5),zC={_Message:e=>e,_Output:e=>e},xt=e=>({[Vu]:zC,log:e,pipe(){return _(this,arguments)}}),DF=u(2,(e,t)=>xt(r=>e.log({...r,message:t(r.message)}))),Bx=u(2,(e,t)=>xt(r=>e.log(t(r)))),NF=u(2,(e,t)=>xt(r=>t(r.logLevel)?k(e.log(r)):E())),Kl=u(2,(e,t)=>xt(r=>t(e.log(r)))),LF={[Vu]:zC,log:$r,pipe(){return _(this,arguments)}},jx=e=>({[Vu]:zC,log:({message:t})=>e(t),pipe(){return _(this,arguments)}}),UF=e=>jx(()=>e),$F=e=>jx(e),Kx=u(2,(e,t)=>xt(r=>[e.log(r),t.log(r)])),qF=u(2,(e,t)=>Kl(Kx(e,t),r=>r[0])),HF=u(2,(e,t)=>Kl(Kx(e,t),r=>r[1])),g5=/^[^\s"=]*$/,WF=(e,t)=>({annotations:r,cause:n,date:o,fiberId:s,logLevel:i,message:a,spans:c})=>{let p=x=>x.match(g5)?x:e(x),l=(x,y)=>`${CC(x)}=${p(y)}`,d=(x,y)=>" "+l(x,y),h=l("timestamp",o.toISOString());h+=d("level",i.label),h+=d("fiber",ta(s));let m=Ht(a);for(let x=0;x<m.length;x++)h+=d("message",vo(m[x],t));iS(n)||(h+=d("cause",ir(n,{renderErrorCause:!0})));for(let x of c)h+=" "+Hl(o.getTime())(x);for(let[x,y]of r)h+=d(x,vo(y,t));return h},y5=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,Vx=xt(WF(y5)),Gx=xt(WF(JSON.stringify,0)),Vl=xt(({annotations:e,cause:t,date:r,fiberId:n,logLevel:o,message:s,spans:i})=>{let a=r.getTime(),c={},p={};if(im(e)>0)for(let[d,h]of e)c[d]=jl(h);if(na(i))for(let d of i)p[d.label]=a-d.startTime;let l=Ht(s);return{message:l.length===1?jl(l[0]):l.map(jl),logLevel:o.label,timestamp:r.toISOString(),cause:ea(t)?void 0:ir(t,{renderErrorCause:!0}),annotations:c,spans:p,fiberId:ta(n)}}),jl=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return Q(e)}},Qx=Kl(Vl,Hp),zF=e=>typeof e=="object"&&e!=null&&Vu in e,E5=(e,...t)=>{let r="";for(let n=0;n<t.length;n++)r+=`\x1B[${t[n]}m`;return r+e+"\x1B[0m"},b5=(e,...t)=>e,tn={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},S5={None:[],All:[],Trace:[tn.gray],Debug:[tn.blue],Info:[tn.green],Warning:[tn.yellow],Error:[tn.red],Fatal:[tn.bgBrightRed,tn.black]},_5={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},C5=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,BF=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null,w5=BF&&process.stdout.isTTY===!0,k5=BF||"Deno"in globalThis,BC=e=>{let t=e?.mode??"auto",n=(t==="auto"?k5?"tty":"browser":t)==="browser",o=typeof e?.colors=="boolean"?e.colors:w5||n,s=e?.formatDate??C5;return n?O5({colors:o,formatDate:s}):v5({colors:o,formatDate:s,stderr:e?.stderr===!0})},v5=e=>{let t=typeof process=="object"&&"isBun"in process&&process.isBun===!0,r=e.colors?E5:b5;return xt(({annotations:n,cause:o,context:s,date:i,fiberId:a,logLevel:c,message:p,spans:l})=>{let d=Xo(s,ur),h=st(d,Yo).unsafe,m=e.stderr===!0?h.error:h.log,x=Ht(p),y=r(`[${e.formatDate(i)}]`,tn.white)+` ${r(c.label,...S5[c._tag])} (${ta(a)})`;if(na(l)){let S=i.getTime(),O=Hl(S);for(let w of l)y+=" "+O(w)}y+=":";let b=0;if(x.length>0){let S=jl(x[0]);typeof S=="string"&&(y+=" "+r(S,tn.bold,tn.cyan),b++)}if(m(y),t||h.group(),ea(o)||m(ir(o,{renderErrorCause:!0})),b<x.length)for(;b<x.length;b++)m($n(x[b]));if(im(n)>0)for(let[S,O]of n)m(r(`${S}:`,tn.bold,tn.white),$n(O));t||h.groupEnd()})},O5=e=>{let t=e.colors?"%c":"";return xt(({annotations:r,cause:n,context:o,date:s,fiberId:i,logLevel:a,message:c,spans:p})=>{let l=Xo(o,ur),d=st(l,Yo).unsafe,h=Ht(c),m=`${t}[${e.formatDate(s)}]`,x=[];if(e.colors&&x.push("color:gray"),m+=` ${t}${a.label}${t} (${ta(i)})`,e.colors&&x.push(_5[a._tag],""),na(p)){let b=s.getTime(),S=Hl(b);for(let O of p)m+=" "+S(O)}m+=":";let y=0;if(h.length>0){let b=jl(h[0]);typeof b=="string"&&(m+=` ${t}${b}`,e.colors&&x.push("color:deepskyblue"),y++)}if(d.groupCollapsed(m,...x),ea(n)||d.error(ir(n,{renderErrorCause:!0})),y<h.length)for(;y<h.length;y++)d.log($n(h[y]));if(im(r)>0)for(let[b,S]of r){let O=$n(S);e.colors?d.log(`%c${b}:`,"color:gray",O):d.log(`${b}:`,O)}d.groupEnd()})},Jx=D("effect/Logger/prettyLoggerDefault",()=>BC());var KF="effect/MetricBoundaries",jC=Symbol.for(KF),KC=class{values;[jC]=jC;constructor(t){this.values=t,this._hash=f(ne(KF),z(rr(this.values)))}_hash;[F](){return this._hash}[I](t){return T5(t)&&T(this.values,t.values)}pipe(){return _(this,arguments)}},T5=e=>v(e,jC),R5=e=>{let t=f(e,Gp(Ce(Number.POSITIVE_INFINITY)),db);return new KC(t)};var VF=e=>f(sb(e.count-1,t=>e.start*Math.pow(e.factor,t)),Vn,R5);var I5="effect/MetricKeyType",Gl=Symbol.for(I5),YF="effect/MetricKeyType/Counter",VC=Symbol.for(YF),ZF="effect/MetricKeyType/Frequency",GC=Symbol.for(ZF),XF="effect/MetricKeyType/Gauge",QC=Symbol.for(XF),e1="effect/MetricKeyType/Histogram",JC=Symbol.for(e1),t1="effect/MetricKeyType/Summary",YC=Symbol.for(t1),Ql={_In:e=>e,_Out:e=>e},ZC=class{incremental;bigint;[Gl]=Ql;[VC]=VC;constructor(t,r){this.incremental=t,this.bigint=r,this._hash=ne(YF)}_hash;[F](){return this._hash}[I](t){return ew(t)}pipe(){return _(this,arguments)}},P5=ne(ZF),GF=class{preregisteredWords;[Gl]=Ql;[GC]=GC;constructor(t){this.preregisteredWords=t}[F](){return P5}[I](t){return tw(t)}pipe(){return _(this,arguments)}},M5=ne(XF),QF=class{bigint;[Gl]=Ql;[QC]=QC;constructor(t){this.bigint=t}[F](){return M5}[I](t){return rw(t)}pipe(){return _(this,arguments)}},XC=class{boundaries;[Gl]=Ql;[JC]=JC;constructor(t){this.boundaries=t,this._hash=f(ne(e1),z(R(this.boundaries)))}_hash;[F](){return this._hash}[I](t){return nw(t)&&T(this.boundaries,t.boundaries)}pipe(){return _(this,arguments)}},JF=class{maxAge;maxSize;error;quantiles;[Gl]=Ql;[YC]=YC;constructor(t,r,n,o){this.maxAge=t,this.maxSize=r,this.error=n,this.quantiles=o,this._hash=f(ne(t1),z(R(this.maxAge)),z(R(this.maxSize)),z(R(this.error)),z(rr(this.quantiles)))}_hash;[F](){return this._hash}[I](t){return ow(t)&&T(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&T(this.quantiles,t.quantiles)}pipe(){return _(this,arguments)}},r1=e=>new ZC(e?.incremental??!1,e?.bigint??!1);var n1=e=>new XC(e);var ew=e=>v(e,VC),tw=e=>v(e,GC),rw=e=>v(e,QC),nw=e=>v(e,JC),ow=e=>v(e,YC);var F5="effect/MetricKey",s1=Symbol.for(F5),D5={_Type:e=>e},N5=Po(T),Jl=class{name;keyType;description;tags;[s1]=D5;constructor(t,r,n,o=[]){this.name=t,this.keyType=r,this.description=n,this.tags=o,this._hash=f(ne(this.name+this.description),z(R(this.keyType)),z(rr(this.tags)))}_hash;[F](){return this._hash}[I](t){return L5(t)&&this.name===t.name&&T(this.keyType,t.keyType)&&T(this.description,t.description)&&N5(this.tags,t.tags)}pipe(){return _(this,arguments)}},L5=e=>v(e,s1),i1=(e,t)=>new Jl(e,r1(t),Hn(t?.description));var a1=(e,t,r)=>new Jl(e,n1(t),Hn(r));var c1=u(2,(e,t)=>t.length===0?e:new Jl(e.name,e.keyType,e.description,Ao(e.tags,t)));var u1=Symbol.for("effect/MutableHashMap"),$5={[u1]:u1,[Symbol.iterator](){return new sw(this)},toString(){return Z(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},sw=class e{self;referentialIterator;bucketIterator;constructor(t){this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let t=this.referentialIterator.next();return t.done?(this.bucketIterator=new iw(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new e(this.self)}},iw=class{backing;constructor(t){this.backing=t}currentBucket;next(){if(this.currentBucket===void 0){let r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}let t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}},p1=()=>{let e=Object.create($5);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e};var Js=u(2,(e,t)=>{if(_c(t)===!1)return e.referential.has(t)?k(e.referential.get(t)):E();let r=t[F](),n=e.buckets.get(r);return n===void 0?E():q5(e,n,t)});var q5=(e,t,r,n=!1)=>{for(let o=0,s=t.length;o<s;o++)if(r[I](t[o][0])){let i=t[o][1];return n&&(t.splice(o,1),e.bucketsSize--),k(i)}return E()},Gu=u(2,(e,t)=>oe(Js(e,t))),Qu=u(3,(e,t,r)=>{if(_c(t)===!1)return e.referential.set(t,r),e;let n=t[F](),o=e.buckets.get(n);return o===void 0?(e.buckets.set(n,[[t,r]]),e.bucketsSize++,e):(H5(e,o,t),o.push([t,r]),e.bucketsSize++,e)}),H5=(e,t,r)=>{for(let n=0,o=t.length;n<o;n++)if(r[I](t[n][0])){t.splice(n,1),e.bucketsSize--;return}};var z5="effect/MetricState",Yl=Symbol.for(z5),l1="effect/MetricState/Counter",aw=Symbol.for(l1),f1="effect/MetricState/Frequency",cw=Symbol.for(f1),d1="effect/MetricState/Gauge",uw=Symbol.for(d1),h1="effect/MetricState/Histogram",pw=Symbol.for(h1),m1="effect/MetricState/Summary",lw=Symbol.for(m1),Zl={_A:e=>e},fw=class{count;[Yl]=Zl;[aw]=aw;constructor(t){this.count=t}[F](){return f(R(l1),z(R(this.count)),V(this))}[I](t){return j5(t)&&this.count===t.count}pipe(){return _(this,arguments)}},B5=Po(T),dw=class{occurrences;[Yl]=Zl;[cw]=cw;constructor(t){this.occurrences=t}_hash;[F](){return f(ne(f1),z(rr(te(this.occurrences.entries()))),V(this))}[I](t){return K5(t)&&B5(te(this.occurrences.entries()),te(t.occurrences.entries()))}pipe(){return _(this,arguments)}},hw=class{value;[Yl]=Zl;[uw]=uw;constructor(t){this.value=t}[F](){return f(R(d1),z(R(this.value)),V(this))}[I](t){return V5(t)&&this.value===t.value}pipe(){return _(this,arguments)}},mw=class{buckets;count;min;max;sum;[Yl]=Zl;[pw]=pw;constructor(t,r,n,o,s){this.buckets=t,this.count=r,this.min=n,this.max=o,this.sum=s}[F](){return f(R(h1),z(R(this.buckets)),z(R(this.count)),z(R(this.min)),z(R(this.max)),z(R(this.sum)),V(this))}[I](t){return G5(t)&&T(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return _(this,arguments)}},xw=class{error;quantiles;count;min;max;sum;[Yl]=Zl;[lw]=lw;constructor(t,r,n,o,s,i){this.error=t,this.quantiles=r,this.count=n,this.min=o,this.max=s,this.sum=i}[F](){return f(R(m1),z(R(this.error)),z(R(this.quantiles)),z(R(this.count)),z(R(this.min)),z(R(this.max)),z(R(this.sum)),V(this))}[I](t){return Q5(t)&&this.error===t.error&&T(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return _(this,arguments)}},x1=e=>new fw(e),g1=e=>new dw(e),y1=e=>new hw(e),E1=e=>new mw(e.buckets,e.count,e.min,e.max,e.sum),b1=e=>new xw(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var j5=e=>v(e,aw),K5=e=>v(e,cw),V5=e=>v(e,uw),G5=e=>v(e,pw),Q5=e=>v(e,lw);var Y5="effect/MetricHook",Z5=Symbol.for(Y5),X5={_In:e=>e,_Out:e=>e},Xl=e=>({[Z5]:X5,pipe(){return _(this,arguments)},...e});var S1=BigInt(0),C1=e=>{let t=e.keyType.bigint?S1:0,r=e.keyType.incremental?e.keyType.bigint?o=>o>=S1:o=>o>=0:o=>!0,n=o=>{r(o)&&(t=t+o)};return Xl({get:()=>x1(t),update:n,modify:n})},w1=e=>{let t=new Map;for(let n of e.keyType.preregisteredWords)t.set(n,0);let r=n=>{let o=t.get(n)??0;t.set(n,o+1)};return Xl({get:()=>g1(t),update:r,modify:r})},k1=(e,t)=>{let r=t;return Xl({get:()=>y1(r),update:n=>{r=n},modify:n=>{r=r+n}})},v1=e=>{let t=e.keyType.boundaries.values,r=t.length,n=new Uint32Array(r+1),o=new Float32Array(r),s=0,i=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;f(t,Ro(co),Hr((d,h)=>{o[h]=d}));let p=d=>{let h=0,m=r;for(;h!==m;){let x=Math.floor(h+(m-h)/2),y=o[x];d<=y?m=x:h=x,m===h+1&&(d<=o[h]?m=h:h=m)}n[h]=n[h]+1,s=s+1,i=i+d,d<a&&(a=d),d>c&&(c=d)},l=()=>{let d=$i(r),h=0;for(let m=0;m<r;m++){let x=o[m],y=n[m];h=h+y,d[m]=[x,h]}return d};return Xl({get:()=>E1({buckets:l(),count:s,min:a,max:c,sum:i}),update:p,modify:p})},O1=e=>{let{error:t,maxAge:r,maxSize:n,quantiles:o}=e.keyType,s=f(o,Ro(co)),i=$i(n),a=0,c=0,p=0,l=0,d=0,h=x=>{let y=[],b=0;for(;b!==n-1;){let S=i[b];if(S!=null){let[O,w]=S,P=Rs(x-O);hS(P,As)&&$A(P,r)&&y.push(w)}b=b+1}return e4(t,s,Ro(y,co))},m=(x,y)=>{if(n>0){a=a+1;let b=a%n;i[b]=[y,x]}l=c===0?x:Math.min(l,x),d=c===0?x:Math.max(d,x),c=c+1,p=p+x};return Xl({get:()=>b1({error:t,quantiles:h(Date.now()),count:c,min:l,max:d,sum:p}),update:([x,y])=>m(x,y),modify:([x,y])=>m(x,y)})},e4=(e,t,r)=>{let n=r.length;if(!Ee(t))return Wt();let o=t[0],s=t.slice(1),i=_1(e,n,E(),0,o,r),a=_t(i);return s.forEach(c=>{a.push(_1(e,n,i.value,i.consumed,c,i.rest))}),Hr(a,c=>[c.quantile,c.value])},_1=(e,t,r,n,o,s)=>{let i=e,a=t,c=r,p=n,l=o,d=s,h=e,m=t,x=r,y=n,b=o,S=s;for(;;){if(!Ee(d))return{quantile:l,value:E(),consumed:p,rest:[]};if(l===1)return{quantile:l,value:k(cb(d)),consumed:p+d.length,rest:[]};let O=Ye(d),w=HR(d,H=>H===O),P=l*a,M=i/2*P,L=p+w[0].length,q=Math.abs(L-P);if(L<P-M){h=i,m=a,x=To(d),y=L,b=l,S=w[1],i=h,a=m,c=x,p=y,l=b,d=S;continue}if(L>P+M){let H=me(c)?k(O):c;return{quantile:l,value:H,consumed:p,rest:d}}switch(c._tag){case"None":{h=i,m=a,x=To(d),y=L,b=l,S=w[1],i=h,a=m,c=x,p=y,l=b,d=S;continue}case"Some":{let H=Math.abs(P-c.value);if(q<H){h=i,m=a,x=To(d),y=L,b=l,S=w[1],i=h,a=m,c=x,p=y,l=b,d=S;continue}return{quantile:l,value:k(c.value),consumed:p,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};var r4="effect/MetricPair",n4=Symbol.for(r4),o4={_Type:e=>e};var T1=(e,t)=>({[n4]:o4,metricKey:e,metricState:t,pipe(){return _(this,arguments)}});var i4="effect/MetricRegistry",R1=Symbol.for(i4),gw=class{[R1]=R1;map=p1();snapshot(){let t=[];for(let[r,n]of this.map)t.push(T1(r,n.get()));return t}get(t){let r=f(this.map,Js(t),or);if(r==null){if(ew(t.keyType))return this.getCounter(t);if(rw(t.keyType))return this.getGauge(t);if(tw(t.keyType))return this.getFrequency(t);if(nw(t.keyType))return this.getHistogram(t);if(ow(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(t){let r=f(this.map,Js(t),or);if(r==null){let n=C1(t);f(this.map,Gu(t))||f(this.map,Qu(t,n)),r=n}return r}getFrequency(t){let r=f(this.map,Js(t),or);if(r==null){let n=w1(t);f(this.map,Gu(t))||f(this.map,Qu(t,n)),r=n}return r}getGauge(t){let r=f(this.map,Js(t),or);if(r==null){let n=k1(t,t.keyType.bigint?BigInt(0):0);f(this.map,Gu(t))||f(this.map,Qu(t,n)),r=n}return r}getHistogram(t){let r=f(this.map,Js(t),or);if(r==null){let n=v1(t);f(this.map,Gu(t))||f(this.map,Qu(t,n)),r=n}return r}getSummary(t){let r=f(this.map,Js(t),or);if(r==null){let n=O1(t);f(this.map,Gu(t))||f(this.map,Qu(t,n)),r=n}return r}},A1=()=>new gw;var c4="effect/Metric",u4=Symbol.for(c4),p4={_Type:e=>e,_In:e=>e,_Out:e=>e},I1=D(Symbol.for("effect/Metric/globalMetricRegistry"),()=>A1()),P1=function(e,t,r,n){let o=Object.assign(s=>Qr(s,i=>f4(o,i)),{[u4]:p4,keyType:e,unsafeUpdate:t,unsafeValue:r,unsafeModify:n,register(){return this.unsafeValue([]),this},pipe(){return _(this,arguments)}});return o};var ef=(e,t)=>M1(i1(e,t));var M1=e=>{let t,r=new WeakMap,n=o=>{if(o.length===0)return t!==void 0||(t=I1.get(e)),t;let s=r.get(o);return s!==void 0||(s=I1.get(c1(e,o)),r.set(o,s)),s};return P1(e.keyType,(o,s)=>n(s).update(o),o=>n(o).get(),(o,s)=>n(s).modify(o))};var F1=(e,t,r)=>M1(a1(e,t,r));var D1=u(3,(e,t,r)=>l4(e,[ZM(t,r)]));var l4=u(2,(e,t)=>P1(e.keyType,(r,n)=>e.unsafeUpdate(r,Ao(t,n)),r=>e.unsafeValue(Ao(t,r)),(r,n)=>e.unsafeModify(r,Ao(t,n))));var f4=u(2,(e,t)=>oo(ha,r=>C(()=>e.unsafeUpdate(t,r))));var h4="effect/Request",m4=Symbol.for(h4),x4={_E:e=>e,_A:e=>e},Xre={...Ui,[m4]:x4};var N1=u(2,(e,t)=>oo(Tx,r=>C(()=>{if(r.has(e)){let n=r.get(e);n.state.completed||(n.state.completed=!0,Sa(n.result,t))}})));var Ys={Forward:0,Backward:1},Yx=class e{self;stack;direction;count=0;constructor(t,r,n){this.self=t,this.stack=r,this.direction=n}clone(){return new e(this.self,this.stack.slice(),this.direction)}reversed(){return new e(this.self,this.stack.slice(),this.direction===Ys.Forward?Ys.Backward:Ys.Forward)}next(){let t=this.entry;switch(this.count++,this.direction===Ys.Forward?this.moveNext():this.movePrev(),t._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:t.value}}}get key(){return this.stack.length>0?k(this.stack[this.stack.length-1].key):E()}get value(){return this.stack.length>0?k(this.stack[this.stack.length-1].value):E()}get entry(){return Tt(ch(this.stack),t=>[t.key,t.value])}get index(){let t=0,r=this.stack;if(r.length===0){let n=this.self._root;return n!=null?n.count:0}else r[r.length-1].left!=null&&(t=r[r.length-1].left.count);for(let n=r.length-2;n>=0;--n)r[n+1]===r[n].right&&(++t,r[n].left!=null&&(t+=r[n].left.count));return t}moveNext(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r.right!=null)for(r=r.right;r!=null;)t.push(r),r=r.left;else for(t.pop();t.length>0&&t[t.length-1].right===r;)r=t[t.length-1],t.pop()}get hasNext(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].right!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].left===t[r])return!0;return!1}movePrev(){let t=this.stack;if(t.length===0)return;let r=t[t.length-1];if(r!=null&&r.left!=null)for(r=r.left;r!=null;)t.push(r),r=r.right;else for(t.pop();t.length>0&&t[t.length-1].left===r;)r=t[t.length-1],t.pop()}get hasPrev(){let t=this.stack;if(t.length===0)return!1;if(t[t.length-1].left!=null)return!0;for(let r=t.length-1;r>0;--r)if(t[r-1].right===t[r])return!0;return!1}};var W={Red:0,Black:1},Cn=({color:e,count:t,key:r,left:n,right:o,value:s})=>({color:e,key:r,value:s,left:n,right:o,count:t});function yw(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}var ts=({count:e,key:t,left:r,right:n,value:o},s)=>({color:s,key:t,value:o,left:r,right:n,count:e}),Pe=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var L1="effect/RedBlackTree",Ew=Symbol.for(L1),y4={_Key:e=>e,_Value:e=>e},E4={[Ew]:y4,[F](){let e=R(L1);for(let t of this)e^=f(R(t[0]),z(R(t[1])));return V(this,e)},[I](e){if(U1(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;let t=Array.from(e);return Array.from(this).every((r,n)=>{let o=t[n];return T(r[0],o[0])&&T(r[1],o[1])})}return!1},[Symbol.iterator](){let e=[],t=this._root;for(;t!=null;)e.push(t),t=t.left;return new Yx(this,e,Ys.Forward)},toString(){return Z(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},tf=(e,t)=>{let r=Object.create(E4);return r._ord=e,r._root=t,r},U1=e=>v(e,Ew);var $1=u(2,(e,t)=>{let r=e._ord,n=e._root;for(;n!==void 0;){let o=r(t,n.key);if(T(t,n.key))return k(n.value);o<=0?n=n.left:n=n.right}return E()});var bw=u(2,(e,t)=>oe($1(e,t))),q1=u(3,(e,t,r)=>{let n=e._ord,o=e._root,s=[],i=[];for(;o!=null;){let a=n(t,o.key);s.push(o),i.push(a),a<=0?o=o.left:o=o.right}s.push({color:W.Red,key:t,value:r,left:void 0,right:void 0,count:1});for(let a=s.length-2;a>=0;--a){let c=s[a];i[a]<=0?s[a]={color:c.color,key:c.key,value:c.value,left:s[a+1],right:c.right,count:c.count+1}:s[a]={color:c.color,key:c.key,value:c.value,left:c.left,right:s[a+1],count:c.count+1}}for(let a=s.length-1;a>1;--a){let c=s[a-1],p=s[a];if(c.color===W.Black||p.color===W.Black)break;let l=s[a-2];if(l.left===c)if(c.left===p){let d=l.right;if(d&&d.color===W.Red)c.color=W.Black,l.right=ts(d,W.Black),l.color=W.Red,a-=1;else{if(l.color=W.Red,l.left=c.right,c.color=W.Black,c.right=l,s[a-2]=c,s[a-1]=p,Pe(l),Pe(c),a>=3){let h=s[a-3];h.left===l?h.left=c:h.right=c}break}}else{let d=l.right;if(d&&d.color===W.Red)c.color=W.Black,l.right=ts(d,W.Black),l.color=W.Red,a-=1;else{if(c.right=p.left,l.color=W.Red,l.left=p.right,p.color=W.Black,p.left=c,p.right=l,s[a-2]=p,s[a-1]=c,Pe(l),Pe(c),Pe(p),a>=3){let h=s[a-3];h.left===l?h.left=p:h.right=p}break}}else if(c.right===p){let d=l.left;if(d&&d.color===W.Red)c.color=W.Black,l.left=ts(d,W.Black),l.color=W.Red,a-=1;else{if(l.color=W.Red,l.right=c.left,c.color=W.Black,c.left=l,s[a-2]=c,s[a-1]=p,Pe(l),Pe(c),a>=3){let h=s[a-3];h.right===l?h.right=c:h.left=c}break}}else{let d=l.left;if(d&&d.color===W.Red)c.color=W.Black,l.left=ts(d,W.Black),l.color=W.Red,a-=1;else{if(c.left=p.right,l.color=W.Red,l.right=p.left,p.color=W.Black,p.right=c,p.left=l,s[a-2]=p,s[a-1]=c,Pe(l),Pe(c),Pe(p),a>=3){let h=s[a-3];h.right===l?h.right=p:h.left=p}break}}}return s[0].color=W.Black,tf(e._ord,s[0])}),H1=e=>W1(e,Ys.Forward);var W1=(e,t)=>{let r=e[Symbol.iterator](),n=0;return{[Symbol.iterator]:()=>W1(e,t),next:()=>{n++;let o=r.key;switch(t===Ys.Forward?r.moveNext():r.movePrev(),o._tag){case"None":return{done:!0,value:n};case"Some":return{done:!1,value:o.value}}}}};var z1=u(2,(e,t)=>{if(!bw(e,t))return e;let r=e._ord,n=r,o=e._root,s=[];for(;o!==void 0;){let c=n(t,o.key);s.push(o),T(t,o.key)?o=void 0:c<=0?o=o.left:o=o.right}if(s.length===0)return e;let i=new Array(s.length),a=s[s.length-1];i[i.length-1]={color:a.color,key:a.key,value:a.value,left:a.left,right:a.right,count:a.count};for(let c=s.length-2;c>=0;--c)a=s[c],a.left===s[c+1]?i[c]={color:a.color,key:a.key,value:a.value,left:i[c+1],right:a.right,count:a.count}:i[c]={color:a.color,key:a.key,value:a.value,left:a.left,right:i[c+1],count:a.count};if(a=i[i.length-1],a.left!==void 0&&a.right!==void 0){let c=i.length;for(a=a.left;a.right!=null;)i.push(a),a=a.right;let p=i[c-1];i.push({color:a.color,key:p.key,value:p.value,left:a.left,right:a.right,count:a.count}),i[c-1].key=a.key,i[c-1].value=a.value;for(let l=i.length-2;l>=c;--l)a=i[l],i[l]={color:a.color,key:a.key,value:a.value,left:a.left,right:i[l+1],count:a.count};i[c-1].left=i[c]}if(a=i[i.length-1],a.color===W.Red){let c=i[i.length-2];c.left===a?c.left=void 0:c.right===a&&(c.right=void 0),i.pop();for(let p=0;p<i.length;++p)i[p].count--;return tf(r,i[0])}else if(a.left!==void 0||a.right!==void 0){a.left!==void 0?yw(a,a.left):a.right!==void 0&&yw(a,a.right),a.color=W.Black;for(let c=0;c<i.length-1;++c)i[c].count--;return tf(r,i[0])}else{if(i.length===1)return tf(r,void 0);{for(let p=0;p<i.length;++p)i[p].count--;let c=i[i.length-2];b4(i),c.left===a?c.left=void 0:c.right=void 0}}return tf(r,i[0])});var b4=e=>{let t,r,n,o;for(let s=e.length-1;s>=0;--s){if(t=e[s],s===0){t.color=W.Black;return}if(r=e[s-1],r.left===t){if(n=r.right,n!==void 0&&n.right!==void 0&&n.right.color===W.Red){if(n=r.right=Cn(n),o=n.right=Cn(n.right),r.right=n.left,n.left=r,n.right=o,n.color=r.color,t.color=W.Black,r.color=W.Black,o.color=W.Black,Pe(r),Pe(n),s>1){let i=e[s-2];i.left===r?i.left=n:i.right=n}e[s-1]=n;return}else if(n!==void 0&&n.left!==void 0&&n.left.color===W.Red){if(n=r.right=Cn(n),o=n.left=Cn(n.left),r.right=o.left,n.left=o.right,o.left=r,o.right=n,o.color=r.color,r.color=W.Black,n.color=W.Black,t.color=W.Black,Pe(r),Pe(n),Pe(o),s>1){let i=e[s-2];i.left===r?i.left=o:i.right=o}e[s-1]=o;return}if(n!==void 0&&n.color===W.Black)if(r.color===W.Red){r.color=W.Black,r.right=ts(n,W.Red);return}else{r.right=ts(n,W.Red);continue}else if(n!==void 0){if(n=Cn(n),r.right=n.left,n.left=r,n.color=r.color,r.color=W.Red,Pe(r),Pe(n),s>1){let i=e[s-2];i.left===r?i.left=n:i.right=n}e[s-1]=n,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}else{if(n=r.left,n!==void 0&&n.left!==void 0&&n.left.color===W.Red){if(n=r.left=Cn(n),o=n.left=Cn(n.left),r.left=n.right,n.right=r,n.left=o,n.color=r.color,t.color=W.Black,r.color=W.Black,o.color=W.Black,Pe(r),Pe(n),s>1){let i=e[s-2];i.right===r?i.right=n:i.left=n}e[s-1]=n;return}else if(n!==void 0&&n.right!==void 0&&n.right.color===W.Red){if(n=r.left=Cn(n),o=n.right=Cn(n.right),r.left=o.right,n.right=o.left,o.right=r,o.left=n,o.color=r.color,r.color=W.Black,n.color=W.Black,t.color=W.Black,Pe(r),Pe(n),Pe(o),s>1){let i=e[s-2];i.right===r?i.right=o:i.left=o}e[s-1]=o;return}if(n!==void 0&&n.color===W.Black)if(r.color===W.Red){r.color=W.Black,r.left=ts(n,W.Red);return}else{r.left=ts(n,W.Red);continue}else if(n!==void 0){if(n=Cn(n),r.left=n.right,n.right=r,n.color=r.color,r.color=W.Red,Pe(r),Pe(n),s>1){let i=e[s-2];i.right===r?i.right=n:i.left=n}e[s-1]=n,e[s]=r,s+1<e.length?e[s+1]=t:e.push(t),s=s+2}}}};var B1=bw,j1=q1,K1=H1;var V1=z1;var Sw=Symbol.for("effect/SortedSet"),C4={[Sw]:{_A:e=>e},[F](){return f(R(this.keyTree),z(R(Sw)),V(this))},[I](e){return w4(e)&&T(this.keyTree,e.keyTree)},[Symbol.iterator](){return K1(this.keyTree)},toString(){return Z(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},G1=e=>{let t=Object.create(C4);return t.keyTree=e,t},w4=e=>v(e,Sw);var Q1=u(2,(e,t)=>B1(e.keyTree,t)?e:G1(j1(e.keyTree,t,!0)));var J1=u(2,(e,t)=>G1(V1(e.keyTree,t)));var v4="effect/Supervisor",Zu=Symbol.for(v4),rf={_T:e=>e},Ju=class e{underlying;value0;[Zu]=rf;constructor(t,r){this.underlying=t,this.value0=r}get value(){return this.value0}onStart(t,r,n,o){this.underlying.onStart(t,r,n,o)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,f(this.value,j(t)))}zip(t){return new Yu(this,t)}},Yu=class e{left;right;_tag="Zip";[Zu]=rf;constructor(t,r){this.left=t,this.right=r}get value(){return ua(this.left.value,this.right.value)}onStart(t,r,n,o){this.left.onStart(t,r,n,o),this.right.onStart(t,r,n,o)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Ju(this,f(this.value,j(t)))}zip(t){return new e(this,t)}},Cw=e=>v(e,Zu)&&Ti(e,"Zip"),Y1=class{[Zu]=rf;fibers=new Set;get value(){return C(()=>Array.from(this.fibers))}onStart(t,r,n,o){this.fibers.add(o)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ju(this,f(this.value,j(t)))}zip(t){return new Yu(this,t)}onRun(t,r){return t()}},_w=class{effect;[Zu]=rf;constructor(t){this.effect=t}get value(){return this.effect}onStart(t,r,n,o){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ju(this,f(this.value,j(t)))}zip(t){return new Yu(this,t)}onRun(t,r){return t()}},Z1=class{ref;[Zu]=rf;constructor(t){this.ref=t}get value(){return C(()=>ve(this.ref))}onStart(t,r,n,o){f(this.ref,Kr(f(ve(this.ref),Q1(o))))}onEnd(t,r){f(this.ref,Kr(f(ve(this.ref),J1(r))))}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Ju(this,f(this.value,j(t)))}zip(t){return new Yu(this,t)}onRun(t,r){return t()}};var O4=e=>new _w(e),Na=D("effect/Supervisor/none",()=>O4(ee));var X1=Ms;var e2="Empty",t2="AddSupervisor",r2="RemoveSupervisor",n2="AndThen",Xu={_tag:e2},Zx=(e,t)=>({_tag:n2,first:e,second:t}),R4=(e,t)=>A4(t,Ce(e)),A4=(e,t)=>{let r=e,n=t;for(;lt(n);){let o=ft(n);switch(o._tag){case e2:{n=Rt(n);break}case t2:{r=r.zip(o.supervisor),n=Rt(n);break}case r2:{r=kw(r,o.supervisor),n=Rt(n);break}case n2:{n=Oe(o.first)(Oe(o.second)(Rt(n)));break}}}return r},kw=(e,t)=>T(e,t)?Na:Cw(e)?kw(e.left,t).zip(kw(e.right,t)):e,Xx=e=>T(e,Na)?Gn():Cw(e)?f(Xx(e.left),Qn(Xx(e.right))):Vi(e),I4=(e,t)=>{if(T(e,t))return Xu;let r=Xx(e),n=Xx(t),o=f(n,nS(r),ks(Xu,(i,a)=>Zx(i,{_tag:t2,supervisor:a}))),s=f(r,nS(n),ks(Xu,(i,a)=>Zx(i,{_tag:r2,supervisor:a})));return Zx(o,s)},o2=X1({empty:Xu,patch:R4,combine:Zx,diff:I4});var U4=ef("effect_fiber_started",{incremental:!0}),s2=ef("effect_fiber_active"),$4=ef("effect_fiber_successes",{incremental:!0}),q4=ef("effect_fiber_failures",{incremental:!0}),H4=D1(F1("effect_fiber_lifetimes",VF({start:.5,factor:2,count:35})),"time_unit","milliseconds"),nf="Continue",W4="Done",i2="Yield",z4={_E:e=>e,_A:e=>e},eg=e=>{throw new Error(`BUG: FiberRuntime - ${vo(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},rs=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),ns=D("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),of={[wc]:(e,t,r)=>Je(()=>t.effect_instruction_i1(r)),OnStep:(e,t,r)=>ge(ge(r)),[kc]:(e,t,r)=>Je(()=>t.effect_instruction_i2(r)),[zp]:(e,t,r)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Bo(e.currentRuntimeFlags)&&e.isInterrupted()?fe(e.getInterruptedCause()):ge(r)),[vc]:(e,t,r)=>(Je(()=>t.effect_instruction_i2(r)),Je(()=>t.effect_instruction_i0())?(e.pushStack(t),Je(()=>t.effect_instruction_i1())):ee),[Li]:(e,t,r)=>{let n=Je(()=>t.effect_instruction_i0.next(r));return n.done?ge(n.value):(e.pushStack(t),Qd(n.value))}},B4={[Lx]:(e,t,r,n)=>(e.processNewInterruptSignal(n.cause),Bo(t)?fe(n.cause):r),[$x]:(e,t,r,n)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Ux]:(e,t,r,n)=>(n.onFiber(e,dC(t)),r),[qx]:(e,t,r,n)=>g(ca(),()=>r)},j4=e=>Ko(OI(e),t=>po(RI(t),([r,n])=>{let o=new Map,s=[];for(let a of n){s.push(Er(a));for(let c of a)o.set(c.request,c)}let i=s.flat();return Jr(t6(r.runAll(s),i,()=>i.forEach(a=>{a.listeners.interrupted=!0})),Tx,o)},!1,!1)),K4=jp(),sf=class extends dn{[zx]=$C;[qC]=z4;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(t,r,n){if(super(),this.currentRuntimeFlags=n,this._fiberId=t,this._fiberRefs=r,BS(n)){let o=this.getFiberRef(ha);U4.unsafeUpdate(1,o),s2.unsafeUpdate(1,o)}this.refreshRefCache()}commit(){return Gs(this)}id(){return this._fiberId}resume(t){this.tell(Fa(t))}get status(){return this.ask((t,r)=>r)}get runtimeFlags(){return this.ask((t,r)=>MM(r)?t.currentRuntimeFlags:r.runtimeFlags)}scope(){return PF(this)}get children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ma)}fiberRefs(){return this.ask(t=>t.getFiberRefs())}ask(t){return G(()=>{let r=Ea(this._fiberId);return this.tell(Ku((n,o)=>{Sa(r,C(()=>t(n,o)))})),Bt(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return ar(t=>{let r=n=>t(A(n));return this.tell(Ku((n,o)=>{n._exitValue!==null?r(this._exitValue):n.addObserver(r)})),C(()=>this.tell(Ku((n,o)=>{n.removeObserver(r)})))},this.id())}get inheritAll(){return J((t,r)=>{let n=t.id(),o=t.getFiberRefs(),s=r.runtimeFlags,i=this.getFiberRefs(),a=aC(o,n,i);t.setFiberRefs(a);let c=t.getFiberRef(c2),p=f(mn(s,c),VS(ro),VS(dm));return Sl(p)})}get poll(){return C(()=>Hn(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return C(()=>this.tell(Hx(sr(t))))}unsafeInterruptAsFork(t){this.tell(Hx(sr(t)))}addObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}removeObserver(t){this._observers=this._observers.filter(r=>r!==t)}getFiberRefs(){return this.setFiberRef(c2,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=Ll(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=qu(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(ur),this.currentTracer=this.currentDefaultServices.unsafeMap.get(Nu.key),this.currentSupervisor=this.getFiberRef(Mw),this.currentScheduler=this.getFiberRef(Bu),this.currentContext=this.getFiberRef(Pt),this.currentSpan=this.currentContext.unsafeMap.get(ka.key)}setFiberRefs(t){this._fiberRefs=t,this.refreshRefCache()}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}transferChildren(t){let r=this._children;if(this._children=null,r!==null&&r.size>0)for(let n of r)n._exitValue===null&&t.add(this.currentRuntimeFlags,n)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=nf,n=globalThis[Qs];globalThis[Qs]=this;try{for(;r===nf;)r=this._queue.length===0?W4:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Qs]=n}this._queue.length>0&&!this._running?(this._running=!0,r===i2?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(so))}drainQueueWhileRunning(t,r){let n=r;for(;this._queue.length>0;){let o=this._queue.splice(0,1)[0];n=B4[o._tag](this,t,n,o)}return n}isInterrupted(){return!ea(this.getFiberRef(ma))}addInterruptedCause(t){let r=this.getFiberRef(ma);this.setFiberRef(ma,Le(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(Hx(sr(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return _l({while:()=>!r,body:()=>{let o=t.next();return o.done?C(()=>{r=!0}):et(o.value.await)},step:()=>{}})}return null}reportExitValue(t){if(BS(this.currentRuntimeFlags)){let r=this.getFiberRef(ha),n=this.id().startTimeMillis,o=Date.now();switch(H4.unsafeUpdate(o-n,r),s2.unsafeUpdate(-1,r),t._tag){case Ne:{$4.unsafeUpdate(1,r);break}case De:{q4.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(__);!ru(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",t.cause,r)}}setExitValue(t){this._exitValue=t,this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t);this._observers=[]}getLoggers(){return this.getFiberRef(ng)}log(t,r,n){let o=oe(n)?n.value:this.getFiberRef(Im),s=this.getFiberRef(rg);if(UM(s,o))return;let i=this.getFiberRef(wl),a=this.getFiberRef(bu),c=this.getLoggers(),p=this.getFiberRefs();if(Gi(c)>0){let l=st(this.getFiberRef(ur),ao),d=new Date(l.unsafeCurrentTimeMillis());pR(p,()=>{for(let h of c)h.log({fiberId:this.id(),logLevel:o,message:t,cause:r,context:p,spans:i,annotations:a,date:d})})}}evaluateMessageWhileSuspended(t){switch(t._tag){case qx:return i2;case Lx:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(fe(t.cause)),this._asyncInterruptor=null),nf;case $x:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),nf;case Ux:return t.onFiber(this,this._exitValue!==null?IM:PM(this.currentRuntimeFlags,this._asyncBlockingOn)),nf;default:return eg(t)}}evaluateEffect(t){this.currentSupervisor.onResume(this);try{let r=Bo(this.currentRuntimeFlags)&&this.isInterrupted()?fe(this.getInterruptedCause()):t;for(;r!==null;){let n=r,o=this.runLoop(n);if(o===rs){let s=ns.currentOp;ns.currentOp=null,s._op===Oc?_I(this.currentRuntimeFlags)?(this.tell(AF()),this.tell(Fa(ht)),r=null):r=ht:s._op===Di&&(r=null)}else{this.currentRuntimeFlags=f(this.currentRuntimeFlags,HS(dm));let s=this.interruptAllChildren();s!==null?r=g(s,()=>o):(this._queue.length===0?this.setExitValue(o):this.tell(Fa(o)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(t){if(this._running)this.tell(Fa(t));else{this._running=!0;let r=globalThis[Qs];globalThis[Qs]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[Qs]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(Fa(t))}patchRuntimeFlags(t,r){let n=Fs(t,r);return globalThis[Qs]=this,this.currentRuntimeFlags=n,n}initiateAsync(t,r){let n=!1,o=s=>{n||(n=!0,this.tell(Fa(s)))};Bo(t)&&(this._asyncInterruptor=o);try{r(o)}catch(s){o(de(dt(s)))}}pushStack(t){this._stack.push(t),t._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){let t=this._stack.pop();if(t)return t._op==="OnStep"&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._op!==Cc)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._op!==wc&&t._op!==vc&&t._op!==Li)return t;t=this.popStack()}}Tag(t){return C(()=>Dc(this.currentContext,t))}Left(t){return xe(t.left)}None(t){return xe(new Go)}Right(t){return ge(t.right)}Some(t){return ge(t.value)}Micro(t){return fu(r=>{let n=r,o=b0(g0(t,this.currentContext));return o.addObserver(s=>{if(s._tag==="Success")return n(ge(s.value));switch(s.cause._tag){case"Interrupt":return n(fe(sr(Cr)));case"Fail":return n(xe(s.cause.error));case"Die":return n(xn(s.cause.defect))}}),fu(s=>{n=i=>{s(ee)},o.unsafeInterrupt()})})}[th](t){let r=Je(()=>t.effect_instruction_i0()),n=this.getNextSuccessCont();return n!==void 0?(n._op in of||eg(n),of[n._op](this,n,r)):(ns.currentOp=ge(r),rs)}[Ne](t){let r=t,n=this.getNextSuccessCont();return n!==void 0?(n._op in of||eg(n),of[n._op](this,n,r.effect_instruction_i0)):(ns.currentOp=r,rs)}[De](t){let r=t.effect_instruction_i0,n=this.getNextFailCont();if(n!==void 0)switch(n._op){case Cc:case kc:return Bo(this.currentRuntimeFlags)&&this.isInterrupted()?fe(Zh(r)):Je(()=>n.effect_instruction_i1(r));case"OnStep":return Bo(this.currentRuntimeFlags)&&this.isInterrupted()?fe(Zh(r)):ge(fe(r));case zp:return this.patchRuntimeFlags(this.currentRuntimeFlags,n.patch),Bo(this.currentRuntimeFlags)&&this.isInterrupted()?fe(Le(r,this.getInterruptedCause())):fe(r);default:eg(n)}else return ns.currentOp=fe(r),rs}[rh](t){return Je(()=>t.effect_instruction_i0(this,dC(this.currentRuntimeFlags)))}Blocked(t){let r=this.getFiberRefs(),n=this.currentRuntimeFlags;if(this._steps.length>0){let o=[],s=this._steps[this._steps.length-1],i=this.popStack();for(;i&&i._op!=="OnStep";)o.push(i),i=this.popStack();this.setFiberRefs(s.refs),this.currentRuntimeFlags=s.flags;let a=Ta(s.refs,r),c=mn(s.flags,n);return ge(_m(t.effect_instruction_i0,J(p=>{for(;o.length>0;)p.pushStack(o.pop());return p.setFiberRefs(Ra(p.id(),p.getFiberRefs())(a)),p.currentRuntimeFlags=Fs(c)(p.currentRuntimeFlags),t.effect_instruction_i1})))}return Ct(o=>g(cf(o_(t.effect_instruction_i0)),()=>o(t.effect_instruction_i1)))}RunBlocked(t){return j4(t.effect_instruction_i0)}[ys](t){let r=t.effect_instruction_i0,n=this.currentRuntimeFlags,o=Fs(n,r);if(Bo(o)&&this.isInterrupted())return fe(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),t.effect_instruction_i1){let s=mn(o,n);return this.pushStack(new gm(s,t)),Je(()=>t.effect_instruction_i1(n))}else return ht}[wc](t){return this.pushStack(t),t.effect_instruction_i0}OnStep(t){return this.pushStack(t),t.effect_instruction_i0}[Cc](t){return this.pushStack(t),t.effect_instruction_i0}[kc](t){return this.pushStack(t),t.effect_instruction_i0}[Di](t){return this._asyncBlockingOn=t.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,t.effect_instruction_i0),ns.currentOp=t,rs}[Oc](t){return this._isYielding=!1,ns.currentOp=t,rs}[vc](t){let r=t.effect_instruction_i0,n=t.effect_instruction_i1;return r()?(this.pushStack(t),n()):ht}[Li](t){return of[Li](this,t,void 0)}[Ni](t){return Je(()=>t.commit())}runLoop(t){let r=t;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&SI)!==0&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;let n=this.currentScheduler.shouldYield(this);if(n!==!1){this._isYielding=!0,this.currentOpCount=0;let o=r;r=g(ca({priority:n}),()=>o)}}try{if(r=this.currentTracer.context(()=>{if(K4!==r[Ds]._V){let n=this.getFiberRef(C_);if(n._tag==="Some"){let o=r[Ds]._V;this.log(`Executing an Effect versioned ${o} with a Runtime of version ${jp()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,Sr,n)}}return this[r._op](r)},this),r===rs){let n=ns.currentOp;return n._op===Oc||n._op===Di?rs:(ns.currentOp=null,n._op===Ne||n._op===De?n:fe(dt(n)))}}catch(n){r!==rs&&!v(r,"_op")||!(r._op in this)?r=hu(`Not a valid effect: ${vo(r)}`):k_(n)?r=fe(Le(dt(n),sr(Cr))):r=xn(n)}}}run=()=>{this.drainQueueOnCurrentThread()}},rg=D("effect/FiberRef/currentMinimumLogLevel",()=>Ue(Cx("Info"))),tp=e=>xt(t=>{let r=Xo(t.context,ur);st(r,Yo).unsafe.log(e.log(t))}),p2=e=>xt(t=>{let r=Xo(t.context,ur),n=st(r,Yo).unsafe;switch(t.logLevel._tag){case"Debug":return n.debug(e.log(t));case"Info":return n.info(e.log(t));case"Trace":return n.trace(e.log(t));case"Warning":return n.warn(e.log(t));case"Error":case"Fatal":return n.error(e.log(t));default:return n.log(e.log(t))}}),l2=e=>xt(t=>{let r=Xo(t.context,ur);st(r,Yo).unsafe.error(e.log(t))}),Ua=D(Symbol.for("effect/Logger/defaultLogger"),()=>tp(Vx)),f2=D(Symbol.for("effect/Logger/jsonLogger"),()=>tp(Qx)),d2=D(Symbol.for("effect/Logger/logFmtLogger"),()=>tp(Gx)),h2=D(Symbol.for("effect/Logger/prettyLogger"),()=>Jx),m2=D(Symbol.for("effect/Logger/structuredLogger"),()=>tp(Vl)),Rw=D(Symbol.for("effect/Logger/tracerLogger"),()=>xt(({annotations:e,cause:t,context:r,fiberId:n,logLevel:o,message:s})=>{let i=Bn(Bs(r,Pt),ka);if(i._tag==="None"||i.value._tag==="ExternalSpan")return;let a=Dc(Bs(r,ur),ao),c={};for(let[p,l]of e)c[p]=l;c["effect.fiberId"]=VA(n),c["effect.logLevel"]=o.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=ir(t,{renderErrorCause:!0})),i.value.event(vo(Array.isArray(s)?s[0]:s),a.unsafeCurrentTimeNanos(),c)})),x2=e=>Bx(e,t=>{let r=qt(Ul(t.context,Pt),Bn(ka));return r._tag==="None"?t:{...t,annotations:f(t.annotations,eo("effect.traceId",r.value.traceId),eo("effect.spanId",r.value.spanId),r.value._tag==="Span"?eo("effect.spanName",r.value.name):N)}}),ng=D(Symbol.for("effect/FiberRef/currentLoggers"),()=>E_(Vi(Ua,Rw))),g2=u(3,(e,t,r)=>g(ag,n=>{let o=[],s=G(()=>{if(o.length===0)return ee;let i=o;return o=[],r(i)});return Ct(i=>f(ju(t),he(s),AC,i,cf,g(a=>Su(n,fa(a))),he(af(()=>s)),Te(xt(a=>{o.push(e.log(a))}))))}));var og=u(e=>It(e[0]),(e,t)=>Us(Qr(e,r=>af(n=>t(r,n)))));var af=e=>J(t=>{let r=t.getFiberRefs(),n=qS(t.currentRuntimeFlags,ro);return g(ag,o=>xa(o,s=>J(i=>{let a=i.getFiberRefs(),c=i.currentRuntimeFlags,p=Ta(a,r),l=mn(c,n),d=Ta(r,a);return i.setFiberRefs(Ra(p,i.id(),r)),ri(l_(e(s),l),C(()=>{i.setFiberRefs(Ra(d,i.id(),i.getFiberRefs()))}))})))});var V4=e=>{if(Array.isArray(e)||Ai(e))return[e,E()];let t=Object.keys(e),r=t.length;return[t.map(n=>e[n]),k(n=>{let o={};for(let s=0;s<r;s++)o[t[s]]=n[s];return o})]},G4=(e,t,r)=>{let n=[];for(let o of e)n.push(gn(o));return g(La(n,N,{concurrency:r?.concurrency,batching:r?.batching,concurrentFinalizers:r?.concurrentFinalizers}),o=>{let s=E(),i=o.length,a=new Array(i),c=new Array(i),p=!1;for(let l=0;l<i;l++){let d=o[l];d._tag==="Left"?(a[l]=k(d.left),p=!0):(c[l]=d.right,a[l]=s)}return p?t._tag==="Some"?xe(t.value(a)):xe(a):r?.discard?ee:t._tag==="Some"?A(t.value(c)):A(c)})},Q4=(e,t,r)=>{let n=[];for(let o of e)n.push(gn(o));return r?.discard?La(n,N,{concurrency:r?.concurrency,batching:r?.batching,discard:!0,concurrentFinalizers:r?.concurrentFinalizers}):j(La(n,N,{concurrency:r?.concurrency,batching:r?.batching,concurrentFinalizers:r?.concurrentFinalizers}),o=>t._tag==="Some"?t.value(o):o)},sg=(e,t)=>{let[r,n]=V4(e);return t?.mode==="validate"?G4(r,n,t):t?.mode==="either"?Q4(r,n,t):t?.discard!==!0&&n._tag==="Some"?j(La(r,N,t),n.value):La(r,N,t)};var La=u(e=>Ai(e[0]),(e,t,r)=>J(n=>{let o=r?.batching===!0||r?.batching==="inherit"&&n.getFiberRef(S_);return r?.discard?_C(r.concurrency,()=>ep($u,r?.concurrentFinalizers)(s=>o?po(e,(i,a)=>s(t(i,a)),!0,!1,1):Ko(e,(i,a)=>s(t(i,a)))),()=>ep(dx,r?.concurrentFinalizers)(s=>po(e,(i,a)=>s(t(i,a)),o,!1)),s=>ep(hx(s),r?.concurrentFinalizers)(i=>po(e,(a,c)=>i(t(a,c)),o,!1,s))):_C(r?.concurrency,()=>ep($u,r?.concurrentFinalizers)(s=>o?vw(e,1,(i,a)=>s(t(i,a)),!0):cr(e,(i,a)=>s(t(i,a)))),()=>ep(dx,r?.concurrentFinalizers)(s=>y2(e,(i,a)=>s(t(i,a)),o)),s=>ep(hx(s),r?.concurrentFinalizers)(i=>vw(e,s,(a,c)=>i(t(a,c)),o)))})),y2=(e,t,r)=>G(()=>{let n=te(e),o=new Array(n.length);return he(po(n,(i,a)=>g(t(i,a),c=>C(()=>o[a]=c)),r,!1),A(o))}),po=(e,t,r,n,o)=>Ct(s=>u_(i=>J(a=>{let c=Array.from(e).reverse(),p=c.length;if(p===0)return ee;let l=0,d=!1,h=o?Math.min(c.length,o):c.length,m=new Set,x=new Array,y=()=>m.forEach(H=>{H.currentScheduler.scheduleTask(()=>{H.unsafeInterruptAsFork(a.id())},0)}),b=new Array,S=new Array,O=new Array,w=()=>{let H=x.filter(({exit:ae})=>ae._tag==="Failure").sort((ae,re)=>ae.index<re.index?-1:ae.index===re.index?0:1).map(({exit:ae})=>ae);return H.length===0&&H.push(ht),H},P=(H,ae=!1)=>{let re=Us(i(H)),Y=J4(re,a,a.currentRuntimeFlags,Da);return a.currentScheduler.scheduleTask(()=>{ae&&Y.unsafeInterruptAsFork(a.id()),Y.resume(re)},0),Y},M=()=>{n||(p-=c.length,c=[]),d=!0,y()},L=r?a_:wr,q=P(ar(H=>{let ae=(Y,Fe)=>{Y._op==="Blocked"?O.push(Y):(x.push({index:Fe,exit:Y}),Y._op==="Failure"&&!d&&M())},re=()=>{if(c.length>0){let Y=c.pop(),Fe=l++,Fr=()=>{let St=c.pop();return Fe=l++,g(ca(),()=>g(L(s(t(St,Fe))),Dr))},Dr=St=>c.length>0&&(ae(St,Fe),c.length>0)?Fr():A(St),an=g(L(s(t(Y,Fe))),Dr),kt=P(an);b.push(kt),m.add(kt),d&&kt.currentScheduler.scheduleTask(()=>{kt.unsafeInterruptAsFork(a.id())},0),kt.addObserver(St=>{let Nr;if(St._op==="Failure"?Nr=St:Nr=St.effect_instruction_i0,S.push(kt),m.delete(kt),ae(Nr,Fe),x.length===p)H(A(ue(Hs(w(),{parallel:!0}),()=>ht)));else if(O.length+x.length===p){let mc=w(),CE=O.map(Tp=>Tp.effect_instruction_i0).reduce(QS);H(A(_m(CE,po([ue(Hs(mc,{parallel:!0}),()=>ht),...O.map(Tp=>Tp.effect_instruction_i1)],Tp=>Tp,r,!0,o))))}else re()})}};for(let Y=0;Y<h;Y++)re()}));return et(vr(yn(s(Gs(q))),ya({onFailure:H=>{M();let ae=O.length+1,re=Math.min(typeof o=="number"?o:O.length,O.length),Y=Array.from(O);return ar(Fe=>{let Fr=[],Dr=0,an=0,kt=(Nr,mc)=>CE=>{Fr[Nr]=CE,Dr++,Dr===ae&&Fe(ge(fe(H))),Y.length>0&&mc&&St()},St=()=>{P(Y.pop(),!0).addObserver(kt(an,!0)),an++};q.addObserver(kt(an,!1)),an++;for(let Nr=0;Nr<re;Nr++)St()})},onSuccess:()=>cr(S,H=>H.inheritAll)})))}))),vw=(e,t,r,n)=>G(()=>{let o=te(e),s=new Array(o.length);return he(po(o,(a,c)=>j(r(a,c),p=>s[c]=p),n,!1,t),A(s))});var cf=e=>Y4(e,Da);var Aw=(e,t,r,n=null)=>{let o=tg(e,t,r,n);return o.resume(e),o},J4=(e,t,r,n=null)=>tg(e,t,r,n),tg=(e,t,r,n=null)=>{let o=sm(),s=t.getFiberRefs(),i=cC(s,o),a=new sf(o,i,r),c=Bs(i,Pt),p=a.currentSupervisor;return p.onStart(c,e,k(t),a),a.addObserver(d=>p.onEnd(d,a)),(n!==null?n:f(t.getFiberRef(bm),ue(()=>t.scope()))).add(r,a),a},Y4=(e,t)=>J((r,n)=>A(Aw(e,r,n.runtimeFlags,t)));var Ow=e=>bn(t=>ie(Bn(t,Xs),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return g(Cu(r,dx),n=>ti(e,n))}}})),a2=e=>t=>bn(r=>ie(Bn(r,Xs),{onNone:()=>t,onSome:n=>n.strategy._tag==="ParallelN"&&n.strategy.parallelism===e?t:g(Cu(n,hx(e)),o=>ti(t,o))}));var ep=(e,t)=>r=>bn(n=>ie(Bn(n,Xs),{onNone:()=>r(N),onSome:o=>{if(t===!0){let s=e._tag==="Parallel"?Ow:e._tag==="Sequential"?Tw:a2(e.parallelism);switch(o.strategy._tag){case"Parallel":return s(r(Ow));case"Sequential":return s(r(Tw));case"ParallelN":return s(r(a2(o.strategy.parallelism)))}}else return r(N)}})),uf=e=>g(Xs,e),ig=e=>g(ei(),t=>vr(e(t),r=>t.close(r))),Iw=e=>g(ei(),t=>C2(e,t)),Tw=e=>bn(t=>ie(Bn(t,Xs),{onNone:()=>e,onSome:r=>{switch(r.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return g(Cu(r,$u),n=>ti(e,n))}}}));var Pw=e=>rp(ur,zt(Mu,e));var E2=u(e=>It(e[1]),(e,t,r)=>Zs(e,t,(n,o)=>[n,o],r)),b2=u(e=>It(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?pa(e,t):Zs(e,t,(n,o)=>n,r)),S2=u(e=>It(e[1]),(e,t,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?he(e,t):Zs(e,t,(n,o)=>o,r)),Zs=u(e=>It(e[1]),(e,t,r,n)=>j(sg([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),([o,s])=>r(o,s)));var Xs=ot("effect/Scope"),ag=Xs,Z4=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.set({},t)},X4={[Fm]:Fm,[Dm]:Dm,pipe(){return _(this,arguments)},fork(e){return C(()=>{let t=_2(e);if(this.state._tag==="Closed")return t.state=this.state,t;let r={},n=o=>t.close(o);return this.state.finalizers.set(r,n),Z4(t,o=>C(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),t})},close(e){return G(()=>{if(this.state._tag==="Closed")return ee;let t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?ee:rC(this.strategy)?f(cr(t,r=>wr(r(e))),g(r=>f(Hs(r),Tt(Tl),ue(()=>ht)))):nC(this.strategy)?f(y2(t,r=>wr(r(e)),!1),g(r=>f(Hs(r,{parallel:!0}),Tt(Tl),ue(()=>ht)))):f(vw(t,this.strategy.parallelism,r=>wr(r(e)),!1),g(r=>f(Hs(r,{parallel:!0}),Tt(Tl),ue(()=>ht))))})},addFinalizer(e){return G(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.set({},e),ee))}},_2=(e=Oa)=>{let t=Object.create(X4);return t.strategy=e,t.state={_tag:"Open",finalizers:new Map},t},ei=(e=Oa)=>C(()=>_2(e)),ti=u(2,(e,t)=>Tu(e,yr(Fc(Xs,t)))),C2=u(2,(e,t)=>f(e,ti(t),vr(r=>t.close(r)))),e6=e=>qs(e,{differ:o2,fork:Xu}),pf=u(2,(e,t)=>et(og(g(da(e),r=>Te(lu(e,t),r)),r=>lu(e,r)))),rp=u(2,(e,t)=>oo(e,r=>pf(e,t(r))));var c2=WI(CI),Mw=e6(Na);var Fw=u(3,(e,t,r)=>w2(e,t,{onSelfWin:(n,o)=>g(n.await,s=>{switch(s._tag){case Ne:return g(n.inheritAll,()=>r.onSelfDone(s,o));case De:return r.onSelfDone(s,o)}}),onOtherWin:(n,o)=>g(n.await,s=>{switch(s._tag){case Ne:return g(n.inheritAll,()=>r.onOtherDone(s,o));case De:return r.onOtherDone(s,o)}})}));var Dw=u(2,(e,t)=>jo(r=>Fw(e,t,{onSelfDone:(n,o)=>vu(n,{onFailure:s=>f(Gs(o),Fx(i=>Yn(s,i))),onSuccess:s=>f(o,no(r),Te(s))}),onOtherDone:(n,o)=>vu(n,{onFailure:s=>f(Gs(o),Fx(i=>Yn(i,s))),onSuccess:s=>f(o,no(r),Te(s))})}))),w2=u(3,(e,t,r)=>J((n,o)=>{let s=o.runtimeFlags,i=Xn(!0),a=tg(e,n,s,r.selfScope),c=tg(t,n,s,r.otherScope);return ar(p=>{a.addObserver(()=>u2(a,c,r.onSelfWin,i,p)),c.addObserver(()=>u2(c,a,r.onOtherWin,i,p)),a.startFork(e),c.startFork(t)},jA(a.id(),c.id()))})),u2=(e,t,r,n,o)=>{HA(!0,!1)(n)&&o(r(e,t))},ri=u(2,(e,t)=>Ct(r=>Xe(r(e),{onFailure:n=>Xe(t,{onFailure:o=>de(Le(n,o)),onSuccess:()=>de(n)}),onSuccess:n=>Te(t,n)}))),t6=(e,t,r)=>jo(n=>g(g(cf(xu(e)),o=>ar(s=>{let i=t.map(p=>p.listeners.count),a=()=>{i.every(p=>p===0)&&t.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&Ol(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&tu(p.result.state.current.effect.cause)))&&(c.forEach(p=>p()),r?.(),s(fa(o)))};o.addObserver(p=>{c.forEach(l=>l()),s(p)});let c=t.map((p,l)=>{let d=h=>{i[l]=h,a()};return p.listeners.addObserver(d),()=>p.listeners.removeObserver(d)});return a(),C(()=>{c.forEach(p=>p())})})),()=>G(()=>{let o=t.flatMap(s=>s.state.completed?[]:[s]);return Ko(o,s=>N1(s.request,O_(n)))})));var r6="effect/ScheduleInterval",lf=Symbol.for(r6),Nw={[lf]:lf,startMillis:0,endMillis:0},Lw=(e,t)=>e>t?Nw:{[lf]:lf,startMillis:e,endMillis:t},k2=u(2,(e,t)=>v2(e,t)===e),v2=u(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t);var O2=e=>e.startMillis>=e.endMillis;var T2=u(2,(e,t)=>{let r=Math.max(e.startMillis,t.startMillis),n=Math.min(e.endMillis,t.endMillis);return Lw(r,n)});var R2=e=>Lw(e,Number.POSITIVE_INFINITY);var Uw=Nw,A2=k2;var I2=O2;var P2=T2;var M2=R2;var s6="effect/ScheduleIntervals",$w=Symbol.for(s6),qw=e=>({[$w]:$w,intervals:e});var D2=u(2,(e,t)=>i6(e.intervals,t.intervals,We())),i6=(e,t,r)=>{let n=e,o=t,s=r;for(;lt(n)&&lt(o);){let i=f(ft(n),P2(ft(o))),a=I2(i)?s:f(s,Oe(i));f(ft(n),A2(ft(o)))?n=Rt(n):o=Rt(o),s=a}return qw(br(s))},cg=e=>f(e.intervals,Bi,ue(()=>Uw)).startMillis,N2=e=>f(e.intervals,Bi,ue(()=>Uw)).endMillis,L2=u(2,(e,t)=>cg(e)<cg(t)),U2=e=>lt(e.intervals);var $2=qw;var q2=D2,H2=cg,Hw=N2,W2=L2,z2=U2;var Ww="Continue",j2="Done",K2=e=>({_tag:Ww,intervals:e}),V2=e=>({_tag:Ww,intervals:$2(Ce(e))}),G2={_tag:j2},Q2=e=>e._tag===Ww,J2=e=>e._tag===j2;var Y2=K2;var Z2=V2,np=G2,zw=Q2,ff=J2;var df=Su,X2=xa,$a=_u,ug=ti,pg=Cu;var eD=ei;var jw=class{permits;waiters=new Set;taken=0;constructor(t){this.permits=t}get free(){return this.permits-this.taken}take=t=>El(r=>{if(this.free<t){let n=()=>{this.free<t||(this.waiters.delete(n),this.taken+=t,r(A(t)))};return this.waiters.add(n),C(()=>{this.waiters.delete(n)})}return this.taken+=t,r(A(t))});updateTaken=t=>J(r=>(this.taken=t(this.taken),this.waiters.size>0&&r.getFiberRef(Bu).scheduleTask(()=>{let n=this.waiters.values(),o=n.next();for(;o.done===!1&&this.free>0;)o.value(),o=n.next()},r.getFiberRef(so)),A(this.free)));release=t=>this.updateTaken(r=>r-t);releaseAll=this.updateTaken(t=>0);withPermits=t=>r=>Ct(n=>g(n(this.take(t)),o=>ri(n(r),this.release(o))));withPermitsIfAvailable=t=>r=>Ct(n=>G(()=>this.free<t?FC:(this.taken+=t,ri(n(OC(r)),this.release(t)))))},Gw=e=>new jw(e),nD=e=>C(()=>Gw(e)),Kw=class extends dn{isOpen;waiters=[];scheduled=!1;constructor(t){super(),this.isOpen=t}commit(){return this.await}unsafeSchedule(t){return this.scheduled||this.waiters.length===0?ee:(this.scheduled=!0,t.currentScheduler.scheduleTask(this.flushWaiters,t.getFiberRef(so)),ee)}flushWaiters=()=>{this.scheduled=!1;let t=this.waiters;this.waiters=[];for(let r=0;r<t.length;r++)t[r](ht)};open=J(t=>this.isOpen?ee:(this.isOpen=!0,this.unsafeSchedule(t)));unsafeOpen(){this.isOpen||(this.isOpen=!0,this.flushWaiters())}release=J(t=>this.isOpen?ee:this.unsafeSchedule(t));await=El(t=>this.isOpen?t(ee):(this.waiters.push(t),C(()=>{let r=this.waiters.indexOf(t);r!==-1&&this.waiters.splice(r,1)})));unsafeClose(){this.isOpen=!1}close=C(()=>{this.isOpen=!1});whenOpen=t=>he(this.await,t)},oD=e=>new Kw(e??!1);var sD=u(2,(e,t)=>J((r,n)=>{let o=t,s=Aw(e,r,n.runtimeFlags,Da);if(o.state._tag==="Open"){let i=()=>jo(c=>T(c,s.id())?ee:et(fa(s))),a={};o.state.finalizers.set(a,i),s.addObserver(()=>{o.state._tag!=="Closed"&&o.state.finalizers.delete(a)})}else s.unsafeInterruptAsFork(r.id());return A(s)}));var Bw=Symbol.for("effect/Effect/memoizeFunction.key"),tD=class{a;eq;[Bw]=Bw;constructor(t,r){this.a=t,this.eq=r}[I](t){return v(t,Bw)?this.eq?this.eq(this.a,t.a):T(this.a,t.a):!1}[F](){return this.eq?0:V(this,R(this.a))}};var l6="effect/Ref/SynchronizedRef",f6=Symbol.for(l6),d6={_A:e=>e},Vw=class extends dn{ref;withLock;[f6]=d6;[wx]=yC;[Ks]=Ks;constructor(t,r){super(),this.ref=t,this.withLock=r,this.get=pr(this.ref)}get;commit(){return this.get}modify(t){return this.modifyEffect(r=>A(t(r)))}modifyEffect(t){return this.withLock(f(g(pr(this.ref),t),g(([r,n])=>Te(es(this.ref,n),r))))}},iD=e=>C(()=>Qw(e)),Qw=e=>{let t=Hu(e),r=Gw(1);return new Vw(t,r.withPermits(1))};var hf=Symbol.for("effect/ManagedRuntime");var uD="Fold",pD="Fresh",lD="FromEffect",fD="Scoped",dD="Suspend",hD="Provide",Jw="ProvideMerge",mD="ZipWith";var fg=HC;var Yw=WC,wn=fa;var dg=no;var hg=Gs;var op=e=>function(){if(arguments.length===1){let t=arguments[0];return(r,...n)=>e(t,r,...n)}return e.apply(this,arguments)},ni=op((e,t,r)=>{let n=sm(),o=[[Pt,[[n,e.context]]]];r?.scheduler&&o.push([Bu,[[n,r.scheduler]]]);let s=mM(e.fiberRefs,{entries:o,forkAs:n});r?.updateRefs&&(s=r.updateRefs(s,n));let i=new sf(n,s,e.runtimeFlags),a=t;r?.scope&&(a=g(pg(r.scope,Oa),p=>he(Su(p,jo(l=>T(l,i.id())?ee:no(i,l))),vr(t,l=>$a(p,l)))));let c=i.currentSupervisor;return c!==Na&&(c.onStart(e.context,a,E(),i),i.addObserver(p=>c.onEnd(p,i))),Da.add(e.runtimeFlags,i),r?.immediate===!1?i.resume(a):i.start(a),i}),xf=op((e,t,r={})=>{let n=ni(e,t,r);return r.onExit&&n.addObserver(o=>{r.onExit(o)}),(o,s)=>xf(e)(f(n,dg(o??Cr)),{...s,onExit:s?.onExit?i=>s.onExit(OF(i)):void 0})}),gg=op((e,t)=>{let r=gf(e)(t);if(r._tag==="Failure")throw tk(r.effect_instruction_i0);return r.effect_instruction_i0}),Xw=class extends Error{fiber;_tag="AsyncFiberException";constructor(t){super(`Fiber #${t.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=t,this.name=this._tag,this.stack=this.message}},m6=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Xw(e);return Error.stackTraceLimit=t,r};var Zw=Symbol.for("effect/Runtime/FiberFailure"),mf=Symbol.for("effect/Runtime/FiberFailure/Cause"),ek=class extends Error{[Zw];[mf];constructor(t){let r=tm(t)[0];super(r?.message||"An error has occurred"),this[Zw]=Zw,this[mf]=t,this.name=r?`(FiberFailure) ${r.name}`:"FiberFailure",r?.stack&&(this.stack=r.stack)}toJSON(){return{_id:"FiberFailure",cause:this[mf].toJSON()}}toString(){return"(FiberFailure) "+ir(this[mf],{renderErrorCause:!0})}[B](){return this.toString()}},tk=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new ek(e);return Error.stackTraceLimit=t,r};var xD=e=>{let t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return ku(t.left);case"Right":return ge(t.right);case"Some":return ge(t.value);case"None":return ku(Go())}},gf=op((e,t)=>{let r=xD(t);if(r)return r;let n=new zu,o=ni(e)(t,{scheduler:n});n.flush();let s=o.unsafePoll();return s||Qo(wm(m6(o),qm(o)))}),yg=op((e,t,r)=>yf(e,t,r).then(n=>{switch(n._tag){case Ne:return n.effect_instruction_i0;case De:throw tk(n.effect_instruction_i0)}})),yf=op((e,t,r)=>new Promise(n=>{let o=xD(t);o&&n(o);let s=ni(e)(t);s.addObserver(i=>{n(i)}),r?.signal!==void 0&&(r.signal.aborted?s.unsafeInterruptAsFork(s.id()):r.signal.addEventListener("abort",()=>{s.unsafeInterruptAsFork(s.id())},{once:!0}))})),xg=class{context;runtimeFlags;fiberRefs;constructor(t,r,n){this.context=t,this.runtimeFlags=r,this.fiberRefs=n}pipe(){return _(this,arguments)}},gD=e=>new xg(e.context,e.runtimeFlags,e.fiberRefs),Eg=()=>J((e,t)=>A(new xg(e.getFiberRef(Pt),t.runtimeFlags,e.getFiberRefs()))),yD=zS(ro,$S,US),kn=gD({context:gr(),runtimeFlags:yD,fiberRefs:xM()});var Ef=ni(kn),sp=yg(kn),rk=yf(kn),bf=gg(kn),nk=gf(kn);var ED=u(2,(e,t)=>e.modifyEffect(t));var g6="effect/Layer",ok=Symbol.for(g6),y6={_RIn:e=>e,_E:e=>e,_ROut:e=>e},oi={[ok]:y6,pipe(){return _(this,arguments)}},E6="effect/Layer/MemoMap",Sg=Symbol.for(E6),CD=Wr()("effect/Layer/CurrentMemoMap",{defaultValue:()=>sk()}),wD=e=>v(e,ok),kD=e=>e._op_layer===pD,_g=class{ref;[Sg];constructor(t){this.ref=t,this[Sg]=Sg}getOrElseMemoize(t,r){return f(ED(this.ref,n=>{let o=n.get(t);if(o!==void 0){let[s,i]=o,a=f(s,g(([c,p])=>f(Wl(c),Te(p))),vr(ya({onFailure:()=>ee,onSuccess:()=>xa(r,i)})));return A([a,n])}return f(Aa(0),g(s=>f(En(),g(i=>f(Aa(()=>ee),j(a=>{let c=Ct(l=>f(ei(),g(d=>f(l(g(OD(t,d,!0),h=>Px(h(this)))),wr,g(h=>{switch(h._tag){case De:return f(Ou(i,h.effect_instruction_i0),he(_u(d,h)),he(de(h.effect_instruction_i0)));case Ne:return f(es(a,m=>f(_u(d,m),aa(kx(s,x=>[x===1,x-1])),et)),he(Ia(s,m=>m+1)),he(xa(r,m=>f(C(()=>n.delete(t)),he(pr(a)),g(x=>x(m))))),he(ba(i,h.effect_instruction_i0)),Te(h.effect_instruction_i0[1]))}}))))),p=[f(Bt(i),vr(vu({onFailure:()=>ee,onSuccess:()=>Ia(s,l=>l+1)}))),l=>f(pr(a),g(d=>d(l)))];return[c,kD(t)?n:n.set(t,p)]}))))))}),yn)}},vD=G(()=>j(iD(new Map),e=>new _g(e))),sk=()=>new _g(Qw(new Map));var ik=u(2,(e,t)=>g(vD,r=>ak(e,r,t))),ak=u(3,(e,t,r)=>g(OD(e,r),n=>zl(n(t),CD,t))),OD=(e,t,r=!1)=>{let n=e;switch(n._op_layer){case"Locally":return C(()=>o=>n.f(o.getOrElseMemoize(n.self,t)));case"ExtendScope":return C(()=>o=>uf(s=>o.getOrElseMemoize(n.layer,s)));case"Fold":return C(()=>o=>f(o.getOrElseMemoize(n.layer,t),Xe({onFailure:s=>o.getOrElseMemoize(n.failureK(s),t),onSuccess:s=>o.getOrElseMemoize(n.successK(s),t)})));case"Fresh":return C(()=>o=>f(n.layer,ik(t)));case"FromEffect":return r?C(()=>o=>n.effect):C(()=>o=>o.getOrElseMemoize(e,t));case"Provide":return C(()=>o=>f(o.getOrElseMemoize(n.first,t),g(s=>f(o.getOrElseMemoize(n.second,t),Sn(s)))));case"Scoped":return r?C(()=>o=>ti(n.effect,t)):C(()=>o=>o.getOrElseMemoize(e,t));case"Suspend":return C(()=>o=>o.getOrElseMemoize(n.evaluate(),t));case"ProvideMerge":return C(()=>o=>f(o.getOrElseMemoize(n.first,t),la(o.getOrElseMemoize(n.second,t),n.zipK)));case"ZipWith":return C(()=>o=>f(o.getOrElseMemoize(n.first,t),Zs(o.getOrElseMemoize(n.second,t),n.zipK,{concurrent:!0})))}};var TD=()=>ip(_a());var RD=e=>ck(Hm(e));var ck=e=>ip(de(e));var qa=u(2,(e,t)=>PD(e,{onFailure:RD,onSuccess:t}));var Cg=u(2,(e,t)=>{let r=lh(e),n=r?e:t;return ip(j(r?t:e,s=>Fc(n,s)))}),AD=e=>ip(j(e,()=>gr()));function ip(e){let t=Object.create(oi);return t._op_layer=lD,t.effect=e,t}var ID=u(2,(e,{onFailure:t,onSuccess:r})=>{let n=Object.create(oi);return n._op_layer=uD,n.layer=e,n.failureK=t,n.successK=r,n}),PD=u(2,(e,{onFailure:t,onSuccess:r})=>ID(e,{onFailure:n=>{let o=Au(n);switch(o._tag){case"Left":return t(o.left);case"Right":return ck(o.right)}},onSuccess:r}));var MD=u(2,(e,t)=>DD(e,t,(r,n)=>yr(r,n))),wg=(...e)=>{let t=e[0];for(let r=1;r<e.length;r++)t=MD(t,e[r]);return t};var kg=u(2,(e,t)=>{let r=lh(e),n=r?e:t;return uk(j(r?t:e,s=>Fc(n,s)))}),ap=e=>uk(f(e,Te(gr()))),uk=e=>{let t=Object.create(oi);return t._op_layer=fD,t.effect=e,t};var pk=u(2,(e,t)=>{let r=lh(e);return ip(A(Fc(r?e:t,r?t:e)))});var lk=e=>{let t=Object.create(oi);return t._op_layer=dD,t.evaluate=e,t};var fk=u(2,(e,t)=>g(uf(r=>ak(e,t,r)),r=>f(Eg(),Sn(r)))),vg=u(2,(e,t)=>lk(()=>{let r=Object.create(oi);return r._op_layer=hD,r.first=Object.create(oi,{_op_layer:{value:Jw,enumerable:!0},first:{value:TD(),enumerable:!0},second:{value:Array.isArray(t)?wg(...t):t},zipK:{value:(n,o)=>f(n,yr(o))}}),r.second=e,r})),FD=u(2,(e,t)=>{let r=Object.create(oi);return r._op_layer=Jw,r.first=t,r.second=vg(e,t),r.zipK=(n,o)=>f(n,yr(o)),r}),DD=u(3,(e,t,r)=>lk(()=>{let n=Object.create(oi);return n._op_layer=mD,n.first=e,n.second=t,n.zipK=r,n})),Og=e=>{let t=ot("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return qa(Cg(t,e),r=>st(r,t))},dk=e=>{let t=ot("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return qa(kg(t,e),r=>st(r,t))};var bD=u(2,(e,t)=>ig(r=>g(ik(t,r),n=>$m(e,n)))),SD=u(2,(e,t)=>{let r=Ta(kn.fiberRefs,t.fiberRefs),n=mn(kn.runtimeFlags,t.runtimeFlags);return Ct(o=>J(s=>{let i=s.getFiberRef(Pt),a=s.getFiberRefs(),c=Ra(s.id(),a)(r),p=s.currentRuntimeFlags,l=Fs(n)(p),d=Ta(c,a),h=mn(l,p);return s.setFiberRefs(c),s.currentRuntimeFlags=l,ri($m(o(e),yr(i,t.context)),J(m=>(m.setFiberRefs(Ra(m.id(),m.getFiberRefs())(d)),m.currentRuntimeFlags=Fs(h)(m.currentRuntimeFlags),ee)))}))}),ND=u(2,(e,t)=>Array.isArray(t)?bD(e,wg(...t)):wD(t)?bD(e,t):n0(t)?$m(e,t):hf in t?g(t.runtimeEffect,r=>SD(e,r)):SD(e,t));var b6="effect/Schedule",HD=Symbol.for(b6),S6=e=>v(e,HD),_6="effect/ScheduleDriver",C6=Symbol.for(_6),hk={start:0,now:0,input:void 0,output:void 0,elapsed:As,elapsedSincePrevious:As,recurrence:0},LD=Wr()("effect/Schedule/CurrentIterationMetadata",{defaultValue:()=>hk}),w6={_Out:e=>e,_In:e=>e,_R:e=>e},k6={_Out:e=>e,_In:e=>e,_R:e=>e},mk=class{initial;step;[HD]=w6;constructor(t,r){this.initial=t,this.step=r}pipe(){return _(this,arguments)}},UD=(e,t,r,n)=>Ia(e,o=>o.recurrence===0?{now:t,input:r,output:n,recurrence:o.recurrence+1,elapsed:As,elapsedSincePrevious:As,start:t}:{now:t,input:r,output:n,recurrence:o.recurrence+1,elapsed:Rs(t-o.start),elapsedSincePrevious:Rs(t-o.now),start:o.start}),xk=class{schedule;ref;[C6]=k6;constructor(t,r){this.schedule=t,this.ref=r}get state(){return j(pr(this.ref),t=>t[1])}get last(){return g(pr(this.ref),([t,r])=>{switch(t._tag){case"None":return Ns(()=>new Go);case"Some":return A(t.value)}})}iterationMeta=Hu(hk);get reset(){return es(this.ref,[E(),this.schedule.initial]).pipe(pa(es(this.iterationMeta,hk)))}next(t){return f(j(pr(this.ref),r=>r[1]),g(r=>f(Rx,g(n=>f(G(()=>this.schedule.step(n,t,r)),g(([o,s,i])=>{let a=es(this.ref,[k(s),o]);if(ff(i))return a.pipe(he(xe(E())));let c=H2(i.intervals)-n;if(c<=0)return a.pipe(he(UD(this.iterationMeta,n,t,s)),Te(s));let p=Rs(c);return f(a,he(UD(this.iterationMeta,n,t,s)),he(ju(p)),Te(s))}))))))}},Sf=(e,t)=>new mk(e,t);var v6=u(2,(e,t)=>Ek(e,(r,n)=>C(()=>t(r,n)))),Ek=u(2,(e,t)=>Sf(e.initial,(r,n,o)=>g(e.step(r,n,o),([s,i,a])=>ff(a)?A([s,i,np]):j(t(n,i),c=>c?[s,i,a]:[s,i,np]))));var O6=e=>f(Aa([E(),e.initial]),j(t=>new xk(e,t)));var T6=u(2,(e,t)=>R6(e,t,q2)),R6=u(3,(e,t,r)=>Sf([e.initial,t.initial],(n,o,s)=>f(la(e.step(n,o,s[0]),t.step(n,o,s[1]),(i,a)=>[i,a]),g(([[i,a,c],[p,l,d]])=>zw(c)&&zw(d)?gk(e,t,o,i,a,c.intervals,p,l,d.intervals,r):A([[i,p],[a,l],np]))))),gk=(e,t,r,n,o,s,i,a,c,p)=>{let l=p(s,c);return z2(l)?A([[n,i],[o,a],Y2(l)]):f(s,W2(c))?g(e.step(Hw(s),r,n),([d,h,m])=>ff(m)?A([[d,i],[h,a],np]):gk(e,t,r,d,h,m.intervals,i,a,c,p)):g(t.step(Hw(c),r,i),([d,h,m])=>ff(m)?A([[n,d],[o,h],np]):gk(e,t,r,n,o,s,d,h,m.intervals,p))};var A6=u(2,(e,t)=>I6(e,r=>C(()=>t(r)))),I6=u(2,(e,t)=>Sf(e.initial,(r,n,o)=>g(e.step(r,n,o),([s,i,a])=>j(t(i),c=>[s,c,a]))));var P6=e=>Sf(e.initial,(t,r,n)=>f(e.step(t,r,n),j(([o,s,i])=>[o,r,i])));var M6=e=>L6(jD,t=>t<e);var F6=(e,t)=>Sf(e,(r,n,o)=>C(()=>[t(o),o,Z2(M2(r))]));var D6=u(2,(e,t)=>Ek(e,(r,n)=>MC(t(r))));var N6=u(2,(e,t)=>Ek(e,(r,n)=>t(r))),L6=u(2,(e,t)=>v6(e,(r,n)=>t(n)));var Rg=Symbol.for("effect/Schedule/ScheduleDefect"),yk=class{error;[Rg];constructor(t){this.error=t,this[Rg]=Rg}},U6=e=>v(e,Rg),$D=e=>Vr(e,t=>xn(new yk(t))),$6=e=>ie(ou(e,t=>nl(t)&&U6(t.defect)?k(t.defect):E()),{onNone:()=>e,onSome:t=>Jn(t.error)}),q6=e=>du(e,t=>de($6(t))),qD=u(2,(e,t)=>zD(e,t,(r,n)=>xe(r))),WD=u(2,(e,t)=>{if(S6(t))return qD(e,t);let r=t.schedule??P6(jD),n=t.while?N6(r,i=>{let a=t.while(i);return typeof a=="boolean"?A(a):$D(a)}):r,o=t.until?D6(n,i=>{let a=t.until(i);return typeof a=="boolean"?A(a):$D(a)}):n,s=t.times?T6(o,M6(t.times)).pipe(A6(i=>i[0])):o;return q6(qD(e,s))}),zD=u(3,(e,t,r)=>g(O6(t),n=>kr(e,{onFailure:o=>r(o,E()),onSuccess:o=>BD(Dx(e,LD,pr(n.iterationMeta)),n,(s,i)=>Dx(r(s,i),LD,pr(n.iterationMeta)),o)}))),BD=(e,t,r,n)=>kr(t.next(n),{onFailure:()=>vm(t.last),onSuccess:o=>kr(e,{onFailure:s=>r(s,k(o)),onSuccess:s=>BD(e,t,r,s)})});var jD=F6(0,e=>e+1);var KD=Symbol.for("effect/MutableList"),W6={[KD]:KD,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();let r=t.value;return t=t.next,{done:e,value:r}},return(r){return e||(e=!0),{done:!0,value:r}}}},toString(){return Z(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},z6=e=>({value:e,removed:!1,prev:void 0,next:void 0}),VD=()=>{let e=Object.create(W6);return e.head=void 0,e.tail=void 0,e._length=0,e};var bk=e=>Ag(e)===0,Ag=e=>e._length;var GD=u(2,(e,t)=>{let r=z6(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),QD=e=>{let t=e.head;if(t!==void 0)return B6(e,t),t.value};var B6=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var JD=Symbol.for("effect/MutableQueue"),Mt=Symbol.for("effect/mutable/MutableQueue/Empty"),K6={[JD]:JD,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return Z(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Q)}},[B](){return this.toJSON()},pipe(){return _(this,arguments)}},YD=e=>{let t=Object.create(K6);return t.queue=VD(),t.capacity=e,t},ZD=e=>YD(e),Ig=()=>YD(void 0),Pg=e=>Ag(e.queue),Mg=e=>bk(e.queue);var XD=e=>e.capacity===void 0?1/0:e.capacity,cp=u(2,(e,t)=>{let r=Ag(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(GD(t)(e.queue),!0)}),Sk=u(2,(e,t)=>{let r=t[Symbol.iterator](),n,o=We(),s=!0;for(;s&&(n=r.next())&&!n.done;)s=cp(n.value)(e);for(;n!=null&&!n.done;)o=Oe(n.value)(o),n=r.next();return br(o)}),ss=u(2,(e,t)=>bk(e.queue)?t:QD(e.queue)),Fg=u(2,(e,t)=>{let r=We(),n=0;for(;n<t;){let o=ss(Mt)(e);if(o===Mt)break;r=Oe(o)(r),n+=1}return br(r)});var vn=It;var Ng=PC;var Lg=sg;var wt=La;var _f=J,fr=xe;var jt=de;var Dg=xn,Ug=hu;var Ft=UI;var _k=cF,Se=A;var Re=G,Be=C,X=ee;var Cf=Vr,wf=du;var On=tF,Ck=rF;var rN=nF;var nN=TC;var oN=dF;var is=fF;var Ha=Gr;var Tr=xu;var sN=Vo,Wa=Us,za=Ct;var kf=Te;var vf=et;var pe=j;var iN=bl,si=Ls;var wk=og;var aN=s_;var as=ri;var cN=ag;var $g=ig,up=Iw;var uN=jo;var qg=cf;var lo=sD;var Of=_a;var pN=Tu,Tf=ND;var lN=xF;var Ba=gn,tt=wr,kk=gu;var vk=mF;var K=g,Rf=NI,cs=yn,Hg=Dw;var Wg=Fw;var ii=Qr,Ok=uF;var Af=pF;var zg=lF;var Tk=WD;var If=RC,Pf=km,Kt=Xe;var fN=(e,...t)=>Mx(e)(...t);var Mf=oF;var Rk=sF;var gt=iF,ai=eF;var Bg=Eg;var Ak=nD,dN=oD;var Ik=Ef;var jg=sp;var rn=bf;var ja=E2,Pk=b2,je=S2,Ka=Zs;var hN=Ax,Y6=SF;var mN=Ix;var xN=function(e,...t){let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=new Error;if(Error.stackTraceLimit=r,typeof e!="string")return eN(e.length,function(...i){let a=Error.stackTraceLimit;Error.stackTraceLimit=2;let c=new Error;return Error.stackTraceLimit=a,tN({self:this,body:e,args:i,pipeables:t,spanName:"<anonymous>",spanOptions:{context:Lu.context(!0)},errorDef:n,errorCall:c})});let o=e,s=t[0];return(i,...a)=>eN(i.length,{[o](...c){let p=Error.stackTraceLimit;Error.stackTraceLimit=2;let l=new Error;return Error.stackTraceLimit=p,tN({self:this,body:i,args:c,pipeables:a,spanName:o,spanOptions:s,errorDef:n,errorCall:l})}}[o])};function eN(e,t){return Object.defineProperty(t,"length",{value:e,configurable:!0})}function tN(e){let t,r;if(cR(e.body))t=p_(()=>e.body.apply(e.self,e.args));else try{t=e.body.apply(e.self,e.args)}catch(i){r=i,t=Dg(i)}if(e.pipeables.length>0)try{for(let i of e.pipeables)t=i(t,...e.args)}catch(i){t=r?jt(Le(dt(r),dt(i))):Dg(i)}let n=!1,o=()=>{if(n!==!1)return n;if(e.errorCall.stack){let i=e.errorDef.stack.trim().split(`
`),a=e.errorCall.stack.trim().split(`
`),c=i.slice(2).join(`
`).trim();c.includes("(")||(c=c.replace(/at (.*)/,"at ($1)"));let p=a.slice(2).join(`
`).trim();return p.includes("(")||(p=p.replace(/at (.*)/,"at ($1)")),n=`${c}
${p}`,n}},s=e.spanOptions&&"captureStackTrace"in e.spanOptions?e.spanOptions:{captureStackTrace:o,...e.spanOptions};return Y6(t,e.spanName,s)}var gN=e=>ap(pf(rg,e)),yN=u(2,(e,t)=>Jr(rg,t)(e)),Ff=e=>ap(rp(ng,$o(e))),Mk=e=>Og(j(e,Ff)),Fk=e=>dk(j(e,Ff)),Df=e=>ap(rp(ng,rl(e))),EN=u(2,(e,t)=>qa(Df(e),()=>Ff(t))),bN=u(2,(e,t)=>qa(Df(e),()=>Mk(t))),SN=u(2,(e,t)=>qa(Df(e),()=>Fk(t)));var _N=e=>ap(Pw(e));var wN=Cg,kN=AD;var vN=wg;var ON=pk;var TN=vg,RN=FD;var Dk=Og;var AN=_N;var Nk=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Nk(e,t.from)}},Rr=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),Nf=e=>{let t=!1,r;return()=>(t||(r=e(),t=!0),r)},MN=e=>{try{return e.toISOString()}catch{return String(e)}},Dt=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(r=>Dt(r,t)).join(",")}]`;if(Vd(e))return MN(e);if(v(e,"toString")&&un(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(Ae(e))return JSON.stringify(e);if(vt(e)||e==null||wo(e)||Oi(e))return String(e);if(gs(e))return String(e)+"n";if(Ai(e))return`${e.constructor.name}(${Dt(Array.from(e),t)})`;try{t&&JSON.stringify(e);let r=`{${Rr(e).map(o=>`${Ae(o)?JSON.stringify(o):String(o)}:${Dt(e[o],!1)}`).join(",")}}`,n=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${n}(${r})`:r}catch{return"<circular structure>"}},Lf=e=>typeof e=="string"?JSON.stringify(e):String(e),Lk=e=>Array.isArray(e),FN=e=>!Array.isArray(e),PN=e=>`[${Lf(e)}]`,Kg=e=>Lk(e)?e.map(PN).join(""):PN(e);var ci=(e,t,r,n)=>{let o=e;return r&&Ee(r)&&(o+=`
at path: ${Kg(r)}`),t!==void 0&&(o+=`
details: ${t}`),n&&(o+=`
schema (${n._tag}): ${n}`),o};var Uk=(e,t,r)=>ci("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,r);var DN=e=>ci("Unsupported key schema",void 0,void 0,e),NN=e=>ci("Unsupported literal",`literal value: ${Dt(e)}`),$k=e=>ci("Duplicate index signature",`${e} index signature`),LN=ci("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),UN=ci("Invalid element","A required element cannot follow an optional element. ts(1257)"),qk=e=>ci("Duplicate property signature transformation",`Duplicate key ${Dt(e)}`);var Gg=e=>ci("Duplicate property signature",`Duplicate key ${Dt(e)}`);var qN=Symbol.for("effect/SchemaId/DateFromSelf");var WN=Symbol.for("effect/annotation/Brand"),zN=Symbol.for("effect/annotation/SchemaId"),tv=Symbol.for("effect/annotation/Message"),Jg=Symbol.for("effect/annotation/MissingMessage"),Yg=Symbol.for("effect/annotation/Identifier"),dr=Symbol.for("effect/annotation/Title"),Za=Symbol.for("effect/annotation/AutoTitle"),us=Symbol.for("effect/annotation/Description"),rv=Symbol.for("effect/annotation/Examples"),nv=Symbol.for("effect/annotation/Default"),ov=Symbol.for("effect/annotation/JSONSchema"),sv=Symbol.for("effect/annotation/Arbitrary"),iv=Symbol.for("effect/annotation/Pretty"),av=Symbol.for("effect/annotation/Equivalence"),BN=Symbol.for("effect/annotation/Documentation"),cv=Symbol.for("effect/annotation/Concurrency"),uv=Symbol.for("effect/annotation/Batching"),pv=Symbol.for("effect/annotation/ParseIssueTitle"),lv=Symbol.for("effect/annotation/ParseOptions"),fv=Symbol.for("effect/annotation/DecodingFallback"),qf=Symbol.for("effect/annotation/Surrogate"),jN=Symbol.for("effect/annotation/StableFilter"),Nt=u(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?k(e.annotations[t]):E()),KN=Nt(WN);var VN=Nt(tv),GN=Nt(Jg),dv=Nt(dr),hv=Nt(Za),Hf=Nt(Yg),mv=Nt(us);var QN=Nt(cv),JN=Nt(uv),YN=Nt(pv),ZN=Nt(lv),XN=Nt(fv),xv=Nt(qf),e8=Nt(jN),gv=e=>NR(e8(e),t=>t===!0),Zg=Symbol.for("effect/annotation/JSONIdentifier"),t8=Nt(Zg),r8=e=>qr(t8(e),()=>Hf(e)),eL=Symbol.for("effect/schema/ParseJson"),Va=class{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(t,r,n,o={}){this.typeParameters=t,this.decodeUnknown=r,this.encodeUnknown=n,this.annotations=o}toString(){return ue(mo(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:$e(this.annotations)}}},ps=e=>t=>t._tag===e;var ui=class{literal;annotations;_tag="Literal";constructor(t,r={}){this.literal=t,this.annotations=r}toString(){return ue(mo(this),()=>Dt(this.literal))}toJSON(){return{_tag:this._tag,literal:gs(this.literal)?String(this.literal):this.literal,annotations:$e(this.annotations)}}},Xa=ps("Literal"),tL=new ui(null);var Uf=class{symbol;annotations;_tag="UniqueSymbol";constructor(t,r={}){this.symbol=t,this.annotations=r}toString(){return ue(mo(this),()=>Dt(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:$e(this.annotations)}}};var Wk=class{annotations;_tag="UndefinedKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},Xg=new Wk({[dr]:"undefined"});var zk=class{annotations;_tag="VoidKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},n8=new zk({[dr]:"void"});var Bk=class{annotations;_tag="NeverKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},ey=new Bk({[dr]:"never"});var jk=class{annotations;_tag="UnknownKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},yv=new jk({[dr]:"unknown"});var Kk=class{annotations;_tag="AnyKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},rL=new Kk({[dr]:"any"});var Vk=class{annotations;_tag="StringKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},ty=new Vk({[dr]:"string",[us]:"a string"}),ry=ps("StringKeyword"),Gk=class{annotations;_tag="NumberKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},ny=new Gk({[dr]:"number",[us]:"a number"}),Ev=ps("NumberKeyword"),Qk=class{annotations;_tag="BooleanKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},oy=new Qk({[dr]:"boolean",[us]:"a boolean"}),bv=ps("BooleanKeyword"),Jk=class{annotations;_tag="BigIntKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},o8=new Jk({[dr]:"bigint",[us]:"a bigint"});var Yk=class{annotations;_tag="SymbolKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},s8=new Yk({[dr]:"symbol",[us]:"a symbol"}),nL=ps("SymbolKeyword"),Zk=class{annotations;_tag="ObjectKeyword";constructor(t={}){this.annotations=t}toString(){return Rn(this)}toJSON(){return{_tag:this._tag,annotations:$e(this.annotations)}}},i8=new Zk({[dr]:"object",[us]:"an object in the TypeScript meaning, i.e. the `object` type"});var Ga=class{type;annotations;constructor(t,r={}){this.type=t,this.annotations=r}toJSON(){return{type:this.type.toJSON(),annotations:$e(this.annotations)}}toString(){return String(this.type)}},Tn=class extends Ga{isOptional;constructor(t,r,n={}){super(t,n),this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:$e(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}},oL=e=>e.map(t=>t.type),lp=class{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(t,r,n,o={}){this.elements=t,this.rest=r,this.isReadonly=n,this.annotations=o;let s=!1,i=!1;for(let a of t)if(a.isOptional)s=!0;else if(s){i=!0;break}if(i||s&&r.length>1)throw new Error(UN)}toString(){return ue(mo(this),()=>a8(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:$e(this.annotations)}}},a8=e=>{let t=e.elements.map(String).join(", ");return $R(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(r,n)=>{let o=String(r),s=o.includes(" | ")?`(${o})`:o;if(n.length>0){let i=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${s}[], ${i}]`:`readonly [...${s}[], ${i}]`}else return e.elements.length>0?`readonly [${t}, ...${s}[]]`:`ReadonlyArray<${o}>`}})};var Ve=class extends Tn{name;isReadonly;constructor(t,r,n,o,s){super(r,n,s),this.name=t,this.isReadonly=o}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:$e(this.annotations)}}},sL=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return sL(e.from)}return!1},Qa=class{type;isReadonly;parameter;constructor(t,r,n){if(this.type=r,this.isReadonly=n,sL(t))this.parameter=t;else throw new Error(LN)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}},on=class{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(t,r,n={}){this.annotations=n;let o={};for(let i=0;i<t.length;i++){let a=t[i].name;if(Object.prototype.hasOwnProperty.call(o,a))throw new Error(Gg(a));o[a]=null}let s={string:!1,symbol:!1};for(let i=0;i<r.length;i++){let a=vv(r[i].parameter);if(ry(a)){if(s.string)throw new Error($k("string"));s.string=!0}else if(nL(a)){if(s.symbol)throw new Error($k("symbol"));s.symbol=!0}}this.propertySignatures=t,this.indexSignatures=r}toString(){return ue(mo(this),()=>c8(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:$e(this.annotations)}}},HN=e=>e.map(String).join("; "),c8=e=>{if(e.propertySignatures.length>0){let t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${HN(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${HN(e.indexSignatures)} }`:"{}"},Sv=ps("TypeLiteral"),u8=Ro(sh(co,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),p8={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},iL=e=>Io(e,t=>iy(t)?iL(t.types):[t]),l8=e=>{let t=u8(e),r=[],n={},o=[];for(let s of t)switch(s._tag){case"NeverKeyword":break;case"AnyKeyword":return[rL];case"UnknownKeyword":return[yv];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{n[s._tag]||(n[s._tag]=s,r.push(s));break}case"Literal":{let i=typeof s.literal;switch(i){case"string":case"number":case"bigint":case"boolean":{let a=p8[i];!n[a]&&!o.includes(s.literal)&&(o.push(s.literal),r.push(s));break}case"object":{o.includes(s.literal)||(o.push(s.literal),r.push(s));break}}break}case"UniqueSymbol":{!n.SymbolKeyword&&!o.includes(s.symbol)&&(o.push(s.symbol),r.push(s));break}case"TupleType":{n.ObjectKeyword||r.push(s);break}case"TypeLiteral":{s.propertySignatures.length===0&&s.indexSignatures.length===0?n["{}"]||(n["{}"]=s,r.push(s)):n.ObjectKeyword||r.push(s);break}default:r.push(s)}return r},Gt=class e{types;annotations;static make=(t,r)=>sy(t)?new e(t,r):t.length===1?t[0]:ey;static unify=(t,r)=>e.make(l8(iL(t)),r);_tag="Union";constructor(t,r={}){this.types=t,this.annotations=r}toString(){return ue(mo(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:$e(this.annotations)}}},aL=(e,t)=>e.map(t),sy=e=>e.length>1,iy=ps("Union"),Hk=D(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap),Ja=class{f;annotations;_tag="Suspend";constructor(t,r={}){this.f=t,this.annotations=r,this.f=Nf(t)}toString(){return mo(this).pipe(qr(()=>qt(IR(this.f)(),t=>mo(t))),ue(()=>"<suspended schema>"))}toJSON(){let t=this.f(),r=Hk.get(t);return r||(Hk.set(t,{_tag:this._tag}),r={_tag:this._tag,ast:t.toJSON(),annotations:$e(this.annotations)},Hk.set(t,r),r)}};var Ya=class{from;filter;annotations;_tag="Refinement";constructor(t,r,n={}){this.from=t,this.filter=r,this.annotations=n}toString(){return Hf(this).pipe(ue(()=>ie(hL(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>li(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:$e(this.annotations)}}},li=ps("Refinement"),ay={},ho=class{from;to;transformation;annotations;_tag="Transformation";constructor(t,r,n,o={}){this.from=t,this.to=r,this.transformation=n,this.annotations=o}toString(){return ue(mo(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:$e(this.annotations)}}},cL=ps("Transformation"),$f=class{decode;encode;_tag="FinalTransformation";constructor(t,r){this.decode=t,this.encode=r}},f8=e=>t=>t._tag===e;var Xk=class{_tag="ComposeTransformation"},_v=new Xk;var Qg=class{from;to;decode;encode;constructor(t,r,n,o){this.from=t,this.to=r,this.decode=n,this.encode=o}};var fp=class{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(t){this.propertySignatureTransformations=t;let r={},n={};for(let o of t){let s=o.from;if(r[s])throw new Error(qk(s));r[s]=!0;let i=o.to;if(n[i])throw new Error(qk(i));n[i]=!0}}},Cv=f8("TypeLiteralTransformation"),pi=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={...e.annotations,...t},o=xv(e);return oe(o)&&(n[qf]=pi(o.value,t)),r.annotations.value=n,Object.create(Object.getPrototypeOf(e),r)};var d8="[\\s\\S]*?",h8="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",uL=(e,t)=>{switch(e._tag){case"Literal":return Pu(String(e.literal));case"StringKeyword":return d8;case"NumberKeyword":return h8;case"TemplateLiteral":return pL(e,t,!1);case"Union":return e.types.map(r=>uL(r,t)).join("|")}},m8=(e,t,r,n)=>{if(iy(e)){if(r&&!n)return`(?:${t})`}else if(!r||!n)return t;return`(${t})`},pL=(e,t,r)=>{let n="";if(e.head!==""){let o=Pu(e.head);n+=t&&r?`(${o})`:o}for(let o of e.spans){let s=uL(o.type,t);if(n+=m8(o.type,s,t,r),o.literal!==""){let i=Pu(o.literal);n+=t&&r?`(${i})`:i}}return n},lL=e=>new RegExp(`^${pL(e,!1,!0)}$`);var wv=(e,t)=>{let r=[],n=[],o=s=>{switch(s._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new Qa(s,t,!0));break;case"Literal":if(Ae(s.literal)||vt(s.literal))r.push(new Ve(s.literal,t,!1,!0));else throw new Error(NN(s.literal));break;case"Enums":{for(let[i,a]of s.enums)r.push(new Ve(a,t,!1,!0));break}case"UniqueSymbol":r.push(new Ve(s.symbol,t,!1,!0));break;case"Union":s.types.forEach(o);break;default:throw new Error(DN(s))}};return o(e),{propertySignatures:r,indexSignatures:n}};var kv=e=>t=>{let r;for(let n of e)Object.prototype.hasOwnProperty.call(t.annotations,n)&&(r===void 0&&(r={}),r[n]=t.annotations[n]);return r},fL=e=>t=>{let r={...t.annotations};for(let n of e)delete r[n];return r},x8=kv([rv,nv,ov,sv,iv,av]),Ke=e=>{switch(e._tag){case"Declaration":{let t=nn(e.typeParameters,Ke);return t===e.typeParameters?e:new Va(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=nn(e.elements,o=>{let s=Ke(o.type);return s===o.type?o:new Tn(s,o.isOptional)}),r=oL(e.rest),n=nn(r,Ke);return t===e.elements&&n===r?e:new lp(t,n.map(o=>new Ga(o)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=nn(e.propertySignatures,n=>{let o=Ke(n.type);return o===n.type?n:new Ve(n.name,o,n.isOptional,n.isReadonly)}),r=nn(e.indexSignatures,n=>{let o=Ke(n.type);return o===n.type?n:new Qa(n.parameter,o,n.isReadonly)});return t===e.propertySignatures&&r===e.indexSignatures?e:new on(t,r,e.annotations)}case"Union":{let t=nn(e.types,Ke);return t===e.types?e:Gt.make(t,e.annotations)}case"Suspend":return new Ja(()=>Ke(e.f()),e.annotations);case"Refinement":{let t=Ke(e.from);return t===e.from?e:new Ya(t,e.filter,e.annotations)}case"Transformation":{let t=x8(e);return Ke(t!==void 0?pi(e.to,t):e.to)}}return e},pp=e=>ie(r8(e),{onNone:()=>{},onSome:t=>({[Zg]:t})});function nn(e,t){let r=!1,n=$i(e.length);for(let o=0;o<e.length;o++){let s=e[o],i=t(s);i!==s&&(r=!0),n[o]=i}return r?n:e}var ev=e=>{switch(e._tag){case"Transformation":return e.from;case"Refinement":return ev(e.from);case"Suspend":return ev(e.f())}},fo=(e,t)=>{switch(e._tag){case"Declaration":{let r=nn(e.typeParameters,n=>fo(n,t));return r===e.typeParameters?e:new Va(r,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let r=nn(e.elements,s=>{let i=fo(s.type,t);return i===s.type?s:new Tn(i,s.isOptional)}),n=oL(e.rest),o=nn(n,s=>fo(s,t));return r===e.elements&&o===n?e:new lp(r,o.map(s=>new Ga(s)),e.isReadonly,pp(e))}case"TypeLiteral":{let r=nn(e.propertySignatures,o=>{let s=fo(o.type,t);return s===o.type?o:new Ve(o.name,s,o.isOptional,o.isReadonly)}),n=nn(e.indexSignatures,o=>{let s=fo(o.type,t);return s===o.type?o:new Qa(o.parameter,s,o.isReadonly)});return r===e.propertySignatures&&n===e.indexSignatures?e:new on(r,n,pp(e))}case"Union":{let r=nn(e.types,n=>fo(n,t));return r===e.types?e:Gt.make(r,pp(e))}case"Suspend":return new Ja(()=>fo(e.f(),t),pp(e));case"Refinement":{let r=fo(e.from,t);if(t){if(r===e.from)return e;if(ev(e.from)===void 0&&gv(e))return new Ya(r,e.filter,e.annotations)}let n=pp(e);return n?pi(r,n):r}case"Transformation":{let r=pp(e);return fo(r?pi(e.from,r):e.from,t)}}return e},Wf=e=>fo(e,!1);var $e=e=>{let t={};for(let r of Object.getOwnPropertySymbols(e))t[String(r)]=e[r];return t},vv=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return vv(e.from)}};var dL=(e,t)=>new ho(e,t,_v);var Rn=e=>ue(mo(e),()=>e._tag);function g8(e){return ie(KN(e),{onNone:()=>"",onSome:t=>t.map(r=>` & Brand<${Dt(r)}>`).join("")})}var hL=e=>dv(e).pipe(qr(()=>mv(e)),qr(()=>hv(e)),Tt(t=>t+g8(e))),mo=e=>qr(Hf(e),()=>hL(e));var rt=class{path;actual;issue;_tag="Pointer";constructor(t,r,n){this.path=t,this.actual=r,this.issue=n}},uy=class{actual;message;_tag="Unexpected";constructor(t,r){this.actual=t,this.message=r}},ec=class{ast;message;_tag="Missing";actual=void 0;constructor(t,r){this.ast=t,this.message=r}},Me=class{ast;actual;issues;output;_tag="Composite";constructor(t,r,n,o){this.ast=t,this.actual=r,this.issues=n,this.output=o}},jf=class{ast;actual;kind;issue;_tag="Refinement";constructor(t,r,n,o){this.ast=t,this.actual=r,this.kind=n,this.issue=o}},Kf=class{ast;actual;kind;issue;_tag="Transformation";constructor(t,r,n,o){this.ast=t,this.actual=r,this.kind=n,this.issue=o}},at=class{ast;actual;message;_tag="Type";constructor(t,r,n){this.ast=t,this.actual=r,this.message=n}},py=class{ast;actual;message;_tag="Forbidden";constructor(t,r,n){this.ast=t,this.actual=r,this.message=n}},xL=Symbol.for("effect/Schema/ParseErrorTypeId");var Rv=class extends fx("ParseError"){[xL]=xL;get message(){return this.toString()}toString(){return hp.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[B](){return this.toJSON()}},Iv=e=>new Rv({issue:e}),fi=$,Qf=U,Pv=XE;var Jt=eb,ls=u(2,(e,t)=>Jt(e)?ct(e,{onLeft:U,onRight:t}):K(e,t)),hr=u(2,(e,t)=>Jt(e)?wR(e,t):pe(e,t)),Vf=u(2,(e,t)=>Jt(e)?Rc(e,t):si(e,t));var EL=u(2,(e,t)=>Jt(e)?CR(e,{onLeft:t.onFailure,onRight:t.onSuccess}):iN(e,t)),bL=u(2,(e,t)=>Jt(e)?ct(e,{onLeft:t,onRight:$}):Cf(e,t)),ly=(e,t)=>t===void 0||vt(t)?e:e===void 0?t:{...e,...t},SL=(e,t,r)=>{let n=yt(e,t);return(o,s)=>n(o,ly(r,s))},y8=(e,t,r)=>{let n=SL(e,t,r);return(o,s)=>tb(n(o,s),Iv)};var _L=(e,t,r)=>{let n=yt(e,t);return(o,s)=>n(o,{...ly(r,s),isEffectAllowed:!0})};var CL=(e,t)=>SL(e.ast,!0,t);var fy=(e,t)=>_L(e.ast,!0,t);var dy=(e,t)=>_L(e.ast,!1,t);var hy=(e,t)=>y8(Ke(e.ast),!0,t);var wL=(e,t)=>{let r=yt(Ke(e.ast),!0);return(n,o)=>Ot(r(n,{exact:!0,...ly(t,o)}))};var E8=D(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),b8=D(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),yt=(e,t)=>{let r=t?E8:b8,n=r.get(e);if(n)return n;let o=S8(e,t),s=ZN(e),i=oe(s)?(p,l)=>o(p,ly(l,s.value)):o,a=XN(e),c=t&&oe(a)?(p,l)=>Bf(bL(i(p,l),a.value),e,p,l):i;return r.set(e,c),c},Ov=e=>or(QN(e)),Tv=e=>or(JN(e)),S8=(e,t)=>{switch(e._tag){case"Refinement":if(t){let r=yt(e.from,!0);return(n,o)=>{o=o??ay;let s=o?.errors==="all",i=ls(bL(r(n,o),a=>{let c=new jf(e,n,"From",a);return s&&gv(e)&&RL(a)?ie(e.filter(n,o,e),{onNone:()=>U(c),onSome:p=>U(new Me(e,n,[c,new jf(e,n,"Predicate",p)]))}):U(c)}),a=>ie(e.filter(a,o,e),{onNone:()=>$(a),onSome:c=>U(new jf(e,n,"Predicate",c))}));return Bf(i,e,n,o)}}else{let r=yt(Ke(e),!0),n=yt(vL(e.from),!1);return(o,s)=>Bf(ls(r(o,s),i=>n(i,s)),e,o,s)}case"Transformation":{let r=C8(e.transformation,t),n=t?yt(e.from,!0):yt(e.to,!1),o=t?yt(e.to,!0):yt(e.from,!1);return(s,i)=>Bf(ls(Vf(n(s,i),a=>new Kf(e,s,t?"Encoded":"Type",a)),a=>ls(Vf(r(a,i??ay,e,s),c=>new Kf(e,s,"Transformation",c)),c=>Vf(o(c,i),p=>new Kf(e,s,t?"Type":"Encoded",p)))),e,s,i)}case"Declaration":{let r=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(n,o)=>Bf(r(n,o??ay,e),e,n,o)}case"Literal":return Ar(e,r=>r===e.literal);case"UniqueSymbol":return Ar(e,r=>r===e.symbol);case"UndefinedKeyword":return Ar(e,eR);case"NeverKeyword":return Ar(e,rR);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return $;case"StringKeyword":return Ar(e,Ae);case"NumberKeyword":return Ar(e,vt);case"BooleanKeyword":return Ar(e,wo);case"BigIntKeyword":return Ar(e,gs);case"SymbolKeyword":return Ar(e,Oi);case"ObjectKeyword":return Ar(e,$t);case"Enums":return Ar(e,r=>e.enums.some(([n,o])=>o===r));case"TemplateLiteral":{let r=lL(e);return Ar(e,n=>Ae(n)&&r.test(n))}case"TupleType":{let r=e.elements.map(p=>yt(p.type,t)),n=e.rest.map(p=>yt(p.type,t)),o=e.elements.filter(p=>!p.isOptional);e.rest.length>0&&(o=o.concat(e.rest.slice(1)));let s=o.length,i=e.elements.length>0?e.elements.map((p,l)=>l).join(" | "):"never",a=Ov(e),c=Tv(e);return(p,l)=>{if(!ih(p))return U(new at(e,p));let d=l?.errors==="all",h=[],m=0,x=[],y=p.length;for(let w=y;w<=s-1;w++){let P=new rt(w,p,new ec(o[w-y]));if(d){h.push([m++,P]);continue}else return U(new Me(e,p,P,x))}if(e.rest.length===0)for(let w=e.elements.length;w<=y-1;w++){let P=new rt(w,p,new uy(p[w],`is unexpected, expected: ${i}`));if(d){h.push([m++,P]);continue}else return U(new Me(e,p,P,x))}let b=0,S;for(;b<r.length;b++)if(y<b+1){if(e.elements[b].isOptional)continue}else{let w=r[b],P=w(p[b],l);if(Jt(P)){if(Ie(P)){let M=new rt(b,p,P.left);if(d){h.push([m++,M]);continue}else return U(new Me(e,p,M,An(x)))}x.push([m++,P.right])}else{let M=m++,L=b;S||(S=[]),S.push(({es:q,output:H})=>K(Ba(P),ae=>{if(Ie(ae)){let re=new rt(L,p,ae.left);return d?(q.push([M,re]),X):U(new Me(e,p,re,An(H)))}return H.push([M,ae.right]),X}))}}if(Ee(n)){let[w,...P]=n;for(;b<y-P.length;b++){let M=w(p[b],l);if(Jt(M))if(Ie(M)){let L=new rt(b,p,M.left);if(d){h.push([m++,L]);continue}else return U(new Me(e,p,L,An(x)))}else x.push([m++,M.right]);else{let L=m++,q=b;S||(S=[]),S.push(({es:H,output:ae})=>K(Ba(M),re=>{if(Ie(re)){let Y=new rt(q,p,re.left);return d?(H.push([L,Y]),X):U(new Me(e,p,Y,An(ae)))}else return ae.push([L,re.right]),X}))}}for(let M=0;M<P.length;M++)if(b+=M,!(y<b+1)){let L=P[M](p[b],l);if(Jt(L)){if(Ie(L)){let q=new rt(b,p,L.left);if(d){h.push([m++,q]);continue}else return U(new Me(e,p,q,An(x)))}x.push([m++,L.right])}else{let q=m++,H=b;S||(S=[]),S.push(({es:ae,output:re})=>K(Ba(L),Y=>{if(Ie(Y)){let Fe=new rt(H,p,Y.left);return d?(ae.push([q,Fe]),X):U(new Me(e,p,Fe,An(re)))}return re.push([q,Y.right]),X}))}}}let O=({es:w,output:P})=>bs(w)?U(new Me(e,p,An(w),An(P))):$(An(P));if(S&&S.length>0){let w=S;return Re(()=>{let P={es:Mc(h),output:Mc(x)};return K(wt(w,M=>M(P),{concurrency:a,batching:c,discard:!0}),()=>O(P))})}return O({output:x,es:h})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Ar(e,Kd);let r=[],n={},o=[];for(let l of e.propertySignatures)r.push([yt(l.type,t),l]),n[l.name]=null,o.push(l.name);let s=e.indexSignatures.map(l=>[yt(l.parameter,t),yt(l.type,t),l.parameter]),i=Gt.make(e.indexSignatures.map(l=>l.parameter).concat(o.map(l=>Oi(l)?new Uf(l):new ui(l)))),a=yt(i,t),c=Ov(e),p=Tv(e);return(l,d)=>{if(!ko(l))return U(new at(e,l));let h=d?.errors==="all",m=[],x=0,y=d?.onExcessProperty==="error",b=d?.onExcessProperty==="preserve",S={},O;if(y||b){O=Rr(l);for(let L of O){let q=a(L,d);if(Jt(q)&&Ie(q))if(y){let H=new rt(L,l,new uy(l[L],`is unexpected, expected: ${String(i)}`));if(h){m.push([x++,H]);continue}else return U(new Me(e,l,H,S))}else S[L]=l[L]}}let w,P=d?.exact===!0;for(let L=0;L<r.length;L++){let q=r[L][1],H=q.name,ae=Object.prototype.hasOwnProperty.call(l,H);if(!ae){if(q.isOptional)continue;if(P){let Fe=new rt(H,l,new ec(q));if(h){m.push([x++,Fe]);continue}else return U(new Me(e,l,Fe,S))}}let re=r[L][0],Y=re(l[H],d);if(Jt(Y)){if(Ie(Y)){let Fe=new rt(H,l,ae?Y.left:new ec(q));if(h){m.push([x++,Fe]);continue}else return U(new Me(e,l,Fe,S))}S[H]=Y.right}else{let Fe=x++,Fr=H;w||(w=[]),w.push(({es:Dr,output:an})=>K(Ba(Y),kt=>{if(Ie(kt)){let St=new rt(Fr,l,ae?kt.left:new ec(q));return h?(Dr.push([Fe,St]),X):U(new Me(e,l,St,an))}return an[Fr]=kt.right,X}))}}for(let L=0;L<s.length;L++){let q=s[L],H=q[0],ae=q[1],re=Nk(l,q[2]);for(let Y of re){let Fe=H(Y,d);if(Jt(Fe)&&Ot(Fe)){let Fr=ae(l[Y],d);if(Jt(Fr))if(Ie(Fr)){let Dr=new rt(Y,l,Fr.left);if(h){m.push([x++,Dr]);continue}else return U(new Me(e,l,Dr,S))}else Object.prototype.hasOwnProperty.call(n,Y)||(S[Y]=Fr.right);else{let Dr=x++,an=Y;w||(w=[]),w.push(({es:kt,output:St})=>K(Ba(Fr),Nr=>{if(Ie(Nr)){let mc=new rt(an,l,Nr.left);return h?(kt.push([Dr,mc]),X):U(new Me(e,l,mc,St))}else return Object.prototype.hasOwnProperty.call(n,Y)||(St[Y]=Nr.right),X}))}}}}let M=({es:L,output:q})=>{if(bs(L))return U(new Me(e,l,An(L),q));if(d?.propertyOrder==="original"){let H=O||Rr(l);for(let re of o)H.indexOf(re)===-1&&H.push(re);let ae={};for(let re of H)Object.prototype.hasOwnProperty.call(q,re)&&(ae[re]=q[re]);return $(ae)}return $(q)};if(w&&w.length>0){let L=w;return Re(()=>{let q={es:Mc(m),output:Object.assign({},S)};return K(wt(L,H=>H(q),{concurrency:c,batching:p,discard:!0}),()=>M(q))})}return M({es:m,output:S})}}case"Union":{let r=kL(e.types,t),n=Rr(r.keys),o=n.length,s=e.types.length,i=new Map;for(let p=0;p<s;p++)i.set(e.types[p],yt(e.types[p],t));let a=Ov(e)??1,c=Tv(e);return(p,l)=>{let d=[],h=0,m=[];if(o>0)if($p(p))for(let b=0;b<o;b++){let S=n[b],O=r.keys[S].buckets;if(Object.prototype.hasOwnProperty.call(p,S)){let w=String(p[S]);if(Object.prototype.hasOwnProperty.call(O,w))m=m.concat(O[w]);else{let{candidates:P,literals:M}=r.keys[S],L=Gt.make(M),q=P.length===s?new on([new Ve(S,L,!1,!0)],[]):Gt.make(P);d.push([h++,new Me(q,p,new rt(S,p,new at(L,p[S])))])}}else{let{candidates:w,literals:P}=r.keys[S],M=new Ve(S,Gt.make(P),!1,!0),L=w.length===s?new on([M],[]):Gt.make(w);d.push([h++,new Me(L,p,new rt(S,p,new ec(M)))])}}else{let b=r.candidates.length===s?e:Gt.make(r.candidates);d.push([h++,new at(b,p)])}r.otherwise.length>0&&(m=m.concat(r.otherwise));let x;for(let b=0;b<m.length;b++){let S=m[b],O=i.get(S)(p,l);if(Jt(O)&&(!x||x.length===0)){if(Ot(O))return O;d.push([h++,O.left])}else{let w=h++;x||(x=[]),x.push(P=>Re(()=>"finalResult"in P?X:K(Ba(O),M=>(Ot(M)?P.finalResult=M:P.es.push([w,M.left]),X))))}}let y=b=>bs(b)?b.length===1&&b[0][1]._tag==="Type"?U(b[0][1]):U(new Me(e,p,An(b))):U(new at(e,p));if(x&&x.length>0){let b=x;return Re(()=>{let S={es:Mc(d)};return K(wt(b,O=>O(S),{concurrency:a,batching:c,discard:!0}),()=>"finalResult"in S?S.finalResult:y(S.es))})}return y(d)}}case"Suspend":{let r=Nf(()=>yt(pi(e.f(),e.annotations),t));return(n,o)=>r()(n,o)}}},Ar=(e,t)=>r=>t(r)?$(r):U(new at(e,r)),zf=(e,t)=>{switch(e._tag){case"Declaration":{let r=xv(e);if(oe(r))return zf(r.value,t);break}case"TypeLiteral":{let r=[];for(let n=0;n<e.propertySignatures.length;n++){let o=e.propertySignatures[n],s=t?Wf(o.type):Ke(o.type);Xa(s)&&!o.isOptional&&r.push([o.name,s])}return r}case"TupleType":{let r=[];for(let n=0;n<e.elements.length;n++){let o=e.elements[n],s=t?Wf(o.type):Ke(o.type);Xa(s)&&!o.isOptional&&r.push([n,s])}return r}case"Refinement":return zf(e.from,t);case"Suspend":return zf(e.f(),t);case"Transformation":return zf(t?e.from:e.to,t)}return[]},kL=(e,t)=>{let r={},n=[],o=[];for(let s=0;s<e.length;s++){let i=e[s],a=zf(i,t);if(a.length>0){o.push(i);for(let c=0;c<a.length;c++){let[p,l]=a[c],d=String(l.literal);r[p]=r[p]||{buckets:{},literals:[],candidates:[]};let h=r[p].buckets;if(Object.prototype.hasOwnProperty.call(h,d)){if(c<a.length-1)continue;h[d].push(i),r[p].literals.push(l),r[p].candidates.push(i)}else{h[d]=[i],r[p].literals.push(l),r[p].candidates.push(i);break}}}else n.push(i)}return{keys:r,otherwise:n,candidates:o}},vL=e=>li(e)?vL(e.from):e,Bf=(e,t,r,n)=>{if(n?.isEffectAllowed===!0||Jt(e))return e;let o=new zu,s=Ik(e,{scheduler:o});o.flush();let i=s.unsafePoll();if(i){if(_F(i))return $(i.value);let a=i.cause;return iP(a)?U(a.error):U(new py(t,r,cP(a)))}return U(new py(t,r,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},_8=([e],[t])=>e>t?1:e<t?-1:0;function An(e){return e.sort(_8).map(t=>t[1])}var C8=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return $;case"TypeLiteralTransformation":return r=>{let n=$(r);for(let o of e.propertySignatureTransformations){let[s,i]=t?[o.from,o.to]:[o.to,o.from],a=t?o.decode:o.encode;n=hr(n,p=>{let l=a(Object.prototype.hasOwnProperty.call(p,s)?k(p[s]):E());return delete p[s],oe(l)&&(p[i]=l.value),p})}return n}}},Qt=(e,t=[])=>({value:e,forest:t}),hp={formatIssue:e=>hr(dp(e),w8),formatIssueSync:e=>{let t=hp.formatIssue(e);return Jt(t)?vR(t):rn(t)},formatError:e=>hp.formatIssue(e.issue),formatErrorSync:e=>hp.formatIssueSync(e.issue)},w8=e=>e.value+OL(`
`,e.forest),OL=(e,t)=>{let r="",n=t.length,o;for(let s=0;s<n;s++){o=t[s];let i=s===n-1;r+=e+(i?"\u2514":"\u251C")+"\u2500 "+o.value,r+=OL(e+(n>1&&!i?"\u2502  ":"   "),o.forest)}return r},k8=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},v8=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},TL=e=>"ast"in e?k(e.ast):E(),Av=$(void 0),O8=e=>TL(e).pipe(qt(VN),ie({onNone:()=>Av,onSome:t=>{let r=t(e);return Ae(r)?$({message:r,override:!1}):vn(r)?pe(r,n=>({message:n,override:!1})):Ae(r.message)?$({message:r.message,override:r.override}):pe(r.message,n=>({message:n,override:r.override}))}})),Mv=e=>t=>t._tag===e,RL=Mv("Composite"),gL=Mv("Refinement"),yL=Mv("Transformation"),Gf=e=>ls(O8(e),t=>t!==void 0?!t.override&&(RL(e)||gL(e)&&e.kind==="From"||yL(e)&&e.kind!=="Transformation")?yL(e)||gL(e)?Gf(e.issue):Av:$(t.message):Av),AL=e=>TL(e).pipe(qt(YN),PR(t=>t(e)),or);function T8(e){return mv(e).pipe(qr(()=>dv(e)),qr(()=>hv(e)),qr(()=>Hf(e)),ue(()=>`{ ${e.from} | filter }`))}function R8(e){return e.message!==void 0?e.message:`Expected ${li(e.ast)?T8(e.ast):String(e.ast)}, actual ${Dt(e.actual)}`}var A8=e=>hr(Gf(e),t=>t??AL(e)??R8(e)),cy=e=>AL(e)??String(e.ast),I8=e=>e.message??"is forbidden",P8=e=>e.message??"is unexpected",M8=e=>{let t=GN(e.ast);if(oe(t)){let r=t.value();return Ae(r)?$(r):r}return $(e.message??"is missing")},dp=e=>{switch(e._tag){case"Type":return hr(A8(e),Qt);case"Forbidden":return $(Qt(cy(e),[Qt(I8(e))]));case"Unexpected":return $(Qt(P8(e)));case"Missing":return hr(M8(e),Qt);case"Transformation":return ls(Gf(e),t=>t!==void 0?$(Qt(t)):hr(dp(e.issue),r=>Qt(cy(e),[Qt(k8(e.kind),[r])])));case"Refinement":return ls(Gf(e),t=>t!==void 0?$(Qt(t)):hr(dp(e.issue),r=>Qt(cy(e),[Qt(v8(e.kind),[r])])));case"Pointer":return hr(dp(e.issue),t=>Qt(Kg(e.path),[t]));case"Composite":return ls(Gf(e),t=>{if(t!==void 0)return $(Qt(t));let r=cy(e);return Lk(e.issues)?hr(wt(e.issues,dp),n=>Qt(r,n)):hr(dp(e.issues),n=>Qt(r,[n]))})}};var IL=u(e=>$t(e[0]),(e,...t)=>{let r={};for(let n of t)n in e&&(r[n]=e[n]);return r}),PL=u(e=>$t(e[0]),(e,...t)=>{let r={...e};for(let n of t)delete r[n];return r});var nc=Symbol.for("effect/Schema");function Ge(e){return class{[nc]=Dv;static ast=e;static annotations(r){return Ge(go(this.ast,r))}static pipe(){return _(this,arguments)}static toString(){return String(e)}static Type;static Encoded;static Context;static[nc]=Dv}}var Dv={_A:e=>e,_I:e=>e,_R:e=>e};var ML={schemaId:zN,message:tv,missingMessage:Jg,identifier:Yg,title:dr,description:us,examples:rv,default:nv,documentation:BN,jsonSchema:ov,arbitrary:sv,pretty:iv,equivalence:av,concurrency:cv,batching:uv,parseIssueTitle:pv,parseOptions:lv,decodingFallback:fv},oc=e=>{if(!e)return{};let t={...e};for(let r in ML)if(r in e){let n=ML[r];t[n]=e[r],delete t[r]}return t},go=(e,t)=>pi(e,oc(t));var N8=e=>String(e.ast),L8=e=>Ge(Wf(e.ast));var Ir=e=>Ge(Ke(e.ast));var Lv=(e,t)=>{let r=fy(e,t);return(n,o)=>Vf(r(n,o),Iv)};var sn=e=>v(e,nc)&&$t(e[nc]);function U8(e){return sy(e)?Gt.make(aL(e,t=>new ui(t))):new ui(e[0])}function VL(e,t=U8(e)){return class extends Ge(t){static annotations(n){return VL(this.literals,go(this.ast,n))}static literals=[...e]}}function In(...e){return Ee(e)?VL(e):Ey}var $8=(e,t,r)=>Uv(e,new Va(e.map(n=>n.ast),(...n)=>t.decode(...n.map(Ge)),(...n)=>t.encode(...n.map(Ge)),oc(r))),q8=(e,t)=>{let r=()=>(o,s,i)=>e(o)?fi(o):Qf(new at(i,o)),n=r;return Uv([],new Va([],r,n,oc(t)))};function Uv(e,t){return class extends Ge(t){static annotations(n){return Uv(this.typeParameters,go(this.ast,n))}static typeParameters=[...e]}}var sd=function(){if(Array.isArray(arguments[0])){let r=arguments[0],n=arguments[1],o=arguments[2];return $8(r,n,o)}let e=arguments[0],t=arguments[1];return q8(e,t)};var gy=class extends Ge(Xg){};var yy=class extends Ge(tL){},Ey=class extends Ge(ey){},hi=class extends Ge(yv){};var se=class extends Ge(ty){},Yt=class extends Ge(ny){},xo=class extends Ge(oy){};var H8=e=>Gt.make(e.map(t=>t.ast));function GL(e,t=H8(e)){return class extends Ge(t){static annotations(n){return GL(this.members,go(this.ast,n))}static members=[...e]}}function id(...e){return sy(e)?GL(e):Ee(e)?e[0]:Ey}var rc=e=>id(e,yy),Zf=e=>id(e,gy),Fv=e=>id(e,yy,gy);var FL=class e{ast;from;[nc];_Token;constructor(t,r){this.ast=t,this.from=r}annotations(t){return new e(new Tn(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...oc(t)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}},W8=(e,t)=>new lp(e.map(r=>sn(r)?new Tn(r.ast,!1):r.ast),t.map(r=>sn(r)?new Ga(r.ast):r.ast),!0);function $v(e,t,r=W8(e,t)){return class extends Ge(r){static annotations(o){return $v(this.elements,this.rest,go(this.ast,o))}static elements=[...e];static rest=[...t]}}function QL(e,t){return class extends $v([],[e],t){static annotations(n){return QL(this.value,go(this.ast,n))}static value=e}}var gp=e=>QL(e);function JL(e,t){return class extends $v([e],[e],t){static annotations(n){return JL(this.value,go(this.ast,n))}static value=e}}var YL=e=>JL(e);var Nv=e=>e?'"?:"':'":"',mi=class extends Tn{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(t,r,n,o,s){super(t,r,o),this.isReadonly=n,this.defaultValue=s}toString(){let t=Nv(this.isOptional),r=String(this.type);return`PropertySignature<${t}, ${r}, never, ${t}, ${r}>`}},by=class extends Tn{isReadonly;fromKey;constructor(t,r,n,o,s){super(t,r,o),this.isReadonly=n,this.fromKey=s}},mp=class extends Tn{isReadonly;defaultValue;constructor(t,r,n,o,s){super(t,r,o),this.isReadonly=n,this.defaultValue=s}},z8=e=>e===void 0?"never":Ae(e)?JSON.stringify(e):String(e),xp=class{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(t,r,n,o){this.from=t,this.to=r,this.decode=n,this.encode=o}toString(){return`PropertySignature<${Nv(this.to.isOptional)}, ${this.to.type}, ${z8(this.from.fromKey)}, ${Nv(this.from.isOptional)}, ${this.from.type}>`}},ZL=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new mi(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new xp(e.from,new mp(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},XL=Symbol.for("effect/PropertySignature"),qv=e=>v(e,XL),Sy=class e{ast;[nc];[XL]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(t){this.ast=t}pipe(){return _(this,arguments)}annotations(t){return new e(ZL(this.ast,oc(t)))}toString(){return String(this.ast)}},_y=e=>new Sy(e),td=class e extends Sy{from;constructor(t,r){super(t),this.from=r}annotations(t){return new e(ZL(this.ast,oc(t)),this.from)}},B8=e=>new td(new mi(e.ast,!1,!0,{},void 0),e),Xf=u(2,(e,t)=>{let r=e.ast;switch(r._tag){case"PropertySignatureDeclaration":return _y(new mi(r.type,r.isOptional,r.isReadonly,r.annotations,t));case"PropertySignatureTransformation":return _y(new xp(r.from,new mp(r.to.type,r.to.isOptional,r.to.isReadonly,r.to.annotations,t),r.decode,r.encode))}});var di=(e,t,r)=>_y(new xp(new by(e.ast,!0,!0,{},void 0),new mp(t.ast,!1,!0,{},void 0),n=>k(r.decode(n)),qt(r.encode)));var DL=(e,t,r)=>_y(new xp(new by(e.ast,!0,!0,{},void 0),new mp(t.ast,!0,!0,{},void 0),r.decode,r.encode)),j8=(e,t)=>{let r=t?.exact,n=t?.default,o=t?.nullable,s=t?.as=="Option",i=t?.onNoneEncoding?qr(t.onNoneEncoding):N;return r?n?o?Xf(di(rc(e),Ir(e),{decode:ie({onNone:n,onSome:a=>a===null?n():a}),encode:k}),n).ast:Xf(di(e,Ir(e),{decode:ie({onNone:n,onSome:N}),encode:k}),n).ast:s?o?di(rc(e),my(Ir(e)),{decode:Ac(jd),encode:i}).ast:di(e,my(Ir(e)),{decode:N,encode:N}).ast:o?DL(rc(e),Ir(e),{decode:Ac(jd),encode:N}).ast:new mi(e.ast,!0,!0,{},void 0):n?o?Xf(di(Fv(e),Ir(e),{decode:ie({onNone:n,onSome:a=>a??n()}),encode:k}),n).ast:Xf(di(Zf(e),Ir(e),{decode:ie({onNone:n,onSome:a=>a===void 0?n():a}),encode:k}),n).ast:s?o?di(Fv(e),my(Ir(e)),{decode:Ac(a=>a!=null),encode:i}).ast:di(Zf(e),my(Ir(e)),{decode:Ac(tR),encode:i}).ast:o?DL(Fv(e),Zf(Ir(e)),{decode:Ac(jd),encode:N}).ast:new mi(Zf(e).ast,!0,!0,{},void 0)},yo=e=>{let t=e.ast===Xg||e.ast===ey?Xg:Zf(e).ast;return new td(new mi(t,!0,!0,{},void 0),e)},Hv=u(e=>sn(e[0]),(e,t)=>new td(j8(e,t),e)),K8=kv([Jg]),V8=(e,t)=>{let r=Rr(e),n=[];if(r.length>0){let s=[],i=[],a=[];for(let c=0;c<r.length;c++){let p=r[c],l=e[p];if(qv(l)){let d=l.ast;switch(d._tag){case"PropertySignatureDeclaration":{let h=d.type,m=d.isOptional,x=d.annotations;s.push(new Ve(p,h,m,!0,K8(d))),i.push(new Ve(p,Ke(h),m,!0,x)),n.push(new Ve(p,h,m,!0,x));break}case"PropertySignatureTransformation":{let h=d.from.fromKey??p;s.push(new Ve(h,d.from.type,d.from.isOptional,!0,d.from.annotations)),i.push(new Ve(p,d.to.type,d.to.isOptional,!0,d.to.annotations)),a.push(new Qg(h,p,d.decode,d.encode));break}}}else s.push(new Ve(p,l.ast,!1,!0)),i.push(new Ve(p,Ke(l.ast),!1,!0)),n.push(new Ve(p,l.ast,!1,!0))}if(Ee(a)){let c=[],p=[];for(let l of t){let{indexSignatures:d,propertySignatures:h}=wv(l.key.ast,l.value.ast);h.forEach(m=>{s.push(m),i.push(new Ve(m.name,Ke(m.type),m.isOptional,m.isReadonly,m.annotations))}),d.forEach(m=>{c.push(m),p.push(new Qa(m.parameter,Ke(m.type),m.isReadonly))})}return new ho(new on(s,c,{[Za]:"Struct (Encoded side)"}),new on(i,p,{[Za]:"Struct (Type side)"}),new fp(a))}}let o=[];for(let s of t){let{indexSignatures:i,propertySignatures:a}=wv(s.key.ast,s.value.ast);a.forEach(c=>n.push(c)),i.forEach(c=>o.push(c))}return new on(n,o)},eU=(e,t)=>{let r=Rr(e);for(let n of r){let o=e[n];if(t[n]===void 0&&qv(o)){let s=o.ast,i=s._tag==="PropertySignatureDeclaration"?s.defaultValue:s.to.defaultValue;i!==void 0&&(t[n]=i())}}return t};function tU(e,t,r=V8(e,t)){return class extends Ge(r){static annotations(o){return tU(this.fields,this.records,go(this.ast,o))}static fields={...e};static records=[...t];static make=(o,s)=>{let i=eU(e,{...o});return Vv(s)?i:hy(this)(i)};static pick(...o){return mr(IL(e,...o))}static omit(...o){return mr(PL(e,...o))}}}function mr(e,...t){return tU(e,t)}var Jf=(e,t,r)=>{if(Sv(e)&&Sv(t)){let n=[...e.propertySignatures];for(let o of t.propertySignatures){let s=o.name,i=n.findIndex(a=>a.name===s);if(i===-1)n.push(o);else{let{isOptional:a,type:c}=n[i];n[i]=new Ve(s,Cy(c,o.type,r.concat(s)),a,!0)}}return new on(n,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Uk(e,t,r))},G8=fL([Yg]),Yf=(e,t)=>t.map(r=>new Ya(r,e.filter,G8(e))),Cy=(e,t,r)=>Gt.make(fs([e],[t],r)),tc=e=>iy(e)?e.types:[e],fs=(e,t,r)=>Io(e,n=>Io(t,o=>{switch(o._tag){case"Literal":{if(Ae(o.literal)&&ry(n)||vt(o.literal)&&Ev(n)||wo(o.literal)&&bv(n))return[o];break}case"StringKeyword":{if(o===ty){if(ry(n)||Xa(n)&&Ae(n.literal))return[n];if(li(n))return Yf(n,fs(tc(n.from),[o],r))}else if(n===ty)return[o];break}case"NumberKeyword":{if(o===ny){if(Ev(n)||Xa(n)&&vt(n.literal))return[n];if(li(n))return Yf(n,fs(tc(n.from),[o],r))}else if(n===ny)return[o];break}case"BooleanKeyword":{if(o===oy){if(bv(n)||Xa(n)&&wo(n.literal))return[n];if(li(n))return Yf(n,fs(tc(n.from),[o],r))}else if(n===oy)return[o];break}case"Union":return fs(tc(n),o.types,r);case"Suspend":return[new Ja(()=>Cy(n,o.f(),r))];case"Refinement":return Yf(o,fs(tc(n),tc(o.from),r));case"TypeLiteral":{switch(n._tag){case"Union":return fs(n.types,[o],r);case"Suspend":return[new Ja(()=>Cy(n.f(),o,r))];case"Refinement":return Yf(n,fs(tc(n.from),[o],r));case"TypeLiteral":return[Jf(n,o,r)];case"Transformation":{let s=n.transformation,i=Jf(n.from,o,r),a=Jf(n.to,Ke(o),r);switch(s._tag){case"TypeLiteralTransformation":return[new ho(i,a,new fp(s.propertySignatureTransformations))];case"ComposeTransformation":return[new ho(i,a,_v)];case"FinalTransformation":return[new ho(i,a,new $f((c,p,l,d)=>hr(s.decode(c,p,l,d),h=>({...c,...h})),(c,p,l,d)=>hr(s.encode(c,p,l,d),h=>({...c,...h}))))]}}}break}case"Transformation":{if(cL(n)){if(Cv(o.transformation)&&Cv(n.transformation))return[new ho(Jf(n.from,o.from,r),Jf(n.to,o.to,r),new fp(o.transformation.propertySignatureTransformations.concat(n.transformation.propertySignatureTransformations)))]}else return fs([o],[n],r);break}}throw new Error(Uk(n,o,r))})),rU=u(2,(e,t)=>Ge(Cy(e.ast,t.ast,[]))),wy=u(e=>sn(e[1]),(e,t)=>Wv(e,t,dL(e.ast,t.ast)));var nU=Symbol.for("effect/SchemaId/Refine");function oU(e,t,r){return class extends Ge(r){static annotations(o){return oU(this.from,this.filter,go(this.ast,o))}static[nU]=e;static from=e;static filter=t;static make=(o,s)=>Vv(s)?o:hy(this)(o)}}var NL=(e,t,r)=>{if(wo(e))return e?E():k(new at(t,r));if(Ae(e))return k(new at(t,r,e));if(e!==void 0){if("_tag"in e)return k(e);let n=new at(t,r,e.message);return k(Ee(e.path)?new rt(e.path,r,n):n)}return E()},Q8=(e,t,r)=>{if(FN(e))return NL(e,t,r);if(Ee(e)){let n=Qp(e,o=>NL(o,t,r));if(Ee(n))return k(n.length===1?n[0]:new Me(t,r,n))}return E()};function sU(e,t){return r=>{function n(s,i,a){return Q8(e(s,i,a),a,s)}let o=new Ya(r.ast,n,oc(t));return oU(r,n,o)}}function Wv(e,t,r){return class extends Ge(r){static annotations(o){return Wv(this.from,this.to,go(this.ast,o))}static from=e;static to=t}}var rd=u(e=>sn(e[0])&&sn(e[1]),(e,t,r)=>Wv(e,t,new ho(e.ast,t.ast,new $f(r.decode,r.encode)))),ad=u(e=>sn(e[0])&&sn(e[1]),(e,t,r)=>rd(e,t,{strict:!0,decode:(n,o,s,i)=>fi(r.decode(n,i)),encode:(n,o,s,i)=>fi(r.encode(n,i))}));var LL=Symbol.for("effect/SchemaId/Pattern"),J8=(e,t)=>r=>{let n=e.source;return r.pipe(sU(o=>(e.lastIndex=0,e.test(o)),{schemaId:LL,[LL]:{regex:e},description:`a string matching the pattern ${n}`,jsonSchema:{pattern:n},...t}))},UL=Symbol.for("effect/SchemaId/StartsWith"),iU=(e,t)=>r=>{let n=JSON.stringify(e);return r.pipe(sU(o=>o.startsWith(e),{schemaId:UL,[UL]:{startsWith:e},title:`startsWith(${n})`,description:`a string starting with ${n}`,jsonSchema:{pattern:`^${e}`},...t}))};var $L=e=>e instanceof Error?e.message:String(e),Y8=e=>rd(se.annotations({description:"a string to be decoded into JSON"}),hi,{strict:!0,decode:(t,r,n)=>Pv({try:()=>JSON.parse(t,e?.reviver),catch:o=>new at(n,t,$L(o))}),encode:(t,r,n)=>Pv({try:()=>JSON.stringify(t,e?.replacer,e?.space),catch:o=>new at(n,t,$L(o))})}).annotations({title:"parseJson",schemaId:eL}),ky=(e,t)=>sn(e)?wy(ky(t),e):Y8(e);var Z8=Symbol.for("effect/SchemaId/UUID"),qL=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,HL=class extends se.pipe(J8(qL,{schemaId:Z8,identifier:"UUID",jsonSchema:{format:"uuid",pattern:qL.source},description:"a Universally Unique Identifier",arbitrary:()=>t=>t.uuid()})){};var X8=e=>t=>e(t).map(Hi),aU=(e,t,r,n)=>EL(e,{onFailure:o=>new Me(r,n,o),onSuccess:t}),WL=e=>(t,r,n)=>U0(t)?aU(e(Lo(t),r),Hi,n,t):Qf(new at(n,t)),e7=e=>sd([e],{decode:t=>WL(fy(t)),encode:t=>WL(dy(t))},{description:"Redacted(<redacted>)",pretty:()=>()=>"Redacted(<redacted>)",arbitrary:X8,equivalence:$0});function cU(e){return ad(e,e7(Ir(e)),{strict:!0,decode:t=>Hi(t),encode:t=>Lo(t)})}var nd=class extends sd(nR,{identifier:"Uint8ArrayFromSelf",pretty:()=>t=>`new Uint8Array(${JSON.stringify(Array.from(t))})`,arbitrary:()=>t=>t.uint8Array(),equivalence:()=>Po(T)}){};var t7=(e,t,r)=>rd(se.annotations({description:"a string to be decoded into a Uint8Array"}),nd,{strict:!0,decode:(n,o,s)=>Rc(t(n),i=>new at(s,n,i.message)),encode:n=>fi(r(n))}).annotations({identifier:e}),uU=t7("Uint8ArrayFromBase64",M0,P0);var zL=qN,BL=class extends sd(Vd,{identifier:"DateFromSelf",schemaId:zL,[zL]:{noInvalidDate:!1},description:"a potentially invalid Date instance",pretty:()=>t=>`new Date(${JSON.stringify(t)})`,arbitrary:()=>t=>t.date({noInvalidDate:!1}),equivalence:()=>YT}){};var r7=e=>e._tag==="None"?E():k(e.value),n7=(e,t)=>r=>r.oneof(t,r.record({_tag:r.constant("None")}),r.record({_tag:r.constant("Some"),value:e(r)})).map(r7),o7=e=>ie({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),jL=e=>(t,r,n)=>RR(t)?me(t)?fi(E()):aU(e(t.value,r),k,n,t):Qf(new at(n,t)),my=e=>sd([e],{decode:t=>jL(fy(t)),encode:t=>jL(dy(t))},{description:`Option<${N8(e)}>`,pretty:o7,arbitrary:n7,equivalence:FR});var s7=e=>sn(e)||qv(e),pU=e=>Rr(e).every(t=>s7(e[t])),zv=e=>"fields"in e?e.fields:zv(e[nU]),Bv=e=>pU(e)?mr(e):sn(e)?e:mr(zv(e)),jv=e=>pU(e)?e:zv(e),Pr=e=>(t,r)=>ed({kind:"Class",identifier:e,schema:Bv(t),fields:jv(t),Base:iM,annotations:r}),i7=e=>Xf(B8(In(e)),()=>e);var Kv=e=>(t,r,n)=>{class o extends Uu{}o.prototype.name=t;let s=jv(r),i=Bv(r),a={_tag:i7(t)},c=xy(a,s),p="message"in c;class l extends ed({kind:"TaggedError",identifier:e??t,schema:rU(i,mr(a)),fields:c,Base:o,annotations:n,disableToString:!0}){static _tag=t}return p||Object.defineProperty(l.prototype,"message",{get(){return`{ ${Rr(s).map(d=>`${Lf(d)}: ${Dt(this[d])}`).join(", ")} }`},enumerable:!1,configurable:!0}),l},xy=(e,t)=>{let r={...e};for(let n of Rr(t)){if(n in e)throw new Error(Gg(n));r[n]=t[n]}return r};function Vv(e){return wo(e)?e:e?.disableValidation??!1}var KL=D("effect/Schema/astCache",()=>new WeakMap),a7=e=>e===void 0?[]:Array.isArray(e)?e:[e],ed=({Base:e,annotations:t,disableToString:r,fields:n,identifier:o,kind:s,schema:i})=>{let a=Symbol.for(`effect/Schema/${s}/${o}`),[c,p,l]=a7(t),d=Ir(i),h=d.annotations({identifier:o,...c}),m=d.annotations({[Za]:`${o} (Type side)`,...c}),x=i.annotations({[Za]:`${o} (Constructor)`,...c}),y=i.annotations({[Za]:`${o} (Encoded side)`,...l}),b=i.annotations({[Zg]:o,...l,...c,...p}),S=w=>v(w,a)&&wL(m)(w),O=class extends e{constructor(w={},P=!1){w={...w},s!=="Class"&&delete w._tag,w=eU(n,w),Vv(P)||(w=hy(x)(w)),super(w,!0)}static[nc]=Dv;static get ast(){let w=KL.get(this);if(w)return w;let P=sd([i],{decode:()=>(M,L,q)=>M instanceof this||S(M)?fi(M):Qf(new at(q,M)),encode:()=>(M,L)=>M instanceof this?fi(M):hr(dy(m)(M,L),q=>new this(q,!0))},{identifier:o,pretty:M=>L=>`${o}(${M(L)})`,arbitrary:M=>L=>M(L).map(q=>new this(q)),equivalence:N,[qf]:h.ast,...c});return w=ad(y,P,{strict:!0,decode:M=>new this(M,!0),encode:N}).annotations({[qf]:b.ast,...p}).ast,KL.set(this,w),w}static pipe(){return _(this,arguments)}static annotations(w){return Ge(this.ast).annotations(w)}static toString(){return`(${String(y)} <-> ${o})`}static make(...w){return new this(...w)}static fields={...n};static identifier=o;static extend(w){return(P,M)=>{let L=jv(P),q=Bv(P),H=xy(n,L);return ed({kind:s,identifier:w,schema:rU(i,q),fields:H,Base:this,annotations:M})}}static transformOrFail(w){return(P,M,L)=>{let q=xy(n,P);return ed({kind:s,identifier:w,schema:rd(i,Ir(mr(q)),M),fields:q,Base:this,annotations:L})}}static transformOrFailFrom(w){return(P,M,L)=>{let q=xy(n,P);return ed({kind:s,identifier:w,schema:rd(L8(i),mr(q),M),fields:q,Base:this,annotations:L})}}get[a](){return a}};return r!==!0&&Object.defineProperty(O.prototype,"toString",{value(){return`${o}({ ${Rr(n).map(w=>`${Lf(w)}: ${Dt(this[w])}`).join(", ")} })`},configurable:!0,writable:!0}),O};var od=class extends ad(hi,hi,{strict:!0,decode:t=>{if($t(t)&&"message"in t&&typeof t.message=="string"){let r=new Error(t.message,{cause:t});return"name"in t&&typeof t.name=="string"&&(r.name=t.name),r.stack="stack"in t&&typeof t.stack=="string"?t.stack:"",r}return String(t)},encode:t=>t instanceof Error?{name:t.name,message:t.message}:cS(t)}).annotations({identifier:"Defect"}){};var lU=(e,t)=>{let r=CL(t);return zs(e).pipe(lx(n=>r(n).pipe(Rc(o=>Qm([],hp.formatIssueSync(o))))))};var jpe=In(...W0),Kpe=In(...z0),c7=In("upload"),fU=In("callback","error"),u7=ad(nd,se,{decode:e=>new TextDecoder().decode(e),encode:e=>new TextEncoder().encode(e)}),p7=mr({apiKey:cU(se.pipe(iU("sk_"))),appId:se,regions:YL(se),ingestHost:se.pipe(Hv({default:()=>"ingest.uploadthing.com"}))}),dU=uU.pipe(wy(u7),wy(ky(p7))),hU=class extends Pr("FileUploadData")({name:se,size:Yt,type:se,lastModified:Yt.pipe(yo)}){},l7=class extends hU.extend("FileUploadDataWithCustomId")({customId:rc(se)}){},f7=class extends l7.extend("UploadedFileData")({key:se,url:se,appUrl:se,ufsUrl:se,fileHash:se}){},d7=class extends Pr("MetadataFetchStreamPart")({payload:se,signature:se,hook:fU}){},h7=class extends Pr("MetadataFetchResponse")({ok:xo}){},m7=class extends Pr("CallbackResultResponse")({ok:xo}){},x7=class extends Pr("UploadActionPayload")({files:gp(hU),input:hi}){};var mU=ni;var y7="effect/QueueEnqueue",gU=Symbol.for(y7),E7="effect/QueueDequeue",yU=Symbol.for(E7),b7="effect/QueueStrategy",Ty=Symbol.for(b7),S7="effect/BackingQueue",EU=Symbol.for(S7),Zv={_A:e=>e},_7={_A:e=>e},C7={_In:e=>e},w7={_Out:e=>e},Gv=class extends dn{queue;takers;shutdownHook;shutdownFlag;strategy;[gU]=C7;[yU]=w7;constructor(t,r,n,o,s){super(),this.queue=t,this.takers=r,this.shutdownHook=n,this.shutdownFlag=o,this.strategy=s}pipe(){return _(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return G(()=>Vr(this.unsafeSize(),()=>Gr))}unsafeSize(){return ve(this.shutdownFlag)?E():k(this.queue.length()-Pg(this.takers)+this.strategy.surplusSize())}get isEmpty(){return j(this.size,t=>t<=0)}get isFull(){return j(this.size,t=>t>=this.capacity())}get shutdown(){return Us(J(t=>(f(this.shutdownFlag,Kr(!0)),f(po(yp(this.takers),r=>Um(r,t.id()),!1,!1),he(this.strategy.shutdown),aa(ba(this.shutdownHook,void 0)),et))))}get isShutdown(){return C(()=>ve(this.shutdownFlag))}get awaitShutdown(){return Bt(this.shutdownHook)}isActive(){return!ve(this.shutdownFlag)}unsafeOffer(t){if(ve(this.shutdownFlag))return!1;let r;if(this.queue.length()===0){let o=f(this.takers,ss(Mt));o!==Mt?(ic(o,t),r=!0):r=!1}else r=!1;if(r)return!0;let n=this.queue.offer(t);return sc(this.strategy,this.queue,this.takers),n}offer(t){return G(()=>{if(ve(this.shutdownFlag))return Gr;let r;if(this.queue.length()===0){let o=f(this.takers,ss(Mt));o!==Mt?(ic(o,t),r=!0):r=!1}else r=!1;if(r)return A(!0);let n=this.queue.offer(t);return sc(this.strategy,this.queue,this.takers),n?A(!0):this.strategy.handleSurplus([t],this.queue,this.takers,this.shutdownFlag)})}offerAll(t){return G(()=>{if(ve(this.shutdownFlag))return Gr;let r=te(t),n=this.queue.length()===0?te(v7(this.takers,r.length)):Wt,[o,s]=f(r,lb(n.length));for(let a=0;a<n.length;a++){let c=n[a],p=o[a];ic(c,p)}if(s.length===0)return A(!0);let i=this.queue.offerAll(s);return sc(this.strategy,this.queue,this.takers),zi(i)?A(!0):this.strategy.handleSurplus(i,this.queue,this.takers,this.shutdownFlag)})}get take(){return J(t=>{if(ve(this.shutdownFlag))return Gr;let r=this.queue.poll(Mt);if(r!==Mt)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),A(r);{let n=Ea(t.id());return f(G(()=>(f(this.takers,cp(n)),sc(this.strategy,this.queue,this.takers),ve(this.shutdownFlag)?Gr:Bt(n))),Vo(()=>C(()=>O7(this.takers,n))))}})}get takeAll(){return G(()=>ve(this.shutdownFlag)?Gr:C(()=>{let t=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),Br(t)}))}takeUpTo(t){return G(()=>ve(this.shutdownFlag)?Gr:C(()=>{let r=this.queue.pollUpTo(t);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),Br(r)}))}takeBetween(t,r){return G(()=>bU(this,t,r,We()))}},bU=(e,t,r,n)=>r<t?A(n):f(OU(e,r),g(o=>{let s=t-o.length;return s===1?f(vy(e),j(i=>f(n,pt(o),Wi(i)))):s>1?f(vy(e),g(i=>bU(e,s-1,r-o.length-1,f(n,pt(o),Wi(i))))):A(f(n,pt(o)))}));var SU=e=>f(C(()=>ZD(e)),g(t=>Xv(CU(t),TU())));var _U=()=>f(C(()=>Ig()),g(e=>Xv(CU(e),RU()))),k7=(e,t,r,n,o)=>new Gv(e,t,r,n,o),Xv=(e,t)=>f(En(),j(r=>k7(e,Ig(),r,Xn(!1),t))),Qv=class{mutable;[EU]=_7;constructor(t){this.mutable=t}poll(t){return ss(this.mutable,t)}pollUpTo(t){return Fg(this.mutable,t)}offerAll(t){return Sk(this.mutable,t)}offer(t){return cp(this.mutable,t)}capacity(){return XD(this.mutable)}length(){return Pg(this.mutable)}},CU=e=>new Qv(e);var wU=e=>e.size;var kU=e=>e.shutdown,vU=u(2,(e,t)=>e.offer(t));var vy=e=>e.take;var OU=u(2,(e,t)=>e.takeUpTo(t));var TU=()=>new Jv,RU=()=>new Yv;var Jv=class{[Ty]=Zv;putters=Ig();surplusSize(){return Pg(this.putters)}onCompleteTakersWithEmptyQueue(t){for(;!Mg(this.putters)&&!Mg(t);){let r=ss(t,void 0),n=ss(this.putters,void 0);n[2]&&ic(n[1],!0),ic(r,n[0])}}get shutdown(){return f(ia,g(t=>f(C(()=>yp(this.putters)),g(r=>po(r,([n,o,s])=>s?f(Um(o,t),et):ee,!1,!1)))))}handleSurplus(t,r,n,o){return J(s=>{let i=Ea(s.id());return f(G(()=>(this.unsafeOffer(t,i),this.unsafeOnQueueEmptySpace(r,n),sc(this,r,n),ve(o)?Gr:Bt(i))),Vo(()=>C(()=>this.unsafeRemove(i))))})}unsafeOnQueueEmptySpace(t,r){let n=!0;for(;n&&(t.capacity()===Number.POSITIVE_INFINITY||t.length()<t.capacity());){let o=f(this.putters,ss(Mt));if(o===Mt)n=!1;else{let s=t.offer(o[0]);s&&o[2]?ic(o[1],!0):s||Oy(this.putters,f(yp(this.putters),Oe(o))),sc(this,t,r)}}}unsafeOffer(t,r){let n=te(t);for(let o=0;o<n.length;o++){let s=n[o];o===n.length-1?f(this.putters,cp([s,r,!0])):f(this.putters,cp([s,r,!1]))}}unsafeRemove(t){Oy(this.putters,f(yp(this.putters),Ih(([,r])=>r!==t)))}},Yv=class{[Ty]=Zv;surplusSize(){return 0}get shutdown(){return ee}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,r,n,o){return A(!1)}unsafeOnQueueEmptySpace(t,r){}},xU=class{[Ty]=Zv;surplusSize(){return 0}get shutdown(){return ee}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,r,n,o){return C(()=>(this.unsafeOffer(r,t),sc(this,r,n),!0))}unsafeOnQueueEmptySpace(t,r){}unsafeOffer(t,r){let n=r[Symbol.iterator](),o,s=!0;for(;!(o=n.next()).done&&s;){if(t.capacity()===0)return;t.poll(Mt),s=t.offer(o.value)}}},ic=(e,t)=>Sa(e,A(t)),Oy=(e,t)=>f(e,Sk(t)),yp=e=>f(e,Fg(Number.POSITIVE_INFINITY)),v7=(e,t)=>f(e,Fg(t)),O7=(e,t)=>{Oy(e,f(yp(e),Ih(r=>t!==r)))},sc=(e,t,r)=>{let n=!0;for(;n&&t.length()!==0;){let o=f(r,ss(Mt));if(o!==Mt){let s=t.poll(Mt);s!==Mt?(ic(o,s),e.unsafeOnQueueEmptySpace(t,r)):Oy(r,f(yp(r),Oe(o))),n=!0}else n=!1}n&&t.length()===0&&!Mg(r)&&e.onCompleteTakersWithEmptyQueue(r)};var AU=SU;var IU=_U;var PU=wU;var eO=kU,ac=vU;var tO=vy;var ud=Ue;var MU=y_;var FU=Pt;var DU=Pm;var Ay="Continue",rO="Close",nO="Yield";var A7="effect/ChannelChildExecutorDecision",LU=Symbol.for(A7),I7={[LU]:LU},oO=e=>{let t=Object.create(I7);return t._tag=Ay,t};var Ep="ContinuationK",UU="ContinuationFinalizer";var qU=Symbol.for("effect/ChannelContinuation"),HU={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e},pd=class{onSuccess;onHalt;_tag=Ep;[qU]=HU;constructor(t,r){this.onSuccess=t,this.onHalt=r}onExit(t){return Nx(t)?this.onHalt(t.cause):this.onSuccess(t.value)}},Iy=class{finalizer;_tag=UU;[qU]=HU;constructor(t){this.finalizer=t}};var Py="PullAfterNext",sO="PullAfterAllEnqueued";var F7="effect/ChannelUpstreamPullStrategy",D7=Symbol.for(F7),N7={_A:e=>e},L7={[D7]:N7},iO=e=>{let t=Object.create(L7);return t._tag=Py,t.emitSeparator=e,t};var My="BracketOut",Fy="Bridge",ld="ConcatAll",Dy="Emit",Ny="Ensuring",Ly="Fail",Uy="Fold",$y="FromEffect",qy="PipeTo",aO="Provide",Hy="Read",Wy="Succeed",zy="SucceedNow",By="Suspend";var $7="effect/Channel",BU=Symbol.for($7),q7={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},xr={[BU]:q7,pipe(){return _(this,arguments)}},cO=e=>v(e,BU)||vn(e),jU=u(2,(e,t)=>{let r=Object.create(xr);return r._tag=My,r.acquire=()=>e,r.finalizer=t,r});var uO=(e,t,r)=>{let n=Object.create(xr);return n._tag=ld,n.combineInners=t,n.combineAll=r,n.onPull=()=>iO(E()),n.onEmit=()=>oO,n.value=()=>e,n.k=N,n},KU=u(4,(e,t,r,n)=>{let o=Object.create(xr);return o._tag=ld,o.combineInners=r,o.combineAll=n,o.onPull=()=>iO(E()),o.onEmit=()=>oO,o.value=()=>e,o.k=t,o});var pO=u(2,(e,t)=>{let r=Object.create(xr);return r._tag=Fy,r.input=t,r.channel=e,r}),fd=u(2,(e,t)=>{let r=Object.create(xr);return r._tag=Ny,r.channel=e,r.finalizer=t,r}),bp=e=>Lt(Hm(e));var Lt=e=>lO(()=>e),lO=e=>{let t=Object.create(xr);return t._tag=Ly,t.error=e,t},Qe=u(2,(e,t)=>{let r=Object.create(xr);return r._tag=Uy,r.channel=e,r.k=new pd(t,Lt),r});var Et=e=>{let t=Object.create(xr);return t._tag=$y,t.effect=()=>e,t},Mr=u(2,(e,t)=>{let r=Object.create(xr);return r._tag=qy,r.left=()=>e,r.right=()=>t,r});var dd=e=>cc({onInput:e.onInput,onFailure:t=>ct(Au(t),{onLeft:e.onFailure,onRight:Lt}),onDone:e.onDone}),cc=e=>{let t=Object.create(xr);return t._tag=Hy,t.more=e.onInput,t.done=new pd(e.onDone,e.onFailure),t},hd=e=>xd(()=>e),xi=e=>{let t=Object.create(xr);return t._tag=zy,t.terminal=e,t},md=e=>{let t=Object.create(xr);return t._tag=By,t.channel=e,t},xd=e=>{let t=Object.create(xr);return t._tag=Wy,t.evaluate=e,t},Eo=xi(void 0);var bt=e=>{let t=Object.create(xr);return t._tag=Dy,t.out=e,t};var gi="Done",yi="Emit",ds="FromEffect",Ei="Read";var H7=Symbol.for("effect/ChannelState"),W7={_E:e=>e,_R:e=>e},Ky={[H7]:W7},uc=()=>{let e=Object.create(Ky);return e._tag=gi,e},Vy=()=>{let e=Object.create(Ky);return e._tag=yi,e},Sp=e=>{let t=Object.create(Ky);return t._tag=ds,t.effect=e,t},Gy=(e,t,r,n)=>{let o=Object.create(Ky);return o._tag=Ei,o.upstream=e,o.onEffect=t,o.onEmit=r,o.onDone=n,o};var gd=e=>e._tag===ds;var VU=e=>gd(e)?e.effect:X,dO=e=>gd(e)?rN(e.effect):void 0;var hO="PullFromChild",Qy="PullFromUpstream",Jy="DrainChildExecutors",mO="Emit",pc=class{childExecutor;parentSubexecutor;onEmit;_tag=hO;constructor(t,r,n){this.childExecutor=t,this.parentSubexecutor=r,this.onEmit=n}close(t){let r=this.childExecutor.close(t),n=this.parentSubexecutor.close(t);return r!==void 0&&n!==void 0?Ka(tt(r),tt(n),(o,s)=>f(o,Ma(s))):r!==void 0?r:n!==void 0?n:void 0}enqueuePullFromChild(t){return this}},bi=class e{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=Qy;constructor(t,r,n,o,s,i,a,c){this.upstreamExecutor=t,this.createChild=r,this.lastDone=n,this.activeChildExecutors=o,this.combineChildResults=s,this.combineWithChildResult=i,this.onPull=a,this.onEmit=c}close(t){let r=this.upstreamExecutor.close(t),o=[...this.activeChildExecutors.map(s=>s!==void 0?s.childExecutor.close(t):void 0),r].reduce((s,i)=>s!==void 0&&i!==void 0?Ka(s,tt(i),(a,c)=>Ma(a,c)):s!==void 0?s:i!==void 0?tt(i):void 0,void 0);return o}enqueuePullFromChild(t){return new e(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,t],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}},lc=class e{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=Jy;constructor(t,r,n,o,s,i,a){this.upstreamExecutor=t,this.lastDone=r,this.activeChildExecutors=n,this.upstreamDone=o,this.combineChildResults=s,this.combineWithChildResult=i,this.onPull=a}close(t){let r=this.upstreamExecutor.close(t),o=[...this.activeChildExecutors.map(s=>s!==void 0?s.childExecutor.close(t):void 0),r].reduce((s,i)=>s!==void 0&&i!==void 0?Ka(s,tt(i),(a,c)=>Ma(a,c)):s!==void 0?s:i!==void 0?tt(i):void 0,void 0);return o}enqueuePullFromChild(t){return new e(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,t],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}},_p=class{value;next;_tag=mO;constructor(t,r){this.value=t,this.next=r}close(t){let r=this.next.close(t);return r}enqueuePullFromChild(t){return this}};var GU="Pulled",QU="NoUpstream";var K7="effect/ChannelUpstreamPullRequest",V7=Symbol.for(K7),G7={_A:e=>e},JU={[V7]:G7},xO=e=>{let t=Object.create(JU);return t._tag=GU,t.value=e,t},YU=e=>{let t=Object.create(JU);return t._tag=QU,t.activeDownstreamCount=e,t};var yd=class e{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(t,r,n){this._currentChannel=t,this._executeCloseLastSubstream=n,this._providedEnv=r}run(){let t;for(;t===void 0;)if(this._cancelled!==void 0)t=this.processCancellation();else if(this._activeSubexecutor!==void 0)t=this.runSubexecutor();else try{if(this._currentChannel===void 0)t=uc();else switch(vn(this._currentChannel)&&(this._currentChannel=Et(this._currentChannel)),this._currentChannel._tag){case My:{t=this.runBracketOut(this._currentChannel);break}case Fy:{let r=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){let n=this._input;this._input=void 0;let o=()=>K(r.awaitRead(),()=>Re(()=>{let s=n.run();switch(s._tag){case gi:return _n(n.getDone(),{onFailure:i=>r.error(i),onSuccess:i=>r.done(i)});case yi:return K(r.emit(n.getEmit()),()=>o());case ds:return Kt(s.effect,{onFailure:i=>r.error(i),onSuccess:()=>o()});case Ei:return Zy(s,()=>o(),i=>r.error(i))}}));t=Sp(K(qg(Tr(o())),s=>Be(()=>this.addFinalizer(i=>K(wn(s),()=>Re(()=>{let a=this.restorePipe(i,n);return a!==void 0?a:X}))))))}break}case ld:{let r=new e(this._currentChannel.value(),this._providedEnv,o=>Be(()=>{let s=this._closeLastSubstream===void 0?X:this._closeLastSubstream;this._closeLastSubstream=f(s,je(o))}));r._input=this._input;let n=this._currentChannel;this._activeSubexecutor=new bi(r,o=>n.k(o),void 0,[],(o,s)=>n.combineInners(o,s),(o,s)=>n.combineAll(o,s),o=>n.onPull(o),o=>n.onEmit(o)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case Dy:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:Eo,t=Vy();break}case Ny:{this.runEnsuring(this._currentChannel);break}case Ly:{t=this.doneHalt(this._currentChannel.error());break}case Uy:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case $y:{let r=this._providedEnv===void 0?this._currentChannel.effect():f(this._currentChannel.effect(),Tf(this._providedEnv));t=Sp(Kt(r,{onFailure:n=>{let o=this.doneHalt(n);return o!==void 0&&gd(o)?o.effect:X},onSuccess:n=>{let o=this.doneSucceed(n);return o!==void 0&&gd(o)?o.effect:X}}));break}case qy:{let r=this._input,n=new e(this._currentChannel.left(),this._providedEnv,o=>this._executeCloseLastSubstream(o));n._input=r,this._input=n,this.addFinalizer(o=>{let s=this.restorePipe(o,r);return s!==void 0?s:X}),this._currentChannel=this._currentChannel.right();break}case aO:{let r=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>Be(()=>{this._providedEnv=r}));break}case Hy:{let r=this._currentChannel;t=Gy(this._input,N,n=>{try{this._currentChannel=r.more(n)}catch(o){this._currentChannel=r.done.onExit(kF(o))}},n=>{let o=s=>r.done.onExit(s);this._currentChannel=o(n)});break}case Wy:{t=this.doneSucceed(this._currentChannel.evaluate());break}case zy:{t=this.doneSucceed(this._currentChannel.terminal);break}case By:{this._currentChannel=this._currentChannel.channel();break}}}catch(r){this._currentChannel=Lt(Ca(r))}return t}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(t){this._cancelled=t}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(t){this._inProgressFinalizer=t}popAllFinalizers(t){let r=[],n=this._doneStack.pop();for(;n;)n._tag==="ContinuationFinalizer"&&r.push(n.finalizer),n=this._doneStack.pop();let o=r.length===0?X:yO(r,t);return this.storeInProgressFinalizer(o),o}popNextFinalizers(){let t=[];for(;this._doneStack.length!==0;){let r=this._doneStack[this._doneStack.length-1];if(r._tag===Ep)return t;t.push(r),this._doneStack.pop()}return t}restorePipe(t,r){let n=this._input;return this._input=r,n!==void 0?n.close(t):X}close(t){let r,n=this._inProgressFinalizer;n!==void 0&&(r=f(n,as(Be(()=>this.clearInProgressFinalizer()))));let o,s=this.popAllFinalizers(t);s!==void 0&&(o=f(s,as(Be(()=>this.clearInProgressFinalizer()))));let i=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(t);if(!(i===void 0&&r===void 0&&o===void 0))return f(tt(gO(i)),ja(tt(gO(r))),ja(tt(gO(o))),pe(([[a,c],p])=>f(a,Ma(c),Ma(p))),Wa,K(a=>Re(()=>a)))}doneSucceed(t){if(this._doneStack.length===0)return this._done=Or(t),this._currentChannel=void 0,uc();let r=this._doneStack[this._doneStack.length-1];if(r._tag===Ep){this._doneStack.pop(),this._currentChannel=r.onSuccess(t);return}let n=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=n.reverse(),this._done=Or(t),this._currentChannel=void 0,uc();let o=yO(n.map(i=>i.finalizer),Or(t));this.storeInProgressFinalizer(o);let s=f(o,as(Be(()=>this.clearInProgressFinalizer())),Wa,K(()=>Be(()=>this.doneSucceed(t))));return Sp(s)}doneHalt(t){if(this._doneStack.length===0)return this._done=lr(t),this._currentChannel=void 0,uc();let r=this._doneStack[this._doneStack.length-1];if(r._tag===Ep){this._doneStack.pop();try{this._currentChannel=r.onHalt(t)}catch(i){this._currentChannel=Lt(Ca(i))}return}let n=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=n.reverse(),this._done=lr(t),this._currentChannel=void 0,uc();let o=yO(n.map(i=>i.finalizer),lr(t));this.storeInProgressFinalizer(o);let s=f(o,as(Be(()=>this.clearInProgressFinalizer())),Wa,K(()=>Be(()=>this.doneHalt(t))));return Sp(s)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,uc()}runBracketOut(t){let r=Wa(Kt(this.provide(t.acquire()),{onFailure:n=>Be(()=>{this._currentChannel=Lt(n)}),onSuccess:n=>Be(()=>{this.addFinalizer(o=>this.provide(t.finalizer(n,o))),this._currentChannel=bt(n)})}));return Sp(r)}provide(t){return this._providedEnv===void 0?t:f(t,Tf(this._providedEnv))}runEnsuring(t){this.addFinalizer(t.finalizer),this._currentChannel=t.channel}addFinalizer(t){this._doneStack.push(new Iy(t))}runSubexecutor(){let t=this._activeSubexecutor;switch(t._tag){case hO:return this.pullFromChild(t.childExecutor,t.parentSubexecutor,t.onEmit,t);case Qy:return this.pullFromUpstream(t);case Jy:return this.drainChildExecutors(t);case mO:return this._emitted=t.value,this._activeSubexecutor=t.next,Vy()}}replaceSubexecutor(t){this._currentChannel=void 0,this._activeSubexecutor=t}finishWithExit(t){let r=_n(t,{onFailure:n=>this.doneHalt(n),onSuccess:n=>this.doneSucceed(n)});return this._activeSubexecutor=void 0,r===void 0?X:VU(r)}finishSubexecutorWithCloseEffect(t,...r){this.addFinalizer(()=>f(r,wt(o=>f(Be(()=>o(t)),K(s=>s!==void 0?s:X)),{discard:!0})));let n=f(t,_n({onFailure:o=>this.doneHalt(o),onSuccess:o=>this.doneSucceed(o)}));return this._activeSubexecutor=void 0,n}applyUpstreamPullStrategy(t,r,n){switch(n._tag){case Py:{let o=!t||r.some(s=>s!==void 0);return[n.emitSeparator,o?[void 0,...r]:r]}case sO:{let o=!t||r.some(s=>s!==void 0);return[n.emitSeparator,o?[...r,void 0]:r]}}}pullFromChild(t,r,n,o){return Gy(t,N,s=>{let i=n(s);switch(i._tag){case Ay:break;case rO:{this.finishWithDoneValue(t,r,i.value);break}case nO:{let a=r.enqueuePullFromChild(o);this.replaceSubexecutor(a);break}}this._activeSubexecutor=new _p(s,this._activeSubexecutor)},_n({onFailure:s=>{let i=this.handleSubexecutorFailure(t,r,s);return i===void 0?void 0:dO(i)},onSuccess:s=>{this.finishWithDoneValue(t,r,s)}}))}finishWithDoneValue(t,r,n){let o=r;switch(o._tag){case Qy:{let s=new bi(o.upstreamExecutor,o.createChild,o.lastDone!==void 0?o.combineChildResults(o.lastDone,n):n,o.activeChildExecutors,o.combineChildResults,o.combineWithChildResult,o.onPull,o.onEmit);this._closeLastSubstream=t.close(Or(n)),this.replaceSubexecutor(s);break}case Jy:{let s=new lc(o.upstreamExecutor,o.lastDone!==void 0?o.combineChildResults(o.lastDone,n):n,o.activeChildExecutors,o.upstreamDone,o.combineChildResults,o.combineWithChildResult,o.onPull);this._closeLastSubstream=t.close(Or(n)),this.replaceSubexecutor(s);break}default:break}}handleSubexecutorFailure(t,r,n){return this.finishSubexecutorWithCloseEffect(lr(n),o=>r.close(o),o=>t.close(o))}pullFromUpstream(t){if(t.activeChildExecutors.length===0)return this.performPullFromUpstream(t);let r=t.activeChildExecutors[0],n=new bi(t.upstreamExecutor,t.createChild,t.lastDone,t.activeChildExecutors.slice(1),t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit);if(r===void 0)return this.performPullFromUpstream(n);this.replaceSubexecutor(new pc(r.childExecutor,n,r.onEmit))}performPullFromUpstream(t){return Gy(t.upstreamExecutor,r=>{let n=this._closeLastSubstream===void 0?X:this._closeLastSubstream;return this._closeLastSubstream=void 0,f(this._executeCloseLastSubstream(n),je(r))},r=>{if(this._closeLastSubstream!==void 0){let i=this._closeLastSubstream;return this._closeLastSubstream=void 0,f(this._executeCloseLastSubstream(i),pe(()=>{let a=new e(t.createChild(r),this._providedEnv,this._executeCloseLastSubstream);a._input=this._input;let[c,p]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(xO(r)));this._activeSubexecutor=new pc(a,new bi(t.upstreamExecutor,t.createChild,t.lastDone,p,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),oe(c)&&(this._activeSubexecutor=new _p(c.value,this._activeSubexecutor))}))}let n=new e(t.createChild(r),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;let[o,s]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(xO(r)));this._activeSubexecutor=new pc(n,new bi(t.upstreamExecutor,t.createChild,t.lastDone,s,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),oe(o)&&(this._activeSubexecutor=new _p(o.value,this._activeSubexecutor))},r=>{if(t.activeChildExecutors.some(s=>s!==void 0)){let s=new lc(t.upstreamExecutor,t.lastDone,[void 0,...t.activeChildExecutors],t.upstreamExecutor.getDone(),t.combineChildResults,t.combineWithChildResult,t.onPull);if(this._closeLastSubstream!==void 0){let i=this._closeLastSubstream;return this._closeLastSubstream=void 0,f(this._executeCloseLastSubstream(i),pe(()=>this.replaceSubexecutor(s)))}this.replaceSubexecutor(s);return}let n=this._closeLastSubstream,o=this.finishSubexecutorWithCloseEffect(f(r,TF(s=>t.combineWithChildResult(t.lastDone,s))),()=>n,s=>t.upstreamExecutor.close(s));return o===void 0?void 0:dO(o)})}drainChildExecutors(t){if(t.activeChildExecutors.length===0){let s=this._closeLastSubstream;return s!==void 0&&this.addFinalizer(()=>Se(s)),this.finishSubexecutorWithCloseEffect(t.upstreamDone,()=>s,i=>t.upstreamExecutor.close(i))}let r=t.activeChildExecutors[0],n=t.activeChildExecutors.slice(1);if(r===void 0){let[s,i]=this.applyUpstreamPullStrategy(!0,n,t.onPull(YU(n.reduce((a,c)=>c!==void 0?a+1:a,0))));return this.replaceSubexecutor(new lc(t.upstreamExecutor,t.lastDone,i,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull)),oe(s)?(this._emitted=s.value,Vy()):void 0}let o=new lc(t.upstreamExecutor,t.lastDone,n,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull);this.replaceSubexecutor(new pc(r.childExecutor,o,r.onEmit))}},gO=e=>e!==void 0?e:X,yO=(e,t)=>f(wt(e,r=>tt(r(t))),pe(r=>f(wF(r),ue(()=>RF))),K(r=>Re(()=>r))),Zy=(e,t,r)=>{let n=[e],o=()=>{let s=n.pop();if(s===void 0||s.upstream===void 0)return Ug("Unexpected end of input for channel execution");let i=s.upstream.run();switch(i._tag){case yi:{let a=s.onEmit(s.upstream.getEmit());return n.length===0?a===void 0?Re(t):f(a,Kt({onFailure:r,onSuccess:t})):a===void 0?Re(()=>o()):f(a,Kt({onFailure:r,onSuccess:()=>o()}))}case gi:{let a=s.onDone(s.upstream.getDone());return n.length===0?a===void 0?Re(t):f(a,Kt({onFailure:r,onSuccess:t})):a===void 0?Re(()=>o()):f(a,Kt({onFailure:r,onSuccess:()=>o()}))}case ds:return n.push(s),f(s.onEffect(i.effect),wf(a=>Re(()=>{let c=s.onDone(lr(a));return c===void 0?X:c})),Kt({onFailure:r,onSuccess:()=>o()}));case Ei:return n.push(s),n.push(i),Re(()=>o())}};return o()},ZU=u(2,(e,t)=>{let r=(n,o,s)=>aN(Be(()=>new yd(e,void 0,N)),i=>Re(()=>Yy(i.run(),i).pipe(kk(n),je(mt(n)),Pk(mt(o)))),(i,a)=>{let c=i.close(a);return c===void 0?X:zg(c,p=>df(s,jt(p)))});return za(n=>Lg([pg(t,$u),Xr(),Xr()]).pipe(K(([o,s,i])=>n(r(s,i,o)).pipe(lo(t),K(a=>t.addFinalizer(c=>{let p=Nx(c)?aP(c.cause):void 0;return Nl(s).pipe(K(l=>l?en(i,void 0).pipe(je(fg(a)),je(Yw(a))):en(i,void 0).pipe(je(p&&Gi(p)>0?dg(a,KA(p)):wn(a)),je(Yw(a)))))}).pipe(je(n(mt(s)))))))))}),Yy=(e,t)=>{let r=e;switch(r._tag){case ds:return f(r.effect,K(()=>Yy(t.run(),t)));case yi:return Yy(t.run(),t);case gi:return Re(()=>t.getDone());case Ei:return Zy(r,()=>Yy(t.run(),t),jt)}};var EO="Done",XU="Await";var Y7="effect/ChannelMergeDecision",Z7=Symbol.for(Y7),X7={[Z7]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}};var bO=e=>{let t=Object.create(X7);return t._tag=XU,t.f=e,t};var Xy="BothRunning",eE="LeftDone",tE="RightDone";var t9="effect/ChannelMergeState",r$=Symbol.for(t9),SO={[r$]:r$},rE=(e,t)=>{let r=Object.create(SO);return r._tag=Xy,r.left=e,r.right=t,r},_O=e=>{let t=Object.create(SO);return t._tag=eE,t.f=e,t},CO=e=>{let t=Object.create(SO);return t._tag=tE,t.f=e,t};var wO="BackPressure",kO="BufferSliding";var o9="effect/ChannelMergeStrategy",n$=Symbol.for(o9),o$={[n$]:n$},s$=e=>{let t=Object.create(o$);return t._tag=wO,t},i$=e=>{let t=Object.create(o$);return t._tag=kO,t};var a$=u(2,(e,{onBackPressure:t,onBufferSliding:r})=>{switch(e._tag){case wO:return t();case kO:return r()}});var Cp="Empty",Ed="Emit",bd="Error",Sd="Done",u$=e=>({_tag:Cp,notifyProducer:e}),vO=e=>({_tag:Ed,notifyConsumers:e}),s9=e=>({_tag:bd,cause:e}),i9=e=>({_tag:Sd,done:e}),OO=class{ref;constructor(t){this.ref=t}awaitRead(){return cs(Pa(this.ref,t=>t._tag===Cp?[mt(t.notifyProducer),t]:[X,t]))}get close(){return uN(t=>this.error(sP(t)))}done(t){return cs(Pa(this.ref,r=>{switch(r._tag){case Cp:return[mt(r.notifyProducer),r];case Ed:return[wt(r.notifyConsumers,n=>en(n,U(t)),{discard:!0}),i9(t)];case bd:return[Ha,r];case Sd:return[Ha,r]}}))}emit(t){return K(Xr(),r=>cs(Pa(this.ref,n=>{switch(n._tag){case Cp:return[mt(n.notifyProducer),n];case Ed:{let o=n.notifyConsumers[0],s=n.notifyConsumers.slice(1);if(o!==void 0)return[en(o,$(t)),s.length===0?u$(r):vO(s)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case bd:return[Ha,n];case Sd:return[Ha,n]}})))}error(t){return cs(Pa(this.ref,r=>{switch(r._tag){case Cp:return[mt(r.notifyProducer),r];case Ed:return[wt(r.notifyConsumers,n=>eC(n,t),{discard:!0}),s9(t)];case bd:return[Ha,r];case Sd:return[Ha,r]}}))}get take(){return this.takeWith(t=>lr(Wm(t,U)),t=>Or(t),t=>vF($(t)))}takeWith(t,r,n){return K(Xr(),o=>cs(Pa(this.ref,s=>{switch(s._tag){case Cp:return[je(en(s.notifyProducer,void 0),Pf(mt(o),{onFailure:t,onSuccess:ct({onLeft:n,onRight:r})})),vO([o])];case Ed:return[Pf(mt(o),{onFailure:t,onSuccess:ct({onLeft:n,onRight:r})}),vO([...s.notifyConsumers,o])];case bd:return[Se(t(s.cause)),s];case Sd:return[Se(n(s.done)),s]}})))}},TO=()=>f(Xr(),K(e=>Wu(u$(e))),pe(e=>new OO(e)));var nE=u(2,(e,t)=>KU(e,t,()=>{},()=>{}));var d$=e=>{let t=cc({onInput:()=>t,onFailure:Lt,onDone:hd});return Mr(e,t)};var h$=u(2,(e,t)=>fd(e,()=>t));var l9=e=>Qe(e,N);var IO=e=>hs(e.takeWith(Lt,t=>Qe(bt(t),()=>IO(e)),hd));var m$=u(2,(e,t)=>Qe(e,r=>xd(()=>t(r))));var x$=u(2,(e,t)=>{let r=dd({onInput:n=>Qe(bt(t(n)),()=>r),onFailure:bp,onDone:xi});return Mr(e,r)});var f9=e=>t=>d9(e)(t,$r);var d9=({bufferSize:e=16,concurrency:t,mergeStrategy:r=s$()})=>(n,o)=>FO(s=>Ft(function*(){let i=t==="unbounded"?Number.MAX_SAFE_INTEGER:t,a=yield*TO(),c=IO(a),p=yield*AU(e);yield*df(s,eO(p));let l=yield*IU();yield*df(s,eO(l));let d=yield*Wu(E()),h=yield*Xr(),m=(yield*Ak(i)).withPermits,x=yield*_d(Mr(c,n),s);function y(S){return S.pipe(K(ct({onLeft:O=>Se(k(O)),onRight:O=>kf(ac(p,Se($(O))),E())})),Tk({until:O=>oe(O)}),K(O=>WM(d,ie({onNone:()=>k(O.value),onSome:w=>k(o(w,O.value))}))),wf(O=>Ru(O)?jt(O):ac(p,jt(O)).pipe(je(en(h,void 0)),vf)))}yield*x.pipe(Kt({onFailure:S=>ac(p,jt(S)).pipe(je(Se(!1))),onSuccess:ct({onLeft:S=>Wg(Tr(mt(h)),Tr(m(i)(X)),{onSelfDone:(O,w)=>kf(wn(w),!1),onOtherDone:(O,w)=>je(wn(w),EC(d).pipe(K(ie({onNone:()=>ac(p,Se(U(S))),onSome:P=>ac(p,Se(U(o(P,S))))})),kf(!1)))}),onRight:S=>a$(r,{onBackPressure:()=>Ft(function*(){let O=yield*Xr(),w=$g(M=>_d(Mr(c,S),M).pipe(K(L=>Hg(tt(y(L)),tt(Tr(mt(h))))),K(N)));return yield*en(O,void 0).pipe(je(w),m(1),lo(s)),yield*mt(O),!(yield*Nl(h))}),onBufferSliding:()=>Ft(function*(){let O=yield*Xr(),w=yield*Xr(),P=yield*PU(l);yield*tO(l).pipe(K(q=>en(q,void 0)),vk(()=>P>=i)),yield*ac(l,O);let M=$g(q=>_d(Mr(c,S),q).pipe(K(H=>tt(y(H)).pipe(Hg(tt(Tr(mt(h)))),Hg(tt(Tr(mt(O)))))),K(N)));return yield*en(w,void 0).pipe(je(M),m(1),lo(s)),yield*mt(w),!(yield*Nl(h))})})})}),Tk({while:S=>S}),lo(s));let b=f(tO(p),cs,Pf({onFailure:Lt,onSuccess:ct({onLeft:xi,onRight:S=>Qe(bt(S),()=>b)})}),hs);return pO(b,a)})),PO=u(3,(e,t,r)=>f9(r)(x$(e,t)));var g$=u(2,(e,t)=>{function r(n){return Ft(function*(){let o=yield*TO(),s=IO(o),i=yield*_d(Mr(s,e),n),a=yield*_d(Mr(s,t.other),n);function c(l,d,h){return(m,x,y)=>{function b(S){let O=S;return O._tag===EO?Se(Et(je(wn(d),O.effect))):pe(fg(d),_n({onFailure:w=>Et(O.f(lr(w))),onSuccess:ct({onLeft:w=>Et(O.f(Or(w))),onRight:w=>NO(bt(w),p(y(O.f)))})}))}return _n(l,{onFailure:S=>b(m(lr(S))),onSuccess:ct({onLeft:S=>b(m(Or(S))),onRight:S=>Se(Qe(bt(S),()=>Qe(Et(lo(Tr(h),n)),O=>p(x(O,d)))))})})}}function p(l){switch(l._tag){case Xy:{let d=Tr(hg(l.left)),h=Tr(hg(l.right));return hs(Wg(d,h,{onSelfDone:(m,x)=>je(wn(x),c(m,l.right,i)(t.onSelfDone,rE,y=>_O(y))),onOtherDone:(m,x)=>je(wn(x),c(m,l.left,a)(t.onOtherDone,(y,b)=>rE(b,y),y=>CO(y)))}))}case eE:return hs(pe(tt(a),_n({onFailure:d=>Et(l.f(lr(d))),onSuccess:ct({onLeft:d=>Et(l.f(Or(d))),onRight:d=>Qe(bt(d),()=>p(_O(l.f)))})})));case tE:return hs(pe(tt(i),_n({onFailure:d=>Et(l.f(lr(d))),onSuccess:ct({onLeft:d=>Et(l.f(Or(d))),onRight:d=>Qe(bt(d),()=>p(CO(l.f)))})})))}}return Et(_f(l=>{let d=_f(x=>(x.transferChildren(l.scope()),X)),h=Tr(i).pipe(as(d),lo(n)),m=Tr(a).pipe(as(d),lo(n));return Ka(h,m,(x,y)=>rE(x,y))})).pipe(Qe(p),pO(o))})}return FO(r)});var y$=u(2,(e,t)=>md(()=>{let r,n=dd({onInput:s=>Qe(bt(s),()=>n),onFailure:s=>(r=m9(s),Lt(Ca(r))),onDone:xi}),o=cc({onInput:s=>f(bt(s),Qe(()=>o)),onFailure:s=>T_(s)&&x9(s.defect)&&T(s.defect,r)?bp(s.defect.error):Lt(s),onDone:xi});return Mr(Mr(Mr(e,n),t),o)}));var E$=e=>$g(t=>ZU(e,t));var b$=e=>E$(d$(e));var MO=e=>hs(za(t=>pe(eD(),r=>jU(zg(t(ug(e,r)),n=>$a(r,lr(n))),(n,o)=>$a(r,o))))),S$=e=>_$(pe(cN,t=>Qe(Et(e(t)),bt)));var _d=u(2,(e,t)=>ja(Be(()=>new yd(e,void 0,N)),Bg()).pipe(ii(([r,n])=>X2(t,o=>{let s=r.close(o);return s!==void 0?Tf(s,n):X})),Wa,pe(([r])=>Re(()=>RO(r.run(),r))))),RO=(e,t)=>{let r=e;switch(r._tag){case gi:return _n(t.getDone(),{onFailure:jt,onSuccess:n=>Se(U(n))});case yi:return Se($(t.getEmit()));case ds:return f(r.effect,K(()=>RO(t.run(),t)));case Ei:return Zy(r,()=>RO(t.run(),t),n=>jt(n))}};var hs=e=>l9(Et(e)),_$=e=>uO(MO(e),(t,r)=>t,(t,r)=>t),FO=e=>uO(S$(e),(t,r)=>t,(t,r)=>t);var DO=e=>C$(0,e.length,e),C$=(e,t,r)=>e===t?Eo:f(bt(f(r,Kn(e))),Qe(()=>C$(e+1,t,r))),h9=u(e=>cO(e[1]),(e,t,r)=>r?.concurrent?g$(e,{other:t,onSelfDone:n=>bO(o=>Re(()=>NC(n,o))),onOtherDone:n=>bO(o=>Re(()=>NC(o,n)))}):Qe(e,n=>m$(t,o=>[n,o])));var NO=u(e=>cO(e[1]),(e,t,r)=>r?.concurrent?m$(h9(e,t,{concurrent:!0}),n=>n[1]):Qe(e,()=>t)),AO=Symbol.for("effect/Channel/ChannelException"),m9=e=>({_tag:"ChannelException",[AO]:AO,error:e}),x9=e=>v(e,AO);var b9=Symbol.for("effect/Sink"),S9={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},oE=class{channel;[b9]=S9;constructor(t){this.channel=t}pipe(){return _(this,arguments)}};var w$=e=>{let t=cc({onInput:r=>f(Et(e(r)),Qe(()=>t)),onFailure:Lt,onDone:()=>Eo});return new oE(t)};var k$=e=>new oE(Et(e));var LO=e=>vn(e)?LO(k$(e)):e.channel;var w9="effect/Stream",UO=Symbol.for(w9),k9={_R:e=>e,_E:e=>e,_A:e=>e},bo=class{channel;[UO]=k9;constructor(t){this.channel=t}pipe(){return _(this,arguments)}},sE=e=>v(e,UO)||vn(e);var T$=u(2,(e,t)=>new bo(fd(Pn(e),t)));var R$=e=>$O(fr(k(e)));var A$=u(e=>sE(e[0]),(e,t,r)=>{let n=r?.bufferSize??16;return r?.switch?v$(r?.concurrency,()=>O$(e,1,n,t),o=>O$(e,o,n,t)):v$(r?.concurrency,()=>new bo(nE(Pn(e),o=>f(o,Vb(s=>Pn(t(s))),J0(Eo,(s,i)=>f(s,NO(i)))))),o=>new bo(f(Pn(e),nE(DO),PO(s=>Pn(t(s)),r))))}),v$=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r(Number.MAX_SAFE_INTEGER);default:return e>1?r(e):t()}},O$=u(4,(e,t,r,n)=>new bo(f(Pn(e),nE(DO),PO(o=>Pn(n(o)),{concurrency:t,mergeStrategy:i$(),bufferSize:r})))),I$=u(e=>sE(e[0]),(e,t)=>A$(e,N,t));var Pn=e=>{if("channel"in e)return e.channel;if(vn(e))return Pn(P$(e));throw new TypeError("Expected a Stream.")};var P$=e=>f(e,si(k),$O),$O=e=>new bo(hs(If(e,{onFailure:ie({onNone:()=>Eo,onSome:bp}),onSuccess:t=>bt(Ce(t))})));var M$=(...e)=>{let t=e.length===1?e[0].evaluate:e[0],r=e.length===1?e[0].onError:e[1],n=e.length===1?e[0].releaseLockOnEnd===!0:!1;return W$(pe(wk(Be(()=>t().getReader()),o=>n?Be(()=>o.releaseLock()):_k(()=>o.cancel())),o=>D$(K(is({try:()=>o.read(),catch:s=>k(r(s))}),({done:s,value:i})=>s?fr(E()):Se(i)))))};var F$=e=>H$(e,t=>f(pe(t,r=>k([r,t])),Cf(ie({onNone:()=>Se(E()),onSome:fr})))),D$=e=>F$(f(e,pe(Ce)));var N$=u(2,(e,t)=>Pn(e).pipe(y$(LO(t)),b$));var L$=u(2,(e,t)=>N$(e,w$(t)));var U$=e=>new bo(h$(MO(f(e,pe(Ce))),X));var qO=e=>new bo(md(()=>Pn(e())));var $$=u(e=>sE(e[0]),(e,t)=>pe(Bg(),r=>q$(e,r,t))),q$=u(e=>sE(e[0]),(e,t,r)=>{let n=mU(t),o,s,i=dN(!1);return new ReadableStream({start(a){s=n(L$(e,c=>c.length===0?X:i.whenOpen(Be(()=>{i.unsafeClose();for(let p of c)a.enqueue(p);o(),o=void 0})))),s.addObserver(c=>{try{c._tag==="Failure"?a.error(zm(c.cause)):a.close()}catch{}})},pull(){return new Promise(a=>{o=a,rn(i.open)})},cancel(){if(s)return jg(vf(wn(s)))}},r?.strategy)});var H$=(e,t)=>qO(()=>{let r=n=>hs(pe(t(n),ie({onNone:()=>Eo,onSome:([o,s])=>Qe(bt(o),()=>r(s))})));return new bo(r(e))});var W$=e=>I$(U$(e));var z$=T$;var B$=R$;var j$=M$;var K$=qO;var V$=$$;var iE=Symbol.for("@effect/platform/Error");var WO=(e,t)=>{class r extends Uu{_tag=t}return r.prototype[e]=e,r.prototype.name=t,r},J$=In("Clipboard","Command","FileSystem","KeyValueStore","Path","Stream","Terminal"),G$=class extends Kv("@effect/platform/Error/BadArgument")("BadArgument",{module:J$,method:se,description:yo(se),cause:yo(od)}){[iE]=iE;get message(){return`${this.module}.${this.method}${this.description?`: ${this.description}`:""}`}},O9=In("AlreadyExists","BadResource","Busy","InvalidData","NotFound","PermissionDenied","TimedOut","UnexpectedEof","Unknown","WouldBlock","WriteZero"),Q$=class extends Kv("@effect/platform/Error/SystemError")("SystemError",{reason:O9,module:J$,method:se,description:yo(se),syscall:yo(se),pathOrDescriptor:yo(id(se,Yt)),cause:yo(od)}){[iE]=iE;get message(){return`${this.reason}: ${this.module}.${this.method}${this.pathOrDescriptor!==void 0?` (${this.pathOrDescriptor})`:""}${this.description?`: ${this.description}`:""}`}};var Cd=e=>{let t=Y$(e),r=[];for(let n=0;n<t.length;n++)if(Array.isArray(t[n][0])){let[o,s]=t[n];r.push([`${o[0]}[${o.slice(1).join("][")}]`,s])}else r.push(t[n]);return r},Y$=e=>{let t=Symbol.iterator in e?te(e):Object.entries(e),r=[];for(let[n,o]of t)if(Array.isArray(o))for(let s=0;s<o.length;s++)o[s]!==void 0&&r.push([n,String(o[s])]);else if(typeof o=="object"){let s=Y$(o);for(let[i,a]of s)r.push([[n,...typeof i=="string"?[i]:i],a])}else o!==void 0&&r.push([n,String(o)]);return r};var Z$=[];var X$=u(2,(e,t)=>{let r=Cd(t),n=r.map(([o])=>o);return Gp(ph(e,([o])=>n.includes(o)),r)});var zO=(e,t,r)=>{try{let n=new URL(e,R9());for(let o=0;o<t.length;o++){let[s,i]=t[o];i!==void 0&&n.searchParams.append(s,i)}return r._tag==="Some"&&(n.hash=r.value),$(n)}catch(n){return U(n)}};var R9=()=>{if("location"in globalThis&&globalThis.location!==void 0&&globalThis.location.origin!==void 0&&globalThis.location.pathname!==void 0)return location.origin+location.pathname};var jO=Symbol.for("@effect/platform/HttpBody");var wd=class{[jO];constructor(){this[jO]=jO}[B](){return this.toJSON()}toString(){return Z(this)}},KO=class extends wd{_tag="Empty";toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}},eq=new KO;var VO=class extends wd{body;contentType;_tag="Uint8Array";constructor(t,r){super(),this.body=t,this.contentType=r}get contentLength(){return this.body.length}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Uint8Array",body:this.contentType.startsWith("text/")||this.contentType.endsWith("json")?new TextDecoder().decode(this.body):`Uint8Array(${this.body.length})`,contentType:this.contentType,contentLength:this.contentLength}}},tq=(e,t)=>new VO(e,t??"application/octet-stream"),A9=new TextEncoder,rq=(e,t)=>tq(A9.encode(e),t??"text/plain"),nq=e=>rq(JSON.stringify(e),"application/json");var GO=class extends wd{formData;_tag="FormData";constructor(t){super(),this.formData=t}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"FormData",formData:this.formData}}},oq=e=>new GO(e);var sq=Symbol.for("@effect/platform/Cookies");var iq=Symbol.for("@effect/platform/Cookies/Cookie");var P9={[sq]:sq,...Fi,toJSON(){return{_id:"@effect/platform/Cookies",cookies:UR(this.cookies,e=>e.toJSON())}},pipe(){return _(this,arguments)}},M9=e=>{let t=Object.create(P9);return t.cookies=e,t},F9=e=>{let t={};for(let r of e)t[r.name]=r;return M9(t)},cq=e=>{let t=typeof e=="string"?[e]:e,r=[];for(let n of t){let o=D9(n.trim());oe(o)&&r.push(o.value)}return F9(r)};function D9(e){let t=e.split(";").map(a=>a.trim()).filter(a=>a!=="");if(t.length===0)return E();let r=t[0].indexOf("=");if(r===-1)return E();let n=t[0].slice(0,r);if(!N9.test(n))return E();let o=t[0].slice(r+1),s=L9(o);if(t.length===1)return k(Object.assign(Object.create(aq),{name:n,value:s,valueEncoded:o}));let i={};for(let a=1;a<t.length;a++){let c=t[a],p=c.indexOf("="),l=p===-1?c:c.slice(0,p).trim(),d=p===-1?void 0:c.slice(p+1).trim();switch(l.toLowerCase()){case"domain":{if(d===void 0)break;let h=d.trim().replace(/^\./,"");h&&(i.domain=h);break}case"expires":{if(d===void 0)break;let h=new Date(d);isNaN(h.getTime())||(i.expires=h);break}case"max-age":{if(d===void 0)break;let h=parseInt(d,10);isNaN(h)||(i.maxAge=fS(h));break}case"path":{if(d===void 0)break;d[0]==="/"&&(i.path=d);break}case"priority":{if(d===void 0)break;switch(d.toLowerCase()){case"low":i.priority="low";break;case"medium":i.priority="medium";break;case"high":i.priority="high";break}break}case"httponly":{i.httpOnly=!0;break}case"secure":{i.secure=!0;break}case"partitioned":{i.partitioned=!0;break}case"samesite":{if(d===void 0)break;switch(d.toLowerCase()){case"lax":i.sameSite="lax";break;case"strict":i.sameSite="strict";break;case"none":i.sameSite="none";break}break}}}return k(Object.assign(Object.create(aq),{name:n,value:s,valueEncoded:o,options:Object.keys(i).length>0?i:void 0}))}var N9=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,aq={[iq]:iq,...Fi,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}};var L9=e=>{try{return decodeURIComponent(e)}catch{return e}};var uq=Symbol.for("@effect/platform/Headers");var kd=Object.assign(Object.create(null),{[uq]:uq,[Wp](e){return uE(this,Xo(e,Od))}}),aE=e=>Object.assign(Object.create(kd),e);var QO=Object.create(kd),vd=e=>{if(e===void 0)return QO;if(Symbol.iterator in e){let r=Object.create(kd);for(let[n,o]of e)r[n.toLowerCase()]=o;return r}let t=Object.create(kd);for(let[r,n]of Object.entries(e))Array.isArray(n)?t[r.toLowerCase()]=n.join(", "):n!==void 0&&(t[r.toLowerCase()]=n);return t},pq=e=>Object.setPrototypeOf(e,kd);var cE=u(3,(e,t,r)=>{let n=aE(e);return n[t.toLowerCase()]=r,n}),lq=u(2,(e,t)=>aE({...e,...vd(t)})),fq=u(2,(e,t)=>{let r=aE(e);return Object.assign(r,t),r}),dq=u(2,(e,t)=>{let r=aE(e),n=o=>{if(typeof o=="string"){let s=o.toLowerCase();s in e&&delete r[s]}else for(let s in e)o.test(s)&&delete r[s]};if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else n(t);return r}),uE=u(2,(e,t)=>{let r={...e},n=o=>{if(typeof o=="string"){let s=o.toLowerCase();s in e&&(r[s]=Hi(e[s]))}else for(let s in e)o.test(s)&&(r[s]=Hi(e[s]))};if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else n(t);return r}),Od=D("@effect/platform/Headers/currentRedactedNames",()=>ud(["authorization","cookie","set-cookie","x-api-key"]));var fc=Symbol.for("@effect/platform/HttpIncomingMessage"),JO=(e,t)=>{let r=Lv(e,t);return n=>K(n.json,r)};var hq=(e,t)=>{let r=e.headers["content-type"]??"",n;if(r.includes("application/json"))try{n=rn(e.json)}catch{}else if(r.includes("text/")||r.includes("urlencoded"))try{n=rn(e.text)}catch{}let o={...t,headers:$n(e.headers),remoteAddress:e.remoteAddress.toJSON()};return n!==void 0&&(o.body=n),o};var xq=e=>pq({b3:`${e.traceId}-${e.spanId}-${e.sampled?"1":"0"}${e.parent._tag==="Some"?`-${e.parent.value.spanId}`:""}`,traceparent:`00-${e.traceId}-${e.spanId}-${e.sampled?"01":"00"}`});var gq=e=>`http.request.header.${e}`,yq="http.request.method";var Eq=e=>`http.response.header.${e}`,bq="http.response.status_code";var Sq="server.address",_q="server.port";var Cq="url.full",wq="url.path",kq="url.query",vq="url.scheme";var Oq=Symbol.for("@effect/platform/HttpClientError");var Tq=Oq;var kp=class extends WO(Tq,"RequestError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){return this.description?`${this.reason}: ${this.description} (${this.methodAndUrl})`:`${this.reason} error (${this.methodAndUrl})`}},Mn=class extends WO(Tq,"ResponseError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){let t=`${this.response.status} ${this.methodAndUrl}`;return this.description?`${this.reason}: ${this.description} (${t})`:`${this.reason} error (${t})`}};var Rq=Symbol.for("@effect/platform/HttpClientRequest"),W9={[Rq]:Rq,...Fi,toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:$n(this.headers),body:this.body.toJSON()}},pipe(){return _(this,arguments)}};function So(e,t,r,n,o,s){let i=Object.create(W9);return i.method=e,i.url=t,i.urlParams=r,i.hash=n,i.headers=o,i.body=s,i}var z9=So("GET","",Z$,E(),QO,eq),Si=e=>(t,r)=>rT(z9,{method:e,url:t,...r??void 0}),pE=Si("GET"),lE=Si("POST"),fE=Si("PUT"),ZO=Si("PATCH"),XO=Si("DELETE"),eT=Si("HEAD"),tT=Si("OPTIONS"),rT=u(2,(e,t)=>{let r=e;return t.method&&(r=Iq(r,t.method)),t.url&&(r=oT(r,t.url)),t.headers&&(r=Td(r,t.headers)),t.urlParams&&(r=Mq(r,t.urlParams)),t.hash&&(r=Fq(r,t.hash)),t.body&&(r=hE(r,t.body)),t.accept&&(r=nT(r,t.accept)),t.acceptJson&&(r=Aq(r)),r}),dE=u(3,(e,t,r)=>So(e.method,e.url,e.urlParams,e.hash,cE(e.headers,t,r),e.body)),Td=u(2,(e,t)=>So(e.method,e.url,e.urlParams,e.hash,lq(e.headers,t),e.body));var nT=u(2,(e,t)=>dE(e,"Accept",t)),Aq=nT("application/json"),Iq=u(2,(e,t)=>So(t,e.url,e.urlParams,e.hash,e.headers,e.body)),oT=u(2,(e,t)=>{if(typeof t=="string")return So(e.method,t,e.urlParams,e.hash,e.headers,e.body);let r=new URL(t.toString()),n=Cd(r.searchParams),o=r.hash?k(r.hash.slice(1)):E();return r.search="",r.hash="",So(e.method,r.toString(),n,o,e.headers,e.body)});var Pq=u(2,(e,t)=>So(e.method,t.endsWith("/")&&e.url.startsWith("/")?t+e.url.slice(1):t+e.url,e.urlParams,e.hash,e.headers,e.body));var Mq=u(2,(e,t)=>So(e.method,e.url,X$(e.urlParams,t),e.hash,e.headers,e.body)),Fq=u(2,(e,t)=>So(e.method,e.url,e.urlParams,k(t),e.headers,e.body));var hE=u(2,(e,t)=>{let r=e.headers;if(t._tag==="Empty"||t._tag==="FormData")r=dq(r,["Content-type","Content-length"]);else{let n=t.contentType;n&&(r=cE(r,"content-type",n));let o=t.contentLength;o&&(r=cE(r,"content-length",o.toString()))}return So(e.method,e.url,e.urlParams,e.hash,r,t)});var Dq=u(2,(e,t)=>hE(e,nq(t)));var Nq=u(2,(e,t)=>hE(e,oq(t)));var vp=Symbol.for("@effect/platform/HttpClientResponse"),Uq=(e,t)=>new sT(e,t),sT=class extends eh{request;source;[fc];[vp];constructor(t,r){super(),this.request=t,this.source=r,this[fc]=fc,this[vp]=vp}toJSON(){return hq(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return vd(this.source.headers)}cachedCookies;get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=cq(this.source.headers.getSetCookie())}get remoteAddress(){return E()}get stream(){return this.source.body?j$(()=>this.source.body,t=>new Mn({request:this.request,response:this,reason:"Decode",cause:t})):B$(new Mn({request:this.request,response:this,reason:"EmptyBody",description:"can not create stream from empty body"}))}get json(){return oN(this.text,{try:t=>t===""?null:JSON.parse(t),catch:t=>new Mn({request:this.request,response:this,reason:"Decode",cause:t})})}textBody;get text(){return this.textBody??=is({try:()=>this.source.text(),catch:t=>new Mn({request:this.request,response:this,reason:"Decode",cause:t})}).pipe(Ng,rn)}get urlParamsBody(){return K(this.text,t=>nN({try:()=>Cd(new URLSearchParams(t)),catch:r=>new Mn({request:this.request,response:this,reason:"Decode",cause:r})}))}formDataBody;get formData(){return this.formDataBody??=is({try:()=>this.source.formData(),catch:t=>new Mn({request:this.request,response:this,reason:"Decode",cause:t})}).pipe(Ng,rn)}arrayBufferBody;get arrayBuffer(){return this.arrayBufferBody??=is({try:()=>this.source.arrayBuffer(),catch:t=>new Mn({request:this.request,response:this,reason:"Decode",cause:t})}).pipe(Ng,rn)}};var $q=e=>e.status>=200&&e.status<300?Se(e):fr(new Mn({response:e,request:e.request,reason:"StatusCode",description:"non 2xx status code"}));var iT=Symbol.for("@effect/platform/HttpClient"),gE=ot("@effect/platform/HttpClient"),Hq=D(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),()=>ud(er));var Wq=D(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),()=>ud(!0));var zq=Wr()("@effect/platform/HttpClient/SpanNameGenerator",{defaultValue:()=>e=>`http.client ${e.method}`});var B9={[iT]:iT,pipe(){return _(this,arguments)},...Fi,toJSON(){return{_id:"@effect/platform/HttpClient"}},get(e,t){return this.execute(pE(e,t))},head(e,t){return this.execute(eT(e,t))},post(e,t){return this.execute(lE(e,t))},put(e,t){return this.execute(fE(e,t))},patch(e,t){return this.execute(ZO(e,t))},del(e,t){return this.execute(XO(e,t))},options(e,t){return this.execute(tT(e,t))}};var aT=(e,t)=>{let r=Object.create(B9);return r.preprocess=t,r.postprocess=e,r.execute=function(n){return e(t(n))},r},mE=D("@effect/platform/HttpClient/responseRegistry",()=>{if("FinalizationRegistry"in globalThis&&globalThis.FinalizationRegistry){let t=new FinalizationRegistry(r=>{r.abort()});return{register(r,n){t.register(r,n,r)},unregister(r){t.unregister(r)}}}let e=new Map;return{register(t,r){e.set(t,setTimeout(()=>r.abort(),5e3))},unregister(t){let r=e.get(t);r!==void 0&&(clearTimeout(r),e.delete(t))}}}),j9=D("@effect/platform/HttpClient/scopedRequests",()=>new WeakMap),cT=e=>aT(t=>K(t,r=>_f(n=>{let o=j9.get(r),s=o??new AbortController,i=zO(r.url,r.urlParams,r.hash);if(i._tag==="Left")return fr(new kp({request:r,reason:"InvalidUrl",cause:i.left}));let a=i.right;if(!n.getFiberRef(DU)||n.getFiberRef(Hq)(r)){let l=e(r,a,s.signal,n);return o?l:za(d=>Kt(d(l),{onSuccess(h){return mE.register(h,s),Se(new xE(h,s))},onFailure(h){return Ru(h)&&s.abort(),jt(h)}}))}let p=st(n.currentContext,zq);return hN(p(r),{kind:"client",captureStackTrace:!1},l=>{l.attribute(yq,r.method),l.attribute(Sq,a.origin),a.port!==""&&l.attribute(_q,+a.port),l.attribute(Cq,a.toString()),l.attribute(wq,a.pathname),l.attribute(vq,a.protocol.slice(0,-1));let d=a.search.slice(1);d!==""&&l.attribute(kq,d);let h=n.getFiberRef(Od),m=uE(r.headers,h);for(let x in m)l.attribute(gq(x),String(m[x]));return r=n.getFiberRef(Wq)?Td(r,xq(l)):r,za(x=>x(e(r,a,s.signal,n)).pipe(mN(l),Kt({onSuccess:y=>{l.attribute(bq,y.status);let b=uE(y.headers,h);for(let S in b)l.attribute(Eq(S),String(b[S]));return o?Se(y):(mE.register(y,s),Se(new xE(y,s)))},onFailure(y){return!o&&Ru(y)&&s.abort(),jt(y)}})))})})),Se),xE=class{original;controller;constructor(t,r){this.original=t,this.controller=r}[vp]=vp;[fc]=fc;applyInterrupt(t){return Re(()=>(mE.unregister(this.original),sN(t,()=>Be(()=>{this.controller.abort()}))))}get request(){return this.original.request}get status(){return this.original.status}get headers(){return this.original.headers}get cookies(){return this.original.cookies}get remoteAddress(){return this.original.remoteAddress}get formData(){return this.applyInterrupt(this.original.formData)}get text(){return this.applyInterrupt(this.original.text)}get json(){return this.applyInterrupt(this.original.json)}get urlParamsBody(){return this.applyInterrupt(this.original.urlParamsBody)}get arrayBuffer(){return this.applyInterrupt(this.original.arrayBuffer)}get stream(){return K$(()=>(mE.unregister(this.original),z$(this.original.stream,t=>(CF(t)&&this.controller.abort(),X))))}toJSON(){return this.original.toJSON()}[B](){return this.original[B]()}};var{del:K9,execute:V9,get:G9,head:Q9,options:J9,patch:Y9,post:Z9,put:X9}=lN(gE);var Bq=e=>uT(e,K($q)),uT=u(2,(e,t)=>{let r=e;return aT(n=>t(r.postprocess(n)),r.preprocess)});var pT=e=>wN(gE,K(Of(),t=>pe(e,r=>uT(r,pN(n=>yr(t,n))))));var yE=gE;var EE=Bq;var Kq=pE,Vq=lE;var Gq=fE;var Qq=rT;var lT=dE,Jq=Td;var Yq=Pq;var Zq=Dq;var Xq=Nq;var eH=ox;var tH=IP,rH=j_,nH=TP;var oH=vP,fT=OP;var hT={};bT(hT,{LoggerTypeId:()=>sK,add:()=>aK,addEffect:()=>cK,addScoped:()=>uK,batched:()=>hK,defaultLogger:()=>IK,filterLogLevel:()=>fK,isLogger:()=>zK,json:()=>$K,jsonLogger:()=>PK,logFmt:()=>qK,logfmtLogger:()=>MK,make:()=>iK,map:()=>dK,mapInput:()=>pK,mapInputOptions:()=>lK,minimumLogLevel:()=>dT,none:()=>yK,pretty:()=>HK,prettyLogger:()=>DK,prettyLoggerDefault:()=>NK,remove:()=>EK,replace:()=>Rd,replaceEffect:()=>bK,replaceScoped:()=>SK,simple:()=>_K,stringLogger:()=>FK,structured:()=>WK,structuredLogger:()=>LK,succeed:()=>CK,sync:()=>wK,test:()=>kK,tracerLogger:()=>UK,withConsoleError:()=>gK,withConsoleLog:()=>mK,withLeveledConsole:()=>xK,withMinimumLogLevel:()=>vK,withSpanAnnotations:()=>OK,zip:()=>TK,zipLeft:()=>RK,zipRight:()=>AK});var sH=u(2,(e,t)=>e.log({fiberId:cl,logLevel:Eu,message:t,cause:oP,context:mx(),spans:hn(),annotations:Wo(),date:new Date}));var sK=Vu,iK=xt,aK=Ff,cK=Mk,uK=Fk,pK=DF,lK=Bx,fK=NF,dK=Kl,hK=g2,mK=tp,xK=p2,gK=l2,yK=LF,EK=Df,Rd=EN,bK=bN,SK=SN,_K=jx,CK=UF,wK=$F,kK=sH,vK=yN,OK=x2,TK=Kx,RK=qF,AK=HF,IK=Ua,PK=Qx,MK=Gx,FK=Vx,DK=BC,NK=Jx,LK=Vl,UK=Rw,$K=Rd(Ua,f2),qK=Rd(Ua,d2),HK=Rd(Ua,h2),WK=Rd(Ua,m2),dT=gN,zK=zF;var mT="@effect/platform/FetchHttpClient/Fetch",iH="@effect/platform/FetchHttpClient/FetchOptions",BK=cT((e,t,r,n)=>{let o=n.getFiberRef(FU),s=o.unsafeMap.get(mT)??globalThis.fetch,i=o.unsafeMap.get(iH)??{},a=i.headers?fq(vd(i.headers),e.headers):e.headers,c=p=>pe(is({try:()=>s(t,{...i,method:e.method,headers:a,body:p,duplex:e.body._tag==="Stream"?"half":void 0,signal:r}),catch:l=>new kp({request:e,reason:"Transport",cause:l})}),l=>Uq(e,l));switch(e.body._tag){case"Raw":case"Uint8Array":return c(e.body.body);case"FormData":return c(e.body.formData);case"Stream":return K(V$(e.body.stream),c)}return c(void 0)}),aH=pT(Se(BK));var bE=class extends Nc(mT)(){};var cH=aH;function Op(e,t){return g(e.runtimeEffect,r=>J(n=>(n.setFiberRefs(r.fiberRefs),n.currentRuntimeFlags=r.runtimeFlags,Sn(t,r.context))))}var VK={...fh,[hf]:hf,pipe(){return _(this,arguments)},commit(){return this.runtimeEffect}},uH=(e,t)=>{t=t??sk();let r=bf(ei()),n,o=J(i=>(n||(n=Ef(Qr(ug(fk(e,t),r),a=>{s.cachedRuntime=a}),{scope:r,scheduler:i.currentScheduler})),yn(n.await))),s=Object.assign(Object.create(VK),{memoMap:t,scope:r,runtimeEffect:o,cachedRuntime:void 0,runtime(){return s.cachedRuntime===void 0?sp(s.runtimeEffect):Promise.resolve(s.cachedRuntime)},dispose(){return sp(s.disposeEffect)},disposeEffect:G(()=>(s.runtimeEffect=xn("ManagedRuntime disposed"),s.cachedRuntime=void 0,$a(s.scope,ht))),runFork(i,a){return s.cachedRuntime===void 0?Ef(Op(s,i),a):ni(s.cachedRuntime)(i,a)},runSyncExit(i){return s.cachedRuntime===void 0?nk(Op(s,i)):gf(s.cachedRuntime)(i)},runSync(i){return s.cachedRuntime===void 0?bf(Op(s,i)):gg(s.cachedRuntime)(i)},runPromiseExit(i,a){return s.cachedRuntime===void 0?rk(Op(s,i),a):yf(s.cachedRuntime)(i,a)},runCallback(i,a){return s.cachedRuntime===void 0?xf(kn)(Op(s,i),a):xf(s.cachedRuntime)(i,a)},runPromise(i,a){return s.cachedRuntime===void 0?sp(Op(s,i),a):yg(s.cachedRuntime)(i,a)}});return s};var pH=uH;var sV={},JK=eH().pipe(fT(()=>rH(new Map(Object.entries(B0(sV?.env??{}))),{pathDelim:"_"})),oH("uploadthing"),nH),YK=e=>tH(e??{}).pipe(fT(()=>JK)),ZK=tM("isDev").pipe(nM(()=>oM(typeof process<"u"?process.env.NODE_ENV:void 0).pipe(px(e=>e==="development"))),Zo(!1)),Ad=lU("token",dU).pipe(Ck({ConfigError:e=>new Ze({code:e._op==="InvalidData"?"INVALID_SERVER_CONFIG":"MISSING_ENV",message:e._op==="InvalidData"?"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.":"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.",cause:e})})),lH=zs("apiUrl").pipe(Zo("https://api.uploadthing.com"),Z_(e=>new URL(e)),px(e=>e.href.replace(/\/$/,""))),fH=xN(function*(e){let{regions:t,ingestHost:r}=yield*Ad,n=e?t.find(o=>o===e)??t[0]:t[0];return yield*zs("ingestUrl").pipe(Zo(`https://${n}.${r}`),Z_(o=>new URL(o)),px(o=>o.href.replace(/\/$/,"")))}),jbe=zs("utfsHost").pipe(Zo("utfs.io")),dH=zs("ufsHost").pipe(Zo("ufs.sh")),hH=Y_("subdomain","path")("ufsAppIdLocation").pipe(Zo("subdomain"));var XK=e=>{let t=lx(zs(),r=>{let n=LM.find(o=>o._tag===r);return n===void 0?U(Qm([],`Expected a log level but received ${r}`)):$(n)});return e===void 0?t:rM(t,e)},eV=XK("logLevel").pipe(Zo(_x),Rf(e=>dT(e)),Af(e=>Rk("Invalid log level").pipe(ai("error",e))),On("ConfigError",e=>new Ze({code:"INVALID_SERVER_CONFIG",message:"Invalid server configuration",cause:e})),Dk),tV=Y_("json","logFmt","structured","pretty")("logFormat"),rV=Ft(function*(){let e=yield*ZK,t=yield*tV.pipe(Zo(e?"pretty":"json"));return hT[t]}).pipe(On("ConfigError",e=>new Ze({code:"INVALID_SERVER_CONFIG",message:"Invalid server configuration",cause:e})),Dk),xT=(e,t)=>{let r=t?.mixin??"json",n=Cx(t?.level??"Debug");return o=>K(r!=="None"?o[r]:X,()=>fN(n,`${e} (${o.status})`).pipe(ai("response",o)))},gT=e=>t=>t._tag==="ResponseError"?xT(e,{level:"Error"})(t.response):Rk(e).pipe(ai("error",t)),Kbe=class extends fx("ParserError"){message="Input validation failed. The original error with it's validation issues is in the error cause."};var mH=(e,t)=>{let r=RN(cH,ON(bE,e)),n=kN(MU(Od,s=>s.concat(["x-uploadthing-api-key"]))),o=TN(vN(rV,eV,r,n),AN(YK(t)));return pH(o)},nV=Symbol("uploadthing-region-symbol"),oV=Symbol("uploadthing-custom-id-symbol"),Vbe=class extends Nc("uploadthing/AdapterArguments")(){};var yT=class extends Blob{name;lastModified;customId;constructor(e,t,r){let n={...r,type:r?.type??(R0(t)||"application/octet-stream"),lastModified:r?.lastModified??Date.now()};super(e,n),this.name=t,this.customId=n.customId,this.lastModified=n.lastModified}},iV=(e,t)=>Ft(function*(){let r=new FormData;r.append("file",e);let n=(yield*yE).pipe(EE),o=yield*Gq(t.url).pipe(Xq(r),lT("Range","bytes=0-"),lT("x-uploadthing-version",UE),n.execute,Af(gT("Failed to upload file")),si(s=>new Ze({code:"UPLOAD_FAILED",message:"Failed to upload file",cause:s})),Rf(s=>s.json),Rf(HE),up);return yield*Mf(`File ${e.name} uploaded successfully`).pipe(ai("json",o)),{...o,get url(){return $E("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),o.url},get appUrl(){return $E("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),o.appUrl}}});function Fn(){if(typeof window<"u")throw new Ze({code:"INTERNAL_SERVER_ERROR",message:"The `utapi` can only be used on the server."})}var aV=e=>Ft(function*(){let t=ko(e)?e.url:e;if(typeof t=="string"&&t.startsWith("data:"))return yield*fr({code:"BAD_REQUEST",message:"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.",data:void 0});t=new URL(t);let{name:r=t.pathname.split("/").pop()??"unknown-filename",customId:n=void 0}=ko(e)?e:{},o=(yield*yE).pipe(EE),s=yield*Kq(t).pipe(Qq({headers:{}}),o.execute,K(i=>i.arrayBuffer),si(i=>({code:"BAD_REQUEST",message:`Failed to download requested file: ${i.message}`,data:i.toJSON()})),up);return new yT([s],r,{customId:n,lastModified:Date.now()})}).pipe(gt("downloadFile")),cV=(e,t,r)=>Ft(function*(){let{apiKey:n,appId:o}=yield*Ad,s=yield*fH(void 0),i=yield*zb(e,o);return{url:yield*Rh(`${s}/${i}`,n,{data:{"x-ut-identifier":o,"x-ut-file-name":e.name,"x-ut-file-size":e.size,"x-ut-file-type":e.type,"x-ut-custom-id":e.customId,"x-ut-content-disposition":t,"x-ut-acl":r}}),key:i}}).pipe(gt("generatePresignedUrl")),xH=(e,t)=>Ft(function*(){let r=yield*cV(e,t.contentDisposition??"inline",t.acl).pipe(On("UploadThingError",o=>fr(Ze.toObject(o))),On("ConfigError",()=>fr({code:"INVALID_SERVER_CONFIG",message:"Failed to generate presigned URL"}))),n=yield*iV(e,r).pipe(On("UploadThingError",o=>fr(Ze.toObject(o))),On("ResponseError",o=>fr({code:"UPLOAD_FAILED",message:"Failed to upload file",data:o.toJSON()})));return{key:r.key,url:n.url,appUrl:n.appUrl,ufsUrl:n.ufsUrl,lastModified:e.lastModified??Date.now(),name:e.name,size:e.size,type:e.type,customId:e.customId??null,fileHash:n.fileHash}}).pipe(gt("uploadFile")),Id=class{fetch;defaultKeyType;runtime;opts;constructor(e){Fn(),this.opts=e??{},this.fetch=this.opts.fetch??globalThis.fetch,this.defaultKeyType=this.opts.defaultKeyType??"fileKey",this.runtime=mH(this.fetch,this.opts)}requestUploadThing=(e,t,r)=>Ft(this,function*(){let{apiKey:n}=yield*Ad,o=yield*lH,s=(yield*yE).pipe(EE);return yield*Vq(e).pipe(Yq(o),Zq(t),Jq({"x-uploadthing-version":UE,"x-uploadthing-be-adapter":"server-sdk","x-uploadthing-api-key":Lo(n)}),s.execute,Ok({onSuccess:xT("UploadThing API Response"),onFailure:gT("Failed to request UploadThing API")}),K(JO(r)),up)}).pipe(On("ConfigError",n=>new Ze({code:"INVALID_SERVER_CONFIG",message:"There was an error with the server configuration. More info can be found on this error's `cause` property",cause:n})),gt("utapi.#requestUploadThing"));executeAsync=async(e,t)=>{let r=await e.pipe(gt("utapi.#executeAsync"),n=>this.runtime.runPromiseExit(n,t?{signal:t}:void 0));if(r._tag==="Failure")throw zm(r.cause);return r.value};uploadFiles(e,t){Fn();let r=t?.concurrency??1;if(r<1||r>25)throw new Ze({code:"BAD_REQUEST",message:"concurrency must be a positive integer between 1 and 25"});let n=wt(Ht(e),o=>xH(o,t??{}).pipe(If({onSuccess:s=>({data:s,error:null}),onFailure:s=>({data:null,error:s})})),{concurrency:r}).pipe(pe(o=>Array.isArray(e)?o:o[0]),ii(o=>Mf("Finished uploading").pipe(ai("uploadResult",o))),gt("uploadFiles"));return this.executeAsync(n,t?.signal)}uploadFilesFromUrl(e,t){Fn();let r=t?.concurrency??1;if(r<1||r>25)throw new Ze({code:"BAD_REQUEST",message:"concurrency must be a positive integer between 1 and 25"});let n=wt(Ht(e),o=>aV(o).pipe(K(s=>xH(s,t??{})),If({onSuccess:s=>({data:s,error:null}),onFailure:s=>({data:null,error:s})})),{concurrency:r}).pipe(pe(o=>Array.isArray(e)?o:o[0]),ii(o=>Mf("Finished uploading").pipe(ai("uploadResult",o))),gt("uploadFiles")).pipe(gt("uploadFilesFromUrl"));return this.executeAsync(n,t?.signal)}deleteFiles=async(e,t)=>{Fn();let{keyType:r=this.defaultKeyType}=t??{};class n extends Pr("DeleteFileResponse")({success:xo,deletedCount:Yt}){}return await this.executeAsync(this.requestUploadThing("/v6/deleteFiles",r==="fileKey"?{fileKeys:Ht(e)}:{customIds:Ht(e)},n).pipe(gt("deleteFiles")))};getFileUrls=async(e,t)=>{Fn();let{keyType:r=this.defaultKeyType}=t??{};class n extends Pr("GetFileUrlResponse")({data:gp(mr({key:se,url:se}))}){}return await this.executeAsync(this.requestUploadThing("/v6/getFileUrl",r==="fileKey"?{fileKeys:Ht(e)}:{customIds:Ht(e)},n).pipe(gt("getFileUrls")))};listFiles=async e=>{Fn();class t extends Pr("ListFileResponse")({hasMore:xo,files:gp(mr({id:se,customId:rc(se),key:se,name:se,size:Yt,status:In("Deletion Pending","Failed","Uploaded","Uploading"),uploadedAt:Yt}))}){}return await this.executeAsync(this.requestUploadThing("/v6/listFiles",{...e},t).pipe(gt("listFiles")))};renameFiles=async e=>{Fn();class t extends Pr("RenameFileResponse")({success:xo}){}return await this.executeAsync(this.requestUploadThing("/v6/renameFiles",{updates:Ht(e)},t).pipe(gt("renameFiles")))};getUsageInfo=async()=>{Fn();class e extends Pr("GetUsageInfoResponse")({totalBytes:Yt,appTotalBytes:Yt,filesUploaded:Yt,limitBytes:Yt}){}return await this.executeAsync(this.requestUploadThing("/v6/getUsageInfo",{},e).pipe(gt("getUsageInfo")))};generateSignedURL=async(e,t)=>{Fn();let r=Th(t?.expiresIn??"5 minutes");if(t?.expiresIn&&isNaN(r))throw new Ze({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(r>86400*7)throw new Ze({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});let n=Ft(function*(){let{apiKey:o,appId:s}=yield*Ad,i=yield*hH,a=yield*dH,c=a.includes("local")?"http":"https",p=i==="subdomain"?`${c}://${s}.${a}/f/${e}`:`${c}://${a}/a/${s}/${e}`;return{ufsUrl:yield*Rh(p,o,{ttlInSeconds:r})}});return await this.executeAsync(n.pipe(On("ConfigError",o=>new Ze({code:"INVALID_SERVER_CONFIG",message:"There was an error with the server configuration. More info can be found on this error's `cause` property",cause:o})),gt("generateSignedURL")))};getSignedURL=async(e,t)=>{Fn();let r=t?.expiresIn?Th(t.expiresIn):void 0,{keyType:n=this.defaultKeyType}=t??{};if(t?.expiresIn&&isNaN(r))throw new Ze({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(r&&r>86400*7)throw new Ze({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});class o extends Pr("GetSignedUrlResponse")({url:se,ufsUrl:se}){}return await this.executeAsync(this.requestUploadThing("/v6/requestFileAccess",n==="fileKey"?{fileKey:e,expiresIn:r}:{customId:e,expiresIn:r},o).pipe(gt("getSignedURL")))};updateACL=async(e,t,r)=>{Fn();let{keyType:n=this.defaultKeyType}=r??{},o=Ht(e).map(i=>n==="fileKey"?{fileKey:i,acl:t}:{customId:i,acl:t}),s=mr({success:xo});return await this.executeAsync(this.requestUploadThing("/v6/updateACL",{updates:o},s).pipe(gt("updateACL")))}};var qe=require("@raycast/api"),gH=require("node:fs/promises"),yH=require("node:path"),EH=require("node:url");var SE=require("react/jsx-runtime"),ET={private:"Private","public-read":"Public"},Pd=()=>{let{token:e}=(0,qe.getPreferenceValues)();return e.replace(/UPLOADTHING_TOKEN\s*=\s*['"]?(.*?)['"]?$/,"$1")},uV=()=>{let e=Pd();return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))},bH=async()=>{let{apiKey:e}=uV(),t=await fetch("https://api.uploadthing.com/v7/getAppInfo",{method:"POST",headers:{"x-uploadthing-api-key":e}}).then(n=>n.json()),r=t.allowACLOverride?t.defaultACL==="private"?"public-read":"private":void 0;return{primary:t.defaultACL,secondary:r}},SH=async()=>{let e=[],t=0;for(;;){let r=await qe.Clipboard.read({offset:t});if(!r.file)break;e.push(r.file),t++}return e},_H=async e=>await Promise.all(e.map(async r=>{let n=r.startsWith("file://")?(0,EH.fileURLToPath)(r):r,o=(0,yH.basename)(n),s=await(0,gH.readFile)(n);return new yT([new Uint8Array(s)],o)})),CH=()=>{let e=Pd();try{new Id({token:e})}catch(t){let r=`## ${t instanceof Error?t.message:"Invalid token"}
Please update it in command preferences and try again.`;return(0,SE.jsx)(qe.Detail,{markdown:r,actions:(0,SE.jsx)(qe.ActionPanel,{children:(0,SE.jsx)(qe.Action,{title:"Open Extension Preferences",icon:qe.Icon.Gear,onAction:qe.openExtensionPreferences})})})}},wH=async e=>{let t=new Id({token:Pd()});return Promise.all(e.map(async r=>{let{url:n}=await t.getSignedURL(r.key);return n}))},lSe={"Deletion Pending":{source:qe.Icon.Document,tintColor:qe.Color.Orange},Failed:{source:qe.Icon.Document,tintColor:qe.Color.Red},Uploaded:{source:qe.Icon.Document,tintColor:qe.Color.Green},Uploading:{source:qe.Icon.Document,tintColor:qe.Color.Blue}};var dc=wi(require("react")),Ut=require("@raycast/api");var kH=require("react/jsx-runtime");var vH=require("node:crypto");globalThis.crypto||(globalThis.crypto=vH.webcrypto);var OH=()=>{let e=(0,_E.useRef)(null),[t,r]=(0,_E.useState)([]),n=LE({mutationFn:async o=>{let{files:s,acl:i}=o;return await new Id({token:Pd()}).uploadFiles(s,{acl:i})},onMutate:async()=>{e.current=await(0,_i.showToast)({title:"Uploading files",message:"Uploading files to UploadThing",style:_i.Toast.Style.Animated})},onSuccess:o=>{if(console.log(o),o[0].error)throw new Error(o[0].error.message);e.current.style=_i.Toast.Style.Success,e.current.title="Files uploaded",r(o.filter(s=>!!s.data).map(s=>s.data))},onError:o=>{console.error(o),e.current.style=_i.Toast.Style.Failure,e.current.title="Failed to upload files",e.current.message=o.message,e.current.primaryAction={title:"Open Extension Preferences",onAction:s=>{(0,_i.openExtensionPreferences)(),s.hide()}}}});return{upload:n.mutate,uploading:n.isPending,uploadedFiles:t}},TH=()=>{let e=Np({queryKey:["clipboard"],queryFn:SH});return{files:e.data,readingClipboard:e.isPending}},RH=e=>{let t=Np({queryKey:["signed-urls"],queryFn:()=>wH(e)});return e.map((r,n)=>{let o=t.data?.[n]??r.url;return{...r,url:o}})},AH=()=>Np({queryKey:["app-info"],queryFn:bH}).data;var Ci=require("@raycast/api");var hc=require("react/jsx-runtime"),IH=e=>{let t=RH(e.files);return(0,hc.jsx)(Ci.Grid,{children:t.map(r=>(0,hc.jsx)(Ci.Grid.Item,{content:r.url,actions:(0,hc.jsxs)(Ci.ActionPanel,{children:[(0,hc.jsx)(Ci.Action.OpenInBrowser,{title:"Open in Browser",url:r.url}),(0,hc.jsx)(Ci.Action.CopyToClipboard,{title:"Copy URL",content:r.url})]})},r.key))})};var PH=require("react"),Dn=require("react/jsx-runtime"),pV=new ME,lV=()=>(0,Dn.jsx)(DE,{client:pV,children:(0,Dn.jsx)(fV,{})}),fV=()=>{let{upload:e,uploadedFiles:t}=OH(),{files:r,readingClipboard:n}=TH(),o=AH();(0,PH.useEffect)(()=>{r&&(r.length>0?(0,nt.showToast)(nt.Toast.Style.Success,`Found ${r.length} files in your clipboard. Confirm which ones to upload.`):(0,nt.showToast)(nt.Toast.Style.Failure,"No files found in your clipboard, select and upload."))},[r]);let s=async(a,c)=>{if(a.files.length===0){(0,nt.showToast)(nt.Toast.Style.Failure,"Please select at least one file");return}let p=await _H(a.files.map(l=>l.replace(/^\/file:/,"file://")));e({files:p,acl:c})},i=CH();return i||(!r||n?(0,Dn.jsx)(nt.Detail,{isLoading:n,markdown:n?null:"## The contents of your clipboard is not a file. Copy a file to your clipboard and try again."}):t.length>0?(0,Dn.jsx)(IH,{files:t}):(0,Dn.jsx)(nt.Form,{actions:(0,Dn.jsxs)(nt.ActionPanel,{children:[(0,Dn.jsx)(nt.Action.SubmitForm,{icon:nt.Icon.Upload,title:`Upload Files ${o?`(${ET[o.primary]})`:""}`,onSubmit:a=>s(a,o?.primary)}),o?.secondary&&(0,Dn.jsx)(nt.Action.SubmitForm,{title:`Upload Files (${ET[o.secondary]})`,onSubmit:a=>s(a,o.secondary)})]}),children:(0,Dn.jsx)(nt.Form.FilePicker,{id:"files",title:"Select Files",defaultValue:r})}))};
